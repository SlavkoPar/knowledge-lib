(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function i(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(s){if(s.ep)return;s.ep=!0;const l=i(s);fetch(s.href,l)}})();function _a(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var zd={exports:{}},Uo={};var Zy;function y_(){if(Zy)return Uo;Zy=1;var c=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(r,s,l){var h=null;if(l!==void 0&&(h=""+l),s.key!==void 0&&(h=""+s.key),"key"in s){l={};for(var f in s)f!=="key"&&(l[f]=s[f])}else l=s;return s=l.ref,{$$typeof:c,type:r,key:h,ref:s!==void 0?s:null,props:l}}return Uo.Fragment=t,Uo.jsx=i,Uo.jsxs=i,Uo}var Wy;function v_(){return Wy||(Wy=1,zd.exports=y_()),zd.exports}var Z=v_(),Bd={exports:{}},Ee={};var ev;function C_(){if(ev)return Ee;ev=1;var c=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),h=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),A=Symbol.iterator;function K(v){return v===null||typeof v!="object"?null:(v=A&&v[A]||v["@@iterator"],typeof v=="function"?v:null)}var te={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ie=Object.assign,le={};function se(v,C,b){this.props=v,this.context=C,this.refs=le,this.updater=b||te}se.prototype.isReactComponent={},se.prototype.setState=function(v,C){if(typeof v!="object"&&typeof v!="function"&&v!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,v,C,"setState")},se.prototype.forceUpdate=function(v){this.updater.enqueueForceUpdate(this,v,"forceUpdate")};function ce(){}ce.prototype=se.prototype;function ue(v,C,b){this.props=v,this.context=C,this.refs=le,this.updater=b||te}var G=ue.prototype=new ce;G.constructor=ue,ie(G,se.prototype),G.isPureReactComponent=!0;var oe=Array.isArray;function J(){}var ee={H:null,A:null,T:null,S:null},U=Object.prototype.hasOwnProperty;function O(v,C,b){var I=b.ref;return{$$typeof:c,type:v,key:C,ref:I!==void 0?I:null,props:b}}function x(v,C){return O(v.type,C,v.props)}function j(v){return typeof v=="object"&&v!==null&&v.$$typeof===c}function Y(v){var C={"=":"=0",":":"=2"};return"$"+v.replace(/[=:]/g,function(b){return C[b]})}var ne=/\/+/g;function fe(v,C){return typeof v=="object"&&v!==null&&v.key!=null?Y(""+v.key):C.toString(36)}function ve(v){switch(v.status){case"fulfilled":return v.value;case"rejected":throw v.reason;default:switch(typeof v.status=="string"?v.then(J,J):(v.status="pending",v.then(function(C){v.status==="pending"&&(v.status="fulfilled",v.value=C)},function(C){v.status==="pending"&&(v.status="rejected",v.reason=C)})),v.status){case"fulfilled":return v.value;case"rejected":throw v.reason}}throw v}function D(v,C,b,I,z){var ae=typeof v;(ae==="undefined"||ae==="boolean")&&(v=null);var de=!1;if(v===null)de=!0;else switch(ae){case"bigint":case"string":case"number":de=!0;break;case"object":switch(v.$$typeof){case c:case t:de=!0;break;case S:return de=v._init,D(de(v._payload),C,b,I,z)}}if(de)return z=z(v),de=I===""?"."+fe(v,0):I,oe(z)?(b="",de!=null&&(b=de.replace(ne,"$&/")+"/"),D(z,C,b,"",function(qe){return qe})):z!=null&&(j(z)&&(z=x(z,b+(z.key==null||v&&v.key===z.key?"":(""+z.key).replace(ne,"$&/")+"/")+de)),C.push(z)),1;de=0;var Te=I===""?".":I+":";if(oe(v))for(var Ae=0;Ae<v.length;Ae++)I=v[Ae],ae=Te+fe(I,Ae),de+=D(I,C,b,ae,z);else if(Ae=K(v),typeof Ae=="function")for(v=Ae.call(v),Ae=0;!(I=v.next()).done;)I=I.value,ae=Te+fe(I,Ae++),de+=D(I,C,b,ae,z);else if(ae==="object"){if(typeof v.then=="function")return D(ve(v),C,b,I,z);throw C=String(v),Error("Objects are not valid as a React child (found: "+(C==="[object Object]"?"object with keys {"+Object.keys(v).join(", ")+"}":C)+"). If you meant to render a collection of children, use an array instead.")}return de}function X(v,C,b){if(v==null)return v;var I=[],z=0;return D(v,I,"","",function(ae){return C.call(b,ae,z++)}),I}function M(v){if(v._status===-1){var C=v._result;C=C(),C.then(function(b){(v._status===0||v._status===-1)&&(v._status=1,v._result=b)},function(b){(v._status===0||v._status===-1)&&(v._status=2,v._result=b)}),v._status===-1&&(v._status=0,v._result=C)}if(v._status===1)return v._result.default;throw v._result}var _=typeof reportError=="function"?reportError:function(v){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var C=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof v=="object"&&v!==null&&typeof v.message=="string"?String(v.message):String(v),error:v});if(!window.dispatchEvent(C))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",v);return}console.error(v)},N={map:X,forEach:function(v,C,b){X(v,function(){C.apply(this,arguments)},b)},count:function(v){var C=0;return X(v,function(){C++}),C},toArray:function(v){return X(v,function(C){return C})||[]},only:function(v){if(!j(v))throw Error("React.Children.only expected to receive a single React element child.");return v}};return Ee.Activity=T,Ee.Children=N,Ee.Component=se,Ee.Fragment=i,Ee.Profiler=s,Ee.PureComponent=ue,Ee.StrictMode=r,Ee.Suspense=g,Ee.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ee,Ee.__COMPILER_RUNTIME={__proto__:null,c:function(v){return ee.H.useMemoCache(v)}},Ee.cache=function(v){return function(){return v.apply(null,arguments)}},Ee.cacheSignal=function(){return null},Ee.cloneElement=function(v,C,b){if(v==null)throw Error("The argument must be a React element, but you passed "+v+".");var I=ie({},v.props),z=v.key;if(C!=null)for(ae in C.key!==void 0&&(z=""+C.key),C)!U.call(C,ae)||ae==="key"||ae==="__self"||ae==="__source"||ae==="ref"&&C.ref===void 0||(I[ae]=C[ae]);var ae=arguments.length-2;if(ae===1)I.children=b;else if(1<ae){for(var de=Array(ae),Te=0;Te<ae;Te++)de[Te]=arguments[Te+2];I.children=de}return O(v.type,z,I)},Ee.createContext=function(v){return v={$$typeof:h,_currentValue:v,_currentValue2:v,_threadCount:0,Provider:null,Consumer:null},v.Provider=v,v.Consumer={$$typeof:l,_context:v},v},Ee.createElement=function(v,C,b){var I,z={},ae=null;if(C!=null)for(I in C.key!==void 0&&(ae=""+C.key),C)U.call(C,I)&&I!=="key"&&I!=="__self"&&I!=="__source"&&(z[I]=C[I]);var de=arguments.length-2;if(de===1)z.children=b;else if(1<de){for(var Te=Array(de),Ae=0;Ae<de;Ae++)Te[Ae]=arguments[Ae+2];z.children=Te}if(v&&v.defaultProps)for(I in de=v.defaultProps,de)z[I]===void 0&&(z[I]=de[I]);return O(v,ae,z)},Ee.createRef=function(){return{current:null}},Ee.forwardRef=function(v){return{$$typeof:f,render:v}},Ee.isValidElement=j,Ee.lazy=function(v){return{$$typeof:S,_payload:{_status:-1,_result:v},_init:M}},Ee.memo=function(v,C){return{$$typeof:p,type:v,compare:C===void 0?null:C}},Ee.startTransition=function(v){var C=ee.T,b={};ee.T=b;try{var I=v(),z=ee.S;z!==null&&z(b,I),typeof I=="object"&&I!==null&&typeof I.then=="function"&&I.then(J,_)}catch(ae){_(ae)}finally{C!==null&&b.types!==null&&(C.types=b.types),ee.T=C}},Ee.unstable_useCacheRefresh=function(){return ee.H.useCacheRefresh()},Ee.use=function(v){return ee.H.use(v)},Ee.useActionState=function(v,C,b){return ee.H.useActionState(v,C,b)},Ee.useCallback=function(v,C){return ee.H.useCallback(v,C)},Ee.useContext=function(v){return ee.H.useContext(v)},Ee.useDebugValue=function(){},Ee.useDeferredValue=function(v,C){return ee.H.useDeferredValue(v,C)},Ee.useEffect=function(v,C){return ee.H.useEffect(v,C)},Ee.useEffectEvent=function(v){return ee.H.useEffectEvent(v)},Ee.useId=function(){return ee.H.useId()},Ee.useImperativeHandle=function(v,C,b){return ee.H.useImperativeHandle(v,C,b)},Ee.useInsertionEffect=function(v,C){return ee.H.useInsertionEffect(v,C)},Ee.useLayoutEffect=function(v,C){return ee.H.useLayoutEffect(v,C)},Ee.useMemo=function(v,C){return ee.H.useMemo(v,C)},Ee.useOptimistic=function(v,C){return ee.H.useOptimistic(v,C)},Ee.useReducer=function(v,C,b){return ee.H.useReducer(v,C,b)},Ee.useRef=function(v){return ee.H.useRef(v)},Ee.useState=function(v){return ee.H.useState(v)},Ee.useSyncExternalStore=function(v,C,b){return ee.H.useSyncExternalStore(v,C,b)},Ee.useTransition=function(){return ee.H.useTransition()},Ee.version="19.2.0",Ee}var tv;function Vi(){return tv||(tv=1,Bd.exports=C_()),Bd.exports}var B=Vi();const Pn=_a(B);var Kd={exports:{}},xo={},qd={exports:{}},jd={};var nv;function S_(){return nv||(nv=1,(function(c){function t(D,X){var M=D.length;D.push(X);e:for(;0<M;){var _=M-1>>>1,N=D[_];if(0<s(N,X))D[_]=X,D[M]=N,M=_;else break e}}function i(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var X=D[0],M=D.pop();if(M!==X){D[0]=M;e:for(var _=0,N=D.length,v=N>>>1;_<v;){var C=2*(_+1)-1,b=D[C],I=C+1,z=D[I];if(0>s(b,M))I<N&&0>s(z,b)?(D[_]=z,D[I]=M,_=I):(D[_]=b,D[C]=M,_=C);else if(I<N&&0>s(z,M))D[_]=z,D[I]=M,_=I;else break e}}return X}function s(D,X){var M=D.sortIndex-X.sortIndex;return M!==0?M:D.id-X.id}if(c.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;c.unstable_now=function(){return l.now()}}else{var h=Date,f=h.now();c.unstable_now=function(){return h.now()-f}}var g=[],p=[],S=1,T=null,A=3,K=!1,te=!1,ie=!1,le=!1,se=typeof setTimeout=="function"?setTimeout:null,ce=typeof clearTimeout=="function"?clearTimeout:null,ue=typeof setImmediate<"u"?setImmediate:null;function G(D){for(var X=i(p);X!==null;){if(X.callback===null)r(p);else if(X.startTime<=D)r(p),X.sortIndex=X.expirationTime,t(g,X);else break;X=i(p)}}function oe(D){if(ie=!1,G(D),!te)if(i(g)!==null)te=!0,J||(J=!0,Y());else{var X=i(p);X!==null&&ve(oe,X.startTime-D)}}var J=!1,ee=-1,U=5,O=-1;function x(){return le?!0:!(c.unstable_now()-O<U)}function j(){if(le=!1,J){var D=c.unstable_now();O=D;var X=!0;try{e:{te=!1,ie&&(ie=!1,ce(ee),ee=-1),K=!0;var M=A;try{t:{for(G(D),T=i(g);T!==null&&!(T.expirationTime>D&&x());){var _=T.callback;if(typeof _=="function"){T.callback=null,A=T.priorityLevel;var N=_(T.expirationTime<=D);if(D=c.unstable_now(),typeof N=="function"){T.callback=N,G(D),X=!0;break t}T===i(g)&&r(g),G(D)}else r(g);T=i(g)}if(T!==null)X=!0;else{var v=i(p);v!==null&&ve(oe,v.startTime-D),X=!1}}break e}finally{T=null,A=M,K=!1}X=void 0}}finally{X?Y():J=!1}}}var Y;if(typeof ue=="function")Y=function(){ue(j)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,fe=ne.port2;ne.port1.onmessage=j,Y=function(){fe.postMessage(null)}}else Y=function(){se(j,0)};function ve(D,X){ee=se(function(){D(c.unstable_now())},X)}c.unstable_IdlePriority=5,c.unstable_ImmediatePriority=1,c.unstable_LowPriority=4,c.unstable_NormalPriority=3,c.unstable_Profiling=null,c.unstable_UserBlockingPriority=2,c.unstable_cancelCallback=function(D){D.callback=null},c.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<D?Math.floor(1e3/D):5},c.unstable_getCurrentPriorityLevel=function(){return A},c.unstable_next=function(D){switch(A){case 1:case 2:case 3:var X=3;break;default:X=A}var M=A;A=X;try{return D()}finally{A=M}},c.unstable_requestPaint=function(){le=!0},c.unstable_runWithPriority=function(D,X){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var M=A;A=D;try{return X()}finally{A=M}},c.unstable_scheduleCallback=function(D,X,M){var _=c.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?_+M:_):M=_,D){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=M+N,D={id:S++,callback:X,priorityLevel:D,startTime:M,expirationTime:N,sortIndex:-1},M>_?(D.sortIndex=M,t(p,D),i(g)===null&&D===i(p)&&(ie?(ce(ee),ee=-1):ie=!0,ve(oe,M-_))):(D.sortIndex=N,t(g,D),te||K||(te=!0,J||(J=!0,Y()))),D},c.unstable_shouldYield=x,c.unstable_wrapCallback=function(D){var X=A;return function(){var M=A;A=X;try{return D.apply(this,arguments)}finally{A=M}}}})(jd)),jd}var iv;function T_(){return iv||(iv=1,qd.exports=S_()),qd.exports}var Gd={exports:{}},Mt={};var av;function A_(){if(av)return Mt;av=1;var c=Vi();function t(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)p+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var r={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},s=Symbol.for("react.portal");function l(g,p,S){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:T==null?null:""+T,children:g,containerInfo:p,implementation:S}}var h=c.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Mt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Mt.createPortal=function(g,p){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return l(g,p,null,S)},Mt.flushSync=function(g){var p=h.T,S=r.p;try{if(h.T=null,r.p=2,g)return g()}finally{h.T=p,r.p=S,r.d.f()}},Mt.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(g,p))},Mt.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},Mt.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var S=p.as,T=f(S,p.crossOrigin),A=typeof p.integrity=="string"?p.integrity:void 0,K=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;S==="style"?r.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:T,integrity:A,fetchPriority:K}):S==="script"&&r.d.X(g,{crossOrigin:T,integrity:A,fetchPriority:K,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Mt.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var S=f(p.as,p.crossOrigin);r.d.M(g,{crossOrigin:S,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(g)},Mt.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var S=p.as,T=f(S,p.crossOrigin);r.d.L(g,S,{crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Mt.preloadModule=function(g,p){if(typeof g=="string")if(p){var S=f(p.as,p.crossOrigin);r.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:S,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(g)},Mt.requestFormReset=function(g){r.d.r(g)},Mt.unstable_batchedUpdates=function(g,p){return g(p)},Mt.useFormState=function(g,p,S){return h.H.useFormState(g,p,S)},Mt.useFormStatus=function(){return h.H.useHostTransitionStatus()},Mt.version="19.2.0",Mt}var rv;function EC(){if(rv)return Gd.exports;rv=1;function c(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(c)}catch(t){console.error(t)}}return c(),Gd.exports=A_(),Gd.exports}var ov;function E_(){if(ov)return xo;ov=1;var c=T_(),t=Vi(),i=EC();function r(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function l(e){var n=e,a=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(a=n.return),e=n.return;while(e)}return n.tag===3?a:null}function h(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function f(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function g(e){if(l(e)!==e)throw Error(r(188))}function p(e){var n=e.alternate;if(!n){if(n=l(e),n===null)throw Error(r(188));return n!==e?null:e}for(var a=e,o=n;;){var u=a.return;if(u===null)break;var d=u.alternate;if(d===null){if(o=u.return,o!==null){a=o;continue}break}if(u.child===d.child){for(d=u.child;d;){if(d===a)return g(u),e;if(d===o)return g(u),n;d=d.sibling}throw Error(r(188))}if(a.return!==o.return)a=u,o=d;else{for(var m=!1,y=u.child;y;){if(y===a){m=!0,a=u,o=d;break}if(y===o){m=!0,o=u,a=d;break}y=y.sibling}if(!m){for(y=d.child;y;){if(y===a){m=!0,a=d,o=u;break}if(y===o){m=!0,o=d,a=u;break}y=y.sibling}if(!m)throw Error(r(189))}}if(a.alternate!==o)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?e:n}function S(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=S(e),n!==null)return n;e=e.sibling}return null}var T=Object.assign,A=Symbol.for("react.element"),K=Symbol.for("react.transitional.element"),te=Symbol.for("react.portal"),ie=Symbol.for("react.fragment"),le=Symbol.for("react.strict_mode"),se=Symbol.for("react.profiler"),ce=Symbol.for("react.consumer"),ue=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),oe=Symbol.for("react.suspense"),J=Symbol.for("react.suspense_list"),ee=Symbol.for("react.memo"),U=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),x=Symbol.for("react.memo_cache_sentinel"),j=Symbol.iterator;function Y(e){return e===null||typeof e!="object"?null:(e=j&&e[j]||e["@@iterator"],typeof e=="function"?e:null)}var ne=Symbol.for("react.client.reference");function fe(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===ne?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ie:return"Fragment";case se:return"Profiler";case le:return"StrictMode";case oe:return"Suspense";case J:return"SuspenseList";case O:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case te:return"Portal";case ue:return e.displayName||"Context";case ce:return(e._context.displayName||"Context")+".Consumer";case G:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ee:return n=e.displayName||null,n!==null?n:fe(e.type)||"Memo";case U:n=e._payload,e=e._init;try{return fe(e(n))}catch{}}return null}var ve=Array.isArray,D=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M={pending:!1,data:null,method:null,action:null},_=[],N=-1;function v(e){return{current:e}}function C(e){0>N||(e.current=_[N],_[N]=null,N--)}function b(e,n){N++,_[N]=e.current,e.current=n}var I=v(null),z=v(null),ae=v(null),de=v(null);function Te(e,n){switch(b(ae,n),b(z,e),b(I,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?Ty(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=Ty(n),e=Ay(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}C(I),b(I,e)}function Ae(){C(I),C(z),C(ae)}function qe(e){e.memoizedState!==null&&b(de,e);var n=I.current,a=Ay(n,e.type);n!==a&&(b(z,e),b(I,a))}function We(e){z.current===e&&(C(I),C(z)),de.current===e&&(C(de),ko._currentValue=M)}var ht,ft;function ot(e){if(ht===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);ht=n&&n[1]||"",ft=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ht+e+ft}var we=!1;function Xt(e,n){if(!e||we)return"";we=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(n){var $=function(){throw Error()};if(Object.defineProperty($.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct($,[])}catch(q){var L=q}Reflect.construct(e,[],$)}else{try{$.call()}catch(q){L=q}e.call($.prototype)}}else{try{throw Error()}catch(q){L=q}($=e())&&typeof $.catch=="function"&&$.catch(function(){})}}catch(q){if(q&&L&&typeof q.stack=="string")return[q.stack,L.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var u=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");u&&u.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=o.DetermineComponentFrameRoot(),m=d[0],y=d[1];if(m&&y){var E=m.split(`
`),H=y.split(`
`);for(u=o=0;o<E.length&&!E[o].includes("DetermineComponentFrameRoot");)o++;for(;u<H.length&&!H[u].includes("DetermineComponentFrameRoot");)u++;if(o===E.length||u===H.length)for(o=E.length-1,u=H.length-1;1<=o&&0<=u&&E[o]!==H[u];)u--;for(;1<=o&&0<=u;o--,u--)if(E[o]!==H[u]){if(o!==1||u!==1)do if(o--,u--,0>u||E[o]!==H[u]){var F=`
`+E[o].replace(" at new "," at ");return e.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",e.displayName)),F}while(1<=o&&0<=u);break}}}finally{we=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?ot(a):""}function sn(e,n){switch(e.tag){case 26:case 27:case 5:return ot(e.type);case 16:return ot("Lazy");case 13:return e.child!==n&&n!==null?ot("Suspense Fallback"):ot("Suspense");case 19:return ot("SuspenseList");case 0:case 15:return Xt(e.type,!1);case 11:return Xt(e.type.render,!1);case 1:return Xt(e.type,!0);case 31:return ot("Activity");default:return""}}function cn(e){try{var n="",a=null;do n+=sn(e,a),a=e,e=e.return;while(e);return n}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var Hr=Object.prototype.hasOwnProperty,wa=c.unstable_scheduleCallback,Ra=c.unstable_cancelCallback,ts=c.unstable_shouldYield,Ia=c.unstable_requestPaint,yt=c.unstable_now,di=c.unstable_getCurrentPriorityLevel,Lr=c.unstable_ImmediatePriority,zr=c.unstable_UserBlockingPriority,Oa=c.unstable_NormalPriority,ka=c.unstable_LowPriority,ns=c.unstable_IdlePriority,bl=c.log,wl=c.unstable_setDisableYieldValue,zn=null,De=null;function vt(e){if(typeof bl=="function"&&wl(e),De&&typeof De.setStrictMode=="function")try{De.setStrictMode(zn,e)}catch{}}var gt=Math.clz32?Math.clz32:Kr,is=Math.log,Br=Math.LN2;function Kr(e){return e>>>=0,e===0?32:31-(is(e)/Br|0)|0}var hi=256,Xi=262144,Ji=4194304;function Sn(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function as(e,n,a){var o=e.pendingLanes;if(o===0)return 0;var u=0,d=e.suspendedLanes,m=e.pingedLanes;e=e.warmLanes;var y=o&134217727;return y!==0?(o=y&~d,o!==0?u=Sn(o):(m&=y,m!==0?u=Sn(m):a||(a=y&~e,a!==0&&(u=Sn(a))))):(y=o&~d,y!==0?u=Sn(y):m!==0?u=Sn(m):a||(a=o&~e,a!==0&&(u=Sn(a)))),u===0?0:n!==0&&n!==u&&(n&d)===0&&(d=u&-u,a=n&-n,d>=a||d===32&&(a&4194048)!==0)?n:u}function qr(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function aA(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ng(){var e=Ji;return Ji<<=1,(Ji&62914560)===0&&(Ji=4194304),e}function Rl(e){for(var n=[],a=0;31>a;a++)n.push(e);return n}function jr(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function rA(e,n,a,o,u,d){var m=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var y=e.entanglements,E=e.expirationTimes,H=e.hiddenUpdates;for(a=m&~a;0<a;){var F=31-gt(a),$=1<<F;y[F]=0,E[F]=-1;var L=H[F];if(L!==null)for(H[F]=null,F=0;F<L.length;F++){var q=L[F];q!==null&&(q.lane&=-536870913)}a&=~$}o!==0&&ig(e,o,0),d!==0&&u===0&&e.tag!==0&&(e.suspendedLanes|=d&~(m&~n))}function ig(e,n,a){e.pendingLanes|=n,e.suspendedLanes&=~n;var o=31-gt(n);e.entangledLanes|=n,e.entanglements[o]=e.entanglements[o]|1073741824|a&261930}function ag(e,n){var a=e.entangledLanes|=n;for(e=e.entanglements;a;){var o=31-gt(a),u=1<<o;u&n|e[o]&n&&(e[o]|=n),a&=~u}}function rg(e,n){var a=n&-n;return a=(a&42)!==0?1:Il(a),(a&(e.suspendedLanes|n))!==0?0:a}function Il(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ol(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function og(){var e=X.p;return e!==0?e:(e=window.event,e===void 0?32:Fy(e.type))}function sg(e,n){var a=X.p;try{return X.p=e,n()}finally{X.p=a}}var fi=Math.random().toString(36).slice(2),At="__reactFiber$"+fi,zt="__reactProps$"+fi,Ma="__reactContainer$"+fi,kl="__reactEvents$"+fi,oA="__reactListeners$"+fi,sA="__reactHandles$"+fi,cg="__reactResources$"+fi,Gr="__reactMarker$"+fi;function Ml(e){delete e[At],delete e[zt],delete e[kl],delete e[oA],delete e[sA]}function Na(e){var n=e[At];if(n)return n;for(var a=e.parentNode;a;){if(n=a[Ma]||a[At]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(e=Oy(e);e!==null;){if(a=e[At])return a;e=Oy(e)}return n}e=a,a=e.parentNode}return null}function Da(e){if(e=e[At]||e[Ma]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function Fr(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(r(33))}function Ua(e){var n=e[cg];return n||(n=e[cg]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function Ct(e){e[Gr]=!0}var lg=new Set,ug={};function $i(e,n){xa(e,n),xa(e+"Capture",n)}function xa(e,n){for(ug[e]=n,e=0;e<n.length;e++)lg.add(n[e])}var cA=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),dg={},hg={};function lA(e){return Hr.call(hg,e)?!0:Hr.call(dg,e)?!1:cA.test(e)?hg[e]=!0:(dg[e]=!0,!1)}function rs(e,n,a){if(lA(n))if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var o=n.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+a)}}function os(e,n,a){if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+a)}}function Bn(e,n,a,o){if(o===null)e.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(n,a,""+o)}}function ln(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function fg(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function uA(e,n,a){var o=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var u=o.get,d=o.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return u.call(this)},set:function(m){a=""+m,d.call(this,m)}}),Object.defineProperty(e,n,{enumerable:o.enumerable}),{getValue:function(){return a},setValue:function(m){a=""+m},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Nl(e){if(!e._valueTracker){var n=fg(e)?"checked":"value";e._valueTracker=uA(e,n,""+e[n])}}function gg(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var a=n.getValue(),o="";return e&&(o=fg(e)?e.checked?"true":"false":e.value),e=o,e!==a?(n.setValue(e),!0):!1}function ss(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var dA=/[\n"\\]/g;function un(e){return e.replace(dA,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Dl(e,n,a,o,u,d,m,y){e.name="",m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"?e.type=m:e.removeAttribute("type"),n!=null?m==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+ln(n)):e.value!==""+ln(n)&&(e.value=""+ln(n)):m!=="submit"&&m!=="reset"||e.removeAttribute("value"),n!=null?Ul(e,m,ln(n)):a!=null?Ul(e,m,ln(a)):o!=null&&e.removeAttribute("value"),u==null&&d!=null&&(e.defaultChecked=!!d),u!=null&&(e.checked=u&&typeof u!="function"&&typeof u!="symbol"),y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?e.name=""+ln(y):e.removeAttribute("name")}function mg(e,n,a,o,u,d,m,y){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),n!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||n!=null)){Nl(e);return}a=a!=null?""+ln(a):"",n=n!=null?""+ln(n):a,y||n===e.value||(e.value=n),e.defaultValue=n}o=o??u,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=y?e.checked:!!o,e.defaultChecked=!!o,m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(e.name=m),Nl(e)}function Ul(e,n,a){n==="number"&&ss(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Pa(e,n,a,o){if(e=e.options,n){n={};for(var u=0;u<a.length;u++)n["$"+a[u]]=!0;for(a=0;a<e.length;a++)u=n.hasOwnProperty("$"+e[a].value),e[a].selected!==u&&(e[a].selected=u),u&&o&&(e[a].defaultSelected=!0)}else{for(a=""+ln(a),n=null,u=0;u<e.length;u++){if(e[u].value===a){e[u].selected=!0,o&&(e[u].defaultSelected=!0);return}n!==null||e[u].disabled||(n=e[u])}n!==null&&(n.selected=!0)}}function pg(e,n,a){if(n!=null&&(n=""+ln(n),n!==e.value&&(e.value=n),a==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=a!=null?""+ln(a):""}function yg(e,n,a,o){if(n==null){if(o!=null){if(a!=null)throw Error(r(92));if(ve(o)){if(1<o.length)throw Error(r(93));o=o[0]}a=o}a==null&&(a=""),n=a}a=ln(n),e.defaultValue=a,o=e.textContent,o===a&&o!==""&&o!==null&&(e.value=o),Nl(e)}function Ha(e,n){if(n){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=n;return}}e.textContent=n}var hA=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function vg(e,n,a){var o=n.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":o?e.setProperty(n,a):typeof a!="number"||a===0||hA.has(n)?n==="float"?e.cssFloat=a:e[n]=(""+a).trim():e[n]=a+"px"}function Cg(e,n,a){if(n!=null&&typeof n!="object")throw Error(r(62));if(e=e.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||n!=null&&n.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var u in n)o=n[u],n.hasOwnProperty(u)&&a[u]!==o&&vg(e,u,o)}else for(var d in n)n.hasOwnProperty(d)&&vg(e,d,n[d])}function xl(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fA=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),gA=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function cs(e){return gA.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Kn(){}var Pl=null;function Hl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var La=null,za=null;function Sg(e){var n=Da(e);if(n&&(e=n.stateNode)){var a=e[zt]||null;e:switch(e=n.stateNode,n.type){case"input":if(Dl(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),n=a.name,a.type==="radio"&&n!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+un(""+n)+'"][type="radio"]'),n=0;n<a.length;n++){var o=a[n];if(o!==e&&o.form===e.form){var u=o[zt]||null;if(!u)throw Error(r(90));Dl(o,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name)}}for(n=0;n<a.length;n++)o=a[n],o.form===e.form&&gg(o)}break e;case"textarea":pg(e,a.value,a.defaultValue);break e;case"select":n=a.value,n!=null&&Pa(e,!!a.multiple,n,!1)}}}var Ll=!1;function Tg(e,n,a){if(Ll)return e(n,a);Ll=!0;try{var o=e(n);return o}finally{if(Ll=!1,(La!==null||za!==null)&&(Xs(),La&&(n=La,e=za,za=La=null,Sg(n),e)))for(n=0;n<e.length;n++)Sg(e[n])}}function Qr(e,n){var a=e.stateNode;if(a===null)return null;var o=a[zt]||null;if(o===null)return null;a=o[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(r(231,n,typeof a));return a}var qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zl=!1;if(qn)try{var Yr={};Object.defineProperty(Yr,"passive",{get:function(){zl=!0}}),window.addEventListener("test",Yr,Yr),window.removeEventListener("test",Yr,Yr)}catch{zl=!1}var gi=null,Bl=null,ls=null;function Ag(){if(ls)return ls;var e,n=Bl,a=n.length,o,u="value"in gi?gi.value:gi.textContent,d=u.length;for(e=0;e<a&&n[e]===u[e];e++);var m=a-e;for(o=1;o<=m&&n[a-o]===u[d-o];o++);return ls=u.slice(e,1<o?1-o:void 0)}function us(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function ds(){return!0}function Eg(){return!1}function Bt(e){function n(a,o,u,d,m){this._reactName=a,this._targetInst=u,this.type=o,this.nativeEvent=d,this.target=m,this.currentTarget=null;for(var y in e)e.hasOwnProperty(y)&&(a=e[y],this[y]=a?a(d):d[y]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?ds:Eg,this.isPropagationStopped=Eg,this}return T(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ds)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ds)},persist:function(){},isPersistent:ds}),n}var Zi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hs=Bt(Zi),Vr=T({},Zi,{view:0,detail:0}),mA=Bt(Vr),Kl,ql,Xr,fs=T({},Vr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Xr&&(Xr&&e.type==="mousemove"?(Kl=e.screenX-Xr.screenX,ql=e.screenY-Xr.screenY):ql=Kl=0,Xr=e),Kl)},movementY:function(e){return"movementY"in e?e.movementY:ql}}),_g=Bt(fs),pA=T({},fs,{dataTransfer:0}),yA=Bt(pA),vA=T({},Vr,{relatedTarget:0}),jl=Bt(vA),CA=T({},Zi,{animationName:0,elapsedTime:0,pseudoElement:0}),SA=Bt(CA),TA=T({},Zi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),AA=Bt(TA),EA=T({},Zi,{data:0}),bg=Bt(EA),_A={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function RA(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=wA[e])?!!n[e]:!1}function Gl(){return RA}var IA=T({},Vr,{key:function(e){if(e.key){var n=_A[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=us(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?bA[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gl,charCode:function(e){return e.type==="keypress"?us(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?us(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),OA=Bt(IA),kA=T({},fs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wg=Bt(kA),MA=T({},Vr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gl}),NA=Bt(MA),DA=T({},Zi,{propertyName:0,elapsedTime:0,pseudoElement:0}),UA=Bt(DA),xA=T({},fs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),PA=Bt(xA),HA=T({},Zi,{newState:0,oldState:0}),LA=Bt(HA),zA=[9,13,27,32],Fl=qn&&"CompositionEvent"in window,Jr=null;qn&&"documentMode"in document&&(Jr=document.documentMode);var BA=qn&&"TextEvent"in window&&!Jr,Rg=qn&&(!Fl||Jr&&8<Jr&&11>=Jr),Ig=" ",Og=!1;function kg(e,n){switch(e){case"keyup":return zA.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mg(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ba=!1;function KA(e,n){switch(e){case"compositionend":return Mg(n);case"keypress":return n.which!==32?null:(Og=!0,Ig);case"textInput":return e=n.data,e===Ig&&Og?null:e;default:return null}}function qA(e,n){if(Ba)return e==="compositionend"||!Fl&&kg(e,n)?(e=Ag(),ls=Bl=gi=null,Ba=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Rg&&n.locale!=="ko"?null:n.data;default:return null}}var jA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ng(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!jA[e.type]:n==="textarea"}function Dg(e,n,a,o){La?za?za.push(o):za=[o]:La=o,n=nc(n,"onChange"),0<n.length&&(a=new hs("onChange","change",null,a,o),e.push({event:a,listeners:n}))}var $r=null,Zr=null;function GA(e){my(e,0)}function gs(e){var n=Fr(e);if(gg(n))return e}function Ug(e,n){if(e==="change")return n}var xg=!1;if(qn){var Ql;if(qn){var Yl="oninput"in document;if(!Yl){var Pg=document.createElement("div");Pg.setAttribute("oninput","return;"),Yl=typeof Pg.oninput=="function"}Ql=Yl}else Ql=!1;xg=Ql&&(!document.documentMode||9<document.documentMode)}function Hg(){$r&&($r.detachEvent("onpropertychange",Lg),Zr=$r=null)}function Lg(e){if(e.propertyName==="value"&&gs(Zr)){var n=[];Dg(n,Zr,e,Hl(e)),Tg(GA,n)}}function FA(e,n,a){e==="focusin"?(Hg(),$r=n,Zr=a,$r.attachEvent("onpropertychange",Lg)):e==="focusout"&&Hg()}function QA(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return gs(Zr)}function YA(e,n){if(e==="click")return gs(n)}function VA(e,n){if(e==="input"||e==="change")return gs(n)}function XA(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var Jt=typeof Object.is=="function"?Object.is:XA;function Wr(e,n){if(Jt(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var a=Object.keys(e),o=Object.keys(n);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var u=a[o];if(!Hr.call(n,u)||!Jt(e[u],n[u]))return!1}return!0}function zg(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Bg(e,n){var a=zg(e);e=0;for(var o;a;){if(a.nodeType===3){if(o=e+a.textContent.length,e<=n&&o>=n)return{node:a,offset:n-e};e=o}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=zg(a)}}function Kg(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?Kg(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function qg(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=ss(e.document);n instanceof e.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)e=n.contentWindow;else break;n=ss(e.document)}return n}function Vl(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var JA=qn&&"documentMode"in document&&11>=document.documentMode,Ka=null,Xl=null,eo=null,Jl=!1;function jg(e,n,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Jl||Ka==null||Ka!==ss(o)||(o=Ka,"selectionStart"in o&&Vl(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),eo&&Wr(eo,o)||(eo=o,o=nc(Xl,"onSelect"),0<o.length&&(n=new hs("onSelect","select",null,n,a),e.push({event:n,listeners:o}),n.target=Ka)))}function Wi(e,n){var a={};return a[e.toLowerCase()]=n.toLowerCase(),a["Webkit"+e]="webkit"+n,a["Moz"+e]="moz"+n,a}var qa={animationend:Wi("Animation","AnimationEnd"),animationiteration:Wi("Animation","AnimationIteration"),animationstart:Wi("Animation","AnimationStart"),transitionrun:Wi("Transition","TransitionRun"),transitionstart:Wi("Transition","TransitionStart"),transitioncancel:Wi("Transition","TransitionCancel"),transitionend:Wi("Transition","TransitionEnd")},$l={},Gg={};qn&&(Gg=document.createElement("div").style,"AnimationEvent"in window||(delete qa.animationend.animation,delete qa.animationiteration.animation,delete qa.animationstart.animation),"TransitionEvent"in window||delete qa.transitionend.transition);function ea(e){if($l[e])return $l[e];if(!qa[e])return e;var n=qa[e],a;for(a in n)if(n.hasOwnProperty(a)&&a in Gg)return $l[e]=n[a];return e}var Fg=ea("animationend"),Qg=ea("animationiteration"),Yg=ea("animationstart"),$A=ea("transitionrun"),ZA=ea("transitionstart"),WA=ea("transitioncancel"),Vg=ea("transitionend"),Xg=new Map,Zl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Zl.push("scrollEnd");function Tn(e,n){Xg.set(e,n),$i(n,[e])}var ms=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},dn=[],ja=0,Wl=0;function ps(){for(var e=ja,n=Wl=ja=0;n<e;){var a=dn[n];dn[n++]=null;var o=dn[n];dn[n++]=null;var u=dn[n];dn[n++]=null;var d=dn[n];if(dn[n++]=null,o!==null&&u!==null){var m=o.pending;m===null?u.next=u:(u.next=m.next,m.next=u),o.pending=u}d!==0&&Jg(a,u,d)}}function ys(e,n,a,o){dn[ja++]=e,dn[ja++]=n,dn[ja++]=a,dn[ja++]=o,Wl|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function eu(e,n,a,o){return ys(e,n,a,o),vs(e)}function ta(e,n){return ys(e,null,null,n),vs(e)}function Jg(e,n,a){e.lanes|=a;var o=e.alternate;o!==null&&(o.lanes|=a);for(var u=!1,d=e.return;d!==null;)d.childLanes|=a,o=d.alternate,o!==null&&(o.childLanes|=a),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(u=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,u&&n!==null&&(u=31-gt(a),e=d.hiddenUpdates,o=e[u],o===null?e[u]=[n]:o.push(n),n.lane=a|536870912),d):null}function vs(e){if(50<Eo)throw Eo=0,ld=null,Error(r(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var Ga={};function eE(e,n,a,o){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $t(e,n,a,o){return new eE(e,n,a,o)}function tu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function jn(e,n){var a=e.alternate;return a===null?(a=$t(e.tag,n,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=n,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,n=e.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function $g(e,n){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,n=a.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function Cs(e,n,a,o,u,d){var m=0;if(o=e,typeof e=="function")tu(e)&&(m=1);else if(typeof e=="string")m=r_(e,a,I.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case O:return e=$t(31,a,n,u),e.elementType=O,e.lanes=d,e;case ie:return na(a.children,u,d,n);case le:m=8,u|=24;break;case se:return e=$t(12,a,n,u|2),e.elementType=se,e.lanes=d,e;case oe:return e=$t(13,a,n,u),e.elementType=oe,e.lanes=d,e;case J:return e=$t(19,a,n,u),e.elementType=J,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ue:m=10;break e;case ce:m=9;break e;case G:m=11;break e;case ee:m=14;break e;case U:m=16,o=null;break e}m=29,a=Error(r(130,e===null?"null":typeof e,"")),o=null}return n=$t(m,a,n,u),n.elementType=e,n.type=o,n.lanes=d,n}function na(e,n,a,o){return e=$t(7,e,o,n),e.lanes=a,e}function nu(e,n,a){return e=$t(6,e,null,n),e.lanes=a,e}function Zg(e){var n=$t(18,null,null,0);return n.stateNode=e,n}function iu(e,n,a){return n=$t(4,e.children!==null?e.children:[],e.key,n),n.lanes=a,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var Wg=new WeakMap;function hn(e,n){if(typeof e=="object"&&e!==null){var a=Wg.get(e);return a!==void 0?a:(n={value:e,source:n,stack:cn(n)},Wg.set(e,n),n)}return{value:e,source:n,stack:cn(n)}}var Fa=[],Qa=0,Ss=null,to=0,fn=[],gn=0,mi=null,kn=1,Mn="";function Gn(e,n){Fa[Qa++]=to,Fa[Qa++]=Ss,Ss=e,to=n}function em(e,n,a){fn[gn++]=kn,fn[gn++]=Mn,fn[gn++]=mi,mi=e;var o=kn;e=Mn;var u=32-gt(o)-1;o&=~(1<<u),a+=1;var d=32-gt(n)+u;if(30<d){var m=u-u%5;d=(o&(1<<m)-1).toString(32),o>>=m,u-=m,kn=1<<32-gt(n)+u|a<<u|o,Mn=d+e}else kn=1<<d|a<<u|o,Mn=e}function au(e){e.return!==null&&(Gn(e,1),em(e,1,0))}function ru(e){for(;e===Ss;)Ss=Fa[--Qa],Fa[Qa]=null,to=Fa[--Qa],Fa[Qa]=null;for(;e===mi;)mi=fn[--gn],fn[gn]=null,Mn=fn[--gn],fn[gn]=null,kn=fn[--gn],fn[gn]=null}function tm(e,n){fn[gn++]=kn,fn[gn++]=Mn,fn[gn++]=mi,kn=n.id,Mn=n.overflow,mi=e}var Et=null,Je=null,Ne=!1,pi=null,mn=!1,ou=Error(r(519));function yi(e){var n=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw no(hn(n,e)),ou}function nm(e){var n=e.stateNode,a=e.type,o=e.memoizedProps;switch(n[At]=e,n[zt]=o,a){case"dialog":Oe("cancel",n),Oe("close",n);break;case"iframe":case"object":case"embed":Oe("load",n);break;case"video":case"audio":for(a=0;a<bo.length;a++)Oe(bo[a],n);break;case"source":Oe("error",n);break;case"img":case"image":case"link":Oe("error",n),Oe("load",n);break;case"details":Oe("toggle",n);break;case"input":Oe("invalid",n),mg(n,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":Oe("invalid",n);break;case"textarea":Oe("invalid",n),yg(n,o.value,o.defaultValue,o.children)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||n.textContent===""+a||o.suppressHydrationWarning===!0||Cy(n.textContent,a)?(o.popover!=null&&(Oe("beforetoggle",n),Oe("toggle",n)),o.onScroll!=null&&Oe("scroll",n),o.onScrollEnd!=null&&Oe("scrollend",n),o.onClick!=null&&(n.onclick=Kn),n=!0):n=!1,n||yi(e,!0)}function im(e){for(Et=e.return;Et;)switch(Et.tag){case 5:case 31:case 13:mn=!1;return;case 27:case 3:mn=!0;return;default:Et=Et.return}}function Ya(e){if(e!==Et)return!1;if(!Ne)return im(e),Ne=!0,!1;var n=e.tag,a;if((a=n!==3&&n!==27)&&((a=n===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||_d(e.type,e.memoizedProps)),a=!a),a&&Je&&yi(e),im(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));Je=Iy(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));Je=Iy(e)}else n===27?(n=Je,Mi(e.type)?(e=Od,Od=null,Je=e):Je=n):Je=Et?yn(e.stateNode.nextSibling):null;return!0}function ia(){Je=Et=null,Ne=!1}function su(){var e=pi;return e!==null&&(Gt===null?Gt=e:Gt.push.apply(Gt,e),pi=null),e}function no(e){pi===null?pi=[e]:pi.push(e)}var cu=v(null),aa=null,Fn=null;function vi(e,n,a){b(cu,n._currentValue),n._currentValue=a}function Qn(e){e._currentValue=cu.current,C(cu)}function lu(e,n,a){for(;e!==null;){var o=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,o!==null&&(o.childLanes|=n)):o!==null&&(o.childLanes&n)!==n&&(o.childLanes|=n),e===a)break;e=e.return}}function uu(e,n,a,o){var u=e.child;for(u!==null&&(u.return=e);u!==null;){var d=u.dependencies;if(d!==null){var m=u.child;d=d.firstContext;e:for(;d!==null;){var y=d;d=u;for(var E=0;E<n.length;E++)if(y.context===n[E]){d.lanes|=a,y=d.alternate,y!==null&&(y.lanes|=a),lu(d.return,a,e),o||(m=null);break e}d=y.next}}else if(u.tag===18){if(m=u.return,m===null)throw Error(r(341));m.lanes|=a,d=m.alternate,d!==null&&(d.lanes|=a),lu(m,a,e),m=null}else m=u.child;if(m!==null)m.return=u;else for(m=u;m!==null;){if(m===e){m=null;break}if(u=m.sibling,u!==null){u.return=m.return,m=u;break}m=m.return}u=m}}function Va(e,n,a,o){e=null;for(var u=n,d=!1;u!==null;){if(!d){if((u.flags&524288)!==0)d=!0;else if((u.flags&262144)!==0)break}if(u.tag===10){var m=u.alternate;if(m===null)throw Error(r(387));if(m=m.memoizedProps,m!==null){var y=u.type;Jt(u.pendingProps.value,m.value)||(e!==null?e.push(y):e=[y])}}else if(u===de.current){if(m=u.alternate,m===null)throw Error(r(387));m.memoizedState.memoizedState!==u.memoizedState.memoizedState&&(e!==null?e.push(ko):e=[ko])}u=u.return}e!==null&&uu(n,e,a,o),n.flags|=262144}function Ts(e){for(e=e.firstContext;e!==null;){if(!Jt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ra(e){aa=e,Fn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function _t(e){return am(aa,e)}function As(e,n){return aa===null&&ra(e),am(e,n)}function am(e,n){var a=n._currentValue;if(n={context:n,memoizedValue:a,next:null},Fn===null){if(e===null)throw Error(r(308));Fn=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else Fn=Fn.next=n;return a}var tE=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(a,o){e.push(o)}};this.abort=function(){n.aborted=!0,e.forEach(function(a){return a()})}},nE=c.unstable_scheduleCallback,iE=c.unstable_NormalPriority,st={$$typeof:ue,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function du(){return{controller:new tE,data:new Map,refCount:0}}function io(e){e.refCount--,e.refCount===0&&nE(iE,function(){e.controller.abort()})}var ao=null,hu=0,Xa=0,Ja=null;function aE(e,n){if(ao===null){var a=ao=[];hu=0,Xa=md(),Ja={status:"pending",value:void 0,then:function(o){a.push(o)}}}return hu++,n.then(rm,rm),n}function rm(){if(--hu===0&&ao!==null){Ja!==null&&(Ja.status="fulfilled");var e=ao;ao=null,Xa=0,Ja=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function rE(e,n){var a=[],o={status:"pending",value:null,reason:null,then:function(u){a.push(u)}};return e.then(function(){o.status="fulfilled",o.value=n;for(var u=0;u<a.length;u++)(0,a[u])(n)},function(u){for(o.status="rejected",o.reason=u,u=0;u<a.length;u++)(0,a[u])(void 0)}),o}var om=D.S;D.S=function(e,n){jp=yt(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&aE(e,n),om!==null&&om(e,n)};var oa=v(null);function fu(){var e=oa.current;return e!==null?e:Ve.pooledCache}function Es(e,n){n===null?b(oa,oa.current):b(oa,n.pool)}function sm(){var e=fu();return e===null?null:{parent:st._currentValue,pool:e}}var $a=Error(r(460)),gu=Error(r(474)),_s=Error(r(542)),bs={then:function(){}};function cm(e){return e=e.status,e==="fulfilled"||e==="rejected"}function lm(e,n,a){switch(a=e[a],a===void 0?e.push(n):a!==n&&(n.then(Kn,Kn),n=a),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,dm(e),e;default:if(typeof n.status=="string")n.then(Kn,Kn);else{if(e=Ve,e!==null&&100<e.shellSuspendCounter)throw Error(r(482));e=n,e.status="pending",e.then(function(o){if(n.status==="pending"){var u=n;u.status="fulfilled",u.value=o}},function(o){if(n.status==="pending"){var u=n;u.status="rejected",u.reason=o}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,dm(e),e}throw ca=n,$a}}function sa(e){try{var n=e._init;return n(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(ca=a,$a):a}}var ca=null;function um(){if(ca===null)throw Error(r(459));var e=ca;return ca=null,e}function dm(e){if(e===$a||e===_s)throw Error(r(483))}var Za=null,ro=0;function ws(e){var n=ro;return ro+=1,Za===null&&(Za=[]),lm(Za,e,n)}function oo(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function Rs(e,n){throw n.$$typeof===A?Error(r(525)):(e=Object.prototype.toString.call(n),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function hm(e){function n(k,R){if(e){var P=k.deletions;P===null?(k.deletions=[R],k.flags|=16):P.push(R)}}function a(k,R){if(!e)return null;for(;R!==null;)n(k,R),R=R.sibling;return null}function o(k){for(var R=new Map;k!==null;)k.key!==null?R.set(k.key,k):R.set(k.index,k),k=k.sibling;return R}function u(k,R){return k=jn(k,R),k.index=0,k.sibling=null,k}function d(k,R,P){return k.index=P,e?(P=k.alternate,P!==null?(P=P.index,P<R?(k.flags|=67108866,R):P):(k.flags|=67108866,R)):(k.flags|=1048576,R)}function m(k){return e&&k.alternate===null&&(k.flags|=67108866),k}function y(k,R,P,V){return R===null||R.tag!==6?(R=nu(P,k.mode,V),R.return=k,R):(R=u(R,P),R.return=k,R)}function E(k,R,P,V){var pe=P.type;return pe===ie?F(k,R,P.props.children,V,P.key):R!==null&&(R.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===U&&sa(pe)===R.type)?(R=u(R,P.props),oo(R,P),R.return=k,R):(R=Cs(P.type,P.key,P.props,null,k.mode,V),oo(R,P),R.return=k,R)}function H(k,R,P,V){return R===null||R.tag!==4||R.stateNode.containerInfo!==P.containerInfo||R.stateNode.implementation!==P.implementation?(R=iu(P,k.mode,V),R.return=k,R):(R=u(R,P.children||[]),R.return=k,R)}function F(k,R,P,V,pe){return R===null||R.tag!==7?(R=na(P,k.mode,V,pe),R.return=k,R):(R=u(R,P),R.return=k,R)}function $(k,R,P){if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return R=nu(""+R,k.mode,P),R.return=k,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case K:return P=Cs(R.type,R.key,R.props,null,k.mode,P),oo(P,R),P.return=k,P;case te:return R=iu(R,k.mode,P),R.return=k,R;case U:return R=sa(R),$(k,R,P)}if(ve(R)||Y(R))return R=na(R,k.mode,P,null),R.return=k,R;if(typeof R.then=="function")return $(k,ws(R),P);if(R.$$typeof===ue)return $(k,As(k,R),P);Rs(k,R)}return null}function L(k,R,P,V){var pe=R!==null?R.key:null;if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return pe!==null?null:y(k,R,""+P,V);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case K:return P.key===pe?E(k,R,P,V):null;case te:return P.key===pe?H(k,R,P,V):null;case U:return P=sa(P),L(k,R,P,V)}if(ve(P)||Y(P))return pe!==null?null:F(k,R,P,V,null);if(typeof P.then=="function")return L(k,R,ws(P),V);if(P.$$typeof===ue)return L(k,R,As(k,P),V);Rs(k,P)}return null}function q(k,R,P,V,pe){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return k=k.get(P)||null,y(R,k,""+V,pe);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case K:return k=k.get(V.key===null?P:V.key)||null,E(R,k,V,pe);case te:return k=k.get(V.key===null?P:V.key)||null,H(R,k,V,pe);case U:return V=sa(V),q(k,R,P,V,pe)}if(ve(V)||Y(V))return k=k.get(P)||null,F(R,k,V,pe,null);if(typeof V.then=="function")return q(k,R,P,ws(V),pe);if(V.$$typeof===ue)return q(k,R,P,As(R,V),pe);Rs(R,V)}return null}function ge(k,R,P,V){for(var pe=null,Ue=null,me=R,be=R=0,Me=null;me!==null&&be<P.length;be++){me.index>be?(Me=me,me=null):Me=me.sibling;var xe=L(k,me,P[be],V);if(xe===null){me===null&&(me=Me);break}e&&me&&xe.alternate===null&&n(k,me),R=d(xe,R,be),Ue===null?pe=xe:Ue.sibling=xe,Ue=xe,me=Me}if(be===P.length)return a(k,me),Ne&&Gn(k,be),pe;if(me===null){for(;be<P.length;be++)me=$(k,P[be],V),me!==null&&(R=d(me,R,be),Ue===null?pe=me:Ue.sibling=me,Ue=me);return Ne&&Gn(k,be),pe}for(me=o(me);be<P.length;be++)Me=q(me,k,be,P[be],V),Me!==null&&(e&&Me.alternate!==null&&me.delete(Me.key===null?be:Me.key),R=d(Me,R,be),Ue===null?pe=Me:Ue.sibling=Me,Ue=Me);return e&&me.forEach(function(Pi){return n(k,Pi)}),Ne&&Gn(k,be),pe}function Ce(k,R,P,V){if(P==null)throw Error(r(151));for(var pe=null,Ue=null,me=R,be=R=0,Me=null,xe=P.next();me!==null&&!xe.done;be++,xe=P.next()){me.index>be?(Me=me,me=null):Me=me.sibling;var Pi=L(k,me,xe.value,V);if(Pi===null){me===null&&(me=Me);break}e&&me&&Pi.alternate===null&&n(k,me),R=d(Pi,R,be),Ue===null?pe=Pi:Ue.sibling=Pi,Ue=Pi,me=Me}if(xe.done)return a(k,me),Ne&&Gn(k,be),pe;if(me===null){for(;!xe.done;be++,xe=P.next())xe=$(k,xe.value,V),xe!==null&&(R=d(xe,R,be),Ue===null?pe=xe:Ue.sibling=xe,Ue=xe);return Ne&&Gn(k,be),pe}for(me=o(me);!xe.done;be++,xe=P.next())xe=q(me,k,be,xe.value,V),xe!==null&&(e&&xe.alternate!==null&&me.delete(xe.key===null?be:xe.key),R=d(xe,R,be),Ue===null?pe=xe:Ue.sibling=xe,Ue=xe);return e&&me.forEach(function(p_){return n(k,p_)}),Ne&&Gn(k,be),pe}function Fe(k,R,P,V){if(typeof P=="object"&&P!==null&&P.type===ie&&P.key===null&&(P=P.props.children),typeof P=="object"&&P!==null){switch(P.$$typeof){case K:e:{for(var pe=P.key;R!==null;){if(R.key===pe){if(pe=P.type,pe===ie){if(R.tag===7){a(k,R.sibling),V=u(R,P.props.children),V.return=k,k=V;break e}}else if(R.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===U&&sa(pe)===R.type){a(k,R.sibling),V=u(R,P.props),oo(V,P),V.return=k,k=V;break e}a(k,R);break}else n(k,R);R=R.sibling}P.type===ie?(V=na(P.props.children,k.mode,V,P.key),V.return=k,k=V):(V=Cs(P.type,P.key,P.props,null,k.mode,V),oo(V,P),V.return=k,k=V)}return m(k);case te:e:{for(pe=P.key;R!==null;){if(R.key===pe)if(R.tag===4&&R.stateNode.containerInfo===P.containerInfo&&R.stateNode.implementation===P.implementation){a(k,R.sibling),V=u(R,P.children||[]),V.return=k,k=V;break e}else{a(k,R);break}else n(k,R);R=R.sibling}V=iu(P,k.mode,V),V.return=k,k=V}return m(k);case U:return P=sa(P),Fe(k,R,P,V)}if(ve(P))return ge(k,R,P,V);if(Y(P)){if(pe=Y(P),typeof pe!="function")throw Error(r(150));return P=pe.call(P),Ce(k,R,P,V)}if(typeof P.then=="function")return Fe(k,R,ws(P),V);if(P.$$typeof===ue)return Fe(k,R,As(k,P),V);Rs(k,P)}return typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint"?(P=""+P,R!==null&&R.tag===6?(a(k,R.sibling),V=u(R,P),V.return=k,k=V):(a(k,R),V=nu(P,k.mode,V),V.return=k,k=V),m(k)):a(k,R)}return function(k,R,P,V){try{ro=0;var pe=Fe(k,R,P,V);return Za=null,pe}catch(me){if(me===$a||me===_s)throw me;var Ue=$t(29,me,null,k.mode);return Ue.lanes=V,Ue.return=k,Ue}finally{}}}var la=hm(!0),fm=hm(!1),Ci=!1;function mu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function pu(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Si(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ti(e,n,a){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(He&2)!==0){var u=o.pending;return u===null?n.next=n:(n.next=u.next,u.next=n),o.pending=n,n=vs(e),Jg(e,null,a),n}return ys(e,o,n,a),vs(e)}function so(e,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194048)!==0)){var o=n.lanes;o&=e.pendingLanes,a|=o,n.lanes=a,ag(e,a)}}function yu(e,n){var a=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var u=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var m={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?u=d=m:d=d.next=m,a=a.next}while(a!==null);d===null?u=d=n:d=d.next=n}else u=d=n;a={baseState:o.baseState,firstBaseUpdate:u,lastBaseUpdate:d,shared:o.shared,callbacks:o.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=n:e.next=n,a.lastBaseUpdate=n}var vu=!1;function co(){if(vu){var e=Ja;if(e!==null)throw e}}function lo(e,n,a,o){vu=!1;var u=e.updateQueue;Ci=!1;var d=u.firstBaseUpdate,m=u.lastBaseUpdate,y=u.shared.pending;if(y!==null){u.shared.pending=null;var E=y,H=E.next;E.next=null,m===null?d=H:m.next=H,m=E;var F=e.alternate;F!==null&&(F=F.updateQueue,y=F.lastBaseUpdate,y!==m&&(y===null?F.firstBaseUpdate=H:y.next=H,F.lastBaseUpdate=E))}if(d!==null){var $=u.baseState;m=0,F=H=E=null,y=d;do{var L=y.lane&-536870913,q=L!==y.lane;if(q?(ke&L)===L:(o&L)===L){L!==0&&L===Xa&&(vu=!0),F!==null&&(F=F.next={lane:0,tag:y.tag,payload:y.payload,callback:null,next:null});e:{var ge=e,Ce=y;L=n;var Fe=a;switch(Ce.tag){case 1:if(ge=Ce.payload,typeof ge=="function"){$=ge.call(Fe,$,L);break e}$=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=Ce.payload,L=typeof ge=="function"?ge.call(Fe,$,L):ge,L==null)break e;$=T({},$,L);break e;case 2:Ci=!0}}L=y.callback,L!==null&&(e.flags|=64,q&&(e.flags|=8192),q=u.callbacks,q===null?u.callbacks=[L]:q.push(L))}else q={lane:L,tag:y.tag,payload:y.payload,callback:y.callback,next:null},F===null?(H=F=q,E=$):F=F.next=q,m|=L;if(y=y.next,y===null){if(y=u.shared.pending,y===null)break;q=y,y=q.next,q.next=null,u.lastBaseUpdate=q,u.shared.pending=null}}while(!0);F===null&&(E=$),u.baseState=E,u.firstBaseUpdate=H,u.lastBaseUpdate=F,d===null&&(u.shared.lanes=0),wi|=m,e.lanes=m,e.memoizedState=$}}function gm(e,n){if(typeof e!="function")throw Error(r(191,e));e.call(n)}function mm(e,n){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)gm(a[e],n)}var Wa=v(null),Is=v(0);function pm(e,n){e=ti,b(Is,e),b(Wa,n),ti=e|n.baseLanes}function Cu(){b(Is,ti),b(Wa,Wa.current)}function Su(){ti=Is.current,C(Wa),C(Is)}var Zt=v(null),pn=null;function Ai(e){var n=e.alternate;b(nt,nt.current&1),b(Zt,e),pn===null&&(n===null||Wa.current!==null||n.memoizedState!==null)&&(pn=e)}function Tu(e){b(nt,nt.current),b(Zt,e),pn===null&&(pn=e)}function ym(e){e.tag===22?(b(nt,nt.current),b(Zt,e),pn===null&&(pn=e)):Ei()}function Ei(){b(nt,nt.current),b(Zt,Zt.current)}function Wt(e){C(Zt),pn===e&&(pn=null),C(nt)}var nt=v(0);function Os(e){for(var n=e;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Rd(a)||Id(a)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Yn=0,_e=null,je=null,ct=null,ks=!1,er=!1,ua=!1,Ms=0,uo=0,tr=null,oE=0;function et(){throw Error(r(321))}function Au(e,n){if(n===null)return!1;for(var a=0;a<n.length&&a<e.length;a++)if(!Jt(e[a],n[a]))return!1;return!0}function Eu(e,n,a,o,u,d){return Yn=d,_e=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,D.H=e===null||e.memoizedState===null?ep:Lu,ua=!1,d=a(o,u),ua=!1,er&&(d=Cm(n,a,o,u)),vm(e),d}function vm(e){D.H=go;var n=je!==null&&je.next!==null;if(Yn=0,ct=je=_e=null,ks=!1,uo=0,tr=null,n)throw Error(r(300));e===null||lt||(e=e.dependencies,e!==null&&Ts(e)&&(lt=!0))}function Cm(e,n,a,o){_e=e;var u=0;do{if(er&&(tr=null),uo=0,er=!1,25<=u)throw Error(r(301));if(u+=1,ct=je=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}D.H=tp,d=n(a,o)}while(er);return d}function sE(){var e=D.H,n=e.useState()[0];return n=typeof n.then=="function"?ho(n):n,e=e.useState()[0],(je!==null?je.memoizedState:null)!==e&&(_e.flags|=1024),n}function _u(){var e=Ms!==0;return Ms=0,e}function bu(e,n,a){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~a}function wu(e){if(ks){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}ks=!1}Yn=0,ct=je=_e=null,er=!1,uo=Ms=0,tr=null}function Ut(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ct===null?_e.memoizedState=ct=e:ct=ct.next=e,ct}function it(){if(je===null){var e=_e.alternate;e=e!==null?e.memoizedState:null}else e=je.next;var n=ct===null?_e.memoizedState:ct.next;if(n!==null)ct=n,je=e;else{if(e===null)throw _e.alternate===null?Error(r(467)):Error(r(310));je=e,e={memoizedState:je.memoizedState,baseState:je.baseState,baseQueue:je.baseQueue,queue:je.queue,next:null},ct===null?_e.memoizedState=ct=e:ct=ct.next=e}return ct}function Ns(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ho(e){var n=uo;return uo+=1,tr===null&&(tr=[]),e=lm(tr,e,n),n=_e,(ct===null?n.memoizedState:ct.next)===null&&(n=n.alternate,D.H=n===null||n.memoizedState===null?ep:Lu),e}function Ds(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return ho(e);if(e.$$typeof===ue)return _t(e)}throw Error(r(438,String(e)))}function Ru(e){var n=null,a=_e.updateQueue;if(a!==null&&(n=a.memoCache),n==null){var o=_e.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(n={data:o.data.map(function(u){return u.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),a===null&&(a=Ns(),_e.updateQueue=a),a.memoCache=n,a=n.data[n.index],a===void 0)for(a=n.data[n.index]=Array(e),o=0;o<e;o++)a[o]=x;return n.index++,a}function Vn(e,n){return typeof n=="function"?n(e):n}function Us(e){var n=it();return Iu(n,je,e)}function Iu(e,n,a){var o=e.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=a;var u=e.baseQueue,d=o.pending;if(d!==null){if(u!==null){var m=u.next;u.next=d.next,d.next=m}n.baseQueue=u=d,o.pending=null}if(d=e.baseState,u===null)e.memoizedState=d;else{n=u.next;var y=m=null,E=null,H=n,F=!1;do{var $=H.lane&-536870913;if($!==H.lane?(ke&$)===$:(Yn&$)===$){var L=H.revertLane;if(L===0)E!==null&&(E=E.next={lane:0,revertLane:0,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),$===Xa&&(F=!0);else if((Yn&L)===L){H=H.next,L===Xa&&(F=!0);continue}else $={lane:0,revertLane:H.revertLane,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},E===null?(y=E=$,m=d):E=E.next=$,_e.lanes|=L,wi|=L;$=H.action,ua&&a(d,$),d=H.hasEagerState?H.eagerState:a(d,$)}else L={lane:$,revertLane:H.revertLane,gesture:H.gesture,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},E===null?(y=E=L,m=d):E=E.next=L,_e.lanes|=$,wi|=$;H=H.next}while(H!==null&&H!==n);if(E===null?m=d:E.next=y,!Jt(d,e.memoizedState)&&(lt=!0,F&&(a=Ja,a!==null)))throw a;e.memoizedState=d,e.baseState=m,e.baseQueue=E,o.lastRenderedState=d}return u===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function Ou(e){var n=it(),a=n.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=e;var o=a.dispatch,u=a.pending,d=n.memoizedState;if(u!==null){a.pending=null;var m=u=u.next;do d=e(d,m.action),m=m.next;while(m!==u);Jt(d,n.memoizedState)||(lt=!0),n.memoizedState=d,n.baseQueue===null&&(n.baseState=d),a.lastRenderedState=d}return[d,o]}function Sm(e,n,a){var o=_e,u=it(),d=Ne;if(d){if(a===void 0)throw Error(r(407));a=a()}else a=n();var m=!Jt((je||u).memoizedState,a);if(m&&(u.memoizedState=a,lt=!0),u=u.queue,Nu(Em.bind(null,o,u,e),[e]),u.getSnapshot!==n||m||ct!==null&&ct.memoizedState.tag&1){if(o.flags|=2048,nr(9,{destroy:void 0},Am.bind(null,o,u,a,n),null),Ve===null)throw Error(r(349));d||(Yn&127)!==0||Tm(o,n,a)}return a}function Tm(e,n,a){e.flags|=16384,e={getSnapshot:n,value:a},n=_e.updateQueue,n===null?(n=Ns(),_e.updateQueue=n,n.stores=[e]):(a=n.stores,a===null?n.stores=[e]:a.push(e))}function Am(e,n,a,o){n.value=a,n.getSnapshot=o,_m(n)&&bm(e)}function Em(e,n,a){return a(function(){_m(n)&&bm(e)})}function _m(e){var n=e.getSnapshot;e=e.value;try{var a=n();return!Jt(e,a)}catch{return!0}}function bm(e){var n=ta(e,2);n!==null&&Ft(n,e,2)}function ku(e){var n=Ut();if(typeof e=="function"){var a=e;if(e=a(),ua){vt(!0);try{a()}finally{vt(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vn,lastRenderedState:e},n}function wm(e,n,a,o){return e.baseState=a,Iu(e,je,typeof o=="function"?o:Vn)}function cE(e,n,a,o,u){if(Hs(e))throw Error(r(485));if(e=n.action,e!==null){var d={payload:u,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(m){d.listeners.push(m)}};D.T!==null?a(!0):d.isTransition=!1,o(d),a=n.pending,a===null?(d.next=n.pending=d,Rm(n,d)):(d.next=a.next,n.pending=a.next=d)}}function Rm(e,n){var a=n.action,o=n.payload,u=e.state;if(n.isTransition){var d=D.T,m={};D.T=m;try{var y=a(u,o),E=D.S;E!==null&&E(m,y),Im(e,n,y)}catch(H){Mu(e,n,H)}finally{d!==null&&m.types!==null&&(d.types=m.types),D.T=d}}else try{d=a(u,o),Im(e,n,d)}catch(H){Mu(e,n,H)}}function Im(e,n,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){Om(e,n,o)},function(o){return Mu(e,n,o)}):Om(e,n,a)}function Om(e,n,a){n.status="fulfilled",n.value=a,km(n),e.state=a,n=e.pending,n!==null&&(a=n.next,a===n?e.pending=null:(a=a.next,n.next=a,Rm(e,a)))}function Mu(e,n,a){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do n.status="rejected",n.reason=a,km(n),n=n.next;while(n!==o)}e.action=null}function km(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function Mm(e,n){return n}function Nm(e,n){if(Ne){var a=Ve.formState;if(a!==null){e:{var o=_e;if(Ne){if(Je){t:{for(var u=Je,d=mn;u.nodeType!==8;){if(!d){u=null;break t}if(u=yn(u.nextSibling),u===null){u=null;break t}}d=u.data,u=d==="F!"||d==="F"?u:null}if(u){Je=yn(u.nextSibling),o=u.data==="F!";break e}}yi(o)}o=!1}o&&(n=a[0])}}return a=Ut(),a.memoizedState=a.baseState=n,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mm,lastRenderedState:n},a.queue=o,a=$m.bind(null,_e,o),o.dispatch=a,o=ku(!1),d=Hu.bind(null,_e,!1,o.queue),o=Ut(),u={state:n,dispatch:null,action:e,pending:null},o.queue=u,a=cE.bind(null,_e,u,d,a),u.dispatch=a,o.memoizedState=e,[n,a,!1]}function Dm(e){var n=it();return Um(n,je,e)}function Um(e,n,a){if(n=Iu(e,n,Mm)[0],e=Us(Vn)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var o=ho(n)}catch(m){throw m===$a?_s:m}else o=n;n=it();var u=n.queue,d=u.dispatch;return a!==n.memoizedState&&(_e.flags|=2048,nr(9,{destroy:void 0},lE.bind(null,u,a),null)),[o,d,e]}function lE(e,n){e.action=n}function xm(e){var n=it(),a=je;if(a!==null)return Um(n,a,e);it(),n=n.memoizedState,a=it();var o=a.queue.dispatch;return a.memoizedState=e,[n,o,!1]}function nr(e,n,a,o){return e={tag:e,create:a,deps:o,inst:n,next:null},n=_e.updateQueue,n===null&&(n=Ns(),_e.updateQueue=n),a=n.lastEffect,a===null?n.lastEffect=e.next=e:(o=a.next,a.next=e,e.next=o,n.lastEffect=e),e}function Pm(){return it().memoizedState}function xs(e,n,a,o){var u=Ut();_e.flags|=e,u.memoizedState=nr(1|n,{destroy:void 0},a,o===void 0?null:o)}function Ps(e,n,a,o){var u=it();o=o===void 0?null:o;var d=u.memoizedState.inst;je!==null&&o!==null&&Au(o,je.memoizedState.deps)?u.memoizedState=nr(n,d,a,o):(_e.flags|=e,u.memoizedState=nr(1|n,d,a,o))}function Hm(e,n){xs(8390656,8,e,n)}function Nu(e,n){Ps(2048,8,e,n)}function uE(e){_e.flags|=4;var n=_e.updateQueue;if(n===null)n=Ns(),_e.updateQueue=n,n.events=[e];else{var a=n.events;a===null?n.events=[e]:a.push(e)}}function Lm(e){var n=it().memoizedState;return uE({ref:n,nextImpl:e}),function(){if((He&2)!==0)throw Error(r(440));return n.impl.apply(void 0,arguments)}}function zm(e,n){return Ps(4,2,e,n)}function Bm(e,n){return Ps(4,4,e,n)}function Km(e,n){if(typeof n=="function"){e=e();var a=n(e);return function(){typeof a=="function"?a():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function qm(e,n,a){a=a!=null?a.concat([e]):null,Ps(4,4,Km.bind(null,n,e),a)}function Du(){}function jm(e,n){var a=it();n=n===void 0?null:n;var o=a.memoizedState;return n!==null&&Au(n,o[1])?o[0]:(a.memoizedState=[e,n],e)}function Gm(e,n){var a=it();n=n===void 0?null:n;var o=a.memoizedState;if(n!==null&&Au(n,o[1]))return o[0];if(o=e(),ua){vt(!0);try{e()}finally{vt(!1)}}return a.memoizedState=[o,n],o}function Uu(e,n,a){return a===void 0||(Yn&1073741824)!==0&&(ke&261930)===0?e.memoizedState=n:(e.memoizedState=a,e=Fp(),_e.lanes|=e,wi|=e,a)}function Fm(e,n,a,o){return Jt(a,n)?a:Wa.current!==null?(e=Uu(e,a,o),Jt(e,n)||(lt=!0),e):(Yn&42)===0||(Yn&1073741824)!==0&&(ke&261930)===0?(lt=!0,e.memoizedState=a):(e=Fp(),_e.lanes|=e,wi|=e,n)}function Qm(e,n,a,o,u){var d=X.p;X.p=d!==0&&8>d?d:8;var m=D.T,y={};D.T=y,Hu(e,!1,n,a);try{var E=u(),H=D.S;if(H!==null&&H(y,E),E!==null&&typeof E=="object"&&typeof E.then=="function"){var F=rE(E,o);fo(e,n,F,nn(e))}else fo(e,n,o,nn(e))}catch($){fo(e,n,{then:function(){},status:"rejected",reason:$},nn())}finally{X.p=d,m!==null&&y.types!==null&&(m.types=y.types),D.T=m}}function dE(){}function xu(e,n,a,o){if(e.tag!==5)throw Error(r(476));var u=Ym(e).queue;Qm(e,u,n,M,a===null?dE:function(){return Vm(e),a(o)})}function Ym(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:M,baseState:M,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vn,lastRenderedState:M},next:null};var a={};return n.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vn,lastRenderedState:a},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function Vm(e){var n=Ym(e);n.next===null&&(n=e.alternate.memoizedState),fo(e,n.next.queue,{},nn())}function Pu(){return _t(ko)}function Xm(){return it().memoizedState}function Jm(){return it().memoizedState}function hE(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var a=nn();e=Si(a);var o=Ti(n,e,a);o!==null&&(Ft(o,n,a),so(o,n,a)),n={cache:du()},e.payload=n;return}n=n.return}}function fE(e,n,a){var o=nn();a={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Hs(e)?Zm(n,a):(a=eu(e,n,a,o),a!==null&&(Ft(a,e,o),Wm(a,n,o)))}function $m(e,n,a){var o=nn();fo(e,n,a,o)}function fo(e,n,a,o){var u={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Hs(e))Zm(n,u);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=n.lastRenderedReducer,d!==null))try{var m=n.lastRenderedState,y=d(m,a);if(u.hasEagerState=!0,u.eagerState=y,Jt(y,m))return ys(e,n,u,0),Ve===null&&ps(),!1}catch{}finally{}if(a=eu(e,n,u,o),a!==null)return Ft(a,e,o),Wm(a,n,o),!0}return!1}function Hu(e,n,a,o){if(o={lane:2,revertLane:md(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Hs(e)){if(n)throw Error(r(479))}else n=eu(e,a,o,2),n!==null&&Ft(n,e,2)}function Hs(e){var n=e.alternate;return e===_e||n!==null&&n===_e}function Zm(e,n){er=ks=!0;var a=e.pending;a===null?n.next=n:(n.next=a.next,a.next=n),e.pending=n}function Wm(e,n,a){if((a&4194048)!==0){var o=n.lanes;o&=e.pendingLanes,a|=o,n.lanes=a,ag(e,a)}}var go={readContext:_t,use:Ds,useCallback:et,useContext:et,useEffect:et,useImperativeHandle:et,useLayoutEffect:et,useInsertionEffect:et,useMemo:et,useReducer:et,useRef:et,useState:et,useDebugValue:et,useDeferredValue:et,useTransition:et,useSyncExternalStore:et,useId:et,useHostTransitionStatus:et,useFormState:et,useActionState:et,useOptimistic:et,useMemoCache:et,useCacheRefresh:et};go.useEffectEvent=et;var ep={readContext:_t,use:Ds,useCallback:function(e,n){return Ut().memoizedState=[e,n===void 0?null:n],e},useContext:_t,useEffect:Hm,useImperativeHandle:function(e,n,a){a=a!=null?a.concat([e]):null,xs(4194308,4,Km.bind(null,n,e),a)},useLayoutEffect:function(e,n){return xs(4194308,4,e,n)},useInsertionEffect:function(e,n){xs(4,2,e,n)},useMemo:function(e,n){var a=Ut();n=n===void 0?null:n;var o=e();if(ua){vt(!0);try{e()}finally{vt(!1)}}return a.memoizedState=[o,n],o},useReducer:function(e,n,a){var o=Ut();if(a!==void 0){var u=a(n);if(ua){vt(!0);try{a(n)}finally{vt(!1)}}}else u=n;return o.memoizedState=o.baseState=u,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:u},o.queue=e,e=e.dispatch=fE.bind(null,_e,e),[o.memoizedState,e]},useRef:function(e){var n=Ut();return e={current:e},n.memoizedState=e},useState:function(e){e=ku(e);var n=e.queue,a=$m.bind(null,_e,n);return n.dispatch=a,[e.memoizedState,a]},useDebugValue:Du,useDeferredValue:function(e,n){var a=Ut();return Uu(a,e,n)},useTransition:function(){var e=ku(!1);return e=Qm.bind(null,_e,e.queue,!0,!1),Ut().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,a){var o=_e,u=Ut();if(Ne){if(a===void 0)throw Error(r(407));a=a()}else{if(a=n(),Ve===null)throw Error(r(349));(ke&127)!==0||Tm(o,n,a)}u.memoizedState=a;var d={value:a,getSnapshot:n};return u.queue=d,Hm(Em.bind(null,o,d,e),[e]),o.flags|=2048,nr(9,{destroy:void 0},Am.bind(null,o,d,a,n),null),a},useId:function(){var e=Ut(),n=Ve.identifierPrefix;if(Ne){var a=Mn,o=kn;a=(o&~(1<<32-gt(o)-1)).toString(32)+a,n="_"+n+"R_"+a,a=Ms++,0<a&&(n+="H"+a.toString(32)),n+="_"}else a=oE++,n="_"+n+"r_"+a.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:Pu,useFormState:Nm,useActionState:Nm,useOptimistic:function(e){var n=Ut();n.memoizedState=n.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=a,n=Hu.bind(null,_e,!0,a),a.dispatch=n,[e,n]},useMemoCache:Ru,useCacheRefresh:function(){return Ut().memoizedState=hE.bind(null,_e)},useEffectEvent:function(e){var n=Ut(),a={impl:e};return n.memoizedState=a,function(){if((He&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},Lu={readContext:_t,use:Ds,useCallback:jm,useContext:_t,useEffect:Nu,useImperativeHandle:qm,useInsertionEffect:zm,useLayoutEffect:Bm,useMemo:Gm,useReducer:Us,useRef:Pm,useState:function(){return Us(Vn)},useDebugValue:Du,useDeferredValue:function(e,n){var a=it();return Fm(a,je.memoizedState,e,n)},useTransition:function(){var e=Us(Vn)[0],n=it().memoizedState;return[typeof e=="boolean"?e:ho(e),n]},useSyncExternalStore:Sm,useId:Xm,useHostTransitionStatus:Pu,useFormState:Dm,useActionState:Dm,useOptimistic:function(e,n){var a=it();return wm(a,je,e,n)},useMemoCache:Ru,useCacheRefresh:Jm};Lu.useEffectEvent=Lm;var tp={readContext:_t,use:Ds,useCallback:jm,useContext:_t,useEffect:Nu,useImperativeHandle:qm,useInsertionEffect:zm,useLayoutEffect:Bm,useMemo:Gm,useReducer:Ou,useRef:Pm,useState:function(){return Ou(Vn)},useDebugValue:Du,useDeferredValue:function(e,n){var a=it();return je===null?Uu(a,e,n):Fm(a,je.memoizedState,e,n)},useTransition:function(){var e=Ou(Vn)[0],n=it().memoizedState;return[typeof e=="boolean"?e:ho(e),n]},useSyncExternalStore:Sm,useId:Xm,useHostTransitionStatus:Pu,useFormState:xm,useActionState:xm,useOptimistic:function(e,n){var a=it();return je!==null?wm(a,je,e,n):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Ru,useCacheRefresh:Jm};tp.useEffectEvent=Lm;function zu(e,n,a,o){n=e.memoizedState,a=a(o,n),a=a==null?n:T({},n,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Bu={enqueueSetState:function(e,n,a){e=e._reactInternals;var o=nn(),u=Si(o);u.payload=n,a!=null&&(u.callback=a),n=Ti(e,u,o),n!==null&&(Ft(n,e,o),so(n,e,o))},enqueueReplaceState:function(e,n,a){e=e._reactInternals;var o=nn(),u=Si(o);u.tag=1,u.payload=n,a!=null&&(u.callback=a),n=Ti(e,u,o),n!==null&&(Ft(n,e,o),so(n,e,o))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var a=nn(),o=Si(a);o.tag=2,n!=null&&(o.callback=n),n=Ti(e,o,a),n!==null&&(Ft(n,e,a),so(n,e,a))}};function np(e,n,a,o,u,d,m){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,d,m):n.prototype&&n.prototype.isPureReactComponent?!Wr(a,o)||!Wr(u,d):!0}function ip(e,n,a,o){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,o),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,o),n.state!==e&&Bu.enqueueReplaceState(n,n.state,null)}function da(e,n){var a=n;if("ref"in n){a={};for(var o in n)o!=="ref"&&(a[o]=n[o])}if(e=e.defaultProps){a===n&&(a=T({},a));for(var u in e)a[u]===void 0&&(a[u]=e[u])}return a}function ap(e){ms(e)}function rp(e){console.error(e)}function op(e){ms(e)}function Ls(e,n){try{var a=e.onUncaughtError;a(n.value,{componentStack:n.stack})}catch(o){setTimeout(function(){throw o})}}function sp(e,n,a){try{var o=e.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(u){setTimeout(function(){throw u})}}function Ku(e,n,a){return a=Si(a),a.tag=3,a.payload={element:null},a.callback=function(){Ls(e,n)},a}function cp(e){return e=Si(e),e.tag=3,e}function lp(e,n,a,o){var u=a.type.getDerivedStateFromError;if(typeof u=="function"){var d=o.value;e.payload=function(){return u(d)},e.callback=function(){sp(n,a,o)}}var m=a.stateNode;m!==null&&typeof m.componentDidCatch=="function"&&(e.callback=function(){sp(n,a,o),typeof u!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var y=o.stack;this.componentDidCatch(o.value,{componentStack:y!==null?y:""})})}function gE(e,n,a,o,u){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(n=a.alternate,n!==null&&Va(n,a,u,!0),a=Zt.current,a!==null){switch(a.tag){case 31:case 13:return pn===null?Js():a.alternate===null&&tt===0&&(tt=3),a.flags&=-257,a.flags|=65536,a.lanes=u,o===bs?a.flags|=16384:(n=a.updateQueue,n===null?a.updateQueue=new Set([o]):n.add(o),hd(e,o,u)),!1;case 22:return a.flags|=65536,o===bs?a.flags|=16384:(n=a.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=n):(a=n.retryQueue,a===null?n.retryQueue=new Set([o]):a.add(o)),hd(e,o,u)),!1}throw Error(r(435,a.tag))}return hd(e,o,u),Js(),!1}if(Ne)return n=Zt.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=u,o!==ou&&(e=Error(r(422),{cause:o}),no(hn(e,a)))):(o!==ou&&(n=Error(r(423),{cause:o}),no(hn(n,a))),e=e.current.alternate,e.flags|=65536,u&=-u,e.lanes|=u,o=hn(o,a),u=Ku(e.stateNode,o,u),yu(e,u),tt!==4&&(tt=2)),!1;var d=Error(r(520),{cause:o});if(d=hn(d,a),Ao===null?Ao=[d]:Ao.push(d),tt!==4&&(tt=2),n===null)return!0;o=hn(o,a),a=n;do{switch(a.tag){case 3:return a.flags|=65536,e=u&-u,a.lanes|=e,e=Ku(a.stateNode,o,e),yu(a,e),!1;case 1:if(n=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Ri===null||!Ri.has(d))))return a.flags|=65536,u&=-u,a.lanes|=u,u=cp(u),lp(u,e,a,o),yu(a,u),!1}a=a.return}while(a!==null);return!1}var qu=Error(r(461)),lt=!1;function bt(e,n,a,o){n.child=e===null?fm(n,null,a,o):la(n,e.child,a,o)}function up(e,n,a,o,u){a=a.render;var d=n.ref;if("ref"in o){var m={};for(var y in o)y!=="ref"&&(m[y]=o[y])}else m=o;return ra(n),o=Eu(e,n,a,m,d,u),y=_u(),e!==null&&!lt?(bu(e,n,u),Xn(e,n,u)):(Ne&&y&&au(n),n.flags|=1,bt(e,n,o,u),n.child)}function dp(e,n,a,o,u){if(e===null){var d=a.type;return typeof d=="function"&&!tu(d)&&d.defaultProps===void 0&&a.compare===null?(n.tag=15,n.type=d,hp(e,n,d,o,u)):(e=Cs(a.type,null,o,n,n.mode,u),e.ref=n.ref,e.return=n,n.child=e)}if(d=e.child,!Ju(e,u)){var m=d.memoizedProps;if(a=a.compare,a=a!==null?a:Wr,a(m,o)&&e.ref===n.ref)return Xn(e,n,u)}return n.flags|=1,e=jn(d,o),e.ref=n.ref,e.return=n,n.child=e}function hp(e,n,a,o,u){if(e!==null){var d=e.memoizedProps;if(Wr(d,o)&&e.ref===n.ref)if(lt=!1,n.pendingProps=o=d,Ju(e,u))(e.flags&131072)!==0&&(lt=!0);else return n.lanes=e.lanes,Xn(e,n,u)}return ju(e,n,a,o,u)}function fp(e,n,a,o){var u=o.children,d=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((n.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,e!==null){for(o=n.child=e.child,u=0;o!==null;)u=u|o.lanes|o.childLanes,o=o.sibling;o=u&~d}else o=0,n.child=null;return gp(e,n,d,a,o)}if((a&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&Es(n,d!==null?d.cachePool:null),d!==null?pm(n,d):Cu(),ym(n);else return o=n.lanes=536870912,gp(e,n,d!==null?d.baseLanes|a:a,a,o)}else d!==null?(Es(n,d.cachePool),pm(n,d),Ei(),n.memoizedState=null):(e!==null&&Es(n,null),Cu(),Ei());return bt(e,n,u,a),n.child}function mo(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function gp(e,n,a,o,u){var d=fu();return d=d===null?null:{parent:st._currentValue,pool:d},n.memoizedState={baseLanes:a,cachePool:d},e!==null&&Es(n,null),Cu(),ym(n),e!==null&&Va(e,n,o,!0),n.childLanes=u,null}function zs(e,n){return n=Ks({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function mp(e,n,a){return la(n,e.child,null,a),e=zs(n,n.pendingProps),e.flags|=2,Wt(n),n.memoizedState=null,e}function mE(e,n,a){var o=n.pendingProps,u=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(Ne){if(o.mode==="hidden")return e=zs(n,o),n.lanes=536870912,mo(null,e);if(Tu(n),(e=Je)?(e=Ry(e,mn),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:mi!==null?{id:kn,overflow:Mn}:null,retryLane:536870912,hydrationErrors:null},a=Zg(e),a.return=n,n.child=a,Et=n,Je=null)):e=null,e===null)throw yi(n);return n.lanes=536870912,null}return zs(n,o)}var d=e.memoizedState;if(d!==null){var m=d.dehydrated;if(Tu(n),u)if(n.flags&256)n.flags&=-257,n=mp(e,n,a);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(r(558));else if(lt||Va(e,n,a,!1),u=(a&e.childLanes)!==0,lt||u){if(o=Ve,o!==null&&(m=rg(o,a),m!==0&&m!==d.retryLane))throw d.retryLane=m,ta(e,m),Ft(o,e,m),qu;Js(),n=mp(e,n,a)}else e=d.treeContext,Je=yn(m.nextSibling),Et=n,Ne=!0,pi=null,mn=!1,e!==null&&tm(n,e),n=zs(n,o),n.flags|=4096;return n}return e=jn(e.child,{mode:o.mode,children:o.children}),e.ref=n.ref,n.child=e,e.return=n,e}function Bs(e,n){var a=n.ref;if(a===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(e===null||e.ref!==a)&&(n.flags|=4194816)}}function ju(e,n,a,o,u){return ra(n),a=Eu(e,n,a,o,void 0,u),o=_u(),e!==null&&!lt?(bu(e,n,u),Xn(e,n,u)):(Ne&&o&&au(n),n.flags|=1,bt(e,n,a,u),n.child)}function pp(e,n,a,o,u,d){return ra(n),n.updateQueue=null,a=Cm(n,o,a,u),vm(e),o=_u(),e!==null&&!lt?(bu(e,n,d),Xn(e,n,d)):(Ne&&o&&au(n),n.flags|=1,bt(e,n,a,d),n.child)}function yp(e,n,a,o,u){if(ra(n),n.stateNode===null){var d=Ga,m=a.contextType;typeof m=="object"&&m!==null&&(d=_t(m)),d=new a(o,d),n.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Bu,n.stateNode=d,d._reactInternals=n,d=n.stateNode,d.props=o,d.state=n.memoizedState,d.refs={},mu(n),m=a.contextType,d.context=typeof m=="object"&&m!==null?_t(m):Ga,d.state=n.memoizedState,m=a.getDerivedStateFromProps,typeof m=="function"&&(zu(n,a,m,o),d.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(m=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),m!==d.state&&Bu.enqueueReplaceState(d,d.state,null),lo(n,o,d,u),co(),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308),o=!0}else if(e===null){d=n.stateNode;var y=n.memoizedProps,E=da(a,y);d.props=E;var H=d.context,F=a.contextType;m=Ga,typeof F=="object"&&F!==null&&(m=_t(F));var $=a.getDerivedStateFromProps;F=typeof $=="function"||typeof d.getSnapshotBeforeUpdate=="function",y=n.pendingProps!==y,F||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(y||H!==m)&&ip(n,d,o,m),Ci=!1;var L=n.memoizedState;d.state=L,lo(n,o,d,u),co(),H=n.memoizedState,y||L!==H||Ci?(typeof $=="function"&&(zu(n,a,$,o),H=n.memoizedState),(E=Ci||np(n,a,E,o,L,H,m))?(F||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(n.flags|=4194308)):(typeof d.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=o,n.memoizedState=H),d.props=o,d.state=H,d.context=m,o=E):(typeof d.componentDidMount=="function"&&(n.flags|=4194308),o=!1)}else{d=n.stateNode,pu(e,n),m=n.memoizedProps,F=da(a,m),d.props=F,$=n.pendingProps,L=d.context,H=a.contextType,E=Ga,typeof H=="object"&&H!==null&&(E=_t(H)),y=a.getDerivedStateFromProps,(H=typeof y=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(m!==$||L!==E)&&ip(n,d,o,E),Ci=!1,L=n.memoizedState,d.state=L,lo(n,o,d,u),co();var q=n.memoizedState;m!==$||L!==q||Ci||e!==null&&e.dependencies!==null&&Ts(e.dependencies)?(typeof y=="function"&&(zu(n,a,y,o),q=n.memoizedState),(F=Ci||np(n,a,F,o,L,q,E)||e!==null&&e.dependencies!==null&&Ts(e.dependencies))?(H||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(o,q,E),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(o,q,E)),typeof d.componentDidUpdate=="function"&&(n.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof d.componentDidUpdate!="function"||m===e.memoizedProps&&L===e.memoizedState||(n.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&L===e.memoizedState||(n.flags|=1024),n.memoizedProps=o,n.memoizedState=q),d.props=o,d.state=q,d.context=E,o=F):(typeof d.componentDidUpdate!="function"||m===e.memoizedProps&&L===e.memoizedState||(n.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&L===e.memoizedState||(n.flags|=1024),o=!1)}return d=o,Bs(e,n),o=(n.flags&128)!==0,d||o?(d=n.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:d.render(),n.flags|=1,e!==null&&o?(n.child=la(n,e.child,null,u),n.child=la(n,null,a,u)):bt(e,n,a,u),n.memoizedState=d.state,e=n.child):e=Xn(e,n,u),e}function vp(e,n,a,o){return ia(),n.flags|=256,bt(e,n,a,o),n.child}var Gu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Fu(e){return{baseLanes:e,cachePool:sm()}}function Qu(e,n,a){return e=e!==null?e.childLanes&~a:0,n&&(e|=tn),e}function Cp(e,n,a){var o=n.pendingProps,u=!1,d=(n.flags&128)!==0,m;if((m=d)||(m=e!==null&&e.memoizedState===null?!1:(nt.current&2)!==0),m&&(u=!0,n.flags&=-129),m=(n.flags&32)!==0,n.flags&=-33,e===null){if(Ne){if(u?Ai(n):Ei(),(e=Je)?(e=Ry(e,mn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:mi!==null?{id:kn,overflow:Mn}:null,retryLane:536870912,hydrationErrors:null},a=Zg(e),a.return=n,n.child=a,Et=n,Je=null)):e=null,e===null)throw yi(n);return Id(e)?n.lanes=32:n.lanes=536870912,null}var y=o.children;return o=o.fallback,u?(Ei(),u=n.mode,y=Ks({mode:"hidden",children:y},u),o=na(o,u,a,null),y.return=n,o.return=n,y.sibling=o,n.child=y,o=n.child,o.memoizedState=Fu(a),o.childLanes=Qu(e,m,a),n.memoizedState=Gu,mo(null,o)):(Ai(n),Yu(n,y))}var E=e.memoizedState;if(E!==null&&(y=E.dehydrated,y!==null)){if(d)n.flags&256?(Ai(n),n.flags&=-257,n=Vu(e,n,a)):n.memoizedState!==null?(Ei(),n.child=e.child,n.flags|=128,n=null):(Ei(),y=o.fallback,u=n.mode,o=Ks({mode:"visible",children:o.children},u),y=na(y,u,a,null),y.flags|=2,o.return=n,y.return=n,o.sibling=y,n.child=o,la(n,e.child,null,a),o=n.child,o.memoizedState=Fu(a),o.childLanes=Qu(e,m,a),n.memoizedState=Gu,n=mo(null,o));else if(Ai(n),Id(y)){if(m=y.nextSibling&&y.nextSibling.dataset,m)var H=m.dgst;m=H,o=Error(r(419)),o.stack="",o.digest=m,no({value:o,source:null,stack:null}),n=Vu(e,n,a)}else if(lt||Va(e,n,a,!1),m=(a&e.childLanes)!==0,lt||m){if(m=Ve,m!==null&&(o=rg(m,a),o!==0&&o!==E.retryLane))throw E.retryLane=o,ta(e,o),Ft(m,e,o),qu;Rd(y)||Js(),n=Vu(e,n,a)}else Rd(y)?(n.flags|=192,n.child=e.child,n=null):(e=E.treeContext,Je=yn(y.nextSibling),Et=n,Ne=!0,pi=null,mn=!1,e!==null&&tm(n,e),n=Yu(n,o.children),n.flags|=4096);return n}return u?(Ei(),y=o.fallback,u=n.mode,E=e.child,H=E.sibling,o=jn(E,{mode:"hidden",children:o.children}),o.subtreeFlags=E.subtreeFlags&65011712,H!==null?y=jn(H,y):(y=na(y,u,a,null),y.flags|=2),y.return=n,o.return=n,o.sibling=y,n.child=o,mo(null,o),o=n.child,y=e.child.memoizedState,y===null?y=Fu(a):(u=y.cachePool,u!==null?(E=st._currentValue,u=u.parent!==E?{parent:E,pool:E}:u):u=sm(),y={baseLanes:y.baseLanes|a,cachePool:u}),o.memoizedState=y,o.childLanes=Qu(e,m,a),n.memoizedState=Gu,mo(e.child,o)):(Ai(n),a=e.child,e=a.sibling,a=jn(a,{mode:"visible",children:o.children}),a.return=n,a.sibling=null,e!==null&&(m=n.deletions,m===null?(n.deletions=[e],n.flags|=16):m.push(e)),n.child=a,n.memoizedState=null,a)}function Yu(e,n){return n=Ks({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function Ks(e,n){return e=$t(22,e,null,n),e.lanes=0,e}function Vu(e,n,a){return la(n,e.child,null,a),e=Yu(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function Sp(e,n,a){e.lanes|=n;var o=e.alternate;o!==null&&(o.lanes|=n),lu(e.return,n,a)}function Xu(e,n,a,o,u,d){var m=e.memoizedState;m===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:u,treeForkCount:d}:(m.isBackwards=n,m.rendering=null,m.renderingStartTime=0,m.last=o,m.tail=a,m.tailMode=u,m.treeForkCount=d)}function Tp(e,n,a){var o=n.pendingProps,u=o.revealOrder,d=o.tail;o=o.children;var m=nt.current,y=(m&2)!==0;if(y?(m=m&1|2,n.flags|=128):m&=1,b(nt,m),bt(e,n,o,a),o=Ne?to:0,!y&&e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Sp(e,a,n);else if(e.tag===19)Sp(e,a,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(u){case"forwards":for(a=n.child,u=null;a!==null;)e=a.alternate,e!==null&&Os(e)===null&&(u=a),a=a.sibling;a=u,a===null?(u=n.child,n.child=null):(u=a.sibling,a.sibling=null),Xu(n,!1,u,a,d,o);break;case"backwards":case"unstable_legacy-backwards":for(a=null,u=n.child,n.child=null;u!==null;){if(e=u.alternate,e!==null&&Os(e)===null){n.child=u;break}e=u.sibling,u.sibling=a,a=u,u=e}Xu(n,!0,a,null,d,o);break;case"together":Xu(n,!1,null,null,void 0,o);break;default:n.memoizedState=null}return n.child}function Xn(e,n,a){if(e!==null&&(n.dependencies=e.dependencies),wi|=n.lanes,(a&n.childLanes)===0)if(e!==null){if(Va(e,n,a,!1),(a&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(r(153));if(n.child!==null){for(e=n.child,a=jn(e,e.pendingProps),n.child=a,a.return=n;e.sibling!==null;)e=e.sibling,a=a.sibling=jn(e,e.pendingProps),a.return=n;a.sibling=null}return n.child}function Ju(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&Ts(e)))}function pE(e,n,a){switch(n.tag){case 3:Te(n,n.stateNode.containerInfo),vi(n,st,e.memoizedState.cache),ia();break;case 27:case 5:qe(n);break;case 4:Te(n,n.stateNode.containerInfo);break;case 10:vi(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Tu(n),null;break;case 13:var o=n.memoizedState;if(o!==null)return o.dehydrated!==null?(Ai(n),n.flags|=128,null):(a&n.child.childLanes)!==0?Cp(e,n,a):(Ai(n),e=Xn(e,n,a),e!==null?e.sibling:null);Ai(n);break;case 19:var u=(e.flags&128)!==0;if(o=(a&n.childLanes)!==0,o||(Va(e,n,a,!1),o=(a&n.childLanes)!==0),u){if(o)return Tp(e,n,a);n.flags|=128}if(u=n.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),b(nt,nt.current),o)break;return null;case 22:return n.lanes=0,fp(e,n,a,n.pendingProps);case 24:vi(n,st,e.memoizedState.cache)}return Xn(e,n,a)}function Ap(e,n,a){if(e!==null)if(e.memoizedProps!==n.pendingProps)lt=!0;else{if(!Ju(e,a)&&(n.flags&128)===0)return lt=!1,pE(e,n,a);lt=(e.flags&131072)!==0}else lt=!1,Ne&&(n.flags&1048576)!==0&&em(n,to,n.index);switch(n.lanes=0,n.tag){case 16:e:{var o=n.pendingProps;if(e=sa(n.elementType),n.type=e,typeof e=="function")tu(e)?(o=da(e,o),n.tag=1,n=yp(null,n,e,o,a)):(n.tag=0,n=ju(null,n,e,o,a));else{if(e!=null){var u=e.$$typeof;if(u===G){n.tag=11,n=up(null,n,e,o,a);break e}else if(u===ee){n.tag=14,n=dp(null,n,e,o,a);break e}}throw n=fe(e)||e,Error(r(306,n,""))}}return n;case 0:return ju(e,n,n.type,n.pendingProps,a);case 1:return o=n.type,u=da(o,n.pendingProps),yp(e,n,o,u,a);case 3:e:{if(Te(n,n.stateNode.containerInfo),e===null)throw Error(r(387));o=n.pendingProps;var d=n.memoizedState;u=d.element,pu(e,n),lo(n,o,null,a);var m=n.memoizedState;if(o=m.cache,vi(n,st,o),o!==d.cache&&uu(n,[st],a,!0),co(),o=m.element,d.isDehydrated)if(d={element:o,isDehydrated:!1,cache:m.cache},n.updateQueue.baseState=d,n.memoizedState=d,n.flags&256){n=vp(e,n,o,a);break e}else if(o!==u){u=hn(Error(r(424)),n),no(u),n=vp(e,n,o,a);break e}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Je=yn(e.firstChild),Et=n,Ne=!0,pi=null,mn=!0,a=fm(n,null,o,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(ia(),o===u){n=Xn(e,n,a);break e}bt(e,n,o,a)}n=n.child}return n;case 26:return Bs(e,n),e===null?(a=Dy(n.type,null,n.pendingProps,null))?n.memoizedState=a:Ne||(a=n.type,e=n.pendingProps,o=ic(ae.current).createElement(a),o[At]=n,o[zt]=e,wt(o,a,e),Ct(o),n.stateNode=o):n.memoizedState=Dy(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return qe(n),e===null&&Ne&&(o=n.stateNode=ky(n.type,n.pendingProps,ae.current),Et=n,mn=!0,u=Je,Mi(n.type)?(Od=u,Je=yn(o.firstChild)):Je=u),bt(e,n,n.pendingProps.children,a),Bs(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&Ne&&((u=o=Je)&&(o=QE(o,n.type,n.pendingProps,mn),o!==null?(n.stateNode=o,Et=n,Je=yn(o.firstChild),mn=!1,u=!0):u=!1),u||yi(n)),qe(n),u=n.type,d=n.pendingProps,m=e!==null?e.memoizedProps:null,o=d.children,_d(u,d)?o=null:m!==null&&_d(u,m)&&(n.flags|=32),n.memoizedState!==null&&(u=Eu(e,n,sE,null,null,a),ko._currentValue=u),Bs(e,n),bt(e,n,o,a),n.child;case 6:return e===null&&Ne&&((e=a=Je)&&(a=YE(a,n.pendingProps,mn),a!==null?(n.stateNode=a,Et=n,Je=null,e=!0):e=!1),e||yi(n)),null;case 13:return Cp(e,n,a);case 4:return Te(n,n.stateNode.containerInfo),o=n.pendingProps,e===null?n.child=la(n,null,o,a):bt(e,n,o,a),n.child;case 11:return up(e,n,n.type,n.pendingProps,a);case 7:return bt(e,n,n.pendingProps,a),n.child;case 8:return bt(e,n,n.pendingProps.children,a),n.child;case 12:return bt(e,n,n.pendingProps.children,a),n.child;case 10:return o=n.pendingProps,vi(n,n.type,o.value),bt(e,n,o.children,a),n.child;case 9:return u=n.type._context,o=n.pendingProps.children,ra(n),u=_t(u),o=o(u),n.flags|=1,bt(e,n,o,a),n.child;case 14:return dp(e,n,n.type,n.pendingProps,a);case 15:return hp(e,n,n.type,n.pendingProps,a);case 19:return Tp(e,n,a);case 31:return mE(e,n,a);case 22:return fp(e,n,a,n.pendingProps);case 24:return ra(n),o=_t(st),e===null?(u=fu(),u===null&&(u=Ve,d=du(),u.pooledCache=d,d.refCount++,d!==null&&(u.pooledCacheLanes|=a),u=d),n.memoizedState={parent:o,cache:u},mu(n),vi(n,st,u)):((e.lanes&a)!==0&&(pu(e,n),lo(n,null,null,a),co()),u=e.memoizedState,d=n.memoizedState,u.parent!==o?(u={parent:o,cache:o},n.memoizedState=u,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=u),vi(n,st,o)):(o=d.cache,vi(n,st,o),o!==u.cache&&uu(n,[st],a,!0))),bt(e,n,n.pendingProps.children,a),n.child;case 29:throw n.pendingProps}throw Error(r(156,n.tag))}function Jn(e){e.flags|=4}function $u(e,n,a,o,u){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(u&335544128)===u)if(e.stateNode.complete)e.flags|=8192;else if(Xp())e.flags|=8192;else throw ca=bs,gu}else e.flags&=-16777217}function Ep(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Ly(n))if(Xp())e.flags|=8192;else throw ca=bs,gu}function qs(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?ng():536870912,e.lanes|=n,or|=n)}function po(e,n){if(!Ne)switch(e.tailMode){case"hidden":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function $e(e){var n=e.alternate!==null&&e.alternate.child===e.child,a=0,o=0;if(n)for(var u=e.child;u!==null;)a|=u.lanes|u.childLanes,o|=u.subtreeFlags&65011712,o|=u.flags&65011712,u.return=e,u=u.sibling;else for(u=e.child;u!==null;)a|=u.lanes|u.childLanes,o|=u.subtreeFlags,o|=u.flags,u.return=e,u=u.sibling;return e.subtreeFlags|=o,e.childLanes=a,n}function yE(e,n,a){var o=n.pendingProps;switch(ru(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $e(n),null;case 1:return $e(n),null;case 3:return a=n.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),n.memoizedState.cache!==o&&(n.flags|=2048),Qn(st),Ae(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Ya(n)?Jn(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,su())),$e(n),null;case 26:var u=n.type,d=n.memoizedState;return e===null?(Jn(n),d!==null?($e(n),Ep(n,d)):($e(n),$u(n,u,null,o,a))):d?d!==e.memoizedState?(Jn(n),$e(n),Ep(n,d)):($e(n),n.flags&=-16777217):(e=e.memoizedProps,e!==o&&Jn(n),$e(n),$u(n,u,e,o,a)),null;case 27:if(We(n),a=ae.current,u=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==o&&Jn(n);else{if(!o){if(n.stateNode===null)throw Error(r(166));return $e(n),null}e=I.current,Ya(n)?nm(n):(e=ky(u,o,a),n.stateNode=e,Jn(n))}return $e(n),null;case 5:if(We(n),u=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==o&&Jn(n);else{if(!o){if(n.stateNode===null)throw Error(r(166));return $e(n),null}if(d=I.current,Ya(n))nm(n);else{var m=ic(ae.current);switch(d){case 1:d=m.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:d=m.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":d=m.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":d=m.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":d=m.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof o.is=="string"?m.createElement("select",{is:o.is}):m.createElement("select"),o.multiple?d.multiple=!0:o.size&&(d.size=o.size);break;default:d=typeof o.is=="string"?m.createElement(u,{is:o.is}):m.createElement(u)}}d[At]=n,d[zt]=o;e:for(m=n.child;m!==null;){if(m.tag===5||m.tag===6)d.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===n)break e;for(;m.sibling===null;){if(m.return===null||m.return===n)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}n.stateNode=d;e:switch(wt(d,u,o),u){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&Jn(n)}}return $e(n),$u(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,a),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==o&&Jn(n);else{if(typeof o!="string"&&n.stateNode===null)throw Error(r(166));if(e=ae.current,Ya(n)){if(e=n.stateNode,a=n.memoizedProps,o=null,u=Et,u!==null)switch(u.tag){case 27:case 5:o=u.memoizedProps}e[At]=n,e=!!(e.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||Cy(e.nodeValue,a)),e||yi(n,!0)}else e=ic(e).createTextNode(o),e[At]=n,n.stateNode=e}return $e(n),null;case 31:if(a=n.memoizedState,e===null||e.memoizedState!==null){if(o=Ya(n),a!==null){if(e===null){if(!o)throw Error(r(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(557));e[At]=n}else ia(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;$e(n),e=!1}else a=su(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return n.flags&256?(Wt(n),n):(Wt(n),null);if((n.flags&128)!==0)throw Error(r(558))}return $e(n),null;case 13:if(o=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(u=Ya(n),o!==null&&o.dehydrated!==null){if(e===null){if(!u)throw Error(r(318));if(u=n.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(r(317));u[At]=n}else ia(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;$e(n),u=!1}else u=su(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=u),u=!0;if(!u)return n.flags&256?(Wt(n),n):(Wt(n),null)}return Wt(n),(n.flags&128)!==0?(n.lanes=a,n):(a=o!==null,e=e!==null&&e.memoizedState!==null,a&&(o=n.child,u=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(u=o.alternate.memoizedState.cachePool.pool),d=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==u&&(o.flags|=2048)),a!==e&&a&&(n.child.flags|=8192),qs(n,n.updateQueue),$e(n),null);case 4:return Ae(),e===null&&Cd(n.stateNode.containerInfo),$e(n),null;case 10:return Qn(n.type),$e(n),null;case 19:if(C(nt),o=n.memoizedState,o===null)return $e(n),null;if(u=(n.flags&128)!==0,d=o.rendering,d===null)if(u)po(o,!1);else{if(tt!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(d=Os(e),d!==null){for(n.flags|=128,po(o,!1),e=d.updateQueue,n.updateQueue=e,qs(n,e),n.subtreeFlags=0,e=a,a=n.child;a!==null;)$g(a,e),a=a.sibling;return b(nt,nt.current&1|2),Ne&&Gn(n,o.treeForkCount),n.child}e=e.sibling}o.tail!==null&&yt()>Ys&&(n.flags|=128,u=!0,po(o,!1),n.lanes=4194304)}else{if(!u)if(e=Os(d),e!==null){if(n.flags|=128,u=!0,e=e.updateQueue,n.updateQueue=e,qs(n,e),po(o,!0),o.tail===null&&o.tailMode==="hidden"&&!d.alternate&&!Ne)return $e(n),null}else 2*yt()-o.renderingStartTime>Ys&&a!==536870912&&(n.flags|=128,u=!0,po(o,!1),n.lanes=4194304);o.isBackwards?(d.sibling=n.child,n.child=d):(e=o.last,e!==null?e.sibling=d:n.child=d,o.last=d)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=yt(),e.sibling=null,a=nt.current,b(nt,u?a&1|2:a&1),Ne&&Gn(n,o.treeForkCount),e):($e(n),null);case 22:case 23:return Wt(n),Su(),o=n.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(n.flags|=8192):o&&(n.flags|=8192),o?(a&536870912)!==0&&(n.flags&128)===0&&($e(n),n.subtreeFlags&6&&(n.flags|=8192)):$e(n),a=n.updateQueue,a!==null&&qs(n,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),o=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),o!==a&&(n.flags|=2048),e!==null&&C(oa),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),Qn(st),$e(n),null;case 25:return null;case 30:return null}throw Error(r(156,n.tag))}function vE(e,n){switch(ru(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Qn(st),Ae(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return We(n),null;case 31:if(n.memoizedState!==null){if(Wt(n),n.alternate===null)throw Error(r(340));ia()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(Wt(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(r(340));ia()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return C(nt),null;case 4:return Ae(),null;case 10:return Qn(n.type),null;case 22:case 23:return Wt(n),Su(),e!==null&&C(oa),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return Qn(st),null;case 25:return null;default:return null}}function _p(e,n){switch(ru(n),n.tag){case 3:Qn(st),Ae();break;case 26:case 27:case 5:We(n);break;case 4:Ae();break;case 31:n.memoizedState!==null&&Wt(n);break;case 13:Wt(n);break;case 19:C(nt);break;case 10:Qn(n.type);break;case 22:case 23:Wt(n),Su(),e!==null&&C(oa);break;case 24:Qn(st)}}function yo(e,n){try{var a=n.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var u=o.next;a=u;do{if((a.tag&e)===e){o=void 0;var d=a.create,m=a.inst;o=d(),m.destroy=o}a=a.next}while(a!==u)}}catch(y){Be(n,n.return,y)}}function _i(e,n,a){try{var o=n.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var d=u.next;o=d;do{if((o.tag&e)===e){var m=o.inst,y=m.destroy;if(y!==void 0){m.destroy=void 0,u=n;var E=a,H=y;try{H()}catch(F){Be(u,E,F)}}}o=o.next}while(o!==d)}}catch(F){Be(n,n.return,F)}}function bp(e){var n=e.updateQueue;if(n!==null){var a=e.stateNode;try{mm(n,a)}catch(o){Be(e,e.return,o)}}}function wp(e,n,a){a.props=da(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(o){Be(e,n,o)}}function vo(e,n){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof a=="function"?e.refCleanup=a(o):a.current=o}}catch(u){Be(e,n,u)}}function Nn(e,n){var a=e.ref,o=e.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(u){Be(e,n,u)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(u){Be(e,n,u)}else a.current=null}function Rp(e){var n=e.type,a=e.memoizedProps,o=e.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break e;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(u){Be(e,e.return,u)}}function Zu(e,n,a){try{var o=e.stateNode;BE(o,e.type,a,n),o[zt]=n}catch(u){Be(e,e.return,u)}}function Ip(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Mi(e.type)||e.tag===4}function Wu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Ip(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Mi(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ed(e,n,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,n):(n=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,n.appendChild(e),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=Kn));else if(o!==4&&(o===27&&Mi(e.type)&&(a=e.stateNode,n=null),e=e.child,e!==null))for(ed(e,n,a),e=e.sibling;e!==null;)ed(e,n,a),e=e.sibling}function js(e,n,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?a.insertBefore(e,n):a.appendChild(e);else if(o!==4&&(o===27&&Mi(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(js(e,n,a),e=e.sibling;e!==null;)js(e,n,a),e=e.sibling}function Op(e){var n=e.stateNode,a=e.memoizedProps;try{for(var o=e.type,u=n.attributes;u.length;)n.removeAttributeNode(u[0]);wt(n,o,a),n[At]=e,n[zt]=a}catch(d){Be(e,e.return,d)}}var $n=!1,ut=!1,td=!1,kp=typeof WeakSet=="function"?WeakSet:Set,St=null;function CE(e,n){if(e=e.containerInfo,Ad=uc,e=qg(e),Vl(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var u=o.anchorOffset,d=o.focusNode;o=o.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var m=0,y=-1,E=-1,H=0,F=0,$=e,L=null;t:for(;;){for(var q;$!==a||u!==0&&$.nodeType!==3||(y=m+u),$!==d||o!==0&&$.nodeType!==3||(E=m+o),$.nodeType===3&&(m+=$.nodeValue.length),(q=$.firstChild)!==null;)L=$,$=q;for(;;){if($===e)break t;if(L===a&&++H===u&&(y=m),L===d&&++F===o&&(E=m),(q=$.nextSibling)!==null)break;$=L,L=$.parentNode}$=q}a=y===-1||E===-1?null:{start:y,end:E}}else a=null}a=a||{start:0,end:0}}else a=null;for(Ed={focusedElem:e,selectionRange:a},uc=!1,St=n;St!==null;)if(n=St,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,St=e;else for(;St!==null;){switch(n=St,d=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)u=e[a],u.ref.impl=u.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,a=n,u=d.memoizedProps,d=d.memoizedState,o=a.stateNode;try{var ge=da(a.type,u);e=o.getSnapshotBeforeUpdate(ge,d),o.__reactInternalSnapshotBeforeUpdate=e}catch(Ce){Be(a,a.return,Ce)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,a=e.nodeType,a===9)wd(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":wd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(r(163))}if(e=n.sibling,e!==null){e.return=n.return,St=e;break}St=n.return}}function Mp(e,n,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:Wn(e,a),o&4&&yo(5,a);break;case 1:if(Wn(e,a),o&4)if(e=a.stateNode,n===null)try{e.componentDidMount()}catch(m){Be(a,a.return,m)}else{var u=da(a.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(u,n,e.__reactInternalSnapshotBeforeUpdate)}catch(m){Be(a,a.return,m)}}o&64&&bp(a),o&512&&vo(a,a.return);break;case 3:if(Wn(e,a),o&64&&(e=a.updateQueue,e!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{mm(e,n)}catch(m){Be(a,a.return,m)}}break;case 27:n===null&&o&4&&Op(a);case 26:case 5:Wn(e,a),n===null&&o&4&&Rp(a),o&512&&vo(a,a.return);break;case 12:Wn(e,a);break;case 31:Wn(e,a),o&4&&Up(e,a);break;case 13:Wn(e,a),o&4&&xp(e,a),o&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=IE.bind(null,a),VE(e,a))));break;case 22:if(o=a.memoizedState!==null||$n,!o){n=n!==null&&n.memoizedState!==null||ut,u=$n;var d=ut;$n=o,(ut=n)&&!d?ei(e,a,(a.subtreeFlags&8772)!==0):Wn(e,a),$n=u,ut=d}break;case 30:break;default:Wn(e,a)}}function Np(e){var n=e.alternate;n!==null&&(e.alternate=null,Np(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&Ml(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ze=null,Kt=!1;function Zn(e,n,a){for(a=a.child;a!==null;)Dp(e,n,a),a=a.sibling}function Dp(e,n,a){if(De&&typeof De.onCommitFiberUnmount=="function")try{De.onCommitFiberUnmount(zn,a)}catch{}switch(a.tag){case 26:ut||Nn(a,n),Zn(e,n,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:ut||Nn(a,n);var o=Ze,u=Kt;Mi(a.type)&&(Ze=a.stateNode,Kt=!1),Zn(e,n,a),Ro(a.stateNode),Ze=o,Kt=u;break;case 5:ut||Nn(a,n);case 6:if(o=Ze,u=Kt,Ze=null,Zn(e,n,a),Ze=o,Kt=u,Ze!==null)if(Kt)try{(Ze.nodeType===9?Ze.body:Ze.nodeName==="HTML"?Ze.ownerDocument.body:Ze).removeChild(a.stateNode)}catch(d){Be(a,n,d)}else try{Ze.removeChild(a.stateNode)}catch(d){Be(a,n,d)}break;case 18:Ze!==null&&(Kt?(e=Ze,by(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),gr(e)):by(Ze,a.stateNode));break;case 4:o=Ze,u=Kt,Ze=a.stateNode.containerInfo,Kt=!0,Zn(e,n,a),Ze=o,Kt=u;break;case 0:case 11:case 14:case 15:_i(2,a,n),ut||_i(4,a,n),Zn(e,n,a);break;case 1:ut||(Nn(a,n),o=a.stateNode,typeof o.componentWillUnmount=="function"&&wp(a,n,o)),Zn(e,n,a);break;case 21:Zn(e,n,a);break;case 22:ut=(o=ut)||a.memoizedState!==null,Zn(e,n,a),ut=o;break;default:Zn(e,n,a)}}function Up(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{gr(e)}catch(a){Be(n,n.return,a)}}}function xp(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{gr(e)}catch(a){Be(n,n.return,a)}}function SE(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new kp),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new kp),n;default:throw Error(r(435,e.tag))}}function Gs(e,n){var a=SE(e);n.forEach(function(o){if(!a.has(o)){a.add(o);var u=OE.bind(null,e,o);o.then(u,u)}})}function qt(e,n){var a=n.deletions;if(a!==null)for(var o=0;o<a.length;o++){var u=a[o],d=e,m=n,y=m;e:for(;y!==null;){switch(y.tag){case 27:if(Mi(y.type)){Ze=y.stateNode,Kt=!1;break e}break;case 5:Ze=y.stateNode,Kt=!1;break e;case 3:case 4:Ze=y.stateNode.containerInfo,Kt=!0;break e}y=y.return}if(Ze===null)throw Error(r(160));Dp(d,m,u),Ze=null,Kt=!1,d=u.alternate,d!==null&&(d.return=null),u.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)Pp(n,e),n=n.sibling}var An=null;function Pp(e,n){var a=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:qt(n,e),jt(e),o&4&&(_i(3,e,e.return),yo(3,e),_i(5,e,e.return));break;case 1:qt(n,e),jt(e),o&512&&(ut||a===null||Nn(a,a.return)),o&64&&$n&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var u=An;if(qt(n,e),jt(e),o&512&&(ut||a===null||Nn(a,a.return)),o&4){var d=a!==null?a.memoizedState:null;if(o=e.memoizedState,a===null)if(o===null)if(e.stateNode===null){e:{o=e.type,a=e.memoizedProps,u=u.ownerDocument||u;t:switch(o){case"title":d=u.getElementsByTagName("title")[0],(!d||d[Gr]||d[At]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=u.createElement(o),u.head.insertBefore(d,u.querySelector("head > title"))),wt(d,o,a),d[At]=e,Ct(d),o=d;break e;case"link":var m=Py("link","href",u).get(o+(a.href||""));if(m){for(var y=0;y<m.length;y++)if(d=m[y],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){m.splice(y,1);break t}}d=u.createElement(o),wt(d,o,a),u.head.appendChild(d);break;case"meta":if(m=Py("meta","content",u).get(o+(a.content||""))){for(y=0;y<m.length;y++)if(d=m[y],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){m.splice(y,1);break t}}d=u.createElement(o),wt(d,o,a),u.head.appendChild(d);break;default:throw Error(r(468,o))}d[At]=e,Ct(d),o=d}e.stateNode=o}else Hy(u,e.type,e.stateNode);else e.stateNode=xy(u,o,e.memoizedProps);else d!==o?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,o===null?Hy(u,e.type,e.stateNode):xy(u,o,e.memoizedProps)):o===null&&e.stateNode!==null&&Zu(e,e.memoizedProps,a.memoizedProps)}break;case 27:qt(n,e),jt(e),o&512&&(ut||a===null||Nn(a,a.return)),a!==null&&o&4&&Zu(e,e.memoizedProps,a.memoizedProps);break;case 5:if(qt(n,e),jt(e),o&512&&(ut||a===null||Nn(a,a.return)),e.flags&32){u=e.stateNode;try{Ha(u,"")}catch(ge){Be(e,e.return,ge)}}o&4&&e.stateNode!=null&&(u=e.memoizedProps,Zu(e,u,a!==null?a.memoizedProps:u)),o&1024&&(td=!0);break;case 6:if(qt(n,e),jt(e),o&4){if(e.stateNode===null)throw Error(r(162));o=e.memoizedProps,a=e.stateNode;try{a.nodeValue=o}catch(ge){Be(e,e.return,ge)}}break;case 3:if(oc=null,u=An,An=ac(n.containerInfo),qt(n,e),An=u,jt(e),o&4&&a!==null&&a.memoizedState.isDehydrated)try{gr(n.containerInfo)}catch(ge){Be(e,e.return,ge)}td&&(td=!1,Hp(e));break;case 4:o=An,An=ac(e.stateNode.containerInfo),qt(n,e),jt(e),An=o;break;case 12:qt(n,e),jt(e);break;case 31:qt(n,e),jt(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Gs(e,o)));break;case 13:qt(n,e),jt(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Qs=yt()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Gs(e,o)));break;case 22:u=e.memoizedState!==null;var E=a!==null&&a.memoizedState!==null,H=$n,F=ut;if($n=H||u,ut=F||E,qt(n,e),ut=F,$n=H,jt(e),o&8192)e:for(n=e.stateNode,n._visibility=u?n._visibility&-2:n._visibility|1,u&&(a===null||E||$n||ut||ha(e)),a=null,n=e;;){if(n.tag===5||n.tag===26){if(a===null){E=a=n;try{if(d=E.stateNode,u)m=d.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none";else{y=E.stateNode;var $=E.memoizedProps.style,L=$!=null&&$.hasOwnProperty("display")?$.display:null;y.style.display=L==null||typeof L=="boolean"?"":(""+L).trim()}}catch(ge){Be(E,E.return,ge)}}}else if(n.tag===6){if(a===null){E=n;try{E.stateNode.nodeValue=u?"":E.memoizedProps}catch(ge){Be(E,E.return,ge)}}}else if(n.tag===18){if(a===null){E=n;try{var q=E.stateNode;u?wy(q,!0):wy(E.stateNode,!1)}catch(ge){Be(E,E.return,ge)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;a===n&&(a=null),n=n.return}a===n&&(a=null),n.sibling.return=n.return,n=n.sibling}o&4&&(o=e.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,Gs(e,a))));break;case 19:qt(n,e),jt(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Gs(e,o)));break;case 30:break;case 21:break;default:qt(n,e),jt(e)}}function jt(e){var n=e.flags;if(n&2){try{for(var a,o=e.return;o!==null;){if(Ip(o)){a=o;break}o=o.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var u=a.stateNode,d=Wu(e);js(e,d,u);break;case 5:var m=a.stateNode;a.flags&32&&(Ha(m,""),a.flags&=-33);var y=Wu(e);js(e,y,m);break;case 3:case 4:var E=a.stateNode.containerInfo,H=Wu(e);ed(e,H,E);break;default:throw Error(r(161))}}catch(F){Be(e,e.return,F)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function Hp(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;Hp(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function Wn(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Mp(e,n.alternate,n),n=n.sibling}function ha(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:_i(4,n,n.return),ha(n);break;case 1:Nn(n,n.return);var a=n.stateNode;typeof a.componentWillUnmount=="function"&&wp(n,n.return,a),ha(n);break;case 27:Ro(n.stateNode);case 26:case 5:Nn(n,n.return),ha(n);break;case 22:n.memoizedState===null&&ha(n);break;case 30:ha(n);break;default:ha(n)}e=e.sibling}}function ei(e,n,a){for(a=a&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var o=n.alternate,u=e,d=n,m=d.flags;switch(d.tag){case 0:case 11:case 15:ei(u,d,a),yo(4,d);break;case 1:if(ei(u,d,a),o=d,u=o.stateNode,typeof u.componentDidMount=="function")try{u.componentDidMount()}catch(H){Be(o,o.return,H)}if(o=d,u=o.updateQueue,u!==null){var y=o.stateNode;try{var E=u.shared.hiddenCallbacks;if(E!==null)for(u.shared.hiddenCallbacks=null,u=0;u<E.length;u++)gm(E[u],y)}catch(H){Be(o,o.return,H)}}a&&m&64&&bp(d),vo(d,d.return);break;case 27:Op(d);case 26:case 5:ei(u,d,a),a&&o===null&&m&4&&Rp(d),vo(d,d.return);break;case 12:ei(u,d,a);break;case 31:ei(u,d,a),a&&m&4&&Up(u,d);break;case 13:ei(u,d,a),a&&m&4&&xp(u,d);break;case 22:d.memoizedState===null&&ei(u,d,a),vo(d,d.return);break;case 30:break;default:ei(u,d,a)}n=n.sibling}}function nd(e,n){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&io(a))}function id(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&io(e))}function En(e,n,a,o){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Lp(e,n,a,o),n=n.sibling}function Lp(e,n,a,o){var u=n.flags;switch(n.tag){case 0:case 11:case 15:En(e,n,a,o),u&2048&&yo(9,n);break;case 1:En(e,n,a,o);break;case 3:En(e,n,a,o),u&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&io(e)));break;case 12:if(u&2048){En(e,n,a,o),e=n.stateNode;try{var d=n.memoizedProps,m=d.id,y=d.onPostCommit;typeof y=="function"&&y(m,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(E){Be(n,n.return,E)}}else En(e,n,a,o);break;case 31:En(e,n,a,o);break;case 13:En(e,n,a,o);break;case 23:break;case 22:d=n.stateNode,m=n.alternate,n.memoizedState!==null?d._visibility&2?En(e,n,a,o):Co(e,n):d._visibility&2?En(e,n,a,o):(d._visibility|=2,ir(e,n,a,o,(n.subtreeFlags&10256)!==0||!1)),u&2048&&nd(m,n);break;case 24:En(e,n,a,o),u&2048&&id(n.alternate,n);break;default:En(e,n,a,o)}}function ir(e,n,a,o,u){for(u=u&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var d=e,m=n,y=a,E=o,H=m.flags;switch(m.tag){case 0:case 11:case 15:ir(d,m,y,E,u),yo(8,m);break;case 23:break;case 22:var F=m.stateNode;m.memoizedState!==null?F._visibility&2?ir(d,m,y,E,u):Co(d,m):(F._visibility|=2,ir(d,m,y,E,u)),u&&H&2048&&nd(m.alternate,m);break;case 24:ir(d,m,y,E,u),u&&H&2048&&id(m.alternate,m);break;default:ir(d,m,y,E,u)}n=n.sibling}}function Co(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var a=e,o=n,u=o.flags;switch(o.tag){case 22:Co(a,o),u&2048&&nd(o.alternate,o);break;case 24:Co(a,o),u&2048&&id(o.alternate,o);break;default:Co(a,o)}n=n.sibling}}var So=8192;function ar(e,n,a){if(e.subtreeFlags&So)for(e=e.child;e!==null;)zp(e,n,a),e=e.sibling}function zp(e,n,a){switch(e.tag){case 26:ar(e,n,a),e.flags&So&&e.memoizedState!==null&&o_(a,An,e.memoizedState,e.memoizedProps);break;case 5:ar(e,n,a);break;case 3:case 4:var o=An;An=ac(e.stateNode.containerInfo),ar(e,n,a),An=o;break;case 22:e.memoizedState===null&&(o=e.alternate,o!==null&&o.memoizedState!==null?(o=So,So=16777216,ar(e,n,a),So=o):ar(e,n,a));break;default:ar(e,n,a)}}function Bp(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function To(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var o=n[a];St=o,qp(o,e)}Bp(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Kp(e),e=e.sibling}function Kp(e){switch(e.tag){case 0:case 11:case 15:To(e),e.flags&2048&&_i(9,e,e.return);break;case 3:To(e);break;case 12:To(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,Fs(e)):To(e);break;default:To(e)}}function Fs(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var o=n[a];St=o,qp(o,e)}Bp(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:_i(8,n,n.return),Fs(n);break;case 22:a=n.stateNode,a._visibility&2&&(a._visibility&=-3,Fs(n));break;default:Fs(n)}e=e.sibling}}function qp(e,n){for(;St!==null;){var a=St;switch(a.tag){case 0:case 11:case 15:_i(8,a,n);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:io(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,St=o;else e:for(a=e;St!==null;){o=St;var u=o.sibling,d=o.return;if(Np(o),o===a){St=null;break e}if(u!==null){u.return=d,St=u;break e}St=d}}}var TE={getCacheForType:function(e){var n=_t(st),a=n.data.get(e);return a===void 0&&(a=e(),n.data.set(e,a)),a},cacheSignal:function(){return _t(st).controller.signal}},AE=typeof WeakMap=="function"?WeakMap:Map,He=0,Ve=null,Ie=null,ke=0,ze=0,en=null,bi=!1,rr=!1,ad=!1,ti=0,tt=0,wi=0,fa=0,rd=0,tn=0,or=0,Ao=null,Gt=null,od=!1,Qs=0,jp=0,Ys=1/0,Vs=null,Ri=null,mt=0,Ii=null,sr=null,ni=0,sd=0,cd=null,Gp=null,Eo=0,ld=null;function nn(){return(He&2)!==0&&ke!==0?ke&-ke:D.T!==null?md():og()}function Fp(){if(tn===0)if((ke&536870912)===0||Ne){var e=Xi;Xi<<=1,(Xi&3932160)===0&&(Xi=262144),tn=e}else tn=536870912;return e=Zt.current,e!==null&&(e.flags|=32),tn}function Ft(e,n,a){(e===Ve&&(ze===2||ze===9)||e.cancelPendingCommit!==null)&&(cr(e,0),Oi(e,ke,tn,!1)),jr(e,a),((He&2)===0||e!==Ve)&&(e===Ve&&((He&2)===0&&(fa|=a),tt===4&&Oi(e,ke,tn,!1)),Dn(e))}function Qp(e,n,a){if((He&6)!==0)throw Error(r(327));var o=!a&&(n&127)===0&&(n&e.expiredLanes)===0||qr(e,n),u=o?bE(e,n):dd(e,n,!0),d=o;do{if(u===0){rr&&!o&&Oi(e,n,0,!1);break}else{if(a=e.current.alternate,d&&!EE(a)){u=dd(e,n,!1),d=!1;continue}if(u===2){if(d=n,e.errorRecoveryDisabledLanes&d)var m=0;else m=e.pendingLanes&-536870913,m=m!==0?m:m&536870912?536870912:0;if(m!==0){n=m;e:{var y=e;u=Ao;var E=y.current.memoizedState.isDehydrated;if(E&&(cr(y,m).flags|=256),m=dd(y,m,!1),m!==2){if(ad&&!E){y.errorRecoveryDisabledLanes|=d,fa|=d,u=4;break e}d=Gt,Gt=u,d!==null&&(Gt===null?Gt=d:Gt.push.apply(Gt,d))}u=m}if(d=!1,u!==2)continue}}if(u===1){cr(e,0),Oi(e,n,0,!0);break}e:{switch(o=e,d=u,d){case 0:case 1:throw Error(r(345));case 4:if((n&4194048)!==n)break;case 6:Oi(o,n,tn,!bi);break e;case 2:Gt=null;break;case 3:case 5:break;default:throw Error(r(329))}if((n&62914560)===n&&(u=Qs+300-yt(),10<u)){if(Oi(o,n,tn,!bi),as(o,0,!0)!==0)break e;ni=n,o.timeoutHandle=Ey(Yp.bind(null,o,a,Gt,Vs,od,n,tn,fa,or,bi,d,"Throttled",-0,0),u);break e}Yp(o,a,Gt,Vs,od,n,tn,fa,or,bi,d,null,-0,0)}}break}while(!0);Dn(e)}function Yp(e,n,a,o,u,d,m,y,E,H,F,$,L,q){if(e.timeoutHandle=-1,$=n.subtreeFlags,$&8192||($&16785408)===16785408){$={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Kn},zp(n,d,$);var ge=(d&62914560)===d?Qs-yt():(d&4194048)===d?jp-yt():0;if(ge=s_($,ge),ge!==null){ni=d,e.cancelPendingCommit=ge(ty.bind(null,e,n,d,a,o,u,m,y,E,F,$,null,L,q)),Oi(e,d,m,!H);return}}ty(e,n,d,a,o,u,m,y,E)}function EE(e){for(var n=e;;){var a=n.tag;if((a===0||a===11||a===15)&&n.flags&16384&&(a=n.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var u=a[o],d=u.getSnapshot;u=u.value;try{if(!Jt(d(),u))return!1}catch{return!1}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Oi(e,n,a,o){n&=~rd,n&=~fa,e.suspendedLanes|=n,e.pingedLanes&=~n,o&&(e.warmLanes|=n),o=e.expirationTimes;for(var u=n;0<u;){var d=31-gt(u),m=1<<d;o[d]=-1,u&=~m}a!==0&&ig(e,a,n)}function Xs(){return(He&6)===0?(_o(0),!1):!0}function ud(){if(Ie!==null){if(ze===0)var e=Ie.return;else e=Ie,Fn=aa=null,wu(e),Za=null,ro=0,e=Ie;for(;e!==null;)_p(e.alternate,e),e=e.return;Ie=null}}function cr(e,n){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,jE(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),ni=0,ud(),Ve=e,Ie=a=jn(e.current,null),ke=n,ze=0,en=null,bi=!1,rr=qr(e,n),ad=!1,or=tn=rd=fa=wi=tt=0,Gt=Ao=null,od=!1,(n&8)!==0&&(n|=n&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=n;0<o;){var u=31-gt(o),d=1<<u;n|=e[u],o&=~d}return ti=n,ps(),a}function Vp(e,n){_e=null,D.H=go,n===$a||n===_s?(n=um(),ze=3):n===gu?(n=um(),ze=4):ze=n===qu?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,en=n,Ie===null&&(tt=1,Ls(e,hn(n,e.current)))}function Xp(){var e=Zt.current;return e===null?!0:(ke&4194048)===ke?pn===null:(ke&62914560)===ke||(ke&536870912)!==0?e===pn:!1}function Jp(){var e=D.H;return D.H=go,e===null?go:e}function $p(){var e=D.A;return D.A=TE,e}function Js(){tt=4,bi||(ke&4194048)!==ke&&Zt.current!==null||(rr=!0),(wi&134217727)===0&&(fa&134217727)===0||Ve===null||Oi(Ve,ke,tn,!1)}function dd(e,n,a){var o=He;He|=2;var u=Jp(),d=$p();(Ve!==e||ke!==n)&&(Vs=null,cr(e,n)),n=!1;var m=tt;e:do try{if(ze!==0&&Ie!==null){var y=Ie,E=en;switch(ze){case 8:ud(),m=6;break e;case 3:case 2:case 9:case 6:Zt.current===null&&(n=!0);var H=ze;if(ze=0,en=null,lr(e,y,E,H),a&&rr){m=0;break e}break;default:H=ze,ze=0,en=null,lr(e,y,E,H)}}_E(),m=tt;break}catch(F){Vp(e,F)}while(!0);return n&&e.shellSuspendCounter++,Fn=aa=null,He=o,D.H=u,D.A=d,Ie===null&&(Ve=null,ke=0,ps()),m}function _E(){for(;Ie!==null;)Zp(Ie)}function bE(e,n){var a=He;He|=2;var o=Jp(),u=$p();Ve!==e||ke!==n?(Vs=null,Ys=yt()+500,cr(e,n)):rr=qr(e,n);e:do try{if(ze!==0&&Ie!==null){n=Ie;var d=en;t:switch(ze){case 1:ze=0,en=null,lr(e,n,d,1);break;case 2:case 9:if(cm(d)){ze=0,en=null,Wp(n);break}n=function(){ze!==2&&ze!==9||Ve!==e||(ze=7),Dn(e)},d.then(n,n);break e;case 3:ze=7;break e;case 4:ze=5;break e;case 7:cm(d)?(ze=0,en=null,Wp(n)):(ze=0,en=null,lr(e,n,d,7));break;case 5:var m=null;switch(Ie.tag){case 26:m=Ie.memoizedState;case 5:case 27:var y=Ie;if(m?Ly(m):y.stateNode.complete){ze=0,en=null;var E=y.sibling;if(E!==null)Ie=E;else{var H=y.return;H!==null?(Ie=H,$s(H)):Ie=null}break t}}ze=0,en=null,lr(e,n,d,5);break;case 6:ze=0,en=null,lr(e,n,d,6);break;case 8:ud(),tt=6;break e;default:throw Error(r(462))}}wE();break}catch(F){Vp(e,F)}while(!0);return Fn=aa=null,D.H=o,D.A=u,He=a,Ie!==null?0:(Ve=null,ke=0,ps(),tt)}function wE(){for(;Ie!==null&&!ts();)Zp(Ie)}function Zp(e){var n=Ap(e.alternate,e,ti);e.memoizedProps=e.pendingProps,n===null?$s(e):Ie=n}function Wp(e){var n=e,a=n.alternate;switch(n.tag){case 15:case 0:n=pp(a,n,n.pendingProps,n.type,void 0,ke);break;case 11:n=pp(a,n,n.pendingProps,n.type.render,n.ref,ke);break;case 5:wu(n);default:_p(a,n),n=Ie=$g(n,ti),n=Ap(a,n,ti)}e.memoizedProps=e.pendingProps,n===null?$s(e):Ie=n}function lr(e,n,a,o){Fn=aa=null,wu(n),Za=null,ro=0;var u=n.return;try{if(gE(e,u,n,a,ke)){tt=1,Ls(e,hn(a,e.current)),Ie=null;return}}catch(d){if(u!==null)throw Ie=u,d;tt=1,Ls(e,hn(a,e.current)),Ie=null;return}n.flags&32768?(Ne||o===1?e=!0:rr||(ke&536870912)!==0?e=!1:(bi=e=!0,(o===2||o===9||o===3||o===6)&&(o=Zt.current,o!==null&&o.tag===13&&(o.flags|=16384))),ey(n,e)):$s(n)}function $s(e){var n=e;do{if((n.flags&32768)!==0){ey(n,bi);return}e=n.return;var a=yE(n.alternate,n,ti);if(a!==null){Ie=a;return}if(n=n.sibling,n!==null){Ie=n;return}Ie=n=e}while(n!==null);tt===0&&(tt=5)}function ey(e,n){do{var a=vE(e.alternate,e);if(a!==null){a.flags&=32767,Ie=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!n&&(e=e.sibling,e!==null)){Ie=e;return}Ie=e=a}while(e!==null);tt=6,Ie=null}function ty(e,n,a,o,u,d,m,y,E){e.cancelPendingCommit=null;do Zs();while(mt!==0);if((He&6)!==0)throw Error(r(327));if(n!==null){if(n===e.current)throw Error(r(177));if(d=n.lanes|n.childLanes,d|=Wl,rA(e,a,d,m,y,E),e===Ve&&(Ie=Ve=null,ke=0),sr=n,Ii=e,ni=a,sd=d,cd=u,Gp=o,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,kE(Oa,function(){return oy(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||o){o=D.T,D.T=null,u=X.p,X.p=2,m=He,He|=4;try{CE(e,n,a)}finally{He=m,X.p=u,D.T=o}}mt=1,ny(),iy(),ay()}}function ny(){if(mt===1){mt=0;var e=Ii,n=sr,a=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||a){a=D.T,D.T=null;var o=X.p;X.p=2;var u=He;He|=4;try{Pp(n,e);var d=Ed,m=qg(e.containerInfo),y=d.focusedElem,E=d.selectionRange;if(m!==y&&y&&y.ownerDocument&&Kg(y.ownerDocument.documentElement,y)){if(E!==null&&Vl(y)){var H=E.start,F=E.end;if(F===void 0&&(F=H),"selectionStart"in y)y.selectionStart=H,y.selectionEnd=Math.min(F,y.value.length);else{var $=y.ownerDocument||document,L=$&&$.defaultView||window;if(L.getSelection){var q=L.getSelection(),ge=y.textContent.length,Ce=Math.min(E.start,ge),Fe=E.end===void 0?Ce:Math.min(E.end,ge);!q.extend&&Ce>Fe&&(m=Fe,Fe=Ce,Ce=m);var k=Bg(y,Ce),R=Bg(y,Fe);if(k&&R&&(q.rangeCount!==1||q.anchorNode!==k.node||q.anchorOffset!==k.offset||q.focusNode!==R.node||q.focusOffset!==R.offset)){var P=$.createRange();P.setStart(k.node,k.offset),q.removeAllRanges(),Ce>Fe?(q.addRange(P),q.extend(R.node,R.offset)):(P.setEnd(R.node,R.offset),q.addRange(P))}}}}for($=[],q=y;q=q.parentNode;)q.nodeType===1&&$.push({element:q,left:q.scrollLeft,top:q.scrollTop});for(typeof y.focus=="function"&&y.focus(),y=0;y<$.length;y++){var V=$[y];V.element.scrollLeft=V.left,V.element.scrollTop=V.top}}uc=!!Ad,Ed=Ad=null}finally{He=u,X.p=o,D.T=a}}e.current=n,mt=2}}function iy(){if(mt===2){mt=0;var e=Ii,n=sr,a=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||a){a=D.T,D.T=null;var o=X.p;X.p=2;var u=He;He|=4;try{Mp(e,n.alternate,n)}finally{He=u,X.p=o,D.T=a}}mt=3}}function ay(){if(mt===4||mt===3){mt=0,Ia();var e=Ii,n=sr,a=ni,o=Gp;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?mt=5:(mt=0,sr=Ii=null,ry(e,e.pendingLanes));var u=e.pendingLanes;if(u===0&&(Ri=null),Ol(a),n=n.stateNode,De&&typeof De.onCommitFiberRoot=="function")try{De.onCommitFiberRoot(zn,n,void 0,(n.current.flags&128)===128)}catch{}if(o!==null){n=D.T,u=X.p,X.p=2,D.T=null;try{for(var d=e.onRecoverableError,m=0;m<o.length;m++){var y=o[m];d(y.value,{componentStack:y.stack})}}finally{D.T=n,X.p=u}}(ni&3)!==0&&Zs(),Dn(e),u=e.pendingLanes,(a&261930)!==0&&(u&42)!==0?e===ld?Eo++:(Eo=0,ld=e):Eo=0,_o(0)}}function ry(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,io(n)))}function Zs(){return ny(),iy(),ay(),oy()}function oy(){if(mt!==5)return!1;var e=Ii,n=sd;sd=0;var a=Ol(ni),o=D.T,u=X.p;try{X.p=32>a?32:a,D.T=null,a=cd,cd=null;var d=Ii,m=ni;if(mt=0,sr=Ii=null,ni=0,(He&6)!==0)throw Error(r(331));var y=He;if(He|=4,Kp(d.current),Lp(d,d.current,m,a),He=y,_o(0,!1),De&&typeof De.onPostCommitFiberRoot=="function")try{De.onPostCommitFiberRoot(zn,d)}catch{}return!0}finally{X.p=u,D.T=o,ry(e,n)}}function sy(e,n,a){n=hn(a,n),n=Ku(e.stateNode,n,2),e=Ti(e,n,2),e!==null&&(jr(e,2),Dn(e))}function Be(e,n,a){if(e.tag===3)sy(e,e,a);else for(;n!==null;){if(n.tag===3){sy(n,e,a);break}else if(n.tag===1){var o=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Ri===null||!Ri.has(o))){e=hn(a,e),a=cp(2),o=Ti(n,a,2),o!==null&&(lp(a,o,n,e),jr(o,2),Dn(o));break}}n=n.return}}function hd(e,n,a){var o=e.pingCache;if(o===null){o=e.pingCache=new AE;var u=new Set;o.set(n,u)}else u=o.get(n),u===void 0&&(u=new Set,o.set(n,u));u.has(a)||(ad=!0,u.add(a),e=RE.bind(null,e,n,a),n.then(e,e))}function RE(e,n,a){var o=e.pingCache;o!==null&&o.delete(n),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Ve===e&&(ke&a)===a&&(tt===4||tt===3&&(ke&62914560)===ke&&300>yt()-Qs?(He&2)===0&&cr(e,0):rd|=a,or===ke&&(or=0)),Dn(e)}function cy(e,n){n===0&&(n=ng()),e=ta(e,n),e!==null&&(jr(e,n),Dn(e))}function IE(e){var n=e.memoizedState,a=0;n!==null&&(a=n.retryLane),cy(e,a)}function OE(e,n){var a=0;switch(e.tag){case 31:case 13:var o=e.stateNode,u=e.memoizedState;u!==null&&(a=u.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(r(314))}o!==null&&o.delete(n),cy(e,a)}function kE(e,n){return wa(e,n)}var Ws=null,ur=null,fd=!1,ec=!1,gd=!1,ki=0;function Dn(e){e!==ur&&e.next===null&&(ur===null?Ws=ur=e:ur=ur.next=e),ec=!0,fd||(fd=!0,NE())}function _o(e,n){if(!gd&&ec){gd=!0;do for(var a=!1,o=Ws;o!==null;){if(e!==0){var u=o.pendingLanes;if(u===0)var d=0;else{var m=o.suspendedLanes,y=o.pingedLanes;d=(1<<31-gt(42|e)+1)-1,d&=u&~(m&~y),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,hy(o,d))}else d=ke,d=as(o,o===Ve?d:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(d&3)===0||qr(o,d)||(a=!0,hy(o,d));o=o.next}while(a);gd=!1}}function ME(){ly()}function ly(){ec=fd=!1;var e=0;ki!==0&&qE()&&(e=ki);for(var n=yt(),a=null,o=Ws;o!==null;){var u=o.next,d=uy(o,n);d===0?(o.next=null,a===null?Ws=u:a.next=u,u===null&&(ur=a)):(a=o,(e!==0||(d&3)!==0)&&(ec=!0)),o=u}mt!==0&&mt!==5||_o(e),ki!==0&&(ki=0)}function uy(e,n){for(var a=e.suspendedLanes,o=e.pingedLanes,u=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var m=31-gt(d),y=1<<m,E=u[m];E===-1?((y&a)===0||(y&o)!==0)&&(u[m]=aA(y,n)):E<=n&&(e.expiredLanes|=y),d&=~y}if(n=Ve,a=ke,a=as(e,e===n?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,a===0||e===n&&(ze===2||ze===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&Ra(o),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||qr(e,a)){if(n=a&-a,n===e.callbackPriority)return n;switch(o!==null&&Ra(o),Ol(a)){case 2:case 8:a=zr;break;case 32:a=Oa;break;case 268435456:a=ns;break;default:a=Oa}return o=dy.bind(null,e),a=wa(a,o),e.callbackPriority=n,e.callbackNode=a,n}return o!==null&&o!==null&&Ra(o),e.callbackPriority=2,e.callbackNode=null,2}function dy(e,n){if(mt!==0&&mt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Zs()&&e.callbackNode!==a)return null;var o=ke;return o=as(e,e===Ve?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(Qp(e,o,n),uy(e,yt()),e.callbackNode!=null&&e.callbackNode===a?dy.bind(null,e):null)}function hy(e,n){if(Zs())return null;Qp(e,n,!0)}function NE(){GE(function(){(He&6)!==0?wa(Lr,ME):ly()})}function md(){if(ki===0){var e=Xa;e===0&&(e=hi,hi<<=1,(hi&261888)===0&&(hi=256)),ki=e}return ki}function fy(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:cs(""+e)}function gy(e,n){var a=n.ownerDocument.createElement("input");return a.name=n.name,a.value=n.value,e.id&&a.setAttribute("form",e.id),n.parentNode.insertBefore(a,n),e=new FormData(e),a.parentNode.removeChild(a),e}function DE(e,n,a,o,u){if(n==="submit"&&a&&a.stateNode===u){var d=fy((u[zt]||null).action),m=o.submitter;m&&(n=(n=m[zt]||null)?fy(n.formAction):m.getAttribute("formAction"),n!==null&&(d=n,m=null));var y=new hs("action","action",null,o,u);e.push({event:y,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(ki!==0){var E=m?gy(u,m):new FormData(u);xu(a,{pending:!0,data:E,method:u.method,action:d},null,E)}}else typeof d=="function"&&(y.preventDefault(),E=m?gy(u,m):new FormData(u),xu(a,{pending:!0,data:E,method:u.method,action:d},d,E))},currentTarget:u}]})}}for(var pd=0;pd<Zl.length;pd++){var yd=Zl[pd],UE=yd.toLowerCase(),xE=yd[0].toUpperCase()+yd.slice(1);Tn(UE,"on"+xE)}Tn(Fg,"onAnimationEnd"),Tn(Qg,"onAnimationIteration"),Tn(Yg,"onAnimationStart"),Tn("dblclick","onDoubleClick"),Tn("focusin","onFocus"),Tn("focusout","onBlur"),Tn($A,"onTransitionRun"),Tn(ZA,"onTransitionStart"),Tn(WA,"onTransitionCancel"),Tn(Vg,"onTransitionEnd"),xa("onMouseEnter",["mouseout","mouseover"]),xa("onMouseLeave",["mouseout","mouseover"]),xa("onPointerEnter",["pointerout","pointerover"]),xa("onPointerLeave",["pointerout","pointerover"]),$i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),$i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),$i("onBeforeInput",["compositionend","keypress","textInput","paste"]),$i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),$i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),$i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),PE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(bo));function my(e,n){n=(n&4)!==0;for(var a=0;a<e.length;a++){var o=e[a],u=o.event;o=o.listeners;e:{var d=void 0;if(n)for(var m=o.length-1;0<=m;m--){var y=o[m],E=y.instance,H=y.currentTarget;if(y=y.listener,E!==d&&u.isPropagationStopped())break e;d=y,u.currentTarget=H;try{d(u)}catch(F){ms(F)}u.currentTarget=null,d=E}else for(m=0;m<o.length;m++){if(y=o[m],E=y.instance,H=y.currentTarget,y=y.listener,E!==d&&u.isPropagationStopped())break e;d=y,u.currentTarget=H;try{d(u)}catch(F){ms(F)}u.currentTarget=null,d=E}}}}function Oe(e,n){var a=n[kl];a===void 0&&(a=n[kl]=new Set);var o=e+"__bubble";a.has(o)||(py(n,e,2,!1),a.add(o))}function vd(e,n,a){var o=0;n&&(o|=4),py(a,e,o,n)}var tc="_reactListening"+Math.random().toString(36).slice(2);function Cd(e){if(!e[tc]){e[tc]=!0,lg.forEach(function(a){a!=="selectionchange"&&(PE.has(a)||vd(a,!1,e),vd(a,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[tc]||(n[tc]=!0,vd("selectionchange",!1,n))}}function py(e,n,a,o){switch(Fy(n)){case 2:var u=u_;break;case 8:u=d_;break;default:u=Ud}a=u.bind(null,n,a,e),u=void 0,!zl||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(u=!0),o?u!==void 0?e.addEventListener(n,a,{capture:!0,passive:u}):e.addEventListener(n,a,!0):u!==void 0?e.addEventListener(n,a,{passive:u}):e.addEventListener(n,a,!1)}function Sd(e,n,a,o,u){var d=o;if((n&1)===0&&(n&2)===0&&o!==null)e:for(;;){if(o===null)return;var m=o.tag;if(m===3||m===4){var y=o.stateNode.containerInfo;if(y===u)break;if(m===4)for(m=o.return;m!==null;){var E=m.tag;if((E===3||E===4)&&m.stateNode.containerInfo===u)return;m=m.return}for(;y!==null;){if(m=Na(y),m===null)return;if(E=m.tag,E===5||E===6||E===26||E===27){o=d=m;continue e}y=y.parentNode}}o=o.return}Tg(function(){var H=d,F=Hl(a),$=[];e:{var L=Xg.get(e);if(L!==void 0){var q=hs,ge=e;switch(e){case"keypress":if(us(a)===0)break e;case"keydown":case"keyup":q=OA;break;case"focusin":ge="focus",q=jl;break;case"focusout":ge="blur",q=jl;break;case"beforeblur":case"afterblur":q=jl;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":q=_g;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":q=yA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":q=NA;break;case Fg:case Qg:case Yg:q=SA;break;case Vg:q=UA;break;case"scroll":case"scrollend":q=mA;break;case"wheel":q=PA;break;case"copy":case"cut":case"paste":q=AA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":q=wg;break;case"toggle":case"beforetoggle":q=LA}var Ce=(n&4)!==0,Fe=!Ce&&(e==="scroll"||e==="scrollend"),k=Ce?L!==null?L+"Capture":null:L;Ce=[];for(var R=H,P;R!==null;){var V=R;if(P=V.stateNode,V=V.tag,V!==5&&V!==26&&V!==27||P===null||k===null||(V=Qr(R,k),V!=null&&Ce.push(wo(R,V,P))),Fe)break;R=R.return}0<Ce.length&&(L=new q(L,ge,null,a,F),$.push({event:L,listeners:Ce}))}}if((n&7)===0){e:{if(L=e==="mouseover"||e==="pointerover",q=e==="mouseout"||e==="pointerout",L&&a!==Pl&&(ge=a.relatedTarget||a.fromElement)&&(Na(ge)||ge[Ma]))break e;if((q||L)&&(L=F.window===F?F:(L=F.ownerDocument)?L.defaultView||L.parentWindow:window,q?(ge=a.relatedTarget||a.toElement,q=H,ge=ge?Na(ge):null,ge!==null&&(Fe=l(ge),Ce=ge.tag,ge!==Fe||Ce!==5&&Ce!==27&&Ce!==6)&&(ge=null)):(q=null,ge=H),q!==ge)){if(Ce=_g,V="onMouseLeave",k="onMouseEnter",R="mouse",(e==="pointerout"||e==="pointerover")&&(Ce=wg,V="onPointerLeave",k="onPointerEnter",R="pointer"),Fe=q==null?L:Fr(q),P=ge==null?L:Fr(ge),L=new Ce(V,R+"leave",q,a,F),L.target=Fe,L.relatedTarget=P,V=null,Na(F)===H&&(Ce=new Ce(k,R+"enter",ge,a,F),Ce.target=P,Ce.relatedTarget=Fe,V=Ce),Fe=V,q&&ge)t:{for(Ce=HE,k=q,R=ge,P=0,V=k;V;V=Ce(V))P++;V=0;for(var pe=R;pe;pe=Ce(pe))V++;for(;0<P-V;)k=Ce(k),P--;for(;0<V-P;)R=Ce(R),V--;for(;P--;){if(k===R||R!==null&&k===R.alternate){Ce=k;break t}k=Ce(k),R=Ce(R)}Ce=null}else Ce=null;q!==null&&yy($,L,q,Ce,!1),ge!==null&&Fe!==null&&yy($,Fe,ge,Ce,!0)}}e:{if(L=H?Fr(H):window,q=L.nodeName&&L.nodeName.toLowerCase(),q==="select"||q==="input"&&L.type==="file")var Ue=Ug;else if(Ng(L))if(xg)Ue=VA;else{Ue=QA;var me=FA}else q=L.nodeName,!q||q.toLowerCase()!=="input"||L.type!=="checkbox"&&L.type!=="radio"?H&&xl(H.elementType)&&(Ue=Ug):Ue=YA;if(Ue&&(Ue=Ue(e,H))){Dg($,Ue,a,F);break e}me&&me(e,L,H),e==="focusout"&&H&&L.type==="number"&&H.memoizedProps.value!=null&&Ul(L,"number",L.value)}switch(me=H?Fr(H):window,e){case"focusin":(Ng(me)||me.contentEditable==="true")&&(Ka=me,Xl=H,eo=null);break;case"focusout":eo=Xl=Ka=null;break;case"mousedown":Jl=!0;break;case"contextmenu":case"mouseup":case"dragend":Jl=!1,jg($,a,F);break;case"selectionchange":if(JA)break;case"keydown":case"keyup":jg($,a,F)}var be;if(Fl)e:{switch(e){case"compositionstart":var Me="onCompositionStart";break e;case"compositionend":Me="onCompositionEnd";break e;case"compositionupdate":Me="onCompositionUpdate";break e}Me=void 0}else Ba?kg(e,a)&&(Me="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Me="onCompositionStart");Me&&(Rg&&a.locale!=="ko"&&(Ba||Me!=="onCompositionStart"?Me==="onCompositionEnd"&&Ba&&(be=Ag()):(gi=F,Bl="value"in gi?gi.value:gi.textContent,Ba=!0)),me=nc(H,Me),0<me.length&&(Me=new bg(Me,e,null,a,F),$.push({event:Me,listeners:me}),be?Me.data=be:(be=Mg(a),be!==null&&(Me.data=be)))),(be=BA?KA(e,a):qA(e,a))&&(Me=nc(H,"onBeforeInput"),0<Me.length&&(me=new bg("onBeforeInput","beforeinput",null,a,F),$.push({event:me,listeners:Me}),me.data=be)),DE($,e,H,a,F)}my($,n)})}function wo(e,n,a){return{instance:e,listener:n,currentTarget:a}}function nc(e,n){for(var a=n+"Capture",o=[];e!==null;){var u=e,d=u.stateNode;if(u=u.tag,u!==5&&u!==26&&u!==27||d===null||(u=Qr(e,a),u!=null&&o.unshift(wo(e,u,d)),u=Qr(e,n),u!=null&&o.push(wo(e,u,d))),e.tag===3)return o;e=e.return}return[]}function HE(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function yy(e,n,a,o,u){for(var d=n._reactName,m=[];a!==null&&a!==o;){var y=a,E=y.alternate,H=y.stateNode;if(y=y.tag,E!==null&&E===o)break;y!==5&&y!==26&&y!==27||H===null||(E=H,u?(H=Qr(a,d),H!=null&&m.unshift(wo(a,H,E))):u||(H=Qr(a,d),H!=null&&m.push(wo(a,H,E)))),a=a.return}m.length!==0&&e.push({event:n,listeners:m})}var LE=/\r\n?/g,zE=/\u0000|\uFFFD/g;function vy(e){return(typeof e=="string"?e:""+e).replace(LE,`
`).replace(zE,"")}function Cy(e,n){return n=vy(n),vy(e)===n}function Ge(e,n,a,o,u,d){switch(a){case"children":typeof o=="string"?n==="body"||n==="textarea"&&o===""||Ha(e,o):(typeof o=="number"||typeof o=="bigint")&&n!=="body"&&Ha(e,""+o);break;case"className":os(e,"class",o);break;case"tabIndex":os(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":os(e,a,o);break;case"style":Cg(e,o,d);break;case"data":if(n!=="object"){os(e,"data",o);break}case"src":case"href":if(o===""&&(n!=="a"||a!=="href")){e.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=cs(""+o),e.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(n!=="input"&&Ge(e,n,"name",u.name,u,null),Ge(e,n,"formEncType",u.formEncType,u,null),Ge(e,n,"formMethod",u.formMethod,u,null),Ge(e,n,"formTarget",u.formTarget,u,null)):(Ge(e,n,"encType",u.encType,u,null),Ge(e,n,"method",u.method,u,null),Ge(e,n,"target",u.target,u,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=cs(""+o),e.setAttribute(a,o);break;case"onClick":o!=null&&(e.onclick=Kn);break;case"onScroll":o!=null&&Oe("scroll",e);break;case"onScrollEnd":o!=null&&Oe("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(a=o.__html,a!=null){if(u.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}a=cs(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""+o):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":o===!0?e.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,o):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(a,o):e.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(a):e.setAttribute(a,o);break;case"popover":Oe("beforetoggle",e),Oe("toggle",e),rs(e,"popover",o);break;case"xlinkActuate":Bn(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Bn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Bn(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Bn(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Bn(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Bn(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Bn(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Bn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Bn(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":rs(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=fA.get(a)||a,rs(e,a,o))}}function Td(e,n,a,o,u,d){switch(a){case"style":Cg(e,o,d);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(a=o.__html,a!=null){if(u.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"children":typeof o=="string"?Ha(e,o):(typeof o=="number"||typeof o=="bigint")&&Ha(e,""+o);break;case"onScroll":o!=null&&Oe("scroll",e);break;case"onScrollEnd":o!=null&&Oe("scrollend",e);break;case"onClick":o!=null&&(e.onclick=Kn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ug.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(u=a.endsWith("Capture"),n=a.slice(2,u?a.length-7:void 0),d=e[zt]||null,d=d!=null?d[a]:null,typeof d=="function"&&e.removeEventListener(n,d,u),typeof o=="function")){typeof d!="function"&&d!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(n,o,u);break e}a in e?e[a]=o:o===!0?e.setAttribute(a,""):rs(e,a,o)}}}function wt(e,n,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Oe("error",e),Oe("load",e);var o=!1,u=!1,d;for(d in a)if(a.hasOwnProperty(d)){var m=a[d];if(m!=null)switch(d){case"src":o=!0;break;case"srcSet":u=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:Ge(e,n,d,m,a,null)}}u&&Ge(e,n,"srcSet",a.srcSet,a,null),o&&Ge(e,n,"src",a.src,a,null);return;case"input":Oe("invalid",e);var y=d=m=u=null,E=null,H=null;for(o in a)if(a.hasOwnProperty(o)){var F=a[o];if(F!=null)switch(o){case"name":u=F;break;case"type":m=F;break;case"checked":E=F;break;case"defaultChecked":H=F;break;case"value":d=F;break;case"defaultValue":y=F;break;case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(r(137,n));break;default:Ge(e,n,o,F,a,null)}}mg(e,d,y,E,H,m,u,!1);return;case"select":Oe("invalid",e),o=m=d=null;for(u in a)if(a.hasOwnProperty(u)&&(y=a[u],y!=null))switch(u){case"value":d=y;break;case"defaultValue":m=y;break;case"multiple":o=y;default:Ge(e,n,u,y,a,null)}n=d,a=m,e.multiple=!!o,n!=null?Pa(e,!!o,n,!1):a!=null&&Pa(e,!!o,a,!0);return;case"textarea":Oe("invalid",e),d=u=o=null;for(m in a)if(a.hasOwnProperty(m)&&(y=a[m],y!=null))switch(m){case"value":o=y;break;case"defaultValue":u=y;break;case"children":d=y;break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(r(91));break;default:Ge(e,n,m,y,a,null)}yg(e,o,u,d);return;case"option":for(E in a)if(a.hasOwnProperty(E)&&(o=a[E],o!=null))switch(E){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:Ge(e,n,E,o,a,null)}return;case"dialog":Oe("beforetoggle",e),Oe("toggle",e),Oe("cancel",e),Oe("close",e);break;case"iframe":case"object":Oe("load",e);break;case"video":case"audio":for(o=0;o<bo.length;o++)Oe(bo[o],e);break;case"image":Oe("error",e),Oe("load",e);break;case"details":Oe("toggle",e);break;case"embed":case"source":case"link":Oe("error",e),Oe("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in a)if(a.hasOwnProperty(H)&&(o=a[H],o!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:Ge(e,n,H,o,a,null)}return;default:if(xl(n)){for(F in a)a.hasOwnProperty(F)&&(o=a[F],o!==void 0&&Td(e,n,F,o,a,void 0));return}}for(y in a)a.hasOwnProperty(y)&&(o=a[y],o!=null&&Ge(e,n,y,o,a,null))}function BE(e,n,a,o){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var u=null,d=null,m=null,y=null,E=null,H=null,F=null;for(q in a){var $=a[q];if(a.hasOwnProperty(q)&&$!=null)switch(q){case"checked":break;case"value":break;case"defaultValue":E=$;default:o.hasOwnProperty(q)||Ge(e,n,q,null,o,$)}}for(var L in o){var q=o[L];if($=a[L],o.hasOwnProperty(L)&&(q!=null||$!=null))switch(L){case"type":d=q;break;case"name":u=q;break;case"checked":H=q;break;case"defaultChecked":F=q;break;case"value":m=q;break;case"defaultValue":y=q;break;case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(r(137,n));break;default:q!==$&&Ge(e,n,L,q,o,$)}}Dl(e,m,y,E,H,F,d,u);return;case"select":q=m=y=L=null;for(d in a)if(E=a[d],a.hasOwnProperty(d)&&E!=null)switch(d){case"value":break;case"multiple":q=E;default:o.hasOwnProperty(d)||Ge(e,n,d,null,o,E)}for(u in o)if(d=o[u],E=a[u],o.hasOwnProperty(u)&&(d!=null||E!=null))switch(u){case"value":L=d;break;case"defaultValue":y=d;break;case"multiple":m=d;default:d!==E&&Ge(e,n,u,d,o,E)}n=y,a=m,o=q,L!=null?Pa(e,!!a,L,!1):!!o!=!!a&&(n!=null?Pa(e,!!a,n,!0):Pa(e,!!a,a?[]:"",!1));return;case"textarea":q=L=null;for(y in a)if(u=a[y],a.hasOwnProperty(y)&&u!=null&&!o.hasOwnProperty(y))switch(y){case"value":break;case"children":break;default:Ge(e,n,y,null,o,u)}for(m in o)if(u=o[m],d=a[m],o.hasOwnProperty(m)&&(u!=null||d!=null))switch(m){case"value":L=u;break;case"defaultValue":q=u;break;case"children":break;case"dangerouslySetInnerHTML":if(u!=null)throw Error(r(91));break;default:u!==d&&Ge(e,n,m,u,o,d)}pg(e,L,q);return;case"option":for(var ge in a)if(L=a[ge],a.hasOwnProperty(ge)&&L!=null&&!o.hasOwnProperty(ge))switch(ge){case"selected":e.selected=!1;break;default:Ge(e,n,ge,null,o,L)}for(E in o)if(L=o[E],q=a[E],o.hasOwnProperty(E)&&L!==q&&(L!=null||q!=null))switch(E){case"selected":e.selected=L&&typeof L!="function"&&typeof L!="symbol";break;default:Ge(e,n,E,L,o,q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ce in a)L=a[Ce],a.hasOwnProperty(Ce)&&L!=null&&!o.hasOwnProperty(Ce)&&Ge(e,n,Ce,null,o,L);for(H in o)if(L=o[H],q=a[H],o.hasOwnProperty(H)&&L!==q&&(L!=null||q!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(L!=null)throw Error(r(137,n));break;default:Ge(e,n,H,L,o,q)}return;default:if(xl(n)){for(var Fe in a)L=a[Fe],a.hasOwnProperty(Fe)&&L!==void 0&&!o.hasOwnProperty(Fe)&&Td(e,n,Fe,void 0,o,L);for(F in o)L=o[F],q=a[F],!o.hasOwnProperty(F)||L===q||L===void 0&&q===void 0||Td(e,n,F,L,o,q);return}}for(var k in a)L=a[k],a.hasOwnProperty(k)&&L!=null&&!o.hasOwnProperty(k)&&Ge(e,n,k,null,o,L);for($ in o)L=o[$],q=a[$],!o.hasOwnProperty($)||L===q||L==null&&q==null||Ge(e,n,$,L,o,q)}function Sy(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function KE(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,a=performance.getEntriesByType("resource"),o=0;o<a.length;o++){var u=a[o],d=u.transferSize,m=u.initiatorType,y=u.duration;if(d&&y&&Sy(m)){for(m=0,y=u.responseEnd,o+=1;o<a.length;o++){var E=a[o],H=E.startTime;if(H>y)break;var F=E.transferSize,$=E.initiatorType;F&&Sy($)&&(E=E.responseEnd,m+=F*(E<y?1:(y-H)/(E-H)))}if(--o,n+=8*(d+m)/(u.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Ad=null,Ed=null;function ic(e){return e.nodeType===9?e:e.ownerDocument}function Ty(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ay(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function _d(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var bd=null;function qE(){var e=window.event;return e&&e.type==="popstate"?e===bd?!1:(bd=e,!0):(bd=null,!1)}var Ey=typeof setTimeout=="function"?setTimeout:void 0,jE=typeof clearTimeout=="function"?clearTimeout:void 0,_y=typeof Promise=="function"?Promise:void 0,GE=typeof queueMicrotask=="function"?queueMicrotask:typeof _y<"u"?function(e){return _y.resolve(null).then(e).catch(FE)}:Ey;function FE(e){setTimeout(function(){throw e})}function Mi(e){return e==="head"}function by(e,n){var a=n,o=0;do{var u=a.nextSibling;if(e.removeChild(a),u&&u.nodeType===8)if(a=u.data,a==="/$"||a==="/&"){if(o===0){e.removeChild(u),gr(n);return}o--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")o++;else if(a==="html")Ro(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,Ro(a);for(var d=a.firstChild;d;){var m=d.nextSibling,y=d.nodeName;d[Gr]||y==="SCRIPT"||y==="STYLE"||y==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=m}}else a==="body"&&Ro(e.ownerDocument.body);a=u}while(a);gr(n)}function wy(e,n){var a=e;e=0;do{var o=a.nextSibling;if(a.nodeType===1?n?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(n?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),o&&o.nodeType===8)if(a=o.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=o}while(a)}function wd(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var a=n;switch(n=n.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":wd(a),Ml(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function QE(e,n,a,o){for(;e.nodeType===1;){var u=a;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[Gr])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==u.rel||e.getAttribute("href")!==(u.href==null||u.href===""?null:u.href)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin)||e.getAttribute("title")!==(u.title==null?null:u.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(u.src==null?null:u.src)||e.getAttribute("type")!==(u.type==null?null:u.type)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var d=u.name==null?null:""+u.name;if(u.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=yn(e.nextSibling),e===null)break}return null}function YE(e,n,a){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=yn(e.nextSibling),e===null))return null;return e}function Ry(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=yn(e.nextSibling),e===null))return null;return e}function Rd(e){return e.data==="$?"||e.data==="$~"}function Id(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function VE(e,n){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||a.readyState!=="loading")n();else{var o=function(){n(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function yn(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var Od=null;function Iy(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(n===0)return yn(e.nextSibling);n--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||n++}e=e.nextSibling}return null}function Oy(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(n===0)return e;n--}else a!=="/$"&&a!=="/&"||n++}e=e.previousSibling}return null}function ky(e,n,a){switch(n=ic(a),e){case"html":if(e=n.documentElement,!e)throw Error(r(452));return e;case"head":if(e=n.head,!e)throw Error(r(453));return e;case"body":if(e=n.body,!e)throw Error(r(454));return e;default:throw Error(r(451))}}function Ro(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);Ml(e)}var vn=new Map,My=new Set;function ac(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ii=X.d;X.d={f:XE,r:JE,D:$E,C:ZE,L:WE,m:e_,X:n_,S:t_,M:i_};function XE(){var e=ii.f(),n=Xs();return e||n}function JE(e){var n=Da(e);n!==null&&n.tag===5&&n.type==="form"?Vm(n):ii.r(e)}var dr=typeof document>"u"?null:document;function Ny(e,n,a){var o=dr;if(o&&typeof n=="string"&&n){var u=un(n);u='link[rel="'+e+'"][href="'+u+'"]',typeof a=="string"&&(u+='[crossorigin="'+a+'"]'),My.has(u)||(My.add(u),e={rel:e,crossOrigin:a,href:n},o.querySelector(u)===null&&(n=o.createElement("link"),wt(n,"link",e),Ct(n),o.head.appendChild(n)))}}function $E(e){ii.D(e),Ny("dns-prefetch",e,null)}function ZE(e,n){ii.C(e,n),Ny("preconnect",e,n)}function WE(e,n,a){ii.L(e,n,a);var o=dr;if(o&&e&&n){var u='link[rel="preload"][as="'+un(n)+'"]';n==="image"&&a&&a.imageSrcSet?(u+='[imagesrcset="'+un(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(u+='[imagesizes="'+un(a.imageSizes)+'"]')):u+='[href="'+un(e)+'"]';var d=u;switch(n){case"style":d=hr(e);break;case"script":d=fr(e)}vn.has(d)||(e=T({rel:"preload",href:n==="image"&&a&&a.imageSrcSet?void 0:e,as:n},a),vn.set(d,e),o.querySelector(u)!==null||n==="style"&&o.querySelector(Io(d))||n==="script"&&o.querySelector(Oo(d))||(n=o.createElement("link"),wt(n,"link",e),Ct(n),o.head.appendChild(n)))}}function e_(e,n){ii.m(e,n);var a=dr;if(a&&e){var o=n&&typeof n.as=="string"?n.as:"script",u='link[rel="modulepreload"][as="'+un(o)+'"][href="'+un(e)+'"]',d=u;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=fr(e)}if(!vn.has(d)&&(e=T({rel:"modulepreload",href:e},n),vn.set(d,e),a.querySelector(u)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Oo(d)))return}o=a.createElement("link"),wt(o,"link",e),Ct(o),a.head.appendChild(o)}}}function t_(e,n,a){ii.S(e,n,a);var o=dr;if(o&&e){var u=Ua(o).hoistableStyles,d=hr(e);n=n||"default";var m=u.get(d);if(!m){var y={loading:0,preload:null};if(m=o.querySelector(Io(d)))y.loading=5;else{e=T({rel:"stylesheet",href:e,"data-precedence":n},a),(a=vn.get(d))&&kd(e,a);var E=m=o.createElement("link");Ct(E),wt(E,"link",e),E._p=new Promise(function(H,F){E.onload=H,E.onerror=F}),E.addEventListener("load",function(){y.loading|=1}),E.addEventListener("error",function(){y.loading|=2}),y.loading|=4,rc(m,n,o)}m={type:"stylesheet",instance:m,count:1,state:y},u.set(d,m)}}}function n_(e,n){ii.X(e,n);var a=dr;if(a&&e){var o=Ua(a).hoistableScripts,u=fr(e),d=o.get(u);d||(d=a.querySelector(Oo(u)),d||(e=T({src:e,async:!0},n),(n=vn.get(u))&&Md(e,n),d=a.createElement("script"),Ct(d),wt(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(u,d))}}function i_(e,n){ii.M(e,n);var a=dr;if(a&&e){var o=Ua(a).hoistableScripts,u=fr(e),d=o.get(u);d||(d=a.querySelector(Oo(u)),d||(e=T({src:e,async:!0,type:"module"},n),(n=vn.get(u))&&Md(e,n),d=a.createElement("script"),Ct(d),wt(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(u,d))}}function Dy(e,n,a,o){var u=(u=ae.current)?ac(u):null;if(!u)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(n=hr(a.href),a=Ua(u).hoistableStyles,o=a.get(n),o||(o={type:"style",instance:null,count:0,state:null},a.set(n,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=hr(a.href);var d=Ua(u).hoistableStyles,m=d.get(e);if(m||(u=u.ownerDocument||u,m={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,m),(d=u.querySelector(Io(e)))&&!d._p&&(m.instance=d,m.state.loading=5),vn.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},vn.set(e,a),d||a_(u,e,a,m.state))),n&&o===null)throw Error(r(528,""));return m}if(n&&o!==null)throw Error(r(529,""));return null;case"script":return n=a.async,a=a.src,typeof a=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=fr(a),a=Ua(u).hoistableScripts,o=a.get(n),o||(o={type:"script",instance:null,count:0,state:null},a.set(n,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function hr(e){return'href="'+un(e)+'"'}function Io(e){return'link[rel="stylesheet"]['+e+"]"}function Uy(e){return T({},e,{"data-precedence":e.precedence,precedence:null})}function a_(e,n,a,o){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?o.loading=1:(n=e.createElement("link"),o.preload=n,n.addEventListener("load",function(){return o.loading|=1}),n.addEventListener("error",function(){return o.loading|=2}),wt(n,"link",a),Ct(n),e.head.appendChild(n))}function fr(e){return'[src="'+un(e)+'"]'}function Oo(e){return"script[async]"+e}function xy(e,n,a){if(n.count++,n.instance===null)switch(n.type){case"style":var o=e.querySelector('style[data-href~="'+un(a.href)+'"]');if(o)return n.instance=o,Ct(o),o;var u=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),Ct(o),wt(o,"style",u),rc(o,a.precedence,e),n.instance=o;case"stylesheet":u=hr(a.href);var d=e.querySelector(Io(u));if(d)return n.state.loading|=4,n.instance=d,Ct(d),d;o=Uy(a),(u=vn.get(u))&&kd(o,u),d=(e.ownerDocument||e).createElement("link"),Ct(d);var m=d;return m._p=new Promise(function(y,E){m.onload=y,m.onerror=E}),wt(d,"link",o),n.state.loading|=4,rc(d,a.precedence,e),n.instance=d;case"script":return d=fr(a.src),(u=e.querySelector(Oo(d)))?(n.instance=u,Ct(u),u):(o=a,(u=vn.get(d))&&(o=T({},a),Md(o,u)),e=e.ownerDocument||e,u=e.createElement("script"),Ct(u),wt(u,"link",o),e.head.appendChild(u),n.instance=u);case"void":return null;default:throw Error(r(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(o=n.instance,n.state.loading|=4,rc(o,a.precedence,e));return n.instance}function rc(e,n,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),u=o.length?o[o.length-1]:null,d=u,m=0;m<o.length;m++){var y=o[m];if(y.dataset.precedence===n)d=y;else if(d!==u)break}d?d.parentNode.insertBefore(e,d.nextSibling):(n=a.nodeType===9?a.head:a,n.insertBefore(e,n.firstChild))}function kd(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function Md(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var oc=null;function Py(e,n,a){if(oc===null){var o=new Map,u=oc=new Map;u.set(a,o)}else u=oc,o=u.get(a),o||(o=new Map,u.set(a,o));if(o.has(e))return o;for(o.set(e,null),a=a.getElementsByTagName(e),u=0;u<a.length;u++){var d=a[u];if(!(d[Gr]||d[At]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var m=d.getAttribute(n)||"";m=e+m;var y=o.get(m);y?y.push(d):o.set(m,[d])}}return o}function Hy(e,n,a){e=e.ownerDocument||e,e.head.insertBefore(a,n==="title"?e.querySelector("head > title"):null)}function r_(e,n,a){if(a===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Ly(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function o_(e,n,a,o){if(a.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var u=hr(o.href),d=n.querySelector(Io(u));if(d){n=d._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=sc.bind(e),n.then(e,e)),a.state.loading|=4,a.instance=d,Ct(d);return}d=n.ownerDocument||n,o=Uy(o),(u=vn.get(u))&&kd(o,u),d=d.createElement("link"),Ct(d);var m=d;m._p=new Promise(function(y,E){m.onload=y,m.onerror=E}),wt(d,"link",o),a.instance=d}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,n),(n=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=sc.bind(e),n.addEventListener("load",a),n.addEventListener("error",a))}}var Nd=0;function s_(e,n){return e.stylesheets&&e.count===0&&lc(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var o=setTimeout(function(){if(e.stylesheets&&lc(e,e.stylesheets),e.unsuspend){var d=e.unsuspend;e.unsuspend=null,d()}},6e4+n);0<e.imgBytes&&Nd===0&&(Nd=62500*KE());var u=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&lc(e,e.stylesheets),e.unsuspend)){var d=e.unsuspend;e.unsuspend=null,d()}},(e.imgBytes>Nd?50:800)+n);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(o),clearTimeout(u)}}:null}function sc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)lc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var cc=null;function lc(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,cc=new Map,n.forEach(c_,e),cc=null,sc.call(e))}function c_(e,n){if(!(n.state.loading&4)){var a=cc.get(e);if(a)var o=a.get(null);else{a=new Map,cc.set(e,a);for(var u=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<u.length;d++){var m=u[d];(m.nodeName==="LINK"||m.getAttribute("media")!=="not all")&&(a.set(m.dataset.precedence,m),o=m)}o&&a.set(null,o)}u=n.instance,m=u.getAttribute("data-precedence"),d=a.get(m)||o,d===o&&a.set(null,u),a.set(m,u),this.count++,o=sc.bind(this),u.addEventListener("load",o),u.addEventListener("error",o),d?d.parentNode.insertBefore(u,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(u,e.firstChild)),n.state.loading|=4}}var ko={$$typeof:ue,Provider:null,Consumer:null,_currentValue:M,_currentValue2:M,_threadCount:0};function l_(e,n,a,o,u,d,m,y,E){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Rl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rl(0),this.hiddenUpdates=Rl(null),this.identifierPrefix=o,this.onUncaughtError=u,this.onCaughtError=d,this.onRecoverableError=m,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function zy(e,n,a,o,u,d,m,y,E,H,F,$){return e=new l_(e,n,a,m,E,H,F,$,y),n=1,d===!0&&(n|=24),d=$t(3,null,null,n),e.current=d,d.stateNode=e,n=du(),n.refCount++,e.pooledCache=n,n.refCount++,d.memoizedState={element:o,isDehydrated:a,cache:n},mu(d),e}function By(e){return e?(e=Ga,e):Ga}function Ky(e,n,a,o,u,d){u=By(u),o.context===null?o.context=u:o.pendingContext=u,o=Si(n),o.payload={element:a},d=d===void 0?null:d,d!==null&&(o.callback=d),a=Ti(e,o,n),a!==null&&(Ft(a,e,n),so(a,e,n))}function qy(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<n?a:n}}function Dd(e,n){qy(e,n),(e=e.alternate)&&qy(e,n)}function jy(e){if(e.tag===13||e.tag===31){var n=ta(e,67108864);n!==null&&Ft(n,e,67108864),Dd(e,67108864)}}function Gy(e){if(e.tag===13||e.tag===31){var n=nn();n=Il(n);var a=ta(e,n);a!==null&&Ft(a,e,n),Dd(e,n)}}var uc=!0;function u_(e,n,a,o){var u=D.T;D.T=null;var d=X.p;try{X.p=2,Ud(e,n,a,o)}finally{X.p=d,D.T=u}}function d_(e,n,a,o){var u=D.T;D.T=null;var d=X.p;try{X.p=8,Ud(e,n,a,o)}finally{X.p=d,D.T=u}}function Ud(e,n,a,o){if(uc){var u=xd(o);if(u===null)Sd(e,n,o,dc,a),Qy(e,o);else if(f_(u,e,n,a,o))o.stopPropagation();else if(Qy(e,o),n&4&&-1<h_.indexOf(e)){for(;u!==null;){var d=Da(u);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var m=Sn(d.pendingLanes);if(m!==0){var y=d;for(y.pendingLanes|=2,y.entangledLanes|=2;m;){var E=1<<31-gt(m);y.entanglements[1]|=E,m&=~E}Dn(d),(He&6)===0&&(Ys=yt()+500,_o(0))}}break;case 31:case 13:y=ta(d,2),y!==null&&Ft(y,d,2),Xs(),Dd(d,2)}if(d=xd(o),d===null&&Sd(e,n,o,dc,a),d===u)break;u=d}u!==null&&o.stopPropagation()}else Sd(e,n,o,null,a)}}function xd(e){return e=Hl(e),Pd(e)}var dc=null;function Pd(e){if(dc=null,e=Na(e),e!==null){var n=l(e);if(n===null)e=null;else{var a=n.tag;if(a===13){if(e=h(n),e!==null)return e;e=null}else if(a===31){if(e=f(n),e!==null)return e;e=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return dc=e,null}function Fy(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(di()){case Lr:return 2;case zr:return 8;case Oa:case ka:return 32;case ns:return 268435456;default:return 32}default:return 32}}var Hd=!1,Ni=null,Di=null,Ui=null,Mo=new Map,No=new Map,xi=[],h_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Qy(e,n){switch(e){case"focusin":case"focusout":Ni=null;break;case"dragenter":case"dragleave":Di=null;break;case"mouseover":case"mouseout":Ui=null;break;case"pointerover":case"pointerout":Mo.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":No.delete(n.pointerId)}}function Do(e,n,a,o,u,d){return e===null||e.nativeEvent!==d?(e={blockedOn:n,domEventName:a,eventSystemFlags:o,nativeEvent:d,targetContainers:[u]},n!==null&&(n=Da(n),n!==null&&jy(n)),e):(e.eventSystemFlags|=o,n=e.targetContainers,u!==null&&n.indexOf(u)===-1&&n.push(u),e)}function f_(e,n,a,o,u){switch(n){case"focusin":return Ni=Do(Ni,e,n,a,o,u),!0;case"dragenter":return Di=Do(Di,e,n,a,o,u),!0;case"mouseover":return Ui=Do(Ui,e,n,a,o,u),!0;case"pointerover":var d=u.pointerId;return Mo.set(d,Do(Mo.get(d)||null,e,n,a,o,u)),!0;case"gotpointercapture":return d=u.pointerId,No.set(d,Do(No.get(d)||null,e,n,a,o,u)),!0}return!1}function Yy(e){var n=Na(e.target);if(n!==null){var a=l(n);if(a!==null){if(n=a.tag,n===13){if(n=h(a),n!==null){e.blockedOn=n,sg(e.priority,function(){Gy(a)});return}}else if(n===31){if(n=f(a),n!==null){e.blockedOn=n,sg(e.priority,function(){Gy(a)});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function hc(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var a=xd(e.nativeEvent);if(a===null){a=e.nativeEvent;var o=new a.constructor(a.type,a);Pl=o,a.target.dispatchEvent(o),Pl=null}else return n=Da(a),n!==null&&jy(n),e.blockedOn=a,!1;n.shift()}return!0}function Vy(e,n,a){hc(e)&&a.delete(n)}function g_(){Hd=!1,Ni!==null&&hc(Ni)&&(Ni=null),Di!==null&&hc(Di)&&(Di=null),Ui!==null&&hc(Ui)&&(Ui=null),Mo.forEach(Vy),No.forEach(Vy)}function fc(e,n){e.blockedOn===n&&(e.blockedOn=null,Hd||(Hd=!0,c.unstable_scheduleCallback(c.unstable_NormalPriority,g_)))}var gc=null;function Xy(e){gc!==e&&(gc=e,c.unstable_scheduleCallback(c.unstable_NormalPriority,function(){gc===e&&(gc=null);for(var n=0;n<e.length;n+=3){var a=e[n],o=e[n+1],u=e[n+2];if(typeof o!="function"){if(Pd(o||a)===null)continue;break}var d=Da(a);d!==null&&(e.splice(n,3),n-=3,xu(d,{pending:!0,data:u,method:a.method,action:o},o,u))}}))}function gr(e){function n(E){return fc(E,e)}Ni!==null&&fc(Ni,e),Di!==null&&fc(Di,e),Ui!==null&&fc(Ui,e),Mo.forEach(n),No.forEach(n);for(var a=0;a<xi.length;a++){var o=xi[a];o.blockedOn===e&&(o.blockedOn=null)}for(;0<xi.length&&(a=xi[0],a.blockedOn===null);)Yy(a),a.blockedOn===null&&xi.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var u=a[o],d=a[o+1],m=u[zt]||null;if(typeof d=="function")m||Xy(a);else if(m){var y=null;if(d&&d.hasAttribute("formAction")){if(u=d,m=d[zt]||null)y=m.formAction;else if(Pd(u)!==null)continue}else y=m.action;typeof y=="function"?a[o+1]=y:(a.splice(o,3),o-=3),Xy(a)}}}function Jy(){function e(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(m){return u=m})},focusReset:"manual",scroll:"manual"})}function n(){u!==null&&(u(),u=null),o||setTimeout(a,20)}function a(){if(!o&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,u=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(a,100),function(){o=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),u!==null&&(u(),u=null)}}}function Ld(e){this._internalRoot=e}mc.prototype.render=Ld.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(r(409));var a=n.current,o=nn();Ky(a,o,e,n,null,null)},mc.prototype.unmount=Ld.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;Ky(e.current,2,null,e,null,null),Xs(),n[Ma]=null}};function mc(e){this._internalRoot=e}mc.prototype.unstable_scheduleHydration=function(e){if(e){var n=og();e={blockedOn:null,target:e,priority:n};for(var a=0;a<xi.length&&n!==0&&n<xi[a].priority;a++);xi.splice(a,0,e),a===0&&Yy(e)}};var $y=t.version;if($y!=="19.2.0")throw Error(r(527,$y,"19.2.0"));X.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=p(n),e=e!==null?S(e):null,e=e===null?null:e.stateNode,e};var m_={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:D,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pc.isDisabled&&pc.supportsFiber)try{zn=pc.inject(m_),De=pc}catch{}}return xo.createRoot=function(e,n){if(!s(e))throw Error(r(299));var a=!1,o="",u=ap,d=rp,m=op;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(u=n.onUncaughtError),n.onCaughtError!==void 0&&(d=n.onCaughtError),n.onRecoverableError!==void 0&&(m=n.onRecoverableError)),n=zy(e,1,!1,null,null,a,o,null,u,d,m,Jy),e[Ma]=n.current,Cd(e),new Ld(n)},xo.hydrateRoot=function(e,n,a){if(!s(e))throw Error(r(299));var o=!1,u="",d=ap,m=rp,y=op,E=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(u=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(m=a.onCaughtError),a.onRecoverableError!==void 0&&(y=a.onRecoverableError),a.formState!==void 0&&(E=a.formState)),n=zy(e,1,!0,n,a??null,o,u,E,d,m,y,Jy),n.context=By(null),a=n.current,o=nn(),o=Il(o),u=Si(o),u.callback=null,Ti(a,u,o),a=o,n.current.lanes=a,jr(n,a),Dn(n),e[Ma]=n.current,Cd(e),new mc(n)},xo.version="19.2.0",xo}var sv;function __(){if(sv)return Kd.exports;sv=1;function c(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(c)}catch(t){console.error(t)}}return c(),Kd.exports=E_(),Kd.exports}var b_=__(),Fd={exports:{}};var cv;function w_(){return cv||(cv=1,(function(c){(function(){var t={}.hasOwnProperty;function i(){for(var l="",h=0;h<arguments.length;h++){var f=arguments[h];f&&(l=s(l,r(f)))}return l}function r(l){if(typeof l=="string"||typeof l=="number")return l;if(typeof l!="object")return"";if(Array.isArray(l))return i.apply(null,l);if(l.toString!==Object.prototype.toString&&!l.toString.toString().includes("[native code]"))return l.toString();var h="";for(var f in l)t.call(l,f)&&l[f]&&(h=s(h,f));return h}function s(l,h){return h?l?l+" "+h:l+h:l}c.exports?(i.default=i,c.exports=i):window.classNames=i})()})(Fd)),Fd.exports}var R_=w_();const rt=_a(R_),I_=["as","disabled"];function O_(c,t){if(c==null)return{};var i={};for(var r in c)if({}.hasOwnProperty.call(c,r)){if(t.indexOf(r)>=0)continue;i[r]=c[r]}return i}function k_(c){return!c||c.trim()==="#"}function _C({tagName:c,disabled:t,href:i,target:r,rel:s,role:l,onClick:h,tabIndex:f=0,type:g}){c||(i!=null||r!=null||s!=null?c="a":c="button");const p={tagName:c};if(c==="button")return[{type:g||"button",disabled:t},p];const S=A=>{if((t||c==="a"&&k_(i))&&A.preventDefault(),t){A.stopPropagation();return}h?.(A)},T=A=>{A.key===" "&&(A.preventDefault(),S(A))};return c==="a"&&(i||(i="#"),t&&(i=void 0)),[{role:l??"button",disabled:void 0,tabIndex:t?void 0:f,href:i,target:c==="a"?r:void 0,"aria-disabled":t||void 0,rel:c==="a"?s:void 0,onClick:S,onKeyDown:T},p]}const M_=B.forwardRef((c,t)=>{let{as:i,disabled:r}=c,s=O_(c,I_);const[l,{tagName:h}]=_C(Object.assign({tagName:i,disabled:r},s));return Z.jsx(h,Object.assign({},s,l,{ref:t}))});M_.displayName="Button";const N_=["xxl","xl","lg","md","sm","xs"],D_="xs",nl=B.createContext({prefixes:{},breakpoints:N_,minBreakpoint:D_}),{Consumer:Uk,Provider:xk}=nl;function Lt(c,t){const{prefixes:i}=B.useContext(nl);return c||i[t]||t}function bC(){const{breakpoints:c}=B.useContext(nl);return c}function wC(){const{minBreakpoint:c}=B.useContext(nl);return c}const Ko=B.forwardRef(({as:c,bsPrefix:t,variant:i="primary",size:r,active:s=!1,disabled:l=!1,className:h,...f},g)=>{const p=Lt(t,"btn"),[S,{tagName:T}]=_C({tagName:c,disabled:l,...f}),A=T;return Z.jsx(A,{...S,...f,ref:g,disabled:l,className:rt(h,p,s&&"active",i&&`${p}-${i}`,r&&`${p}-${r}`,f.href&&l&&"disabled")})});Ko.displayName="Button";const U_="/knowledge-lib/assets/Stamena.jpg";function ph(){return ph=Object.assign?Object.assign.bind():function(c){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)({}).hasOwnProperty.call(i,r)&&(c[r]=i[r])}return c},ph.apply(null,arguments)}function RC(c,t){if(c==null)return{};var i={};for(var r in c)if({}.hasOwnProperty.call(c,r)){if(t.indexOf(r)!==-1)continue;i[r]=c[r]}return i}function lv(c){return"default"+c.charAt(0).toUpperCase()+c.substr(1)}function x_(c){var t=P_(c,"string");return typeof t=="symbol"?t:String(t)}function P_(c,t){if(typeof c!="object"||c===null)return c;var i=c[Symbol.toPrimitive];if(i!==void 0){var r=i.call(c,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(c)}function H_(c,t,i){var r=B.useRef(c!==void 0),s=B.useState(t),l=s[0],h=s[1],f=c!==void 0,g=r.current;return r.current=f,!f&&g&&l!==t&&h(t),[f?c:l,B.useCallback(function(p){for(var S=arguments.length,T=new Array(S>1?S-1:0),A=1;A<S;A++)T[A-1]=arguments[A];i&&i.apply(void 0,[p].concat(T)),h(p)},[i])]}function L_(c,t){return Object.keys(t).reduce(function(i,r){var s,l=i,h=l[lv(r)],f=l[r],g=RC(l,[lv(r),r].map(x_)),p=t[r],S=H_(f,h,c[p]),T=S[0],A=S[1];return ph({},g,(s={},s[r]=T,s[p]=A,s))},c)}function yh(c,t){return yh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,r){return i.__proto__=r,i},yh(c,t)}function z_(c,t){c.prototype=Object.create(t.prototype),c.prototype.constructor=c,yh(c,t)}function Hh(c){return c&&c.ownerDocument||document}function B_(c){var t=Hh(c);return t&&t.defaultView||window}function K_(c,t){return B_(c).getComputedStyle(c,t)}var q_=/([A-Z])/g;function j_(c){return c.replace(q_,"-$1").toLowerCase()}var G_=/^ms-/;function yc(c){return j_(c).replace(G_,"-ms-")}var F_=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function Q_(c){return!!(c&&F_.test(c))}function ci(c,t){var i="",r="";if(typeof t=="string")return c.style.getPropertyValue(yc(t))||K_(c).getPropertyValue(yc(t));Object.keys(t).forEach(function(s){var l=t[s];!l&&l!==0?c.style.removeProperty(yc(s)):Q_(s)?r+=s+"("+l+") ":i+=yc(s)+": "+l+";"}),r&&(i+="transform: "+r+";"),c.style.cssText+=";"+i}var Qd={exports:{}},Yd,uv;function Y_(){if(uv)return Yd;uv=1;var c="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Yd=c,Yd}var Vd,dv;function V_(){if(dv)return Vd;dv=1;var c=Y_();function t(){}function i(){}return i.resetWarningCache=t,Vd=function(){function r(h,f,g,p,S,T){if(T!==c){var A=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw A.name="Invariant Violation",A}}r.isRequired=r;function s(){return r}var l={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:s,element:r,elementType:r,instanceOf:s,node:r,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:i,resetWarningCache:t};return l.PropTypes=l,l},Vd}var hv;function Mr(){return hv||(hv=1,Qd.exports=V_()()),Qd.exports}var X_=Mr();const Xd=_a(X_);var J_=EC();const Tr=_a(J_),fv={disabled:!1},IC=Pn.createContext(null);var $_=function(t){return t.scrollTop},Lo="unmounted",Li="exited",wn="entering",oi="entered",Qo="exiting",ui=(function(c){z_(t,c);function t(r,s){var l;l=c.call(this,r,s)||this;var h=s,f=h&&!h.isMounting?r.enter:r.appear,g;return l.appearStatus=null,r.in?f?(g=Li,l.appearStatus=wn):g=oi:r.unmountOnExit||r.mountOnEnter?g=Lo:g=Li,l.state={status:g},l.nextCallback=null,l}t.getDerivedStateFromProps=function(s,l){var h=s.in;return h&&l.status===Lo?{status:Li}:null};var i=t.prototype;return i.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},i.componentDidUpdate=function(s){var l=null;if(s!==this.props){var h=this.state.status;this.props.in?h!==wn&&h!==oi&&(l=wn):(h===wn||h===oi)&&(l=Qo)}this.updateStatus(!1,l)},i.componentWillUnmount=function(){this.cancelNextCallback()},i.getTimeouts=function(){var s=this.props.timeout,l,h,f;return l=h=f=s,s!=null&&typeof s!="number"&&(l=s.exit,h=s.enter,f=s.appear!==void 0?s.appear:h),{exit:l,enter:h,appear:f}},i.updateStatus=function(s,l){if(s===void 0&&(s=!1),l!==null)if(this.cancelNextCallback(),l===wn){if(this.props.unmountOnExit||this.props.mountOnEnter){var h=this.props.nodeRef?this.props.nodeRef.current:Tr.findDOMNode(this);h&&$_(h)}this.performEnter(s)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Li&&this.setState({status:Lo})},i.performEnter=function(s){var l=this,h=this.props.enter,f=this.context?this.context.isMounting:s,g=this.props.nodeRef?[f]:[Tr.findDOMNode(this),f],p=g[0],S=g[1],T=this.getTimeouts(),A=f?T.appear:T.enter;if(!s&&!h||fv.disabled){this.safeSetState({status:oi},function(){l.props.onEntered(p)});return}this.props.onEnter(p,S),this.safeSetState({status:wn},function(){l.props.onEntering(p,S),l.onTransitionEnd(A,function(){l.safeSetState({status:oi},function(){l.props.onEntered(p,S)})})})},i.performExit=function(){var s=this,l=this.props.exit,h=this.getTimeouts(),f=this.props.nodeRef?void 0:Tr.findDOMNode(this);if(!l||fv.disabled){this.safeSetState({status:Li},function(){s.props.onExited(f)});return}this.props.onExit(f),this.safeSetState({status:Qo},function(){s.props.onExiting(f),s.onTransitionEnd(h.exit,function(){s.safeSetState({status:Li},function(){s.props.onExited(f)})})})},i.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},i.safeSetState=function(s,l){l=this.setNextCallback(l),this.setState(s,l)},i.setNextCallback=function(s){var l=this,h=!0;return this.nextCallback=function(f){h&&(h=!1,l.nextCallback=null,s(f))},this.nextCallback.cancel=function(){h=!1},this.nextCallback},i.onTransitionEnd=function(s,l){this.setNextCallback(l);var h=this.props.nodeRef?this.props.nodeRef.current:Tr.findDOMNode(this),f=s==null&&!this.props.addEndListener;if(!h||f){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var g=this.props.nodeRef?[this.nextCallback]:[h,this.nextCallback],p=g[0],S=g[1];this.props.addEndListener(p,S)}s!=null&&setTimeout(this.nextCallback,s)},i.render=function(){var s=this.state.status;if(s===Lo)return null;var l=this.props,h=l.children;l.in,l.mountOnEnter,l.unmountOnExit,l.appear,l.enter,l.exit,l.timeout,l.addEndListener,l.onEnter,l.onEntering,l.onEntered,l.onExit,l.onExiting,l.onExited,l.nodeRef;var f=RC(l,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Pn.createElement(IC.Provider,{value:null},typeof h=="function"?h(s,f):Pn.cloneElement(Pn.Children.only(h),f))},t})(Pn.Component);ui.contextType=IC;ui.propTypes={};function mr(){}ui.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:mr,onEntering:mr,onEntered:mr,onExit:mr,onExiting:mr,onExited:mr};ui.UNMOUNTED=Lo;ui.EXITED=Li;ui.ENTERING=wn;ui.ENTERED=oi;ui.EXITING=Qo;function Z_(c){return c.code==="Escape"||c.keyCode===27}function W_(){const c=B.version.split(".");return{major:+c[0],minor:+c[1],patch:+c[2]}}function Nr(c){if(!c||typeof c=="function")return null;const{major:t}=W_();return t>=19?c.props.ref:c.ref}const il=!!(typeof window<"u"&&window.document&&window.document.createElement);var vh=!1,Ch=!1;try{var Jd={get passive(){return vh=!0},get once(){return Ch=vh=!0}};il&&(window.addEventListener("test",Jd,Jd),window.removeEventListener("test",Jd,!0))}catch{}function eb(c,t,i,r){if(r&&typeof r!="boolean"&&!Ch){var s=r.once,l=r.capture,h=i;!Ch&&s&&(h=i.__once||function f(g){this.removeEventListener(t,f,l),i.call(this,g)},i.__once=h),c.addEventListener(t,h,vh?r:l)}c.addEventListener(t,i,r)}function tb(c,t,i,r){var s=r&&typeof r!="boolean"?r.capture:r;c.removeEventListener(t,i,s),i.__once&&c.removeEventListener(t,i.__once,s)}function Pc(c,t,i,r){return eb(c,t,i,r),function(){tb(c,t,i,r)}}function nb(c,t,i,r){if(r===void 0&&(r=!0),c){var s=document.createEvent("HTMLEvents");s.initEvent(t,i,r),c.dispatchEvent(s)}}function ib(c){var t=ci(c,"transitionDuration")||"",i=t.indexOf("ms")===-1?1e3:1;return parseFloat(t)*i}function ab(c,t,i){i===void 0&&(i=5);var r=!1,s=setTimeout(function(){r||nb(c,"transitionend",!0)},t+i),l=Pc(c,"transitionend",function(){r=!0},{once:!0});return function(){clearTimeout(s),l()}}function rb(c,t,i,r){i==null&&(i=ib(c)||0);var s=ab(c,i,r),l=Pc(c,"transitionend",t);return function(){s(),l()}}function gv(c,t){const i=ci(c,t)||"",r=i.indexOf("ms")===-1?1e3:1;return parseFloat(i)*r}function Lh(c,t){const i=gv(c,"transitionDuration"),r=gv(c,"transitionDelay"),s=rb(c,l=>{l.target===c&&(s(),t(l))},i+r)}function Po(...c){return c.filter(t=>t!=null).reduce((t,i)=>{if(typeof i!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return t===null?i:function(...s){t.apply(this,s),i.apply(this,s)}},null)}function OC(c){c.offsetHeight}const mv=c=>!c||typeof c=="function"?c:t=>{c.current=t};function ob(c,t){const i=mv(c),r=mv(t);return s=>{i&&i(s),r&&r(s)}}function sb(c,t){return B.useMemo(()=>ob(c,t),[c,t])}function cb(c){return c&&"setState"in c?Tr.findDOMNode(c):c??null}const al=Pn.forwardRef(({onEnter:c,onEntering:t,onEntered:i,onExit:r,onExiting:s,onExited:l,addEndListener:h,children:f,childRef:g,...p},S)=>{const T=B.useRef(null),A=sb(T,g),K=J=>{A(cb(J))},te=J=>ee=>{J&&T.current&&J(T.current,ee)},ie=B.useCallback(te(c),[c]),le=B.useCallback(te(t),[t]),se=B.useCallback(te(i),[i]),ce=B.useCallback(te(r),[r]),ue=B.useCallback(te(s),[s]),G=B.useCallback(te(l),[l]),oe=B.useCallback(te(h),[h]);return Z.jsx(ui,{ref:S,...p,onEnter:ie,onEntered:se,onEntering:le,onExit:ce,onExited:G,onExiting:ue,addEndListener:oe,nodeRef:T,children:typeof f=="function"?(J,ee)=>f(J,{...ee,ref:K}):Pn.cloneElement(f,{ref:K})})});al.displayName="TransitionWrapper";const lb={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function ub(c,t){const i=`offset${c[0].toUpperCase()}${c.slice(1)}`,r=t[i],s=lb[c];return r+parseInt(ci(t,s[0]),10)+parseInt(ci(t,s[1]),10)}const db={[Li]:"collapse",[Qo]:"collapsing",[wn]:"collapsing",[oi]:"collapse show"},kC=Pn.forwardRef(({onEnter:c,onEntering:t,onEntered:i,onExit:r,onExiting:s,className:l,children:h,dimension:f="height",in:g=!1,timeout:p=300,mountOnEnter:S=!1,unmountOnExit:T=!1,appear:A=!1,getDimensionValue:K=ub,...te},ie)=>{const le=typeof f=="function"?f():f,se=B.useMemo(()=>Po(J=>{J.style[le]="0"},c),[le,c]),ce=B.useMemo(()=>Po(J=>{const ee=`scroll${le[0].toUpperCase()}${le.slice(1)}`;J.style[le]=`${J[ee]}px`},t),[le,t]),ue=B.useMemo(()=>Po(J=>{J.style[le]=null},i),[le,i]),G=B.useMemo(()=>Po(J=>{J.style[le]=`${K(le,J)}px`,OC(J)},r),[r,K,le]),oe=B.useMemo(()=>Po(J=>{J.style[le]=null},s),[le,s]);return Z.jsx(al,{ref:ie,addEndListener:Lh,...te,"aria-expanded":te.role?g:null,onEnter:se,onEntering:ce,onEntered:ue,onExit:G,onExiting:oe,childRef:Nr(h),in:g,timeout:p,mountOnEnter:S,unmountOnExit:T,appear:A,children:(J,ee)=>Pn.cloneElement(h,{...ee,className:rt(l,h.props.className,db[J],le==="width"&&"collapse-horizontal")})})});kC.displayName="Collapse";function MC(c,t){return Array.isArray(c)?c.includes(t):c===t}const Wo=B.createContext({});Wo.displayName="AccordionContext";const zh=B.forwardRef(({as:c="div",bsPrefix:t,className:i,children:r,eventKey:s,...l},h)=>{const{activeEventKey:f}=B.useContext(Wo);return t=Lt(t,"accordion-collapse"),Z.jsx(kC,{ref:h,in:MC(f,s),...l,className:rt(i,t),children:Z.jsx(c,{children:B.Children.only(r)})})});zh.displayName="AccordionCollapse";const rl=B.createContext({eventKey:""});rl.displayName="AccordionItemContext";const NC=B.forwardRef(({as:c="div",bsPrefix:t,className:i,onEnter:r,onEntering:s,onEntered:l,onExit:h,onExiting:f,onExited:g,...p},S)=>{t=Lt(t,"accordion-body");const{eventKey:T}=B.useContext(rl);return Z.jsx(zh,{eventKey:T,onEnter:r,onEntering:s,onEntered:l,onExit:h,onExiting:f,onExited:g,children:Z.jsx(c,{ref:S,...p,className:rt(i,t)})})});NC.displayName="AccordionBody";function hb(c,t){const{activeEventKey:i,onSelect:r,alwaysOpen:s}=B.useContext(Wo);return l=>{let h=c===i?null:c;s&&(Array.isArray(i)?i.includes(c)?h=i.filter(f=>f!==c):h=[...i,c]:h=[c]),r?.(h,l),t?.(l)}}const Bh=B.forwardRef(({as:c="button",bsPrefix:t,className:i,onClick:r,...s},l)=>{t=Lt(t,"accordion-button");const{eventKey:h}=B.useContext(rl),f=hb(h,r),{activeEventKey:g}=B.useContext(Wo);return c==="button"&&(s.type="button"),Z.jsx(c,{ref:l,onClick:f,...s,"aria-expanded":Array.isArray(g)?g.includes(h):h===g,className:rt(i,t,!MC(g,h)&&"collapsed")})});Bh.displayName="AccordionButton";const DC=B.forwardRef(({as:c="h2","aria-controls":t,bsPrefix:i,className:r,children:s,onClick:l,...h},f)=>(i=Lt(i,"accordion-header"),Z.jsx(c,{ref:f,...h,className:rt(r,i),children:Z.jsx(Bh,{onClick:l,"aria-controls":t,children:s})})));DC.displayName="AccordionHeader";const UC=B.forwardRef(({as:c="div",bsPrefix:t,className:i,eventKey:r,...s},l)=>{t=Lt(t,"accordion-item");const h=B.useMemo(()=>({eventKey:r}),[r]);return Z.jsx(rl.Provider,{value:h,children:Z.jsx(c,{ref:l,...s,className:rt(i,t)})})});UC.displayName="AccordionItem";const xC=B.forwardRef((c,t)=>{const{as:i="div",activeKey:r,bsPrefix:s,className:l,onSelect:h,flush:f,alwaysOpen:g,...p}=L_(c,{activeKey:"onSelect"}),S=Lt(s,"accordion"),T=B.useMemo(()=>({activeEventKey:r,onSelect:h,alwaysOpen:g}),[r,h,g]);return Z.jsx(Wo.Provider,{value:T,children:Z.jsx(i,{ref:t,...p,className:rt(l,S,f&&`${S}-flush`)})})});xC.displayName="Accordion";const vc=Object.assign(xC,{Button:Bh,Collapse:zh,Item:UC,Header:DC,Body:NC});function fb(c){const t=B.useRef(c);return B.useEffect(()=>{t.current=c},[c]),t}function PC(c){const t=fb(c);return B.useCallback(function(...i){return t.current&&t.current(...i)},[t])}const gb=(c=>B.forwardRef((t,i)=>Z.jsx("div",{...t,ref:i,className:rt(t.className,c)})));function mb(c){const t=B.useRef(c);return B.useEffect(()=>{t.current=c},[c]),t}function ya(c){const t=mb(c);return B.useCallback(function(...i){return t.current&&t.current(...i)},[t])}function pb(){const c=B.useRef(!0),t=B.useRef(()=>c.current);return B.useEffect(()=>(c.current=!0,()=>{c.current=!1}),[]),t.current}function yb(c){const t=B.useRef(null);return B.useEffect(()=>{t.current=c}),t.current}const vb=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",Cb=typeof document<"u",pv=Cb||vb?B.useLayoutEffect:B.useEffect,Sb={[wn]:"show",[oi]:"show"},HC=B.forwardRef(({className:c,children:t,transitionClasses:i={},onEnter:r,...s},l)=>{const h={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...s},f=B.useCallback((g,p)=>{OC(g),r?.(g,p)},[r]);return Z.jsx(al,{ref:l,addEndListener:Lh,...h,onEnter:f,childRef:Nr(t),children:(g,p)=>B.cloneElement(t,{...p,className:rt("fade",c,t.props.className,Sb[g],i[g])})})});HC.displayName="Fade";const Tb={"aria-label":Xd.string,onClick:Xd.func,variant:Xd.oneOf(["white"])},Kh=B.forwardRef(({className:c,variant:t,"aria-label":i="Close",...r},s)=>Z.jsx("button",{ref:s,type:"button",className:rt("btn-close",t&&`btn-close-${t}`,c),"aria-label":i,...r}));Kh.displayName="CloseButton";Kh.propTypes=Tb;function Ab({as:c,bsPrefix:t,className:i,...r}){t=Lt(t,"col");const s=bC(),l=wC(),h=[],f=[];return s.forEach(g=>{const p=r[g];delete r[g];let S,T,A;typeof p=="object"&&p!=null?{span:S,offset:T,order:A}=p:S=p;const K=g!==l?`-${g}`:"";S&&h.push(S===!0?`${t}${K}`:`${t}${K}-${S}`),A!=null&&f.push(`order${K}-${A}`),T!=null&&f.push(`offset${K}-${T}`)}),[{...r,className:rt(i,...h,...f)},{as:c,bsPrefix:t,spans:h}]}const Sh=B.forwardRef((c,t)=>{const[{className:i,...r},{as:s="div",bsPrefix:l,spans:h}]=Ab(c);return Z.jsx(s,{...r,ref:t,className:rt(i,!h.length&&l)})});Sh.displayName="Col";const LC=B.forwardRef(({bsPrefix:c,fluid:t=!1,as:i="div",className:r,...s},l)=>{const h=Lt(c,"container"),f=typeof t=="string"?`-${t}`:"-fluid";return Z.jsx(i,{ref:l,...s,className:rt(r,t?`${h}${f}`:h)})});LC.displayName="Container";var Eb=Function.prototype.bind.call(Function.prototype.call,[].slice);function pr(c,t){return Eb(c.querySelectorAll(t))}function yv(c,t){if(c.contains)return c.contains(t);if(c.compareDocumentPosition)return c===t||!!(c.compareDocumentPosition(t)&16)}const _b="data-rr-ui-";function bb(c){return`${_b}${c}`}const zC=B.createContext(il?window:void 0);zC.Provider;function qh(){return B.useContext(zC)}const wb=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",Rb=typeof document<"u",Ib=Rb||wb?B.useLayoutEffect:B.useEffect,vv=c=>!c||typeof c=="function"?c:t=>{c.current=t};function Ob(c,t){const i=vv(c),r=vv(t);return s=>{i&&i(s),r&&r(s)}}function jh(c,t){return B.useMemo(()=>Ob(c,t),[c,t])}function $d(c){c===void 0&&(c=Hh());try{var t=c.activeElement;return!t||!t.nodeName?null:t}catch{return c.body}}function kb(c){const t=B.useRef(c);return t.current=c,t}function Mb(c){const t=kb(c);B.useEffect(()=>()=>t.current(),[])}function Nb(c=document){const t=c.defaultView;return Math.abs(t.innerWidth-c.documentElement.clientWidth)}const Cv=bb("modal-open");class Gh{constructor({ownerDocument:t,handleContainerOverflow:i=!0,isRTL:r=!1}={}){this.handleContainerOverflow=i,this.isRTL=r,this.modals=[],this.ownerDocument=t}getScrollbarWidth(){return Nb(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(t){}removeModalAttributes(t){}setContainerStyle(t){const i={overflow:"hidden"},r=this.isRTL?"paddingLeft":"paddingRight",s=this.getElement();t.style={overflow:s.style.overflow,[r]:s.style[r]},t.scrollBarWidth&&(i[r]=`${parseInt(ci(s,r)||"0",10)+t.scrollBarWidth}px`),s.setAttribute(Cv,""),ci(s,i)}reset(){[...this.modals].forEach(t=>this.remove(t))}removeContainerStyle(t){const i=this.getElement();i.removeAttribute(Cv),Object.assign(i.style,t.style)}add(t){let i=this.modals.indexOf(t);return i!==-1||(i=this.modals.length,this.modals.push(t),this.setModalAttributes(t),i!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),i}remove(t){const i=this.modals.indexOf(t);i!==-1&&(this.modals.splice(i,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(t))}isTopModal(t){return!!this.modals.length&&this.modals[this.modals.length-1]===t}}const Zd=(c,t)=>il?c==null?(t||Hh()).body:(typeof c=="function"&&(c=c()),c&&"current"in c&&(c=c.current),c&&("nodeType"in c||c.getBoundingClientRect)?c:null):null;function Db(c,t){const i=qh(),[r,s]=B.useState(()=>Zd(c,i?.document));if(!r){const l=Zd(c);l&&s(l)}return B.useEffect(()=>{},[t,r]),B.useEffect(()=>{const l=Zd(c);l!==r&&s(l)},[c,r]),r}function Ub({children:c,in:t,onExited:i,mountOnEnter:r,unmountOnExit:s}){const l=B.useRef(null),h=B.useRef(t),f=ya(i);B.useEffect(()=>{t?h.current=!0:f(l.current)},[t,f]);const g=jh(l,Nr(c)),p=B.cloneElement(c,{ref:g});return t?p:s||!h.current&&r?null:p}const xb=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function Pb(c,t){if(c==null)return{};var i={};for(var r in c)if({}.hasOwnProperty.call(c,r)){if(t.indexOf(r)>=0)continue;i[r]=c[r]}return i}function Hb(c){let{onEnter:t,onEntering:i,onEntered:r,onExit:s,onExiting:l,onExited:h,addEndListener:f,children:g}=c,p=Pb(c,xb);const S=B.useRef(null),T=jh(S,Nr(g)),A=G=>oe=>{G&&S.current&&G(S.current,oe)},K=B.useCallback(A(t),[t]),te=B.useCallback(A(i),[i]),ie=B.useCallback(A(r),[r]),le=B.useCallback(A(s),[s]),se=B.useCallback(A(l),[l]),ce=B.useCallback(A(h),[h]),ue=B.useCallback(A(f),[f]);return Object.assign({},p,{nodeRef:S},t&&{onEnter:K},i&&{onEntering:te},r&&{onEntered:ie},s&&{onExit:le},l&&{onExiting:se},h&&{onExited:ce},f&&{addEndListener:ue},{children:typeof g=="function"?(G,oe)=>g(G,Object.assign({},oe,{ref:T})):B.cloneElement(g,{ref:T})})}const Lb=["component"];function zb(c,t){if(c==null)return{};var i={};for(var r in c)if({}.hasOwnProperty.call(c,r)){if(t.indexOf(r)>=0)continue;i[r]=c[r]}return i}const Bb=B.forwardRef((c,t)=>{let{component:i}=c,r=zb(c,Lb);const s=Hb(r);return Z.jsx(i,Object.assign({ref:t},s))});function Kb({in:c,onTransition:t}){const i=B.useRef(null),r=B.useRef(!0),s=ya(t);return pv(()=>{if(!i.current)return;let l=!1;return s({in:c,element:i.current,initial:r.current,isStale:()=>l}),()=>{l=!0}},[c,s]),pv(()=>(r.current=!1,()=>{r.current=!0}),[]),i}function qb({children:c,in:t,onExited:i,onEntered:r,transition:s}){const[l,h]=B.useState(!t);t&&l&&h(!1);const f=Kb({in:!!t,onTransition:p=>{const S=()=>{p.isStale()||(p.in?r?.(p.element,p.initial):(h(!0),i?.(p.element)))};Promise.resolve(s(p)).then(S,T=>{throw p.in||h(!0),T})}}),g=jh(f,Nr(c));return l&&!t?null:B.cloneElement(c,{ref:g})}function Sv(c,t,i){return c?Z.jsx(Bb,Object.assign({},i,{component:c})):t?Z.jsx(qb,Object.assign({},i,{transition:t})):Z.jsx(Ub,Object.assign({},i))}const jb=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function Gb(c,t){if(c==null)return{};var i={};for(var r in c)if({}.hasOwnProperty.call(c,r)){if(t.indexOf(r)>=0)continue;i[r]=c[r]}return i}let Wd;function Fb(c){return Wd||(Wd=new Gh({ownerDocument:c?.document})),Wd}function Qb(c){const t=qh(),i=c||Fb(t),r=B.useRef({dialog:null,backdrop:null});return Object.assign(r.current,{add:()=>i.add(r.current),remove:()=>i.remove(r.current),isTopModal:()=>i.isTopModal(r.current),setDialogRef:B.useCallback(s=>{r.current.dialog=s},[]),setBackdropRef:B.useCallback(s=>{r.current.backdrop=s},[])})}const BC=B.forwardRef((c,t)=>{let{show:i=!1,role:r="dialog",className:s,style:l,children:h,backdrop:f=!0,keyboard:g=!0,onBackdropClick:p,onEscapeKeyDown:S,transition:T,runTransition:A,backdropTransition:K,runBackdropTransition:te,autoFocus:ie=!0,enforceFocus:le=!0,restoreFocus:se=!0,restoreFocusOptions:ce,renderDialog:ue,renderBackdrop:G=we=>Z.jsx("div",Object.assign({},we)),manager:oe,container:J,onShow:ee,onHide:U=()=>{},onExit:O,onExited:x,onExiting:j,onEnter:Y,onEntering:ne,onEntered:fe}=c,ve=Gb(c,jb);const D=qh(),X=Db(J),M=Qb(oe),_=pb(),N=yb(i),[v,C]=B.useState(!i),b=B.useRef(null);B.useImperativeHandle(t,()=>M,[M]),il&&!N&&i&&(b.current=$d(D?.document)),i&&v&&C(!1);const I=ya(()=>{if(M.add(),qe.current=Pc(document,"keydown",Te),Ae.current=Pc(document,"focus",()=>setTimeout(ae),!0),ee&&ee(),ie){var we,Xt;const sn=$d((we=(Xt=M.dialog)==null?void 0:Xt.ownerDocument)!=null?we:D?.document);M.dialog&&sn&&!yv(M.dialog,sn)&&(b.current=sn,M.dialog.focus())}}),z=ya(()=>{if(M.remove(),qe.current==null||qe.current(),Ae.current==null||Ae.current(),se){var we;(we=b.current)==null||we.focus==null||we.focus(ce),b.current=null}});B.useEffect(()=>{!i||!X||I()},[i,X,I]),B.useEffect(()=>{v&&z()},[v,z]),Mb(()=>{z()});const ae=ya(()=>{if(!le||!_()||!M.isTopModal())return;const we=$d(D?.document);M.dialog&&we&&!yv(M.dialog,we)&&M.dialog.focus()}),de=ya(we=>{we.target===we.currentTarget&&(p?.(we),f===!0&&U())}),Te=ya(we=>{g&&Z_(we)&&M.isTopModal()&&(S?.(we),we.defaultPrevented||U())}),Ae=B.useRef(),qe=B.useRef(),We=(...we)=>{C(!0),x?.(...we)};if(!X)return null;const ht=Object.assign({role:r,ref:M.setDialogRef,"aria-modal":r==="dialog"?!0:void 0},ve,{style:l,className:s,tabIndex:-1});let ft=ue?ue(ht):Z.jsx("div",Object.assign({},ht,{children:B.cloneElement(h,{role:"document"})}));ft=Sv(T,A,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!i,onExit:O,onExiting:j,onExited:We,onEnter:Y,onEntering:ne,onEntered:fe,children:ft});let ot=null;return f&&(ot=G({ref:M.setBackdropRef,onClick:de}),ot=Sv(K,te,{in:!!i,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:ot})),Z.jsx(Z.Fragment,{children:Tr.createPortal(Z.jsxs(Z.Fragment,{children:[ot,ft]}),X)})});BC.displayName="Modal";const Yb=Object.assign(BC,{Manager:Gh});function Vb(c,t){return c.classList?c.classList.contains(t):(" "+(c.className.baseVal||c.className)+" ").indexOf(" "+t+" ")!==-1}function Xb(c,t){c.classList?c.classList.add(t):Vb(c,t)||(typeof c.className=="string"?c.className=c.className+" "+t:c.setAttribute("class",(c.className&&c.className.baseVal||"")+" "+t))}function Tv(c,t){return c.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function Jb(c,t){c.classList?c.classList.remove(t):typeof c.className=="string"?c.className=Tv(c.className,t):c.setAttribute("class",Tv(c.className&&c.className.baseVal||"",t))}const yr={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class KC extends Gh{adjustAndStore(t,i,r){const s=i.style[t];i.dataset[t]=s,ci(i,{[t]:`${parseFloat(ci(i,t))+r}px`})}restore(t,i){const r=i.dataset[t];r!==void 0&&(delete i.dataset[t],ci(i,{[t]:r}))}setContainerStyle(t){super.setContainerStyle(t);const i=this.getElement();if(Xb(i,"modal-open"),!t.scrollBarWidth)return;const r=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";pr(i,yr.FIXED_CONTENT).forEach(l=>this.adjustAndStore(r,l,t.scrollBarWidth)),pr(i,yr.STICKY_CONTENT).forEach(l=>this.adjustAndStore(s,l,-t.scrollBarWidth)),pr(i,yr.NAVBAR_TOGGLER).forEach(l=>this.adjustAndStore(s,l,t.scrollBarWidth))}removeContainerStyle(t){super.removeContainerStyle(t);const i=this.getElement();Jb(i,"modal-open");const r=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";pr(i,yr.FIXED_CONTENT).forEach(l=>this.restore(r,l)),pr(i,yr.STICKY_CONTENT).forEach(l=>this.restore(s,l)),pr(i,yr.NAVBAR_TOGGLER).forEach(l=>this.restore(s,l))}}let eh;function $b(c){return eh||(eh=new KC(c)),eh}const qC=B.createContext({onHide(){}}),jC=B.forwardRef(({closeLabel:c="Close",closeVariant:t,closeButton:i=!1,onHide:r,children:s,...l},h)=>{const f=B.useContext(qC),g=PC(()=>{f?.onHide(),r?.()});return Z.jsxs("div",{ref:h,...l,children:[s,i&&Z.jsx(Kh,{"aria-label":c,variant:t,onClick:g})]})});jC.displayName="AbstractModalHeader";const Th=new WeakMap,Av=(c,t)=>{if(!c||!t)return;const i=Th.get(t)||new Map;Th.set(t,i);let r=i.get(c);return r||(r=t.matchMedia(c),r.refCount=0,i.set(r.media,r)),r};function Zb(c,t=typeof window>"u"?void 0:window){const i=Av(c,t),[r,s]=B.useState(()=>i?i.matches:!1);return Ib(()=>{let l=Av(c,t);if(!l)return s(!1);let h=Th.get(t);const f=()=>{s(l.matches)};return l.refCount++,l.addListener(f),f(),()=>{l.removeListener(f),l.refCount--,l.refCount<=0&&h?.delete(l.media),l=void 0}},[c]),r}function Wb(c){const t=Object.keys(c);function i(f,g){return f===g?g:f?`${f} and ${g}`:g}function r(f){return t[Math.min(t.indexOf(f)+1,t.length-1)]}function s(f){const g=r(f);let p=c[g];return typeof p=="number"?p=`${p-.2}px`:p=`calc(${p} - 0.2px)`,`(max-width: ${p})`}function l(f){let g=c[f];return typeof g=="number"&&(g=`${g}px`),`(min-width: ${g})`}function h(f,g,p){let S;typeof f=="object"?(S=f,p=g,g=!0):(g=g||!0,S={[f]:g});let T=B.useMemo(()=>Object.entries(S).reduce((A,[K,te])=>((te==="up"||te===!0)&&(A=i(A,l(K))),(te==="down"||te===!0)&&(A=i(A,s(K))),A),""),[JSON.stringify(S)]);return Zb(T,p)}return h}const ew=Wb({xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400}),GC=B.forwardRef(({className:c,bsPrefix:t,as:i="div",...r},s)=>(t=Lt(t,"offcanvas-body"),Z.jsx(i,{ref:s,className:rt(c,t),...r})));GC.displayName="OffcanvasBody";const tw={[wn]:"show",[oi]:"show"},FC=B.forwardRef(({bsPrefix:c,className:t,children:i,in:r=!1,mountOnEnter:s=!1,unmountOnExit:l=!1,appear:h=!1,...f},g)=>(c=Lt(c,"offcanvas"),Z.jsx(al,{ref:g,addEndListener:Lh,in:r,mountOnEnter:s,unmountOnExit:l,appear:h,...f,childRef:Nr(i),children:(p,S)=>B.cloneElement(i,{...S,className:rt(t,i.props.className,(p===wn||p===Qo)&&`${c}-toggling`,tw[p])})})));FC.displayName="OffcanvasToggling";const QC=B.forwardRef(({bsPrefix:c,className:t,closeLabel:i="Close",closeButton:r=!1,...s},l)=>(c=Lt(c,"offcanvas-header"),Z.jsx(jC,{ref:l,...s,className:rt(t,c),closeLabel:i,closeButton:r})));QC.displayName="OffcanvasHeader";const nw=gb("h5"),YC=B.forwardRef(({className:c,bsPrefix:t,as:i=nw,...r},s)=>(t=Lt(t,"offcanvas-title"),Z.jsx(i,{ref:s,className:rt(c,t),...r})));YC.displayName="OffcanvasTitle";function iw(c){return Z.jsx(FC,{...c})}function aw(c){return Z.jsx(HC,{...c})}const VC=B.forwardRef(({bsPrefix:c,className:t,children:i,"aria-labelledby":r,placement:s="start",responsive:l,show:h=!1,backdrop:f=!0,keyboard:g=!0,scroll:p=!1,onEscapeKeyDown:S,onShow:T,onHide:A,container:K,autoFocus:te=!0,enforceFocus:ie=!0,restoreFocus:le=!0,restoreFocusOptions:se,onEntered:ce,onExit:ue,onExiting:G,onEnter:oe,onEntering:J,onExited:ee,backdropClassName:U,manager:O,renderStaticNode:x=!1,...j},Y)=>{const ne=B.useRef();c=Lt(c,"offcanvas");const[fe,ve]=B.useState(!1),D=PC(A),X=ew(l||"xs","up");B.useEffect(()=>{ve(l?h&&!X:h)},[h,l,X]);const M=B.useMemo(()=>({onHide:D}),[D]);function _(){return O||(p?(ne.current||(ne.current=new KC({handleContainerOverflow:!1})),ne.current):$b())}const N=(I,...z)=>{I&&(I.style.visibility="visible"),oe?.(I,...z)},v=(I,...z)=>{I&&(I.style.visibility=""),ee?.(...z)},C=B.useCallback(I=>Z.jsx("div",{...I,className:rt(`${c}-backdrop`,U)}),[U,c]),b=I=>Z.jsx("div",{...I,...j,className:rt(t,l?`${c}-${l}`:c,`${c}-${s}`),"aria-labelledby":r,children:i});return Z.jsxs(Z.Fragment,{children:[!fe&&(l||x)&&b({}),Z.jsx(qC.Provider,{value:M,children:Z.jsx(Yb,{show:fe,ref:Y,backdrop:f,container:K,keyboard:g,autoFocus:te,enforceFocus:ie&&!p,restoreFocus:le,restoreFocusOptions:se,onEscapeKeyDown:S,onShow:T,onHide:D,onEnter:N,onEntering:J,onEntered:ce,onExit:ue,onExiting:G,onExited:v,manager:_(),transition:iw,backdropTransition:aw,renderBackdrop:C,renderDialog:b})})]})});VC.displayName="Offcanvas";const Cc=Object.assign(VC,{Body:GC,Header:QC,Title:YC}),Ah=B.forwardRef(({bsPrefix:c,className:t,as:i="div",...r},s)=>{const l=Lt(c,"row"),h=bC(),f=wC(),g=`${l}-cols`,p=[];return h.forEach(S=>{const T=r[S];delete r[S];let A;T!=null&&typeof T=="object"?{cols:A}=T:A=T;const K=S!==f?`-${S}`:"";A!=null&&p.push(`${g}${K}-${A}`)}),Z.jsx(i,{ref:s,...r,className:rt(t,l,...p)})});Ah.displayName="Row";var th={},nh,Ev;function rw(){if(Ev)return nh;Ev=1;function c(t,i){if(t===i)return!0;if(!t||!i)return!1;var r=t.length;if(i.length!==r)return!1;for(var s=0;s<r;s++)if(t[s]!==i[s])return!1;return!0}return nh=c,nh}var ih={},ah,_v;function ow(){if(_v)return ah;_v=1;var c=(function(){function t(i,r){var s=[],l=!0,h=!1,f=void 0;try{for(var g=i[Symbol.iterator](),p;!(l=(p=g.next()).done)&&(s.push(p.value),!(r&&s.length===r));l=!0);}catch(S){h=!0,f=S}finally{try{!l&&g.return&&g.return()}finally{if(h)throw f}}return s}return function(i,r){if(Array.isArray(i))return i;if(Symbol.iterator in Object(i))return t(i,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})();return ah=function(t){var i=t.data,r=t.multiSection;function s(p){for(p===null?p=0:p++;p<i.length&&i[p]===0;)p++;return p===i.length?null:p}function l(p){for(p===null?p=i.length-1:p--;p>=0&&i[p]===0;)p--;return p===-1?null:p}function h(p){var S=c(p,2),T=S[0],A=S[1];return r?A===null||A===i[T]-1?(T=s(T),T===null?[null,null]:[T,0]):[T,A+1]:i===0||A===i-1?[null,null]:A===null?[null,0]:[null,A+1]}function f(p){var S=c(p,2),T=S[0],A=S[1];return r?A===null||A===0?(T=l(T),T===null?[null,null]:[T,i[T]-1]):[T,A-1]:i===0||A===0?[null,null]:A===null?[null,i-1]:[null,A-1]}function g(p){return h(p)[1]===null}return{next:h,prev:f,isLast:g}},ah}var Sc={exports:{}},rh,bv;function sw(){if(bv)return rh;bv=1;var c=Object.prototype.propertyIsEnumerable;function t(r){if(r==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(r)}function i(r){var s=Object.getOwnPropertyNames(r);return Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(r))),s.filter(function(l){return c.call(r,l)})}return rh=Object.assign||function(r,s){for(var l,h,f=t(r),g=1;g<arguments.length;g++){l=arguments[g],h=i(Object(l));for(var p=0;p<h.length;p++)f[h[p]]=l[h[p]]}return f},rh}var wv;function cw(){return wv||(wv=1,(function(c,t){Object.defineProperty(t,"__esModule",{value:!0});var i=(function(){function g(p,S){var T=[],A=!0,K=!1,te=void 0;try{for(var ie=p[Symbol.iterator](),le;!(A=(le=ie.next()).done)&&(T.push(le.value),!(S&&T.length===S));A=!0);}catch(se){K=!0,te=se}finally{try{!A&&ie.return&&ie.return()}finally{if(K)throw te}}return T}return function(p,S){if(Array.isArray(p))return p;if(Symbol.iterator in Object(p))return g(p,S);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})();function r(g){return g&&g.__esModule?g:{default:g}}function s(g){if(Array.isArray(g)){for(var p=0,S=Array(g.length);p<g.length;p++)S[p]=g[p];return S}else return Array.from(g)}var l=sw(),h=r(l),f=function(p){return p};t.default=function(g){var p=Array.isArray(g)&&g.length===2?g:[g,null],S=i(p,2),T=S[0],A=S[1];return function(K){for(var te=arguments.length,ie=Array(te>1?te-1:0),le=1;le<te;le++)ie[le-1]=arguments[le];var se=ie.map(function(ce){return T[ce]}).filter(f);return typeof se[0]=="string"||typeof A=="function"?{key:K,className:A?A.apply(void 0,s(se)):se.join(" ")}:{key:K,style:h.default.apply(void 0,[{}].concat(s(se)))}}},c.exports=t.default})(Sc,Sc.exports)),Sc.exports}var oh={},sh={},Rv;function Fh(){return Rv||(Rv=1,(function(c){Object.defineProperty(c,"__esModule",{value:!0}),c.default=i;function t(r){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(l){return typeof l}:t=function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},t(r)}function i(r,s){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(r===s)return!1;var h=Object.keys(r),f=Object.keys(s);if(h.length!==f.length)return!0;var g={},p,S;for(p=0,S=l.length;p<S;p++)g[l[p]]=!0;for(p=0,S=h.length;p<S;p++){var T=h[p],A=r[T],K=s[T];if(A!==K){if(!g[T]||A===null||K===null||t(A)!=="object"||t(K)!=="object")return!0;var te=Object.keys(A),ie=Object.keys(K);if(te.length!==ie.length)return!0;for(var le=0,se=te.length;le<se;le++){var ce=te[le];if(A[ce]!==K[ce])return!0}}}return!1}})(sh)),sh}var Iv;function lw(){return Iv||(Iv=1,(function(c){Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var t=h(Vi()),i=s(Mr()),r=s(Fh());function s(G){return G&&G.__esModule?G:{default:G}}function l(){if(typeof WeakMap!="function")return null;var G=new WeakMap;return l=function(){return G},G}function h(G){if(G&&G.__esModule)return G;if(G===null||f(G)!=="object"&&typeof G!="function")return{default:G};var oe=l();if(oe&&oe.has(G))return oe.get(G);var J={},ee=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var U in G)if(Object.prototype.hasOwnProperty.call(G,U)){var O=ee?Object.getOwnPropertyDescriptor(G,U):null;O&&(O.get||O.set)?Object.defineProperty(J,U,O):J[U]=G[U]}return J.default=G,oe&&oe.set(G,J),J}function f(G){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?f=function(J){return typeof J}:f=function(J){return J&&typeof Symbol=="function"&&J.constructor===Symbol&&J!==Symbol.prototype?"symbol":typeof J},f(G)}function g(G,oe){if(!(G instanceof oe))throw new TypeError("Cannot call a class as a function")}function p(G,oe){for(var J=0;J<oe.length;J++){var ee=oe[J];ee.enumerable=ee.enumerable||!1,ee.configurable=!0,"value"in ee&&(ee.writable=!0),Object.defineProperty(G,ee.key,ee)}}function S(G,oe,J){return oe&&p(G.prototype,oe),G}function T(G){return function(){var oe=ie(G),J;if(te()){var ee=ie(this).constructor;J=Reflect.construct(oe,arguments,ee)}else J=oe.apply(this,arguments);return A(this,J)}}function A(G,oe){return oe&&(f(oe)==="object"||typeof oe=="function")?oe:K(G)}function K(G){if(G===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return G}function te(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function ie(G){return ie=Object.setPrototypeOf?Object.getPrototypeOf:function(J){return J.__proto__||Object.getPrototypeOf(J)},ie(G)}function le(G,oe){if(typeof oe!="function"&&oe!==null)throw new TypeError("Super expression must either be null or a function");G.prototype=Object.create(oe&&oe.prototype,{constructor:{value:G,writable:!0,configurable:!0}}),oe&&se(G,oe)}function se(G,oe){return se=Object.setPrototypeOf||function(ee,U){return ee.__proto__=U,ee},se(G,oe)}function ce(G,oe,J){return oe in G?Object.defineProperty(G,oe,{value:J,enumerable:!0,configurable:!0,writable:!0}):G[oe]=J,G}var ue=(function(G){le(J,G);var oe=T(J);function J(){return g(this,J),oe.apply(this,arguments)}return S(J,[{key:"shouldComponentUpdate",value:function(U){return(0,r.default)(U,this.props)}},{key:"render",value:function(){var U=this.props,O=U.section,x=U.renderSectionTitle,j=U.theme,Y=U.sectionKeyPrefix,ne=x(O);return ne?t.default.createElement("div",j("".concat(Y,"title"),"sectionTitle"),ne):null}}]),J})(t.Component);c.default=ue,ce(ue,"propTypes",{section:i.default.any.isRequired,renderSectionTitle:i.default.func.isRequired,theme:i.default.func.isRequired,sectionKeyPrefix:i.default.string.isRequired})})(oh)),oh}var ch={},lh={},Ov;function uw(){return Ov||(Ov=1,(function(c){Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var t=h(Vi()),i=s(Mr()),r=s(Fh());function s(O){return O&&O.__esModule?O:{default:O}}function l(){if(typeof WeakMap!="function")return null;var O=new WeakMap;return l=function(){return O},O}function h(O){if(O&&O.__esModule)return O;if(O===null||f(O)!=="object"&&typeof O!="function")return{default:O};var x=l();if(x&&x.has(O))return x.get(O);var j={},Y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ne in O)if(Object.prototype.hasOwnProperty.call(O,ne)){var fe=Y?Object.getOwnPropertyDescriptor(O,ne):null;fe&&(fe.get||fe.set)?Object.defineProperty(j,ne,fe):j[ne]=O[ne]}return j.default=O,x&&x.set(O,j),j}function f(O){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?f=function(j){return typeof j}:f=function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j},f(O)}function g(){return g=Object.assign||function(O){for(var x=1;x<arguments.length;x++){var j=arguments[x];for(var Y in j)Object.prototype.hasOwnProperty.call(j,Y)&&(O[Y]=j[Y])}return O},g.apply(this,arguments)}function p(O,x){var j=Object.keys(O);if(Object.getOwnPropertySymbols){var Y=Object.getOwnPropertySymbols(O);x&&(Y=Y.filter(function(ne){return Object.getOwnPropertyDescriptor(O,ne).enumerable})),j.push.apply(j,Y)}return j}function S(O){for(var x=1;x<arguments.length;x++){var j=arguments[x]!=null?arguments[x]:{};x%2?p(Object(j),!0).forEach(function(Y){ee(O,Y,j[Y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(O,Object.getOwnPropertyDescriptors(j)):p(Object(j)).forEach(function(Y){Object.defineProperty(O,Y,Object.getOwnPropertyDescriptor(j,Y))})}return O}function T(O,x){if(O==null)return{};var j=A(O,x),Y,ne;if(Object.getOwnPropertySymbols){var fe=Object.getOwnPropertySymbols(O);for(ne=0;ne<fe.length;ne++)Y=fe[ne],!(x.indexOf(Y)>=0)&&Object.prototype.propertyIsEnumerable.call(O,Y)&&(j[Y]=O[Y])}return j}function A(O,x){if(O==null)return{};var j={},Y=Object.keys(O),ne,fe;for(fe=0;fe<Y.length;fe++)ne=Y[fe],!(x.indexOf(ne)>=0)&&(j[ne]=O[ne]);return j}function K(O,x){if(!(O instanceof x))throw new TypeError("Cannot call a class as a function")}function te(O,x){for(var j=0;j<x.length;j++){var Y=x[j];Y.enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty(O,Y.key,Y)}}function ie(O,x,j){return x&&te(O.prototype,x),O}function le(O){return function(){var x=G(O),j;if(ue()){var Y=G(this).constructor;j=Reflect.construct(x,arguments,Y)}else j=x.apply(this,arguments);return se(this,j)}}function se(O,x){return x&&(f(x)==="object"||typeof x=="function")?x:ce(O)}function ce(O){if(O===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O}function ue(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function G(O){return G=Object.setPrototypeOf?Object.getPrototypeOf:function(j){return j.__proto__||Object.getPrototypeOf(j)},G(O)}function oe(O,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function");O.prototype=Object.create(x&&x.prototype,{constructor:{value:O,writable:!0,configurable:!0}}),x&&J(O,x)}function J(O,x){return J=Object.setPrototypeOf||function(Y,ne){return Y.__proto__=ne,Y},J(O,x)}function ee(O,x,j){return x in O?Object.defineProperty(O,x,{value:j,enumerable:!0,configurable:!0,writable:!0}):O[x]=j,O}var U=(function(O){oe(j,O);var x=le(j);function j(){var Y;K(this,j);for(var ne=arguments.length,fe=new Array(ne),ve=0;ve<ne;ve++)fe[ve]=arguments[ve];return Y=x.call.apply(x,[this].concat(fe)),ee(ce(Y),"storeItemReference",function(D){D!==null&&(Y.item=D)}),ee(ce(Y),"onMouseEnter",function(D){var X=Y.props,M=X.sectionIndex,_=X.itemIndex;Y.props.onMouseEnter(D,{sectionIndex:M,itemIndex:_})}),ee(ce(Y),"onMouseLeave",function(D){var X=Y.props,M=X.sectionIndex,_=X.itemIndex;Y.props.onMouseLeave(D,{sectionIndex:M,itemIndex:_})}),ee(ce(Y),"onMouseDown",function(D){var X=Y.props,M=X.sectionIndex,_=X.itemIndex;Y.props.onMouseDown(D,{sectionIndex:M,itemIndex:_})}),ee(ce(Y),"onClick",function(D){var X=Y.props,M=X.sectionIndex,_=X.itemIndex;Y.props.onClick(D,{sectionIndex:M,itemIndex:_})}),Y}return ie(j,[{key:"shouldComponentUpdate",value:function(ne){return(0,r.default)(ne,this.props,["renderItemData"])}},{key:"render",value:function(){var ne=this.props,fe=ne.isHighlighted,ve=ne.item,D=ne.renderItem,X=ne.renderItemData,M=T(ne,["isHighlighted","item","renderItem","renderItemData"]);return delete M.sectionIndex,delete M.itemIndex,typeof M.onMouseEnter=="function"&&(M.onMouseEnter=this.onMouseEnter),typeof M.onMouseLeave=="function"&&(M.onMouseLeave=this.onMouseLeave),typeof M.onMouseDown=="function"&&(M.onMouseDown=this.onMouseDown),typeof M.onClick=="function"&&(M.onClick=this.onClick),t.default.createElement("li",g({role:"option"},M,{ref:this.storeItemReference}),D(ve,S({isHighlighted:fe},X)))}}]),j})(t.Component);c.default=U,ee(U,"propTypes",{sectionIndex:i.default.number,isHighlighted:i.default.bool.isRequired,itemIndex:i.default.number.isRequired,item:i.default.any.isRequired,renderItem:i.default.func.isRequired,renderItemData:i.default.object.isRequired,onMouseEnter:i.default.func,onMouseLeave:i.default.func,onMouseDown:i.default.func,onClick:i.default.func})})(lh)),lh}var kv;function dw(){return kv||(kv=1,(function(c){Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var t=f(Vi()),i=l(Mr()),r=l(uw()),s=l(Fh());function l(U){return U&&U.__esModule?U:{default:U}}function h(){if(typeof WeakMap!="function")return null;var U=new WeakMap;return h=function(){return U},U}function f(U){if(U&&U.__esModule)return U;if(U===null||g(U)!=="object"&&typeof U!="function")return{default:U};var O=h();if(O&&O.has(U))return O.get(U);var x={},j=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Y in U)if(Object.prototype.hasOwnProperty.call(U,Y)){var ne=j?Object.getOwnPropertyDescriptor(U,Y):null;ne&&(ne.get||ne.set)?Object.defineProperty(x,Y,ne):x[Y]=U[Y]}return x.default=U,O&&O.set(U,x),x}function g(U){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?g=function(x){return typeof x}:g=function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},g(U)}function p(){return p=Object.assign||function(U){for(var O=1;O<arguments.length;O++){var x=arguments[O];for(var j in x)Object.prototype.hasOwnProperty.call(x,j)&&(U[j]=x[j])}return U},p.apply(this,arguments)}function S(U,O){var x=Object.keys(U);if(Object.getOwnPropertySymbols){var j=Object.getOwnPropertySymbols(U);O&&(j=j.filter(function(Y){return Object.getOwnPropertyDescriptor(U,Y).enumerable})),x.push.apply(x,j)}return x}function T(U){for(var O=1;O<arguments.length;O++){var x=arguments[O]!=null?arguments[O]:{};O%2?S(Object(x),!0).forEach(function(j){J(U,j,x[j])}):Object.getOwnPropertyDescriptors?Object.defineProperties(U,Object.getOwnPropertyDescriptors(x)):S(Object(x)).forEach(function(j){Object.defineProperty(U,j,Object.getOwnPropertyDescriptor(x,j))})}return U}function A(U,O){if(!(U instanceof O))throw new TypeError("Cannot call a class as a function")}function K(U,O){for(var x=0;x<O.length;x++){var j=O[x];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(U,j.key,j)}}function te(U,O,x){return O&&K(U.prototype,O),U}function ie(U){return function(){var O=ue(U),x;if(ce()){var j=ue(this).constructor;x=Reflect.construct(O,arguments,j)}else x=O.apply(this,arguments);return le(this,x)}}function le(U,O){return O&&(g(O)==="object"||typeof O=="function")?O:se(U)}function se(U){if(U===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U}function ce(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function ue(U){return ue=Object.setPrototypeOf?Object.getPrototypeOf:function(x){return x.__proto__||Object.getPrototypeOf(x)},ue(U)}function G(U,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function");U.prototype=Object.create(O&&O.prototype,{constructor:{value:U,writable:!0,configurable:!0}}),O&&oe(U,O)}function oe(U,O){return oe=Object.setPrototypeOf||function(j,Y){return j.__proto__=Y,j},oe(U,O)}function J(U,O,x){return O in U?Object.defineProperty(U,O,{value:x,enumerable:!0,configurable:!0,writable:!0}):U[O]=x,U}var ee=(function(U){G(x,U);var O=ie(x);function x(){var j;A(this,x);for(var Y=arguments.length,ne=new Array(Y),fe=0;fe<Y;fe++)ne[fe]=arguments[fe];return j=O.call.apply(O,[this].concat(ne)),J(se(j),"storeHighlightedItemReference",function(ve){j.props.onHighlightedItemChange(ve===null?null:ve.item)}),j}return te(x,[{key:"shouldComponentUpdate",value:function(Y){return(0,s.default)(Y,this.props,["itemProps"])}},{key:"render",value:function(){var Y=this,ne=this.props,fe=ne.items,ve=ne.itemProps,D=ne.renderItem,X=ne.renderItemData,M=ne.sectionIndex,_=ne.highlightedItemIndex,N=ne.getItemId,v=ne.theme,C=ne.keyPrefix,b=M===null?C:"".concat(C,"section-").concat(M,"-"),I=typeof ve=="function";return t.default.createElement("ul",p({role:"listbox"},v("".concat(b,"items-list"),"itemsList")),fe.map(function(z,ae){var de=ae===0,Te=ae===_,Ae="".concat(b,"item-").concat(ae),qe=I?ve({sectionIndex:M,itemIndex:ae}):ve,We=T({id:N(M,ae),"aria-selected":Te},v(Ae,"item",de&&"itemFirst",Te&&"itemHighlighted"),{},qe);return Te&&(We.ref=Y.storeHighlightedItemReference),t.default.createElement(r.default,p({},We,{sectionIndex:M,isHighlighted:Te,itemIndex:ae,item:z,renderItem:D,renderItemData:X}))}))}}]),x})(t.Component);c.default=ee,J(ee,"propTypes",{items:i.default.array.isRequired,itemProps:i.default.oneOfType([i.default.object,i.default.func]),renderItem:i.default.func.isRequired,renderItemData:i.default.object.isRequired,sectionIndex:i.default.number,highlightedItemIndex:i.default.number,onHighlightedItemChange:i.default.func.isRequired,getItemId:i.default.func.isRequired,theme:i.default.func.isRequired,keyPrefix:i.default.string.isRequired}),J(ee,"defaultProps",{sectionIndex:null})})(ch)),ch}var Mv;function hw(){return Mv||(Mv=1,(function(c){Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var t=p(Vi()),i=f(Mr()),r=f(ow()),s=f(cw()),l=f(lw()),h=f(dw());function f(_){return _&&_.__esModule?_:{default:_}}function g(){if(typeof WeakMap!="function")return null;var _=new WeakMap;return g=function(){return _},_}function p(_){if(_&&_.__esModule)return _;if(_===null||ce(_)!=="object"&&typeof _!="function")return{default:_};var N=g();if(N&&N.has(_))return N.get(_);var v={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var b in _)if(Object.prototype.hasOwnProperty.call(_,b)){var I=C?Object.getOwnPropertyDescriptor(_,b):null;I&&(I.get||I.set)?Object.defineProperty(v,b,I):v[b]=_[b]}return v.default=_,N&&N.set(_,v),v}function S(_,N){var v=Object.keys(_);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(_);N&&(C=C.filter(function(b){return Object.getOwnPropertyDescriptor(_,b).enumerable})),v.push.apply(v,C)}return v}function T(_){for(var N=1;N<arguments.length;N++){var v=arguments[N]!=null?arguments[N]:{};N%2?S(Object(v),!0).forEach(function(C){ne(_,C,v[C])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(v)):S(Object(v)).forEach(function(C){Object.defineProperty(_,C,Object.getOwnPropertyDescriptor(v,C))})}return _}function A(_,N){return se(_)||le(_,N)||te(_,N)||K()}function K(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function te(_,N){if(_){if(typeof _=="string")return ie(_,N);var v=Object.prototype.toString.call(_).slice(8,-1);if(v==="Object"&&_.constructor&&(v=_.constructor.name),v==="Map"||v==="Set")return Array.from(v);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return ie(_,N)}}function ie(_,N){(N==null||N>_.length)&&(N=_.length);for(var v=0,C=new Array(N);v<N;v++)C[v]=_[v];return C}function le(_,N){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(_)))){var v=[],C=!0,b=!1,I=void 0;try{for(var z=_[Symbol.iterator](),ae;!(C=(ae=z.next()).done)&&(v.push(ae.value),!(N&&v.length===N));C=!0);}catch(de){b=!0,I=de}finally{try{!C&&z.return!=null&&z.return()}finally{if(b)throw I}}return v}}function se(_){if(Array.isArray(_))return _}function ce(_){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ce=function(v){return typeof v}:ce=function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},ce(_)}function ue(_,N){if(!(_ instanceof N))throw new TypeError("Cannot call a class as a function")}function G(_,N){for(var v=0;v<N.length;v++){var C=N[v];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(_,C.key,C)}}function oe(_,N,v){return N&&G(_.prototype,N),_}function J(_){return function(){var N=x(_),v;if(O()){var C=x(this).constructor;v=Reflect.construct(N,arguments,C)}else v=N.apply(this,arguments);return ee(this,v)}}function ee(_,N){return N&&(ce(N)==="object"||typeof N=="function")?N:U(_)}function U(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}function O(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function x(_){return x=Object.setPrototypeOf?Object.getPrototypeOf:function(v){return v.__proto__||Object.getPrototypeOf(v)},x(_)}function j(_,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function");_.prototype=Object.create(N&&N.prototype,{constructor:{value:_,writable:!0,configurable:!0}}),N&&Y(_,N)}function Y(_,N){return Y=Object.setPrototypeOf||function(C,b){return C.__proto__=b,C},Y(_,N)}function ne(_,N,v){return N in _?Object.defineProperty(_,N,{value:v,enumerable:!0,configurable:!0,writable:!0}):_[N]=v,_}var fe={},ve=function(N){return t.default.createElement("input",N)},D=function(N){var v=N.containerProps,C=N.children;return t.default.createElement("div",v,C)},X={container:"react-autowhatever__container",containerOpen:"react-autowhatever__container--open",input:"react-autowhatever__input",inputOpen:"react-autowhatever__input--open",inputFocused:"react-autowhatever__input--focused",itemsContainer:"react-autowhatever__items-container",itemsContainerOpen:"react-autowhatever__items-container--open",itemsList:"react-autowhatever__items-list",item:"react-autowhatever__item",itemFirst:"react-autowhatever__item--first",itemHighlighted:"react-autowhatever__item--highlighted",sectionContainer:"react-autowhatever__section-container",sectionContainerFirst:"react-autowhatever__section-container--first",sectionTitle:"react-autowhatever__section-title"},M=(function(_){j(v,_);var N=J(v);function v(C){var b;return ue(this,v),b=N.call(this,C),ne(U(b),"storeInputReference",function(I){I!==null&&(b.input=I);var z=b.props.inputProps.ref;z&&(typeof z=="function"?z(I):ce(z)==="object"&&Object.prototype.hasOwnProperty.call(z,"current")&&(z.current=I))}),ne(U(b),"storeItemsContainerReference",function(I){I!==null&&(b.itemsContainer=I)}),ne(U(b),"onHighlightedItemChange",function(I){b.highlightedItem=I}),ne(U(b),"getItemId",function(I,z){if(z===null)return null;var ae=b.props.id,de=I===null?"":"section-".concat(I);return"react-autowhatever-".concat(ae,"-").concat(de,"-item-").concat(z)}),ne(U(b),"onFocus",function(I){var z=b.props.inputProps;b.setState({isInputFocused:!0}),z.onFocus&&z.onFocus(I)}),ne(U(b),"onBlur",function(I){var z=b.props.inputProps;b.setState({isInputFocused:!1}),z.onBlur&&z.onBlur(I)}),ne(U(b),"onKeyDown",function(I){var z=b.props,ae=z.inputProps,de=z.highlightedSectionIndex,Te=z.highlightedItemIndex,Ae=I.keyCode;switch(Ae){case 40:case 38:{var qe=Ae===40?"next":"prev",We=b.sectionIterator[qe]([de,Te]),ht=A(We,2),ft=ht[0],ot=ht[1];ae.onKeyDown(I,{newHighlightedSectionIndex:ft,newHighlightedItemIndex:ot});break}default:ae.onKeyDown(I,{highlightedSectionIndex:de,highlightedItemIndex:Te})}}),b.highlightedItem=null,b.state={isInputFocused:!1},b.setSectionsItems(C),b.setSectionIterator(C),b.setTheme(C),b}return oe(v,[{key:"componentDidMount",value:function(){this.ensureHighlightedItemIsVisible()}},{key:"UNSAFE_componentWillReceiveProps",value:function(b){b.items!==this.props.items&&this.setSectionsItems(b),(b.items!==this.props.items||b.multiSection!==this.props.multiSection)&&this.setSectionIterator(b),b.theme!==this.props.theme&&this.setTheme(b)}},{key:"componentDidUpdate",value:function(){this.ensureHighlightedItemIsVisible()}},{key:"setSectionsItems",value:function(b){b.multiSection&&(this.sectionsItems=b.items.map(function(I){return b.getSectionItems(I)}),this.sectionsLengths=this.sectionsItems.map(function(I){return I.length}),this.allSectionsAreEmpty=this.sectionsLengths.every(function(I){return I===0}))}},{key:"setSectionIterator",value:function(b){this.sectionIterator=(0,r.default)({multiSection:b.multiSection,data:b.multiSection?this.sectionsLengths:b.items.length})}},{key:"setTheme",value:function(b){this.theme=(0,s.default)(b.theme)}},{key:"renderSections",value:function(){var b=this;if(this.allSectionsAreEmpty)return null;var I=this.theme,z=this.props,ae=z.id,de=z.items,Te=z.renderItem,Ae=z.renderItemData,qe=z.renderSectionTitle,We=z.highlightedSectionIndex,ht=z.highlightedItemIndex,ft=z.itemProps;return de.map(function(ot,we){var Xt="react-autowhatever-".concat(ae,"-"),sn="".concat(Xt,"section-").concat(we,"-"),cn=we===0;return t.default.createElement("div",I("".concat(sn,"container"),"sectionContainer",cn&&"sectionContainerFirst"),t.default.createElement(l.default,{section:ot,renderSectionTitle:qe,theme:I,sectionKeyPrefix:sn}),t.default.createElement(h.default,{items:b.sectionsItems[we],itemProps:ft,renderItem:Te,renderItemData:Ae,sectionIndex:we,highlightedItemIndex:We===we?ht:null,onHighlightedItemChange:b.onHighlightedItemChange,getItemId:b.getItemId,theme:I,keyPrefix:Xt,ref:b.storeItemsListReference}))})}},{key:"renderItems",value:function(){var b=this.props.items;if(b.length===0)return null;var I=this.theme,z=this.props,ae=z.id,de=z.renderItem,Te=z.renderItemData,Ae=z.highlightedSectionIndex,qe=z.highlightedItemIndex,We=z.itemProps;return t.default.createElement(h.default,{items:b,itemProps:We,renderItem:de,renderItemData:Te,highlightedItemIndex:Ae===null?qe:null,onHighlightedItemChange:this.onHighlightedItemChange,getItemId:this.getItemId,theme:I,keyPrefix:"react-autowhatever-".concat(ae,"-")})}},{key:"ensureHighlightedItemIsVisible",value:function(){var b=this.highlightedItem;if(b){var I=this.itemsContainer,z=b.offsetParent===I?b.offsetTop:b.offsetTop-I.offsetTop,ae=I.scrollTop;z<ae?ae=z:z+b.offsetHeight>ae+I.offsetHeight&&(ae=z+b.offsetHeight-I.offsetHeight),ae!==I.scrollTop&&(I.scrollTop=ae)}}},{key:"render",value:function(){var b=this.theme,I=this.props,z=I.id,ae=I.multiSection,de=I.renderInputComponent,Te=I.renderItemsContainer,Ae=I.highlightedSectionIndex,qe=I.highlightedItemIndex,We=this.state.isInputFocused,ht=ae?this.renderSections():this.renderItems(),ft=ht!==null,ot=this.getItemId(Ae,qe),we="react-autowhatever-".concat(z),Xt=T({role:"combobox","aria-haspopup":"listbox","aria-owns":we,"aria-expanded":ft},b("react-autowhatever-".concat(z,"-container"),"container",ft&&"containerOpen"),{},this.props.containerProps),sn=de(T({type:"text",value:"",autoComplete:"off","aria-autocomplete":"list","aria-controls":we,"aria-activedescendant":ot},b("react-autowhatever-".concat(z,"-input"),"input",ft&&"inputOpen",We&&"inputFocused"),{},this.props.inputProps,{onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.props.inputProps.onKeyDown&&this.onKeyDown,ref:this.storeInputReference})),cn=Te({containerProps:T({id:we,role:"listbox"},b("react-autowhatever-".concat(z,"-items-container"),"itemsContainer",ft&&"itemsContainerOpen"),{ref:this.storeItemsContainerReference}),children:ht});return t.default.createElement("div",Xt,sn,cn)}}]),v})(t.Component);c.default=M,ne(M,"propTypes",{id:i.default.string,multiSection:i.default.bool,renderInputComponent:i.default.func,renderItemsContainer:i.default.func,items:i.default.array.isRequired,renderItem:i.default.func,renderItemData:i.default.object,renderSectionTitle:i.default.func,getSectionItems:i.default.func,containerProps:i.default.object,inputProps:i.default.object,itemProps:i.default.oneOfType([i.default.object,i.default.func]),highlightedSectionIndex:i.default.number,highlightedItemIndex:i.default.number,theme:i.default.oneOfType([i.default.object,i.default.array])}),ne(M,"defaultProps",{id:"1",multiSection:!1,renderInputComponent:ve,renderItemsContainer:D,renderItem:function(){throw new Error("`renderItem` must be provided")},renderItemData:fe,renderSectionTitle:function(){throw new Error("`renderSectionTitle` must be provided")},getSectionItems:function(){throw new Error("`getSectionItems` must be provided")},containerProps:fe,inputProps:fe,itemProps:fe,highlightedSectionIndex:null,highlightedItemIndex:null,theme:X})})(ih)),ih}var ga={},Nv;function fw(){if(Nv)return ga;Nv=1,Object.defineProperty(ga,"__esModule",{value:!0}),ga.mapToAutowhateverTheme=ga.defaultTheme=void 0;var c={container:"react-autosuggest__container",containerOpen:"react-autosuggest__container--open",input:"react-autosuggest__input",inputOpen:"react-autosuggest__input--open",inputFocused:"react-autosuggest__input--focused",suggestionsContainer:"react-autosuggest__suggestions-container",suggestionsContainerOpen:"react-autosuggest__suggestions-container--open",suggestionsList:"react-autosuggest__suggestions-list",suggestion:"react-autosuggest__suggestion",suggestionFirst:"react-autosuggest__suggestion--first",suggestionHighlighted:"react-autosuggest__suggestion--highlighted",sectionContainer:"react-autosuggest__section-container",sectionContainerFirst:"react-autosuggest__section-container--first",sectionTitle:"react-autosuggest__section-title"};ga.defaultTheme=c;var t=function(r){var s={};for(var l in r)switch(l){case"suggestionsContainer":s.itemsContainer=r[l];break;case"suggestionsContainerOpen":s.itemsContainerOpen=r[l];break;case"suggestion":s.item=r[l];break;case"suggestionFirst":s.itemFirst=r[l];break;case"suggestionHighlighted":s.itemHighlighted=r[l];break;case"suggestionsList":s.itemsList=r[l];break;default:s[l]=r[l]}return s};return ga.mapToAutowhateverTheme=t,ga}var Dv;function gw(){return Dv||(Dv=1,(function(c){Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var t=g(Vi()),i=h(Mr()),r=h(rw()),s=h(hw()),l=fw();function h(M){return M&&M.__esModule?M:{default:M}}function f(){if(typeof WeakMap!="function")return null;var M=new WeakMap;return f=function(){return M},M}function g(M){if(M&&M.__esModule)return M;if(M===null||p(M)!=="object"&&typeof M!="function")return{default:M};var _=f();if(_&&_.has(M))return _.get(M);var N={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var C in M)if(Object.prototype.hasOwnProperty.call(M,C)){var b=v?Object.getOwnPropertyDescriptor(M,C):null;b&&(b.get||b.set)?Object.defineProperty(N,C,b):N[C]=M[C]}return N.default=M,_&&_.set(M,N),N}function p(M){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?p=function(N){return typeof N}:p=function(N){return N&&typeof Symbol=="function"&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":typeof N},p(M)}function S(M,_){var N=Object.keys(M);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(M);_&&(v=v.filter(function(C){return Object.getOwnPropertyDescriptor(M,C).enumerable})),N.push.apply(N,v)}return N}function T(M){for(var _=1;_<arguments.length;_++){var N=arguments[_]!=null?arguments[_]:{};_%2?S(Object(N),!0).forEach(function(v){J(M,v,N[v])}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(N)):S(Object(N)).forEach(function(v){Object.defineProperty(M,v,Object.getOwnPropertyDescriptor(N,v))})}return M}function A(M,_){if(!(M instanceof _))throw new TypeError("Cannot call a class as a function")}function K(M,_){for(var N=0;N<_.length;N++){var v=_[N];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(M,v.key,v)}}function te(M,_,N){return _&&K(M.prototype,_),M}function ie(M){return function(){var _=ue(M),N;if(ce()){var v=ue(this).constructor;N=Reflect.construct(_,arguments,v)}else N=_.apply(this,arguments);return le(this,N)}}function le(M,_){return _&&(p(_)==="object"||typeof _=="function")?_:se(M)}function se(M){if(M===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M}function ce(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function ue(M){return ue=Object.setPrototypeOf?Object.getPrototypeOf:function(N){return N.__proto__||Object.getPrototypeOf(N)},ue(M)}function G(M,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function");M.prototype=Object.create(_&&_.prototype,{constructor:{value:M,writable:!0,configurable:!0}}),_&&oe(M,_)}function oe(M,_){return oe=Object.setPrototypeOf||function(v,C){return v.__proto__=C,v},oe(M,_)}function J(M,_,N){return _ in M?Object.defineProperty(M,_,{value:N,enumerable:!0,configurable:!0,writable:!0}):M[_]=N,M}var ee=function(){return!0},U=function(_){return _.trim().length>0},O=function(_){var N=_.containerProps,v=_.children;return t.default.createElement("div",N,v)},x="suggestions-revealed",j="suggestions-updated",Y="suggestion-selected",ne="input-focused",fe="input-changed",ve="input-blurred",D="escape-pressed",X=(function(M){G(N,M);var _=ie(N);function N(v){var C,b=v.alwaysRenderSuggestions;return A(this,N),C=_.call(this),J(se(C),"onDocumentMouseDown",function(I){C.justClickedOnSuggestionsContainer=!1;for(var z=I.detail&&I.detail.target||I.target;z!==null&&z!==document;){if(z.getAttribute&&z.getAttribute("data-suggestion-index")!==null)return;if(z===C.suggestionsContainer){C.justClickedOnSuggestionsContainer=!0;return}z=z.parentNode}}),J(se(C),"storeAutowhateverRef",function(I){I!==null&&(C.autowhatever=I)}),J(se(C),"onSuggestionMouseEnter",function(I,z){var ae=z.sectionIndex,de=z.itemIndex;C.updateHighlightedSuggestion(ae,de),I.target===C.pressedSuggestion&&(C.justSelectedSuggestion=!0),C.justMouseEntered=!0,setTimeout(function(){C.justMouseEntered=!1})}),J(se(C),"highlightFirstSuggestion",function(){C.updateHighlightedSuggestion(C.props.multiSection?0:null,0)}),J(se(C),"onDocumentMouseUp",function(){C.pressedSuggestion&&!C.justSelectedSuggestion&&C.input.focus(),C.pressedSuggestion=null}),J(se(C),"onSuggestionMouseDown",function(I){C.justSelectedSuggestion||(C.justSelectedSuggestion=!0,C.pressedSuggestion=I.target)}),J(se(C),"onSuggestionsClearRequested",function(){var I=C.props.onSuggestionsClearRequested;I&&I()}),J(se(C),"onSuggestionSelected",function(I,z){var ae=C.props,de=ae.alwaysRenderSuggestions,Te=ae.onSuggestionSelected,Ae=ae.onSuggestionsFetchRequested;Te&&Te(I,z);var qe=C.props.shouldKeepSuggestionsOnSelect(z.suggestion);de||qe?Ae({value:z.suggestionValue,reason:Y}):C.onSuggestionsClearRequested(),C.resetHighlightedSuggestion()}),J(se(C),"onSuggestionClick",function(I){var z=C.props,ae=z.alwaysRenderSuggestions,de=z.focusInputOnSuggestionClick,Te=C.getSuggestionIndices(C.findSuggestionElement(I.target)),Ae=Te.sectionIndex,qe=Te.suggestionIndex,We=C.getSuggestion(Ae,qe),ht=C.props.getSuggestionValue(We);C.maybeCallOnChange(I,ht,"click"),C.onSuggestionSelected(I,{suggestion:We,suggestionValue:ht,suggestionIndex:qe,sectionIndex:Ae,method:"click"});var ft=C.props.shouldKeepSuggestionsOnSelect(We);ae||ft||C.closeSuggestions(),de===!0?C.input.focus():C.onBlur(),setTimeout(function(){C.justSelectedSuggestion=!1})}),J(se(C),"onBlur",function(){var I=C.props,z=I.inputProps,ae=I.shouldRenderSuggestions,de=z.value,Te=z.onBlur,Ae=C.getHighlightedSuggestion(),qe=ae(de,ve);C.setState({isFocused:!1,highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null,valueBeforeUpDown:null,isCollapsed:!qe}),Te&&Te(C.blurEvent,{highlightedSuggestion:Ae})}),J(se(C),"onSuggestionMouseLeave",function(I){C.resetHighlightedSuggestion(!1),C.justSelectedSuggestion&&I.target===C.pressedSuggestion&&(C.justSelectedSuggestion=!1)}),J(se(C),"onSuggestionTouchStart",function(){C.justSelectedSuggestion=!0}),J(se(C),"onSuggestionTouchMove",function(){C.justSelectedSuggestion=!1,C.pressedSuggestion=null,C.input.focus()}),J(se(C),"itemProps",function(I){var z=I.sectionIndex,ae=I.itemIndex;return{"data-section-index":z,"data-suggestion-index":ae,onMouseEnter:C.onSuggestionMouseEnter,onMouseLeave:C.onSuggestionMouseLeave,onMouseDown:C.onSuggestionMouseDown,onTouchStart:C.onSuggestionTouchStart,onTouchMove:C.onSuggestionTouchMove,onClick:C.onSuggestionClick}}),J(se(C),"renderSuggestionsContainer",function(I){var z=I.containerProps,ae=I.children,de=C.props.renderSuggestionsContainer;return de({containerProps:z,children:ae,query:C.getQuery()})}),C.state={isFocused:!1,isCollapsed:!b,highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null,valueBeforeUpDown:null},C.justPressedUpDown=!1,C.justMouseEntered=!1,C.pressedSuggestion=null,C}return te(N,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.onDocumentMouseDown),document.addEventListener("mouseup",this.onDocumentMouseUp),this.input=this.autowhatever.input,this.suggestionsContainer=this.autowhatever.itemsContainer}},{key:"UNSAFE_componentWillReceiveProps",value:function(C){var b=this.state.highlightedSuggestionIndex===0&&this.props.highlightFirstSuggestion&&!C.highlightFirstSuggestion;(0,r.default)(C.suggestions,this.props.suggestions)?C.highlightFirstSuggestion&&C.suggestions.length>0&&this.justPressedUpDown===!1&&this.justMouseEntered===!1?this.highlightFirstSuggestion():b&&this.resetHighlightedSuggestion():this.willRenderSuggestions(C,j)?(this.state.isCollapsed&&!this.justSelectedSuggestion&&this.revealSuggestions(),b&&this.resetHighlightedSuggestion()):this.resetHighlightedSuggestion()}},{key:"componentDidUpdate",value:function(C,b){var I=this.props,z=I.suggestions,ae=I.onSuggestionHighlighted,de=I.highlightFirstSuggestion;if(!(0,r.default)(z,C.suggestions)&&z.length>0&&de){this.highlightFirstSuggestion();return}if(ae){var Te=this.getHighlightedSuggestion(),Ae=b.highlightedSuggestion;Te!=Ae&&ae({suggestion:Te})}}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.onDocumentMouseDown),document.removeEventListener("mouseup",this.onDocumentMouseUp)}},{key:"updateHighlightedSuggestion",value:function(C,b,I){var z=this;this.setState(function(ae){var de=ae.valueBeforeUpDown;return b===null?de=null:de===null&&typeof I<"u"&&(de=I),{highlightedSectionIndex:C,highlightedSuggestionIndex:b,highlightedSuggestion:b===null?null:z.getSuggestion(C,b),valueBeforeUpDown:de}})}},{key:"resetHighlightedSuggestion",value:function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.setState(function(b){var I=b.valueBeforeUpDown;return{highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null,valueBeforeUpDown:C?null:I}})}},{key:"revealSuggestions",value:function(){this.setState({isCollapsed:!1})}},{key:"closeSuggestions",value:function(){this.setState({highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null,valueBeforeUpDown:null,isCollapsed:!0})}},{key:"getSuggestion",value:function(C,b){var I=this.props,z=I.suggestions,ae=I.multiSection,de=I.getSectionSuggestions;return ae?de(z[C])[b]:z[b]}},{key:"getHighlightedSuggestion",value:function(){var C=this.state,b=C.highlightedSectionIndex,I=C.highlightedSuggestionIndex;return I===null?null:this.getSuggestion(b,I)}},{key:"getSuggestionValueByIndex",value:function(C,b){var I=this.props.getSuggestionValue;return I(this.getSuggestion(C,b))}},{key:"getSuggestionIndices",value:function(C){var b=C.getAttribute("data-section-index"),I=C.getAttribute("data-suggestion-index");return{sectionIndex:typeof b=="string"?parseInt(b,10):null,suggestionIndex:parseInt(I,10)}}},{key:"findSuggestionElement",value:function(C){var b=C;do{if(b.getAttribute&&b.getAttribute("data-suggestion-index")!==null)return b;b=b.parentNode}while(b!==null);throw console.error("Clicked element:",C),new Error("Couldn't find suggestion element")}},{key:"maybeCallOnChange",value:function(C,b,I){var z=this.props.inputProps,ae=z.value,de=z.onChange;b!==ae&&de(C,{newValue:b,method:I})}},{key:"willRenderSuggestions",value:function(C,b){var I=C.suggestions,z=C.inputProps,ae=C.shouldRenderSuggestions,de=z.value;return I.length>0&&ae(de,b)}},{key:"getQuery",value:function(){var C=this.props.inputProps,b=C.value,I=this.state.valueBeforeUpDown;return(I===null?b:I).trim()}},{key:"render",value:function(){var C=this,b=this.props,I=b.suggestions,z=b.renderInputComponent,ae=b.onSuggestionsFetchRequested,de=b.renderSuggestion,Te=b.inputProps,Ae=b.multiSection,qe=b.renderSectionTitle,We=b.id,ht=b.getSectionSuggestions,ft=b.theme,ot=b.getSuggestionValue,we=b.alwaysRenderSuggestions,Xt=b.highlightFirstSuggestion,sn=b.containerProps,cn=this.state,Hr=cn.isFocused,wa=cn.isCollapsed,Ra=cn.highlightedSectionIndex,ts=cn.highlightedSuggestionIndex,Ia=cn.valueBeforeUpDown,yt=we?ee:this.props.shouldRenderSuggestions,di=Te.value,Lr=Te.onFocus,zr=Te.onKeyDown,Oa=this.willRenderSuggestions(this.props,"render"),ka=we||Hr&&!wa&&Oa,ns=ka?I:[],bl=T({},Te,{onFocus:function(De){if(!C.justSelectedSuggestion&&!C.justClickedOnSuggestionsContainer){var vt=yt(di,ne);C.setState({isFocused:!0,isCollapsed:!vt}),Lr&&Lr(De),vt&&ae({value:di,reason:ne})}},onBlur:function(De){if(C.justClickedOnSuggestionsContainer){C.input.focus();return}C.blurEvent=De,C.justSelectedSuggestion||(C.onBlur(),C.onSuggestionsClearRequested())},onChange:function(De){var vt=De.target.value,gt=yt(vt,fe);C.maybeCallOnChange(De,vt,"type"),C.suggestionsContainer&&(C.suggestionsContainer.scrollTop=0),C.setState(T({},Xt?{}:{highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null},{valueBeforeUpDown:null,isCollapsed:!gt})),gt?ae({value:vt,reason:fe}):C.onSuggestionsClearRequested()},onKeyDown:function(De,vt){var gt=De.keyCode;switch(gt){case 40:case 38:if(wa)yt(di,x)&&(ae({value:di,reason:x}),C.revealSuggestions(),De.preventDefault());else if(I.length>0){var is=vt.newHighlightedSectionIndex,Br=vt.newHighlightedItemIndex,Kr;Br===null?Kr=Ia===null?di:Ia:Kr=C.getSuggestionValueByIndex(is,Br),C.updateHighlightedSuggestion(is,Br,di),C.maybeCallOnChange(De,Kr,gt===40?"down":"up"),De.preventDefault()}C.justPressedUpDown=!0,setTimeout(function(){C.justPressedUpDown=!1});break;case 13:{if(De.keyCode===229)break;var hi=C.getHighlightedSuggestion();if(ka&&!we&&C.closeSuggestions(),hi!=null){De.preventDefault();var Xi=ot(hi);C.maybeCallOnChange(De,Xi,"enter"),C.onSuggestionSelected(De,{suggestion:hi,suggestionValue:Xi,suggestionIndex:ts,sectionIndex:Ra,method:"enter"}),C.justSelectedSuggestion=!0,setTimeout(function(){C.justSelectedSuggestion=!1})}break}case 27:{ka&&De.preventDefault();var Ji=ka&&!we;if(Ia===null){if(!Ji){var Sn="";C.maybeCallOnChange(De,Sn,"escape"),yt(Sn,D)?ae({value:Sn,reason:D}):C.onSuggestionsClearRequested()}}else C.maybeCallOnChange(De,Ia,"escape");Ji?(C.onSuggestionsClearRequested(),C.closeSuggestions()):C.resetHighlightedSuggestion();break}}zr&&zr(De)}}),wl={query:this.getQuery()};return t.default.createElement(s.default,{multiSection:Ae,items:ns,renderInputComponent:z,renderItemsContainer:this.renderSuggestionsContainer,renderItem:de,renderItemData:wl,renderSectionTitle:qe,getSectionItems:ht,highlightedSectionIndex:Ra,highlightedItemIndex:ts,containerProps:sn,inputProps:bl,itemProps:this.itemProps,theme:(0,l.mapToAutowhateverTheme)(ft),id:We,ref:this.storeAutowhateverRef})}}]),N})(t.Component);c.default=X,J(X,"propTypes",{suggestions:i.default.array.isRequired,onSuggestionsFetchRequested:function(_,N){var v=_[N];if(typeof v!="function")throw new Error("'onSuggestionsFetchRequested' must be implemented. See: https://github.com/moroshko/react-autosuggest#onSuggestionsFetchRequestedProp")},onSuggestionsClearRequested:function(_,N){var v=_[N];if(_.alwaysRenderSuggestions===!1&&typeof v!="function")throw new Error("'onSuggestionsClearRequested' must be implemented. See: https://github.com/moroshko/react-autosuggest#onSuggestionsClearRequestedProp")},shouldKeepSuggestionsOnSelect:i.default.func,onSuggestionSelected:i.default.func,onSuggestionHighlighted:i.default.func,renderInputComponent:i.default.func,renderSuggestionsContainer:i.default.func,getSuggestionValue:i.default.func.isRequired,renderSuggestion:i.default.func.isRequired,inputProps:function(_,N){var v=_[N];if(!v)throw new Error("'inputProps' must be passed.");if(!Object.prototype.hasOwnProperty.call(v,"value"))throw new Error("'inputProps' must have 'value'.");if(!Object.prototype.hasOwnProperty.call(v,"onChange"))throw new Error("'inputProps' must have 'onChange'.")},shouldRenderSuggestions:i.default.func,alwaysRenderSuggestions:i.default.bool,multiSection:i.default.bool,renderSectionTitle:function(_,N){var v=_[N];if(_.multiSection===!0&&typeof v!="function")throw new Error("'renderSectionTitle' must be implemented. See: https://github.com/moroshko/react-autosuggest#renderSectionTitleProp")},getSectionSuggestions:function(_,N){var v=_[N];if(_.multiSection===!0&&typeof v!="function")throw new Error("'getSectionSuggestions' must be implemented. See: https://github.com/moroshko/react-autosuggest#getSectionSuggestionsProp")},focusInputOnSuggestionClick:i.default.bool,highlightFirstSuggestion:i.default.bool,theme:i.default.object,id:i.default.string,containerProps:i.default.object}),J(X,"defaultProps",{renderSuggestionsContainer:O,shouldRenderSuggestions:U,alwaysRenderSuggestions:!1,multiSection:!1,shouldKeepSuggestionsOnSelect:function(){return!1},focusInputOnSuggestionClick:!0,highlightFirstSuggestion:!1,theme:l.defaultTheme,id:"1",containerProps:{}})})(th)),th}var uh,Uv;function mw(){return Uv||(Uv=1,uh=gw().default),uh}var pw=mw();const yw=_a(pw);var Ic={exports:{}},vw=Ic.exports,xv;function Cw(){return xv||(xv=1,(function(c,t){(function(i,r){c.exports=r()})(vw,(()=>{return i={772:(s,l,h)=>{const f=h(826).remove,g=/[.*+?^${}()|[\]\\]/g,p=/[a-z0-9_]/i,S=/\s+/;s.exports=function(T,A,K){var te,ie;ie={insideWords:!1,findAllOccurrences:!1,requireMatchAll:!1},te=(te=K)||{},Object.keys(te).forEach((ce=>{ie[ce]=!!te[ce]})),K=ie;const le=Array.from(T).map((ce=>f(ce)));let se=le.join("");return(A=f(A)).trim().split(S).filter((ce=>ce.length>0)).reduce(((ce,ue)=>{const G=ue.length,oe=!K.insideWords&&p.test(ue[0])?"\\b":"",J=new RegExp(oe+ue.replace(g,"\\$&"),"i");let ee,U;if(ee=J.exec(se),K.requireMatchAll&&ee===null)return se="",[];for(;ee;){U=ee.index;const O=G-le.slice(U,U+G).join("").length,x=U-le.slice(0,U).join("").length,j=[U+x,U+G+x+O];if(j[0]!==j[1]&&ce.push(j),se=se.slice(0,U)+new Array(G+1).join(" ")+se.slice(U+G),!K.findAllOccurrences)break;ee=J.exec(se)}return ce}),[]).sort(((ce,ue)=>ce[0]-ue[0]))}},826:s=>{var l={:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"AE",:"A",:"A",:"A",:"C",:"C",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"I",:"I",:"I",:"I",:"I",:"I",:"D",:"N",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"U",:"U",:"U",:"U",:"Y",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"ae",:"a",:"a",:"a",:"c",:"c",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"i",:"i",:"i",:"i",:"i",:"i",:"d",:"n",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"u",:"u",:"u",:"u",:"y",:"y",:"A",:"a",:"A",:"a",:"A",:"a",:"C",:"c",:"C",:"c",:"C",:"c",:"C",:"c",C:"C",c:"c",:"D",:"d",:"D",:"d",:"E",:"e",:"E",:"e",:"E",:"e",:"E",:"e",:"E",:"e",:"G",:"G",:"g",:"g",:"G",:"g",:"G",:"g",:"G",:"g",:"H",:"h",:"H",:"h",:"H",:"h",:"I",:"i",:"I",:"i",:"I",:"i",:"I",:"i",:"I",:"i",:"IJ",:"ij",:"J",:"j",:"K",:"k",:"K",:"k",K:"K",k:"k",:"L",:"l",:"L",:"l",:"L",:"l",:"L",:"l",:"l",:"l",:"M",:"m",M:"M",m:"m",:"N",:"n",:"N",:"n",:"N",:"n",:"n",N:"N",n:"n",:"O",:"o",:"O",:"o",:"O",:"o",:"OE",:"oe",P:"P",p:"p",:"R",:"r",:"R",:"r",:"R",:"r",R:"R",r:"r",:"R",:"r",:"S",:"s",:"S",:"s",:"S",:"S",:"s",:"s",:"S",:"s",:"T",:"t",:"t",:"T",:"T",:"t",:"T",:"t",T:"T",t:"t",:"U",:"u",:"U",:"u",:"U",:"u",:"U",:"u",:"U",:"u",:"U",:"u",:"U",:"u",V:"V",v:"v",:"W",:"w",:"W",:"w",X:"X",x:"x",:"Y",:"y",:"Y",Y:"Y",y:"y",:"Z",:"z",:"Z",:"z",:"Z",:"z",:"s",:"f",:"O",:"o",:"U",:"u",:"A",:"a",:"I",:"i",:"O",:"o",:"U",:"u",:"U",:"u",:"U",:"u",:"U",:"u",:"U",:"u",:"U",:"u",:"U",:"u",:"A",:"a",:"AE",:"ae",:"O",:"o",:"TH",:"th",:"P",:"p",:"S",:"s",X:"X",x:"x",:"",:"",:"",:"",A:"A",a:"a",E:"E",e:"e",I:"I",i:"i",:"N",:"n",:"O",:"o",:"O",:"o",:"U",:"u",:"W",:"w",:"Y",:"y",:"A",:"a",:"E",:"e",:"I",:"i",:"O",:"o",:"R",:"r",:"U",:"u",B:"B",b:"b",:"C",:"c",:"E",:"e",F:"F",f:"f",:"G",:"g",:"H",:"h",J:"J",:"j",:"K",:"k",M:"M",m:"m",P:"P",p:"p",Q:"Q",q:"q",:"R",:"r",:"S",:"s",V:"V",v:"v",W:"W",w:"w",X:"X",x:"x",Y:"Y",y:"y",A:"A",a:"a",B:"B",b:"b",:"D",:"d",:"E",:"e",:"E",:"e",:"H",:"h",I:"I",i:"i",:"I",:"i",M:"M",m:"m",O:"O",o:"o",Q:"Q",q:"q",U:"U",u:"u",X:"X",x:"x",Z:"Z",z:"z"},h=Object.keys(l).join("|"),f=new RegExp(h,"g"),g=new RegExp(h,""),p=function(S){return S.replace(f,(function(T){return l[T]}))};s.exports=p,s.exports.has=function(S){return!!S.match(g)},s.exports.remove=p}},r={},(function s(l){var h=r[l];if(h!==void 0)return h.exports;var f=r[l]={exports:{}};return i[l](f,f.exports,s),f.exports})(772);var i,r}))})(Ic)),Ic.exports}var Sw=Cw();const Tw=_a(Sw);var Oc={exports:{}},Aw=Oc.exports,Pv;function Ew(){return Pv||(Pv=1,(function(c,t){(function(i,r){c.exports=r()})(Aw,(()=>{return i={705:s=>{s.exports=function(l,h){const f=[];return h.length===0?f.push({text:l,highlight:!1}):h[0][0]>0&&f.push({text:l.slice(0,h[0][0]),highlight:!1}),h.forEach(((g,p)=>{const S=g[0],T=g[1];f.push({text:l.slice(S,T),highlight:!0}),p===h.length-1?T<l.length&&f.push({text:l.slice(T,l.length),highlight:!1}):T<h[p+1][0]&&f.push({text:l.slice(T,h[p+1][0]),highlight:!1})})),f}}},r={},(function s(l){var h=r[l];if(h!==void 0)return h.exports;var f=r[l]={exports:{}};return i[l](f,f.exports,s),f.exports})(705);var i,r}))})(Oc)),Oc.exports}var _w=Ew();const bw=_a(_w),ww=c=>c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");function Rw(c,t=20){let i;return(...s)=>{clearTimeout(i),i=setTimeout(()=>c(...s),t)}}class Ir{constructor(t){if(t){const{Time:i,NickName:r}=t;this.whoWhen={time:new Date(i),nickName:r}}}whoWhen=void 0}class XC{constructor(t){if(t){const{time:i,nickName:r}=t;this.whoWhenDto={Time:new Date(i),NickName:r}}}whoWhenDto=void 0}class Iw{constructor(t,i){const{questionKey:r,assignedAnswerKey:s}=t;this.historyDto={Workspace:i,QuestionKey:{TopId:r.topId,Id:r.id,ParentId:r.parentId},AnswerKey:{TopId:s.topId,Id:s.id},UserAction:t.userAction,Created:new XC(t.created).whoWhenDto}}historyDto}class Ow{constructor(t,i){const{questionKey:r,filter:s,created:l}=t;this.historyFilterDto={Workspace:i,Filter:s,QuestionKey:{Workspace:i,TopId:r.topId,Id:r.id,ParentId:r.parentId},Created:new XC(l).whoWhenDto}}historyFilterDto}class kw{constructor(t){const{TopId:i,ParentId:r,Id:s,Level:l,Title:h,HasSubCategories:f,Link:g}=t;this.cat={topId:i,id:s,parentId:r??null,level:l,title:h,hasSubCategories:f,link:g??"",catRows:[]}}cat}class Mw{constructor(t){const{QuestionKey:i,Filter:r,Created:s,LastUsed:l,NumOfUsages:h}=t;this.relatedFilter={questionKey:i??null,filter:r,created:s?new Ir(s).whoWhen:null,lastUsed:l?new Ir(l).whoWhen:null,numOfUsages:h}}relatedFilter}class Nw{constructor(t){const i=t.AssignedAnswerDtos?t.AssignedAnswerDtos.map(s=>new Dw(s).assignedAnswer):[],r=t.RelatedFilterDtos?t.RelatedFilterDtos.map(s=>new Mw(s).relatedFilter):[];this.question={topId:t.TopId,parentId:t.ParentId??"",id:t.Id,title:t.Title,categoryTitle:t.CategoryTitle,assignedAnswers:i,numOfAssignedAnswers:t.NumOfAssignedAnswers??0,relatedFilters:r,numOfRelatedFilters:t.NumOfRelatedFilters??0,source:t.Source??0,status:t.Status??0,included:t.Included!==void 0,created:new Ir(t.Created).whoWhen,modified:t.Modified?new Ir(t.Modified).whoWhen:void 0}}question}class kc{constructor(t){this.questionKey={topId:t.topId,parentId:t.parentId??null,id:t.id}}questionKey;toQuery=t=>{const{topId:i,parentId:r,id:s}=this.questionKey;return[`qKey.workspace=${encodeURIComponent(t)}`,`qKey.topId=${encodeURIComponent(i)}`,`qKey.parentId=${encodeURIComponent(r??"null")}`,`qKey.id=${encodeURIComponent(s)}`].join("&")}}class Dw{constructor(t){const{TopId:i,Id:r,AnswerTitle:s,AnswerLink:l,Created:h,Modified:f}=t;this.assignedAnswer={topId:i,id:r,answerTitle:s,answerLink:l,created:new Ir(h).whoWhen,modified:new Ir(f).whoWhen}}assignedAnswer}const Uw=yw;class xw extends Pn.Component{state;isMob;allCats;searchQuestions;debouncedLoadSuggestions;constructor(t){console.log("AutoSuggestQuestions CONSTRUCTOR"),super(t),this.state={value:t.tekst||"",suggestions:[],noSuggestions:!1,highlighted:"",isLoading:!1},this.allCats=t.allCats,this.searchQuestions=t.searchQuestions,this.isMob=!1,this.loadSuggestions=this.loadSuggestions.bind(this),this.debouncedLoadSuggestions=Rw(this.loadSuggestions,300)}async loadSuggestions(t){this.setState({isLoading:!0}),console.time();const i=await this.getSuggestions(t);console.timeEnd(),t===this.state.value?this.setState({isLoading:!1,suggestions:i,noSuggestions:i.length===0}):this.setState({isLoading:!1})}componentDidMount(){setTimeout(()=>{window.focus()},300)}render(){const{value:t,suggestions:i,noSuggestions:r}=this.state;return Z.jsxs("div",{children:[Z.jsx(Uw,{onSuggestionsClearRequested:this.onSuggestionsClearRequested,multiSection:!0,suggestions:i,onSuggestionsFetchRequested:this.onSuggestionsFetchRequested.bind(this),onSuggestionSelected:this.onSuggestionSelected.bind(this),getSuggestionValue:this.getSuggestionValue,renderSuggestion:this.renderSuggestion,renderSectionTitle:this.renderSectionTitle,getSectionSuggestions:this.getSectionSuggestions,onSuggestionHighlighted:this.onSuggestionHighlighted.bind(this),highlightFirstSuggestion:!1,renderInputComponent:this.renderInputComponent,focusInputOnSuggestionClick:!this.isMob,inputProps:{placeholder:"Type 'remote'",value:t,onChange:(s,l)=>this.onChange(s,l),autoFocus:!0}}),r&&Z.jsx("div",{className:"no-suggestions",children:"No questions to suggest"})]})}async getSuggestions(t){const i=ww(t.trim());if(i==="")return[];if(t.length<3)return[];const r=new Map,s=[];try{console.log("--------->>>>> getSuggestions"),(await this.searchQuestions(i,10)).forEach(h=>{const{topId:f,parentId:g,id:p,title:S}=h,T=new kc(h).questionKey;if(!s.includes(T)){s.push(T);const A={topId:f,parentId:g,id:p,title:S,categoryTitle:""};r.has(g)?r.get(g).push(A):r.set(g,[A])}})}catch(l){console.debug(l)}if(s.length===0)return[];try{const l=[];return r.forEach((h,f)=>{const g={id:f,categoryTitle:"",categoryParentTitle:"kuro",parentCategoryUp:"",questionRows:[]};if(f!==null){const p=this.allCats.get(f);if(p){const{title:S,titlesUpTheTree:T}=p;g.categoryTitle=S,g.parentCategoryUp=T}else alert(`${f} Not found in allCats`)}h.forEach(p=>{g.questionRows.push(p)}),l.push(g)}),l}catch(l){console.log(l)}return[]}onSuggestionsClearRequested=()=>{this.setState({suggestions:[],noSuggestions:!1})};onSuggestionSelected(t,i){console.log(t);const r=i.suggestion,{topId:s,parentId:l,id:h}=r;this.props.onSelectQuestion({topId:s,parentId:l,id:h},this.state.value)}renderSuggestion(t,i){const r=Tw(t.title,i.query),s=bw(t.title,r);return Z.jsx("span",{className:"d-inline-block text-truncate",style:{textAlign:"left"},children:s.map((l,h)=>{const f=l.highlight?"react-autosuggest__suggestion-match":void 0;return Z.jsx("span",{className:`${f??""}`,children:l.text},h)})})}renderSectionTitle(t){const{parentCategoryUp:i}=t;return Z.jsx("span",{children:i})}renderInputComponent(t){const{ref:i,...r}=t;return Z.jsx("div",{children:Z.jsx("input",{ref:i,autoFocus:!0,...r})})}onChange(t,{newValue:i}){console.log(t),this.setState({value:i})}async onSuggestionsFetchRequested({value:t}){return this.debouncedLoadSuggestions(t)}getSuggestionValue(t){return t.title}getSectionSuggestions(t){return t.questionRows}onSuggestionHighlighted(t){this.setState({highlighted:t.suggestion})}}const Pw="/knowledge-lib/assets/Q.png",Hw="/knowledge-lib/assets/A.png";const W={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},Ki={SUCCESS:200,SUCCESS_RANGE_START:200,SUCCESS_RANGE_END:299,REDIRECT:302,CLIENT_ERROR:400,CLIENT_ERROR_RANGE_START:400,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,REQUEST_TIMEOUT:408,GONE:410,TOO_MANY_REQUESTS:429,CLIENT_ERROR_RANGE_END:499,SERVER_ERROR:500,SERVER_ERROR_RANGE_START:500,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,SERVER_ERROR_RANGE_END:599,MULTI_SIDED_ERROR:600},va={GET:"GET",POST:"POST"},Dr=[W.OPENID_SCOPE,W.PROFILE_SCOPE,W.OFFLINE_ACCESS_SCOPE],Hv=[...Dr,W.EMAIL_SCOPE],Pt={CONTENT_TYPE:"Content-Type",CONTENT_LENGTH:"Content-Length",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"},Lv={ACTIVE_ACCOUNT_FILTERS:"active-account-filters"},qi={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},Tc={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},kt={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",NO_SESSION:"no_session"},Qh={CODE:"code",IDTOKEN_TOKEN_REFRESHTOKEN:"id_token token refresh_token"},ol={QUERY:"query",FRAGMENT:"fragment"},Lw={QUERY:"query"},JC={AUTHORIZATION_CODE_GRANT:"authorization_code",REFRESH_TOKEN_GRANT:"refresh_token"},Ac={MSSTS_ACCOUNT_TYPE:"MSSTS",ADFS_ACCOUNT_TYPE:"ADFS",GENERIC_ACCOUNT_TYPE:"Generic"},Yo={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},It={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},Yh="appmetadata",zw="client_info",Hc="1",Lc={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:3600*24},an={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},Rt={SCHEMA_VERSION:5,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},Ke={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},qo={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},zv={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},vr={FAILED_AUTO_DETECTION:"1",INTERNAL_CACHE:"2",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},dh={CONFIGURED_NO_AUTO_DETECTION:"2",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},pa={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"},Bw={Pop:"pop"},$C=300;const zc="unexpected_error",Kw="post_request_failed";const Bv={[zc]:"Unexpected error in authentication.",[Kw]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."};class Ye extends Error{constructor(t,i,r){const s=i?`${t}: ${i}`:t;super(s),Object.setPrototypeOf(this,Ye.prototype),this.errorCode=t||W.EMPTY_STRING,this.errorMessage=i||W.EMPTY_STRING,this.subError=r||W.EMPTY_STRING,this.name="AuthError"}setCorrelationId(t){this.correlationId=t}}function Eh(c,t){return new Ye(c,t?`${Bv[c]} ${t}`:Bv[c])}const Vh="client_info_decoding_error",ZC="client_info_empty_error",Xh="token_parsing_error",WC="null_or_empty_token",ri="endpoints_resolution_error",eS="network_error",tS="openid_config_error",nS="hash_not_deserialized",Or="invalid_state",iS="state_mismatch",_h="state_not_found",aS="nonce_mismatch",Jh="auth_time_not_found",rS="max_age_transpired",qw="multiple_matching_tokens",jw="multiple_matching_accounts",oS="multiple_matching_appMetadata",sS="request_cannot_be_made",cS="cannot_remove_empty_scope",lS="cannot_append_scopeset",bh="empty_input_scopeset",Gw="device_code_polling_cancelled",Fw="device_code_expired",Qw="device_code_unknown_error",$h="no_account_in_silent_request",uS="invalid_cache_record",Zh="invalid_cache_environment",wh="no_account_found",Rh="no_crypto_object",Yw="unexpected_credential_type",Vw="invalid_assertion",Xw="invalid_client_credential",ji="token_refresh_required",Jw="user_timeout_reached",dS="token_claims_cnf_required_for_signedjwt",hS="authorization_code_missing_from_server_response",fS="binding_key_not_removed",gS="end_session_endpoint_not_supported",Wh="key_id_missing",$w="no_network_connectivity",Zw="user_canceled",Ww="missing_tenant_id_error",Re="method_not_implemented",eR="nested_app_auth_bridge_disabled",tR="platform_broker_error";const Kv={[Vh]:"The client info could not be parsed/decoded correctly",[ZC]:"The client info was empty",[Xh]:"Token cannot be parsed",[WC]:"The token is null or empty",[ri]:"Endpoints cannot be resolved",[eS]:"Network request failed",[tS]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[nS]:"The hash parameters could not be deserialized",[Or]:"State was not the expected format",[iS]:"State mismatch error",[_h]:"State not found",[aS]:"Nonce mismatch error",[Jh]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[rS]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[qw]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[jw]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[oS]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[sS]:"Token request cannot be made without authorization code or refresh token.",[cS]:"Cannot remove null or empty scope from ScopeSet",[lS]:"Cannot append ScopeSet",[bh]:"Empty input ScopeSet cannot be processed",[Gw]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[Fw]:"Device code is expired.",[Qw]:"Device code stopped polling for unknown reasons.",[$h]:"Please pass an account object, silent flow is not supported without account information",[uS]:"Cache record object was null or undefined.",[Zh]:"Invalid environment when attempting to create cache entry",[wh]:"No account found in cache for given key.",[Rh]:"No crypto object detected.",[Yw]:"Unexpected credential type.",[Vw]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[Xw]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[ji]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[Jw]:"User defined timeout for device code polling reached",[dS]:"Cannot generate a POP jwt if the token_claims are not populated",[hS]:"Server response does not contain an authorization code to proceed",[fS]:"Could not remove the credential's binding key from storage.",[gS]:"The provided authority does not support logout",[Wh]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[$w]:"No network connectivity. Check your internet connection.",[Zw]:"User cancelled the flow.",[Ww]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[Re]:"This method has not been implemented",[eR]:"The nested app auth bridge is disabled",[tR]:"An error occurred in the native broker. See the platformBrokerError property for details."};class ef extends Ye{constructor(t,i){super(t,i?`${Kv[t]}: ${i}`:Kv[t]),this.name="ClientAuthError",Object.setPrototypeOf(this,ef.prototype)}}function re(c,t){return new ef(c,t)}const Bc={createNewGuid:()=>{throw re(Re)},base64Decode:()=>{throw re(Re)},base64Encode:()=>{throw re(Re)},base64UrlEncode:()=>{throw re(Re)},encodeKid:()=>{throw re(Re)},async getPublicKeyThumbprint(){throw re(Re)},async removeTokenBindingKey(){throw re(Re)},async clearKeystore(){throw re(Re)},async signJwt(){throw re(Re)},async hashString(){throw re(Re)}};var Qe;(function(c){c[c.Error=0]="Error",c[c.Warning=1]="Warning",c[c.Info=2]="Info",c[c.Verbose=3]="Verbose",c[c.Trace=4]="Trace"})(Qe||(Qe={}));class Qi{constructor(t,i,r){this.level=Qe.Info;const s=()=>{},l=t||Qi.createDefaultLoggerOptions();this.localCallback=l.loggerCallback||s,this.piiLoggingEnabled=l.piiLoggingEnabled||!1,this.level=typeof l.logLevel=="number"?l.logLevel:Qe.Info,this.correlationId=l.correlationId||W.EMPTY_STRING,this.packageName=i||W.EMPTY_STRING,this.packageVersion=r||W.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:Qe.Info}}clone(t,i,r){return new Qi({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:r||this.correlationId},t,i)}logMessage(t,i){if(i.logLevel>this.level||!this.piiLoggingEnabled&&i.containsPii)return;const l=`${`[${new Date().toUTCString()}] : [${i.correlationId||this.correlationId||""}]`} : ${this.packageName}@${this.packageVersion} : ${Qe[i.logLevel]} - ${t}`;this.executeCallback(i.logLevel,l,i.containsPii||!1)}executeCallback(t,i,r){this.localCallback&&this.localCallback(t,i,r)}error(t,i){this.logMessage(t,{logLevel:Qe.Error,containsPii:!1,correlationId:i||W.EMPTY_STRING})}errorPii(t,i){this.logMessage(t,{logLevel:Qe.Error,containsPii:!0,correlationId:i||W.EMPTY_STRING})}warning(t,i){this.logMessage(t,{logLevel:Qe.Warning,containsPii:!1,correlationId:i||W.EMPTY_STRING})}warningPii(t,i){this.logMessage(t,{logLevel:Qe.Warning,containsPii:!0,correlationId:i||W.EMPTY_STRING})}info(t,i){this.logMessage(t,{logLevel:Qe.Info,containsPii:!1,correlationId:i||W.EMPTY_STRING})}infoPii(t,i){this.logMessage(t,{logLevel:Qe.Info,containsPii:!0,correlationId:i||W.EMPTY_STRING})}verbose(t,i){this.logMessage(t,{logLevel:Qe.Verbose,containsPii:!1,correlationId:i||W.EMPTY_STRING})}verbosePii(t,i){this.logMessage(t,{logLevel:Qe.Verbose,containsPii:!0,correlationId:i||W.EMPTY_STRING})}trace(t,i){this.logMessage(t,{logLevel:Qe.Trace,containsPii:!1,correlationId:i||W.EMPTY_STRING})}tracePii(t,i){this.logMessage(t,{logLevel:Qe.Trace,containsPii:!0,correlationId:i||W.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}}const mS="@azure/msal-common",tf="15.13.2";const nf={None:"none"};const pS="redirect_uri_empty",nR="claims_request_parsing_error",yS="authority_uri_insecure",zo="url_parse_error",vS="empty_url_error",CS="empty_input_scopes_error",af="invalid_claims",SS="token_request_empty",TS="logout_request_empty",iR="invalid_code_challenge_method",rf="pkce_params_missing",of="invalid_cloud_discovery_metadata",AS="invalid_authority_metadata",ES="untrusted_authority",sl="missing_ssh_jwk",_S="missing_ssh_kid",aR="missing_nonce_authentication_header",rR="invalid_authentication_header",bS="cannot_set_OIDCOptions",wS="cannot_allow_platform_broker",RS="authority_mismatch",IS="invalid_request_method_for_EAR",OS="invalid_authorize_post_body_parameters";const oR={[pS]:"A redirect URI is required for all calls, and none has been set.",[nR]:"Could not parse the given claims request object.",[yS]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[zo]:"URL could not be parsed into appropriate segments.",[vS]:"URL was empty or null.",[CS]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[af]:"Given claims parameter must be a stringified JSON object.",[SS]:"Token request was empty and not found in cache.",[TS]:"The logout request was null or undefined.",[iR]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[rf]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[of]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[AS]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[ES]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[sl]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[_S]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[aR]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[rR]:"Invalid authentication header provided",[bS]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[wS]:"Cannot set allowPlatformBroker parameter to true when not in AAD protocol mode.",[RS]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority.",[OS]:"Invalid authorize post body parameters provided. If you are using authorizePostBodyParameters, the request method must be POST. Please check the request method and parameters.",[IS]:"Invalid request method for EAR protocol mode. The request method cannot be GET when using EAR protocol mode. Please change the request method to POST."};class sf extends Ye{constructor(t){super(t,oR[t]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,sf.prototype)}}function Xe(c){return new sf(c)}class rn{static isEmptyObj(t){if(t)try{const i=JSON.parse(t);return Object.keys(i).length===0}catch{}return!0}static startsWith(t,i){return t.indexOf(i)===0}static endsWith(t,i){return t.length>=i.length&&t.lastIndexOf(i)===t.length-i.length}static queryStringToObject(t){const i={},r=t.split("&"),s=l=>decodeURIComponent(l.replace(/\+/g," "));return r.forEach(l=>{if(l.trim()){const[h,f]=l.split(/=(.+)/g,2);h&&f&&(i[s(h)]=s(f))}}),i}static trimArrayEntries(t){return t.map(i=>i.trim())}static removeEmptyStringsFromArray(t){return t.filter(i=>!!i)}static jsonParseHelper(t){try{return JSON.parse(t)}catch{return null}}static matchPattern(t,i){return new RegExp(t.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(i)}}class pt{constructor(t){const i=t?rn.trimArrayEntries([...t]):[],r=i?rn.removeEmptyStringsFromArray(i):[];if(!r||!r.length)throw Xe(CS);this.scopes=new Set,r.forEach(s=>this.scopes.add(s))}static fromString(t){const r=(t||W.EMPTY_STRING).split(" ");return new pt(r)}static createSearchScopes(t){const i=t&&t.length>0?t:[...Dr],r=new pt(i);return r.containsOnlyOIDCScopes()?r.removeScope(W.OFFLINE_ACCESS_SCOPE):r.removeOIDCScopes(),r}containsScope(t){const i=this.printScopesLowerCase().split(" "),r=new pt(i);return t?r.scopes.has(t.toLowerCase()):!1}containsScopeSet(t){return!t||t.scopes.size<=0?!1:this.scopes.size>=t.scopes.size&&t.asArray().every(i=>this.containsScope(i))}containsOnlyOIDCScopes(){let t=0;return Hv.forEach(i=>{this.containsScope(i)&&(t+=1)}),this.scopes.size===t}appendScope(t){t&&this.scopes.add(t.trim())}appendScopes(t){try{t.forEach(i=>this.appendScope(i))}catch{throw re(lS)}}removeScope(t){if(!t)throw re(cS);this.scopes.delete(t.trim())}removeOIDCScopes(){Hv.forEach(t=>{this.scopes.delete(t)})}unionScopeSets(t){if(!t)throw re(bh);const i=new Set;return t.scopes.forEach(r=>i.add(r.toLowerCase())),this.scopes.forEach(r=>i.add(r.toLowerCase())),i}intersectingScopeSets(t){if(!t)throw re(bh);t.containsOnlyOIDCScopes()||t.removeOIDCScopes();const i=this.unionScopeSets(t),r=t.getScopeCount(),s=this.getScopeCount();return i.size<s+r}getScopeCount(){return this.scopes.size}asArray(){const t=[];return this.scopes.forEach(i=>t.push(i)),t}printScopes(){return this.scopes?this.asArray().join(" "):W.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}}function Kc(c,t){if(!c)throw re(ZC);try{const i=t(c);return JSON.parse(i)}catch{throw re(Vh)}}function Ar(c){if(!c)throw re(Vh);const t=c.split(Yo.CLIENT_INFO_SEPARATOR,2);return{uid:t[0],utid:t.length<2?W.EMPTY_STRING:t[1]}}function qv(c,t){return!!c&&!!t&&c===t.split(".")[1]}function cl(c,t,i,r){if(r){const{oid:s,sub:l,tid:h,name:f,tfp:g,acr:p,preferred_username:S,upn:T,login_hint:A}=r,K=h||g||p||"";return{tenantId:K,localAccountId:s||l||"",name:f,username:S||T||"",loginHint:A,isHomeTenant:qv(K,c)}}else return{tenantId:i,localAccountId:t,username:"",isHomeTenant:qv(i,c)}}function cf(c,t,i,r){let s=c;if(t){const{isHomeTenant:l,...h}=t;s={...c,...h}}if(i){const{isHomeTenant:l,...h}=cl(c.homeAccountId,c.localAccountId,c.tenantId,i);return s={...s,...h,idTokenClaims:i,idToken:r},s}return s}const bn={Default:0,Adfs:1,Dsts:2,Ciam:3};function lf(c){return c&&(c.tid||c.tfp||c.acr)||null}const Yt={AAD:"AAD",OIDC:"OIDC",EAR:"EAR"};class at{static getAccountInfo(t){return{homeAccountId:t.homeAccountId,environment:t.environment,tenantId:t.realm,username:t.username,localAccountId:t.localAccountId,loginHint:t.loginHint,name:t.name,nativeAccountId:t.nativeAccountId,authorityType:t.authorityType,tenantProfiles:new Map((t.tenantProfiles||[]).map(i=>[i.tenantId,i])),dataBoundary:t.dataBoundary}}isSingleTenant(){return!this.tenantProfiles}static createAccount(t,i,r){const s=new at;i.authorityType===bn.Adfs?s.authorityType=Ac.ADFS_ACCOUNT_TYPE:i.protocolMode===Yt.OIDC?s.authorityType=Ac.GENERIC_ACCOUNT_TYPE:s.authorityType=Ac.MSSTS_ACCOUNT_TYPE;let l;t.clientInfo&&r&&(l=Kc(t.clientInfo,r),l.xms_tdbr&&(s.dataBoundary=l.xms_tdbr==="EU"?"EU":"None")),s.clientInfo=t.clientInfo,s.homeAccountId=t.homeAccountId,s.nativeAccountId=t.nativeAccountId;const h=t.environment||i&&i.getPreferredCache();if(!h)throw re(Zh);s.environment=h,s.realm=l?.utid||lf(t.idTokenClaims)||"",s.localAccountId=l?.uid||t.idTokenClaims?.oid||t.idTokenClaims?.sub||"";const f=t.idTokenClaims?.preferred_username||t.idTokenClaims?.upn,g=t.idTokenClaims?.emails?t.idTokenClaims.emails[0]:null;if(s.username=f||g||"",s.loginHint=t.idTokenClaims?.login_hint,s.name=t.idTokenClaims?.name||"",s.cloudGraphHostName=t.cloudGraphHostName,s.msGraphHost=t.msGraphHost,t.tenantProfiles)s.tenantProfiles=t.tenantProfiles;else{const p=cl(t.homeAccountId,s.localAccountId,s.realm,t.idTokenClaims);s.tenantProfiles=[p]}return s}static createFromAccountInfo(t,i,r){const s=new at;return s.authorityType=t.authorityType||Ac.GENERIC_ACCOUNT_TYPE,s.homeAccountId=t.homeAccountId,s.localAccountId=t.localAccountId,s.nativeAccountId=t.nativeAccountId,s.realm=t.tenantId,s.environment=t.environment,s.username=t.username,s.name=t.name,s.loginHint=t.loginHint,s.cloudGraphHostName=i,s.msGraphHost=r,s.tenantProfiles=Array.from(t.tenantProfiles?.values()||[]),s.dataBoundary=t.dataBoundary,s}static generateHomeAccountId(t,i,r,s,l){if(!(i===bn.Adfs||i===bn.Dsts)){if(t)try{const h=Kc(t,s.base64Decode);if(h.uid&&h.utid)return`${h.uid}.${h.utid}`}catch{}r.warning("No client info in response")}return l?.sub||""}static isAccountEntity(t){return t?t.hasOwnProperty("homeAccountId")&&t.hasOwnProperty("environment")&&t.hasOwnProperty("realm")&&t.hasOwnProperty("localAccountId")&&t.hasOwnProperty("username")&&t.hasOwnProperty("authorityType"):!1}static accountInfoIsEqual(t,i,r){if(!t||!i)return!1;let s=!0;if(r){const l=t.idTokenClaims||{},h=i.idTokenClaims||{};s=l.iat===h.iat&&l.nonce===h.nonce}return t.homeAccountId===i.homeAccountId&&t.localAccountId===i.localAccountId&&t.username===i.username&&t.tenantId===i.tenantId&&t.loginHint===i.loginHint&&t.environment===i.environment&&t.nativeAccountId===i.nativeAccountId&&s}}function Hn(c,t){const i=sR(c);try{const r=t(i);return JSON.parse(r)}catch{throw re(Xh)}}function Ln(c){if(!c.signin_state)return!1;const t=["kmsi","dvc_dmjd"];return c.signin_state.some(r=>t.includes(r.trim().toLowerCase()))}function sR(c){if(!c)throw re(WC);const i=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(c);if(!i||i.length<4)throw re(Xh);return i[2]}function kS(c,t){if(t===0||Date.now()-3e5>c+t)throw re(rS)}function jv(c){if(!c)return c;let t=c.toLowerCase();return rn.endsWith(t,"?")?t=t.slice(0,-1):rn.endsWith(t,"?/")&&(t=t.slice(0,-2)),rn.endsWith(t,"/")||(t+="/"),t}function MS(c){return c.startsWith("#/")?c.substring(2):c.startsWith("#")||c.startsWith("?")?c.substring(1):c}function qc(c){if(!c||c.indexOf("=")<0)return null;try{const t=MS(c),i=Object.fromEntries(new URLSearchParams(t));if(i.code||i.ear_jwe||i.error||i.error_description||i.state)return i}catch{throw re(nS)}return null}function Vo(c,t=!0,i){const r=new Array;return c.forEach((s,l)=>{!t&&i&&l in i?r.push(`${l}=${s}`):r.push(`${l}=${encodeURIComponent(s)}`)}),r.join("&")}function Gv(c){if(!c)return c;const t=c.split("#")[0];try{const i=new URL(t),r=i.origin+i.pathname+i.search;return jv(r)}catch{return jv(t)}}class Pe{get urlString(){return this._urlString}constructor(t){if(this._urlString=t,!this._urlString)throw Xe(vS);t.includes("#")||(this._urlString=Pe.canonicalizeUri(t))}static canonicalizeUri(t){if(t){let i=t.toLowerCase();return rn.endsWith(i,"?")?i=i.slice(0,-1):rn.endsWith(i,"?/")&&(i=i.slice(0,-2)),rn.endsWith(i,"/")||(i+="/"),i}return t}validateAsUri(){let t;try{t=this.getUrlComponents()}catch{throw Xe(zo)}if(!t.HostNameAndPort||!t.PathSegments)throw Xe(zo);if(!t.Protocol||t.Protocol.toLowerCase()!=="https:")throw Xe(yS)}static appendQueryString(t,i){return i?t.indexOf("?")<0?`${t}?${i}`:`${t}&${i}`:t}static removeHashFromUrl(t){return Pe.canonicalizeUri(t.split("#")[0])}replaceTenantPath(t){const i=this.getUrlComponents(),r=i.PathSegments;return t&&r.length!==0&&(r[0]===qi.COMMON||r[0]===qi.ORGANIZATIONS)&&(r[0]=t),Pe.constructAuthorityUriFromObject(i)}getUrlComponents(){const t=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),i=this.urlString.match(t);if(!i)throw Xe(zo);const r={Protocol:i[1],HostNameAndPort:i[4],AbsolutePath:i[5],QueryString:i[7]};let s=r.AbsolutePath.split("/");return s=s.filter(l=>l&&l.length>0),r.PathSegments=s,r.QueryString&&r.QueryString.endsWith("/")&&(r.QueryString=r.QueryString.substring(0,r.QueryString.length-1)),r}static getDomainFromUrl(t){const i=RegExp("^([^:/?#]+://)?([^/?#]*)"),r=t.match(i);if(!r)throw Xe(zo);return r[2]}static getAbsoluteUrl(t,i){if(t[0]===W.FORWARD_SLASH){const s=new Pe(i).getUrlComponents();return s.Protocol+"//"+s.HostNameAndPort+t}return t}static constructAuthorityUriFromObject(t){return new Pe(t.Protocol+"//"+t.HostNameAndPort+"/"+t.PathSegments.join("/"))}static hashContainsKnownProperties(t){return!!qc(t)}}const NS={endpointMetadata:{"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},instanceDiscoveryMetadata:{metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}},Fv=NS.endpointMetadata,uf=NS.instanceDiscoveryMetadata,DS=new Set;uf.metadata.forEach(c=>{c.aliases.forEach(t=>{DS.add(t)})});function cR(c,t){let i;const r=c.canonicalAuthority;if(r){const s=new Pe(r).getUrlComponents().HostNameAndPort;i=Qv(s,c.cloudDiscoveryMetadata?.metadata,an.CONFIG,t)||Qv(s,uf.metadata,an.HARDCODED_VALUES,t)||c.knownAuthorities}return i||[]}function Qv(c,t,i,r){if(r?.trace(`getAliasesFromMetadata called with source: ${i}`),c&&t){const s=jc(t,c);if(s)return r?.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${i}, returning aliases`),s.aliases;r?.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${i}`)}return null}function lR(c){return jc(uf.metadata,c)}function jc(c,t){for(let i=0;i<c.length;i++){const r=c[i];if(r.aliases.includes(t))return r}return null}const Gc="cache_quota_exceeded",df="cache_error_unknown";const hh={[Gc]:"Exceeded cache storage capacity.",[df]:"Unexpected error occurred when using cache storage."};class Er extends Ye{constructor(t,i){const r=i||(hh[t]?hh[t]:hh[df]);super(`${t}: ${r}`),Object.setPrototypeOf(this,Er.prototype),this.name="CacheError",this.errorCode=t,this.errorMessage=r}}function Ih(c){return c instanceof Error?c.name==="QuotaExceededError"||c.name==="NS_ERROR_DOM_QUOTA_REACHED"||c.message.includes("exceeded the quota")?new Er(Gc):new Er(c.name,c.message):new Er(df)}class Oh{constructor(t,i,r,s,l){this.clientId=t,this.cryptoImpl=i,this.commonLogger=r.clone(mS,tf),this.staticAuthorityOptions=l,this.performanceClient=s}getAllAccounts(t,i){return this.buildTenantProfiles(this.getAccountsFilteredBy(t,i),i,t)}getAccountInfoFilteredBy(t,i){if(Object.keys(t).length===0||Object.values(t).every(s=>!s))return this.commonLogger.warning("getAccountInfoFilteredBy: Account filter is empty or invalid, returning null"),null;const r=this.getAllAccounts(t,i);return r.length>1?r.sort(l=>l.idTokenClaims?-1:1)[0]:r.length===1?r[0]:null}getBaseAccountInfo(t,i){const r=this.getAccountsFilteredBy(t,i);return r.length>0?at.getAccountInfo(r[0]):null}buildTenantProfiles(t,i,r){return t.flatMap(s=>this.getTenantProfilesFromAccountEntity(s,i,r?.tenantId,r))}getTenantedAccountInfoByFilter(t,i,r,s,l){let h=null,f;if(l&&!this.tenantProfileMatchesFilter(r,l))return null;const g=this.getIdToken(t,s,i,r.tenantId);return g&&(f=Hn(g.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(f,l))?null:(h=cf(t,r,f,g?.secret),h)}getTenantProfilesFromAccountEntity(t,i,r,s){const l=at.getAccountInfo(t);let h=l.tenantProfiles||new Map;const f=this.getTokenKeys();if(r){const p=h.get(r);if(p)h=new Map([[r,p]]);else return[]}const g=[];return h.forEach(p=>{const S=this.getTenantedAccountInfoByFilter(l,f,p,i,s);S&&g.push(S)}),g}tenantProfileMatchesFilter(t,i){return!(i.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(t,i.localAccountId)||i.name&&t.name!==i.name||i.isHomeTenant!==void 0&&t.isHomeTenant!==i.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(t,i){return!(i&&(i.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(t,i.localAccountId)||i.loginHint&&!this.matchLoginHintFromTokenClaims(t,i.loginHint)||i.username&&!this.matchUsername(t.preferred_username,i.username)||i.name&&!this.matchName(t,i.name)||i.sid&&!this.matchSid(t,i.sid)))}async saveCacheRecord(t,i,r,s){if(!t)throw re(uS);try{t.account&&await this.setAccount(t.account,i,r),t.idToken&&s?.idToken!==!1&&await this.setIdTokenCredential(t.idToken,i,r),t.accessToken&&s?.accessToken!==!1&&await this.saveAccessToken(t.accessToken,i,r),t.refreshToken&&s?.refreshToken!==!1&&await this.setRefreshTokenCredential(t.refreshToken,i,r),t.appMetadata&&this.setAppMetadata(t.appMetadata,i)}catch(l){throw this.commonLogger?.error("CacheManager.saveCacheRecord: failed"),l instanceof Ye?l:Ih(l)}}async saveAccessToken(t,i,r){const s={clientId:t.clientId,credentialType:t.credentialType,environment:t.environment,homeAccountId:t.homeAccountId,realm:t.realm,tokenType:t.tokenType,requestedClaimsHash:t.requestedClaimsHash},l=this.getTokenKeys(),h=pt.fromString(t.target);l.accessToken.forEach(f=>{if(!this.accessTokenKeyMatchesFilter(f,s,!1))return;const g=this.getAccessTokenCredential(f,i);g&&this.credentialMatchesFilter(g,s)&&pt.fromString(g.target).intersectingScopeSets(h)&&this.removeAccessToken(f,i)}),await this.setAccessTokenCredential(t,i,r)}getAccountsFilteredBy(t,i){const r=this.getAccountKeys(),s=[];return r.forEach(l=>{const h=this.getAccount(l,i);if(!h||t.homeAccountId&&!this.matchHomeAccountId(h,t.homeAccountId)||t.username&&!this.matchUsername(h.username,t.username)||t.environment&&!this.matchEnvironment(h,t.environment)||t.realm&&!this.matchRealm(h,t.realm)||t.nativeAccountId&&!this.matchNativeAccountId(h,t.nativeAccountId)||t.authorityType&&!this.matchAuthorityType(h,t.authorityType))return;const f={localAccountId:t?.localAccountId,name:t?.name},g=h.tenantProfiles?.filter(p=>this.tenantProfileMatchesFilter(p,f));g&&g.length===0||s.push(h)}),s}credentialMatchesFilter(t,i){return!(i.clientId&&!this.matchClientId(t,i.clientId)||i.userAssertionHash&&!this.matchUserAssertionHash(t,i.userAssertionHash)||typeof i.homeAccountId=="string"&&!this.matchHomeAccountId(t,i.homeAccountId)||i.environment&&!this.matchEnvironment(t,i.environment)||i.realm&&!this.matchRealm(t,i.realm)||i.credentialType&&!this.matchCredentialType(t,i.credentialType)||i.familyId&&!this.matchFamilyId(t,i.familyId)||i.target&&!this.matchTarget(t,i.target)||(i.requestedClaimsHash||t.requestedClaimsHash)&&t.requestedClaimsHash!==i.requestedClaimsHash||t.credentialType===It.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(i.tokenType&&!this.matchTokenType(t,i.tokenType)||i.tokenType===Ke.SSH&&i.keyId&&!this.matchKeyId(t,i.keyId)))}getAppMetadataFilteredBy(t){const i=this.getKeys(),r={};return i.forEach(s=>{if(!this.isAppMetadata(s))return;const l=this.getAppMetadata(s);l&&(t.environment&&!this.matchEnvironment(l,t.environment)||t.clientId&&!this.matchClientId(l,t.clientId)||(r[s]=l))}),r}getAuthorityMetadataByAlias(t){const i=this.getAuthorityMetadataKeys();let r=null;return i.forEach(s=>{if(!this.isAuthorityMetadata(s)||s.indexOf(this.clientId)===-1)return;const l=this.getAuthorityMetadata(s);l&&l.aliases.indexOf(t)!==-1&&(r=l)}),r}removeAllAccounts(t){this.getAllAccounts({},t).forEach(r=>{this.removeAccount(r,t)})}removeAccount(t,i){this.removeAccountContext(t,i);const r=this.getAccountKeys(),s=l=>l.includes(t.homeAccountId)&&l.includes(t.environment);r.filter(s).forEach(l=>{this.removeItem(l,i),this.performanceClient.incrementFields({accountsRemoved:1},i)})}removeAccountContext(t,i){const r=this.getTokenKeys(),s=l=>l.includes(t.homeAccountId)&&l.includes(t.environment);r.idToken.filter(s).forEach(l=>{this.removeIdToken(l,i)}),r.accessToken.filter(s).forEach(l=>{this.removeAccessToken(l,i)}),r.refreshToken.filter(s).forEach(l=>{this.removeRefreshToken(l,i)})}removeAccessToken(t,i){const r=this.getAccessTokenCredential(t,i);if(this.removeItem(t,i),this.performanceClient.incrementFields({accessTokensRemoved:1},i),!r||r.credentialType.toLowerCase()!==It.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()||r.tokenType!==Ke.POP)return;const s=r.keyId;s&&this.cryptoImpl.removeTokenBindingKey(s).catch(()=>{this.commonLogger.error(`Failed to remove token binding key ${s}`,i),this.performanceClient?.incrementFields({removeTokenBindingKeyFailure:1},i)})}removeAppMetadata(t){return this.getKeys().forEach(r=>{this.isAppMetadata(r)&&this.removeItem(r,t)}),!0}getIdToken(t,i,r,s,l){this.commonLogger.trace("CacheManager - getIdToken called");const h={homeAccountId:t.homeAccountId,environment:t.environment,credentialType:It.ID_TOKEN,clientId:this.clientId,realm:s},f=this.getIdTokensByFilter(h,i,r),g=f.size;if(g<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(g>1){let p=f;if(!s){const S=new Map;f.forEach((A,K)=>{A.realm===t.tenantId&&S.set(K,A)});const T=S.size;if(T<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),f.values().next().value;if(T===1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),S.values().next().value;p=S}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),p.forEach((S,T)=>{this.removeIdToken(T,i)}),l&&i&&l.addFields({multiMatchedID:f.size},i),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),f.values().next().value}getIdTokensByFilter(t,i,r){const s=r&&r.idToken||this.getTokenKeys().idToken,l=new Map;return s.forEach(h=>{if(!this.idTokenKeyMatchesFilter(h,{clientId:this.clientId,...t}))return;const f=this.getIdTokenCredential(h,i);f&&this.credentialMatchesFilter(f,t)&&l.set(h,f)}),l}idTokenKeyMatchesFilter(t,i){const r=t.toLowerCase();return!(i.clientId&&r.indexOf(i.clientId.toLowerCase())===-1||i.homeAccountId&&r.indexOf(i.homeAccountId.toLowerCase())===-1)}removeIdToken(t,i){this.removeItem(t,i)}removeRefreshToken(t,i){this.removeItem(t,i)}getAccessToken(t,i,r,s){const l=i.correlationId;this.commonLogger.trace("CacheManager - getAccessToken called",l);const h=pt.createSearchScopes(i.scopes),f=i.authenticationScheme||Ke.BEARER,g=f.toLowerCase()!==Ke.BEARER.toLowerCase()?It.ACCESS_TOKEN_WITH_AUTH_SCHEME:It.ACCESS_TOKEN,p={homeAccountId:t.homeAccountId,environment:t.environment,credentialType:g,clientId:this.clientId,realm:s||t.tenantId,target:h,tokenType:f,keyId:i.sshKid,requestedClaimsHash:i.requestedClaimsHash},S=r&&r.accessToken||this.getTokenKeys().accessToken,T=[];S.forEach(K=>{if(this.accessTokenKeyMatchesFilter(K,p,!0)){const te=this.getAccessTokenCredential(K,l);te&&this.credentialMatchesFilter(te,p)&&T.push(te)}});const A=T.length;return A<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found",l),null):A>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them",l),T.forEach(K=>{this.removeAccessToken(this.generateCredentialKey(K),l)}),this.performanceClient.addFields({multiMatchedAT:T.length},l),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token",l),T[0])}accessTokenKeyMatchesFilter(t,i,r){const s=t.toLowerCase();if(i.clientId&&s.indexOf(i.clientId.toLowerCase())===-1||i.homeAccountId&&s.indexOf(i.homeAccountId.toLowerCase())===-1||i.realm&&s.indexOf(i.realm.toLowerCase())===-1||i.requestedClaimsHash&&s.indexOf(i.requestedClaimsHash.toLowerCase())===-1)return!1;if(i.target){const l=i.target.asArray();for(let h=0;h<l.length;h++){if(r&&!s.includes(l[h].toLowerCase()))return!1;if(!r&&s.includes(l[h].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(t,i){const r=this.getTokenKeys(),s=[];return r.accessToken.forEach(l=>{if(!this.accessTokenKeyMatchesFilter(l,t,!0))return;const h=this.getAccessTokenCredential(l,i);h&&this.credentialMatchesFilter(h,t)&&s.push(h)}),s}getRefreshToken(t,i,r,s,l){this.commonLogger.trace("CacheManager - getRefreshToken called");const h=i?Hc:void 0,f={homeAccountId:t.homeAccountId,environment:t.environment,credentialType:It.REFRESH_TOKEN,clientId:this.clientId,familyId:h},g=s&&s.refreshToken||this.getTokenKeys().refreshToken,p=[];g.forEach(T=>{if(this.refreshTokenKeyMatchesFilter(T,f)){const A=this.getRefreshTokenCredential(T,r);A&&this.credentialMatchesFilter(A,f)&&p.push(A)}});const S=p.length;return S<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(S>1&&l&&r&&l.addFields({multiMatchedRT:S},r),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),p[0])}refreshTokenKeyMatchesFilter(t,i){const r=t.toLowerCase();return!(i.familyId&&r.indexOf(i.familyId.toLowerCase())===-1||!i.familyId&&i.clientId&&r.indexOf(i.clientId.toLowerCase())===-1||i.homeAccountId&&r.indexOf(i.homeAccountId.toLowerCase())===-1)}readAppMetadataFromCache(t){const i={environment:t,clientId:this.clientId},r=this.getAppMetadataFilteredBy(i),s=Object.keys(r).map(h=>r[h]),l=s.length;if(l<1)return null;if(l>1)throw re(oS);return s[0]}isAppMetadataFOCI(t){const i=this.readAppMetadataFromCache(t);return!!(i&&i.familyId===Hc)}matchHomeAccountId(t,i){return typeof t.homeAccountId=="string"&&i===t.homeAccountId}matchLocalAccountIdFromTokenClaims(t,i){const r=t.oid||t.sub;return i===r}matchLocalAccountIdFromTenantProfile(t,i){return t.localAccountId===i}matchName(t,i){return i.toLowerCase()===t.name?.toLowerCase()}matchUsername(t,i){return!!(t&&typeof t=="string"&&i?.toLowerCase()===t.toLowerCase())}matchUserAssertionHash(t,i){return!!(t.userAssertionHash&&i===t.userAssertionHash)}matchEnvironment(t,i){if(this.staticAuthorityOptions){const s=cR(this.staticAuthorityOptions,this.commonLogger);if(s.includes(i)&&s.includes(t.environment))return!0}const r=this.getAuthorityMetadataByAlias(i);return!!(r&&r.aliases.indexOf(t.environment)>-1)}matchCredentialType(t,i){return t.credentialType&&i.toLowerCase()===t.credentialType.toLowerCase()}matchClientId(t,i){return!!(t.clientId&&i===t.clientId)}matchFamilyId(t,i){return!!(t.familyId&&i===t.familyId)}matchRealm(t,i){return t.realm?.toLowerCase()===i.toLowerCase()}matchNativeAccountId(t,i){return!!(t.nativeAccountId&&i===t.nativeAccountId)}matchLoginHintFromTokenClaims(t,i){return t.login_hint===i||t.preferred_username===i||t.upn===i}matchSid(t,i){return t.sid===i}matchAuthorityType(t,i){return!!(t.authorityType&&i.toLowerCase()===t.authorityType.toLowerCase())}matchTarget(t,i){return t.credentialType!==It.ACCESS_TOKEN&&t.credentialType!==It.ACCESS_TOKEN_WITH_AUTH_SCHEME||!t.target?!1:pt.fromString(t.target).containsScopeSet(i)}matchTokenType(t,i){return!!(t.tokenType&&t.tokenType===i)}matchKeyId(t,i){return!!(t.keyId&&t.keyId===i)}isAppMetadata(t){return t.indexOf(Yh)!==-1}isAuthorityMetadata(t){return t.indexOf(Lc.CACHE_KEY)!==-1}generateAuthorityMetadataCacheKey(t){return`${Lc.CACHE_KEY}-${this.clientId}-${t}`}static toObject(t,i){for(const r in i)t[r]=i[r];return t}}class uR extends Oh{async setAccount(){throw re(Re)}getAccount(){throw re(Re)}async setIdTokenCredential(){throw re(Re)}getIdTokenCredential(){throw re(Re)}async setAccessTokenCredential(){throw re(Re)}getAccessTokenCredential(){throw re(Re)}async setRefreshTokenCredential(){throw re(Re)}getRefreshTokenCredential(){throw re(Re)}setAppMetadata(){throw re(Re)}getAppMetadata(){throw re(Re)}setServerTelemetry(){throw re(Re)}getServerTelemetry(){throw re(Re)}setAuthorityMetadata(){throw re(Re)}getAuthorityMetadata(){throw re(Re)}getAuthorityMetadataKeys(){throw re(Re)}setThrottlingCache(){throw re(Re)}getThrottlingCache(){throw re(Re)}removeItem(){throw re(Re)}getKeys(){throw re(Re)}getAccountKeys(){throw re(Re)}getTokenKeys(){throw re(Re)}generateCredentialKey(){throw re(Re)}generateAccountKey(){throw re(Re)}}const w={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",AcquireTokenPreRedirect:"acquireTokenPreRedirect",AcquireTokenRedirect:"acquireTokenRedirect",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",AwaitConcurrentIframe:"awaitConcurrentIframe",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",NetworkClientSendPostRequestAsync:"networkClientSendPostRequestAsync",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",InitializeCache:"initializeCache",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",GetAuthCodeUrl:"getAuthCodeUrl",GetStandardParams:"getStandardParams",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",HandleResponseEar:"handleResponseEar",HandleResponsePlatformBroker:"handleResponsePlatformBroker",HandleResponseCode:"handleResponseCode",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromise",HandleNativeRedirectPromiseMeasurement:"handleNativeRedirectPromise",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",ImportExistingCache:"importExistingCache",SetUserData:"setUserData",LocalStorageUpdated:"localStorageUpdated",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues",GenerateHKDF:"generateHKDF",GenerateBaseKey:"generateBaseKey",Base64Decode:"base64Decode",UrlEncodeArr:"urlEncodeArr",Encrypt:"encrypt",Decrypt:"decrypt",GenerateEarKey:"generateEarKey",DecryptEarResponse:"decryptEarResponse"},dR={InProgress:1};class Yv{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}}class US{generateId(){return"callback-id"}startMeasurement(t,i){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:dR.InProgress,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:t,startTimeMs:Date.now(),correlationId:i||""},measurement:new Yv}}startPerformanceMeasurement(){return new Yv}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}const xS={tokenRenewalOffsetSeconds:$C,preventCorsPreflight:!1},hR={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:Qe.Info,correlationId:W.EMPTY_STRING},fR={claimsBasedCachingEnabled:!1},gR={async sendGetRequestAsync(){throw re(Re)},async sendPostRequestAsync(){throw re(Re)}},mR={sku:W.SKU,version:tf,cpu:W.EMPTY_STRING,os:W.EMPTY_STRING},pR={clientSecret:W.EMPTY_STRING,clientAssertion:void 0},yR={azureCloudInstance:nf.None,tenant:`${W.DEFAULT_COMMON_TENANT}`},vR={application:{appName:"",appVersion:""}};function CR({authOptions:c,systemOptions:t,loggerOptions:i,cacheOptions:r,storageInterface:s,networkInterface:l,cryptoInterface:h,clientCredentials:f,libraryInfo:g,telemetry:p,serverTelemetryManager:S,persistencePlugin:T,serializableCache:A}){const K={...hR,...i};return{authOptions:SR(c),systemOptions:{...xS,...t},loggerOptions:K,cacheOptions:{...fR,...r},storageInterface:s||new uR(c.clientId,Bc,new Qi(K),new US),networkInterface:l||gR,cryptoInterface:h||Bc,clientCredentials:f||pR,libraryInfo:{...mR,...g},telemetry:{...vR,...p},serverTelemetryManager:S||null,persistencePlugin:T||null,serializableCache:A||null}}function SR(c){return{clientCapabilities:[],azureCloudOptions:yR,skipAuthorityMetadataCache:!1,instanceAware:!1,encodeExtraQueryParams:!1,...c}}function PS(c){return c.authOptions.authority.options.protocolMode===Yt.OIDC}const Rn={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"};const Ca="client_id",HS="redirect_uri",TR="response_type",AR="response_mode",ER="grant_type",_R="claims",bR="scope",wR="refresh_token",RR="state",IR="nonce",OR="prompt",kR="code",MR="code_challenge",NR="code_challenge_method",DR="code_verifier",UR="client-request-id",xR="x-client-SKU",PR="x-client-VER",HR="x-client-OS",LR="x-client-CPU",zR="x-client-current-telemetry",BR="x-client-last-telemetry",KR="x-ms-lib-capability",qR="x-app-name",jR="x-app-ver",GR="post_logout_redirect_uri",FR="id_token_hint",QR="client_secret",YR="client_assertion",VR="client_assertion_type",LS="token_type",zS="req_cnf",Vv="return_spa_code",XR="nativebroker",JR="logout_hint",$R="sid",ZR="login_hint",WR="domain_hint",eI="x-client-xtra-sku",Fc="brk_client_id",Qc="brk_redirect_uri",kh="instance_aware",tI="ear_jwk",nI="ear_jwe_crypto";function ll(c,t,i){if(!t)return;const r=c.get(Ca);r&&c.has(Fc)&&i?.addFields({embeddedClientId:r,embeddedRedirectUri:c.get(HS)},t)}function hf(c,t){c.set(TR,t)}function iI(c,t){c.set(AR,t||Lw.QUERY)}function aI(c){c.set(XR,"1")}function ff(c,t,i=!0,r=Dr){i&&!r.includes("openid")&&!t.includes("openid")&&r.push("openid");const s=i?[...t||[],...r]:t||[],l=new pt(s);c.set(bR,l.printScopes())}function gf(c,t){c.set(Ca,t)}function mf(c,t){c.set(HS,t)}function rI(c,t){c.set(GR,t)}function oI(c,t){c.set(FR,t)}function sI(c,t){c.set(WR,t)}function Ec(c,t){c.set(ZR,t)}function Yc(c,t){c.set(Pt.CCS_HEADER,`UPN:${t}`)}function jo(c,t){c.set(Pt.CCS_HEADER,`Oid:${t.uid}@${t.utid}`)}function Xv(c,t){c.set($R,t)}function pf(c,t,i){const r=fI(t,i);try{JSON.parse(r)}catch{throw Xe(af)}c.set(_R,r)}function yf(c,t){c.set(UR,t)}function vf(c,t){c.set(xR,t.sku),c.set(PR,t.version),t.os&&c.set(HR,t.os),t.cpu&&c.set(LR,t.cpu)}function Cf(c,t){t?.appName&&c.set(qR,t.appName),t?.appVersion&&c.set(jR,t.appVersion)}function cI(c,t){c.set(OR,t)}function BS(c,t){t&&c.set(RR,t)}function lI(c,t){c.set(IR,t)}function Sf(c,t,i){if(t&&i)c.set(MR,t),c.set(NR,i);else throw Xe(rf)}function uI(c,t){c.set(kR,t)}function dI(c,t){c.set(wR,t)}function hI(c,t){c.set(DR,t)}function KS(c,t){c.set(QR,t)}function qS(c,t){t&&c.set(YR,t)}function jS(c,t){t&&c.set(VR,t)}function GS(c,t){c.set(ER,t)}function Tf(c){c.set(zw,"1")}function FS(c){c.has(kh)||c.set(kh,"true")}function Gi(c,t){Object.entries(t).forEach(([i,r])=>{!c.has(i)&&r&&c.set(i,r)})}function fI(c,t){let i;if(!c)i={};else try{i=JSON.parse(c)}catch{throw Xe(af)}return t&&t.length>0&&(i.hasOwnProperty(Tc.ACCESS_TOKEN)||(i[Tc.ACCESS_TOKEN]={}),i[Tc.ACCESS_TOKEN][Tc.XMS_CC]={values:t}),JSON.stringify(i)}function Af(c,t){t&&(c.set(LS,Ke.POP),c.set(zS,t))}function QS(c,t){t&&(c.set(LS,Ke.SSH),c.set(zS,t))}function YS(c,t){c.set(zR,t.generateCurrentRequestHeaderValue()),c.set(BR,t.generateLastRequestHeaderValue())}function VS(c){c.set(KR,qo.X_MS_LIB_CAPABILITY_VALUE)}function gI(c,t){c.set(JR,t)}function ul(c,t,i){c.has(Fc)||c.set(Fc,t),c.has(Qc)||c.set(Qc,i)}function mI(c,t){c.set(tI,encodeURIComponent(t)),c.set(nI,"eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0")}function pI(c,t){Object.entries(t).forEach(([i,r])=>{r&&c.set(i,r)})}function yI(c){return c.hasOwnProperty("authorization_endpoint")&&c.hasOwnProperty("token_endpoint")&&c.hasOwnProperty("issuer")&&c.hasOwnProperty("jwks_uri")}function vI(c){return c.hasOwnProperty("tenant_discovery_endpoint")&&c.hasOwnProperty("metadata")}function CI(c){return c.hasOwnProperty("error")&&c.hasOwnProperty("error_description")}const on=(c,t,i,r,s)=>(...l)=>{i.trace(`Executing function ${t}`);const h=r?.startMeasurement(t,s);if(s){const f=t+"CallCount";r?.incrementFields({[f]:1},s)}try{const f=c(...l);return h?.end({success:!0}),i.trace(`Returning result from ${t}`),f}catch(f){i.trace(`Error occurred in ${t}`);try{i.trace(JSON.stringify(f))}catch{i.trace("Unable to print error message.")}throw h?.end({success:!1},f),f}},Q=(c,t,i,r,s)=>(...l)=>{i.trace(`Executing function ${t}`);const h=r?.startMeasurement(t,s);if(s){const f=t+"CallCount";r?.incrementFields({[f]:1},s)}return r?.setPreQueueTime(t,s),c(...l).then(f=>(i.trace(`Returning result from ${t}`),h?.end({success:!0}),f)).catch(f=>{i.trace(`Error occurred in ${t}`);try{i.trace(JSON.stringify(f))}catch{i.trace("Unable to print error message.")}throw h?.end({success:!1},f),f})};class dl{constructor(t,i,r,s){this.networkInterface=t,this.logger=i,this.performanceClient=r,this.correlationId=s}async detectRegion(t,i){this.performanceClient?.addQueueMeasurement(w.RegionDiscoveryDetectRegion,this.correlationId);let r=t;if(r)i.region_source=vr.ENVIRONMENT_VARIABLE;else{const s=dl.IMDS_OPTIONS;try{const l=await Q(this.getRegionFromIMDS.bind(this),w.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(W.IMDS_VERSION,s);if(l.status===Ki.SUCCESS&&(r=l.body,i.region_source=vr.IMDS),l.status===Ki.BAD_REQUEST){const h=await Q(this.getCurrentVersion.bind(this),w.RegionDiscoveryGetCurrentVersion,this.logger,this.performanceClient,this.correlationId)(s);if(!h)return i.region_source=vr.FAILED_AUTO_DETECTION,null;const f=await Q(this.getRegionFromIMDS.bind(this),w.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(h,s);f.status===Ki.SUCCESS&&(r=f.body,i.region_source=vr.IMDS)}}catch{return i.region_source=vr.FAILED_AUTO_DETECTION,null}}return r||(i.region_source=vr.FAILED_AUTO_DETECTION),r||null}async getRegionFromIMDS(t,i){return this.performanceClient?.addQueueMeasurement(w.RegionDiscoveryGetRegionFromIMDS,this.correlationId),this.networkInterface.sendGetRequestAsync(`${W.IMDS_ENDPOINT}?api-version=${t}&format=text`,i,W.IMDS_TIMEOUT)}async getCurrentVersion(t){this.performanceClient?.addQueueMeasurement(w.RegionDiscoveryGetCurrentVersion,this.correlationId);try{const i=await this.networkInterface.sendGetRequestAsync(`${W.IMDS_ENDPOINT}?format=json`,t);return i.status===Ki.BAD_REQUEST&&i.body&&i.body["newest-versions"]&&i.body["newest-versions"].length>0?i.body["newest-versions"][0]:null}catch{return null}}}dl.IMDS_OPTIONS={headers:{Metadata:"true"}};function Vt(){return Math.round(new Date().getTime()/1e3)}function Jv(c){return c.getTime()/1e3}function _r(c){return c?new Date(Number(c)*1e3):new Date}function Vc(c,t){const i=Number(c)||0;return Vt()+t>i}function $v(c,t){const i=Number(c)+t*24*60*60*1e3;return Date.now()>i}function SI(c){return Number(c)>Vt()}function hl(c,t,i,r,s){return{credentialType:It.ID_TOKEN,homeAccountId:c,environment:t,clientId:r,secret:i,realm:s,lastUpdatedAt:Date.now().toString()}}function fl(c,t,i,r,s,l,h,f,g,p,S,T,A,K,te){const ie={homeAccountId:c,credentialType:It.ACCESS_TOKEN,secret:i,cachedAt:Vt().toString(),expiresOn:h.toString(),extendedExpiresOn:f.toString(),environment:t,clientId:r,realm:s,target:l,tokenType:S||Ke.BEARER,lastUpdatedAt:Date.now().toString()};if(T&&(ie.userAssertionHash=T),p&&(ie.refreshOn=p.toString()),K&&(ie.requestedClaims=K,ie.requestedClaimsHash=te),ie.tokenType?.toLowerCase()!==Ke.BEARER.toLowerCase())switch(ie.credentialType=It.ACCESS_TOKEN_WITH_AUTH_SCHEME,ie.tokenType){case Ke.POP:const le=Hn(i,g);if(!le?.cnf?.kid)throw re(dS);ie.keyId=le.cnf.kid;break;case Ke.SSH:ie.keyId=A}return ie}function XS(c,t,i,r,s,l,h){const f={credentialType:It.REFRESH_TOKEN,homeAccountId:c,environment:t,clientId:r,secret:i,lastUpdatedAt:Date.now().toString()};return l&&(f.userAssertionHash=l),s&&(f.familyId=s),h&&(f.expiresOn=h.toString()),f}function gl(c){return c.hasOwnProperty("homeAccountId")&&c.hasOwnProperty("environment")&&c.hasOwnProperty("credentialType")&&c.hasOwnProperty("clientId")&&c.hasOwnProperty("secret")}function Zv(c){return c?gl(c)&&c.hasOwnProperty("realm")&&c.hasOwnProperty("target")&&(c.credentialType===It.ACCESS_TOKEN||c.credentialType===It.ACCESS_TOKEN_WITH_AUTH_SCHEME):!1}function TI(c){return c?gl(c)&&c.hasOwnProperty("realm")&&c.credentialType===It.ID_TOKEN:!1}function Wv(c){return c?gl(c)&&c.credentialType===It.REFRESH_TOKEN:!1}function AI(c,t){const i=c.indexOf(Rt.CACHE_KEY)===0;let r=!0;return t&&(r=t.hasOwnProperty("failedRequests")&&t.hasOwnProperty("errors")&&t.hasOwnProperty("cacheHits")),i&&r}function EI(c,t){let i=!1;c&&(i=c.indexOf(qo.THROTTLING_PREFIX)===0);let r=!0;return t&&(r=t.hasOwnProperty("throttleTime")),i&&r}function _I({environment:c,clientId:t}){return[Yh,c,t].join(Yo.CACHE_KEY_SEPARATOR).toLowerCase()}function bI(c,t){return t?c.indexOf(Yh)===0&&t.hasOwnProperty("clientId")&&t.hasOwnProperty("environment"):!1}function wI(c,t){return t?c.indexOf(Lc.CACHE_KEY)===0&&t.hasOwnProperty("aliases")&&t.hasOwnProperty("preferred_cache")&&t.hasOwnProperty("preferred_network")&&t.hasOwnProperty("canonical_authority")&&t.hasOwnProperty("authorization_endpoint")&&t.hasOwnProperty("token_endpoint")&&t.hasOwnProperty("issuer")&&t.hasOwnProperty("aliasesFromNetwork")&&t.hasOwnProperty("endpointsFromNetwork")&&t.hasOwnProperty("expiresAt")&&t.hasOwnProperty("jwks_uri"):!1}function eC(){return Vt()+Lc.REFRESH_TIME_SECONDS}function _c(c,t,i){c.authorization_endpoint=t.authorization_endpoint,c.token_endpoint=t.token_endpoint,c.end_session_endpoint=t.end_session_endpoint,c.issuer=t.issuer,c.endpointsFromNetwork=i,c.jwks_uri=t.jwks_uri}function fh(c,t,i){c.aliases=t.aliases,c.preferred_cache=t.preferred_cache,c.preferred_network=t.preferred_network,c.aliasesFromNetwork=i}function tC(c){return c.expiresAt<=Vt()}class Dt{constructor(t,i,r,s,l,h,f,g){this.canonicalAuthority=t,this._canonicalAuthority.validateAsUri(),this.networkInterface=i,this.cacheManager=r,this.authorityOptions=s,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=l,this.performanceClient=f,this.correlationId=h,this.managedIdentity=g||!1,this.regionDiscovery=new dl(i,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(t){if(t.HostNameAndPort.endsWith(W.CIAM_AUTH_URL))return bn.Ciam;const i=t.PathSegments;if(i.length)switch(i[0].toLowerCase()){case W.ADFS:return bn.Adfs;case W.DSTS:return bn.Dsts}return bn.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(t){this._canonicalAuthority=new Pe(t),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw re(ri)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw re(ri)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw re(ri)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw re(gS);return this.replacePath(this.metadata.end_session_endpoint)}else throw re(ri)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw re(ri)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw re(ri)}canReplaceTenant(t){return t.PathSegments.length===1&&!Dt.reservedTenantDomains.has(t.PathSegments[0])&&this.getAuthorityType(t)===bn.Default&&this.protocolMode!==Yt.OIDC}replaceTenant(t){return t.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(t){let i=t;const s=new Pe(this.metadata.canonical_authority).getUrlComponents(),l=s.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((f,g)=>{let p=l[g];if(g===0&&this.canReplaceTenant(s)){const S=new Pe(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];p!==S&&(this.logger.verbose(`Replacing tenant domain name ${p} with id ${S}`),p=S)}f!==p&&(i=i.replace(`/${p}/`,`/${f}/`))}),this.replaceTenant(i)}get defaultOpenIdConfigurationEndpoint(){const t=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===bn.Adfs||this.protocolMode===Yt.OIDC&&!this.isAliasOfKnownMicrosoftAuthority(t)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){this.performanceClient?.addQueueMeasurement(w.AuthorityResolveEndpointsAsync,this.correlationId);const t=this.getCurrentMetadataEntity(),i=await Q(this.updateCloudDiscoveryMetadata.bind(this),w.AuthorityUpdateCloudDiscoveryMetadata,this.logger,this.performanceClient,this.correlationId)(t);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,t.preferred_network);const r=await Q(this.updateEndpointMetadata.bind(this),w.AuthorityUpdateEndpointMetadata,this.logger,this.performanceClient,this.correlationId)(t);this.updateCachedMetadata(t,i,{source:r}),this.performanceClient?.addFields({cloudDiscoverySource:i,authorityEndpointSource:r},this.correlationId)}getCurrentMetadataEntity(){let t=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return t||(t={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:eC(),jwks_uri:""}),t}updateCachedMetadata(t,i,r){i!==an.CACHE&&r?.source!==an.CACHE&&(t.expiresAt=eC(),t.canonical_authority=this.canonicalAuthority);const s=this.cacheManager.generateAuthorityMetadataCacheKey(t.preferred_cache);this.cacheManager.setAuthorityMetadata(s,t),this.metadata=t}async updateEndpointMetadata(t){this.performanceClient?.addQueueMeasurement(w.AuthorityUpdateEndpointMetadata,this.correlationId);const i=this.updateEndpointMetadataFromLocalSources(t);if(i){if(i.source===an.HARDCODED_VALUES&&this.authorityOptions.azureRegionConfiguration?.azureRegion&&i.metadata){const s=await Q(this.updateMetadataWithRegionalInformation.bind(this),w.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(i.metadata);_c(t,s,!1),t.canonical_authority=this.canonicalAuthority}return i.source}let r=await Q(this.getEndpointMetadataFromNetwork.bind(this),w.AuthorityGetEndpointMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(r)return this.authorityOptions.azureRegionConfiguration?.azureRegion&&(r=await Q(this.updateMetadataWithRegionalInformation.bind(this),w.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(r)),_c(t,r,!0),an.NETWORK;throw re(tS,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(t){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");const i=this.getEndpointMetadataFromConfig();if(i)return this.logger.verbose("Found endpoint metadata in authority configuration"),_c(t,i,!1),{source:an.CONFIG};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{const s=this.getEndpointMetadataFromHardcodedValues();if(s)return _c(t,s,!1),{source:an.HARDCODED_VALUES,metadata:s};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}const r=tC(t);return this.isAuthoritySameType(t)&&t.endpointsFromNetwork&&!r?(this.logger.verbose("Found endpoint metadata in the cache."),{source:an.CACHE}):(r&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(t){return new Pe(t.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw Xe(AS)}return null}async getEndpointMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(w.AuthorityGetEndpointMetadataFromNetwork,this.correlationId);const t={},i=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${i}`);try{const r=await this.networkInterface.sendGetRequestAsync(i,t);return yI(r.body)?r.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(r){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${r}`),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in Fv?Fv[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(t){this.performanceClient?.addQueueMeasurement(w.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId);const i=this.authorityOptions.azureRegionConfiguration?.azureRegion;if(i){if(i!==W.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=dh.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=i,Dt.replaceWithRegionalInformation(t,i);const r=await Q(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),w.RegionDiscoveryDetectRegion,this.logger,this.performanceClient,this.correlationId)(this.authorityOptions.azureRegionConfiguration?.environmentRegion,this.regionDiscoveryMetadata);if(r)return this.regionDiscoveryMetadata.region_outcome=dh.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=r,Dt.replaceWithRegionalInformation(t,r);this.regionDiscoveryMetadata.region_outcome=dh.AUTO_DETECTION_REQUESTED_FAILED}return t}async updateCloudDiscoveryMetadata(t){this.performanceClient?.addQueueMeasurement(w.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId);const i=this.updateCloudDiscoveryMetadataFromLocalSources(t);if(i)return i;const r=await Q(this.getCloudDiscoveryMetadataFromNetwork.bind(this),w.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(r)return fh(t,r,!0),an.NETWORK;throw Xe(ES)}updateCloudDiscoveryMetadataFromLocalSources(t){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||W.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||W.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${t.canonical_authority||W.NOT_APPLICABLE}`);const i=this.getCloudDiscoveryMetadataFromConfig();if(i)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),fh(t,i,!1),an.CONFIG;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{const s=lR(this.hostnameAndPort);if(s)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),fh(t,s,!1),an.HARDCODED_VALUES;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}const r=tC(t);return this.isAuthoritySameType(t)&&t.aliasesFromNetwork&&!r?(this.logger.verbose("Found cloud discovery metadata in the cache."),an.CACHE):(r&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===bn.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),Dt.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");const t=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),i=jc(t.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),i)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),i;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),Xe(of)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),Dt.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(w.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId);const t=`${W.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,i={};let r=null;try{const s=await this.networkInterface.sendGetRequestAsync(t,i);let l,h;if(vI(s.body))l=s.body,h=l.metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${l.tenant_discovery_endpoint}`);else if(CI(s.body)){if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${s.status}`),l=s.body,l.error===W.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${l.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${l.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),h=[]}else return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),r=jc(h,this.hostnameAndPort)}catch(s){if(s instanceof Ye)this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: ${s.errorCode}
Error Description: ${s.errorMessage}`);else{const l=s;this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: ${l.name}
Error Description: ${l.message}`)}return null}return r||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),r=Dt.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),r}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(i=>i&&Pe.getDomainFromUrl(i).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(t,i){let r;if(i&&i.azureCloudInstance!==nf.None){const s=i.tenant?i.tenant:W.DEFAULT_COMMON_TENANT;r=`${i.azureCloudInstance}/${s}/`}return r||t}static createCloudDiscoveryMetadataFromHost(t){return{preferred_network:t,preferred_cache:t,aliases:[t]}}getPreferredCache(){if(this.managedIdentity)return W.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw re(ri)}isAlias(t){return this.metadata.aliases.indexOf(t)>-1}isAliasOfKnownMicrosoftAuthority(t){return DS.has(t)}static isPublicCloudAuthority(t){return W.KNOWN_PUBLIC_CLOUDS.indexOf(t)>=0}static buildRegionalAuthorityString(t,i,r){const s=new Pe(t);s.validateAsUri();const l=s.getUrlComponents();let h=`${i}.${l.HostNameAndPort}`;this.isPublicCloudAuthority(l.HostNameAndPort)&&(h=`${i}.${W.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);const f=Pe.constructAuthorityUriFromObject({...s.getUrlComponents(),HostNameAndPort:h}).urlString;return r?`${f}?${r}`:f}static replaceWithRegionalInformation(t,i){const r={...t};return r.authorization_endpoint=Dt.buildRegionalAuthorityString(r.authorization_endpoint,i),r.token_endpoint=Dt.buildRegionalAuthorityString(r.token_endpoint,i),r.end_session_endpoint&&(r.end_session_endpoint=Dt.buildRegionalAuthorityString(r.end_session_endpoint,i)),r}static transformCIAMAuthority(t){let i=t;const s=new Pe(t).getUrlComponents();if(s.PathSegments.length===0&&s.HostNameAndPort.endsWith(W.CIAM_AUTH_URL)){const l=s.HostNameAndPort.split(".")[0];i=`${i}${l}${W.AAD_TENANT_DOMAIN_SUFFIX}`}return i}}Dt.reservedTenantDomains=new Set(["{tenant}","{tenantid}",qi.COMMON,qi.CONSUMERS,qi.ORGANIZATIONS]);function RI(c){const r=new Pe(c).getUrlComponents().PathSegments.slice(-1)[0]?.toLowerCase();switch(r){case qi.COMMON:case qi.ORGANIZATIONS:case qi.CONSUMERS:return;default:return r}}function JS(c){return c.endsWith(W.FORWARD_SLASH)?c:`${c}${W.FORWARD_SLASH}`}function II(c){const t=c.cloudDiscoveryMetadata;let i;if(t)try{i=JSON.parse(t)}catch{throw Xe(of)}return{canonicalAuthority:c.authority?JS(c.authority):void 0,knownAuthorities:c.knownAuthorities,cloudDiscoveryMetadata:i}}async function $S(c,t,i,r,s,l,h){h?.addQueueMeasurement(w.AuthorityFactoryCreateDiscoveredInstance,l);const f=Dt.transformCIAMAuthority(JS(c)),g=new Dt(f,t,i,r,s,l,h);try{return await Q(g.resolveEndpointsAsync.bind(g),w.AuthorityResolveEndpointsAsync,s,h,l)(),g}catch{throw re(ri)}}class ba extends Ye{constructor(t,i,r,s,l){super(t,i,r),this.name="ServerError",this.errorNo=s,this.status=l,Object.setPrototypeOf(this,ba.prototype)}}function ml(c,t,i){return{clientId:c,authority:t.authority,scopes:t.scopes,homeAccountIdentifier:i,claims:t.claims,authenticationScheme:t.authenticationScheme,resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,sshKid:t.sshKid,embeddedClientId:t.embeddedClientId||t.tokenBodyParameters?.clientId}}class Un{static generateThrottlingStorageKey(t){return`${qo.THROTTLING_PREFIX}.${JSON.stringify(t)}`}static preProcess(t,i,r){const s=Un.generateThrottlingStorageKey(i),l=t.getThrottlingCache(s);if(l){if(l.throttleTime<Date.now()){t.removeItem(s,r);return}throw new ba(l.errorCodes?.join(" ")||W.EMPTY_STRING,l.errorMessage,l.subError)}}static postProcess(t,i,r,s){if(Un.checkResponseStatus(r)||Un.checkResponseForRetryAfter(r)){const l={throttleTime:Un.calculateThrottleTime(parseInt(r.headers[Pt.RETRY_AFTER])),error:r.body.error,errorCodes:r.body.error_codes,errorMessage:r.body.error_description,subError:r.body.suberror};t.setThrottlingCache(Un.generateThrottlingStorageKey(i),l,s)}}static checkResponseStatus(t){return t.status===429||t.status>=500&&t.status<600}static checkResponseForRetryAfter(t){return t.headers?t.headers.hasOwnProperty(Pt.RETRY_AFTER)&&(t.status<200||t.status>=300):!1}static calculateThrottleTime(t){const i=t<=0?0:t,r=Date.now()/1e3;return Math.floor(Math.min(r+(i||qo.DEFAULT_THROTTLE_TIME_SECONDS),r+qo.DEFAULT_MAX_THROTTLE_TIME_SECONDS)*1e3)}static removeThrottle(t,i,r,s){const l=ml(i,r,s),h=this.generateThrottlingStorageKey(l);t.removeItem(h,r.correlationId)}}class pl extends Ye{constructor(t,i,r){super(t.errorCode,t.errorMessage,t.subError),Object.setPrototypeOf(this,pl.prototype),this.name="NetworkError",this.error=t,this.httpStatus=i,this.responseHeaders=r}}function Bo(c,t,i,r){return c.errorMessage=`${c.errorMessage}, additionalErrorInfo: error.name:${r?.name}, error.message:${r?.message}`,new pl(c,t,i)}class Ef{constructor(t,i){this.config=CR(t),this.logger=new Qi(this.config.loggerOptions,mS,tf),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=i}createTokenRequestHeaders(t){const i={};if(i[Pt.CONTENT_TYPE]=W.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&t)switch(t.type){case Rn.HOME_ACCOUNT_ID:try{const r=Ar(t.credential);i[Pt.CCS_HEADER]=`Oid:${r.uid}@${r.utid}`}catch(r){this.logger.verbose("Could not parse home account ID for CCS Header: "+r)}break;case Rn.UPN:i[Pt.CCS_HEADER]=`UPN: ${t.credential}`;break}return i}async executePostToTokenEndpoint(t,i,r,s,l,h){h&&this.performanceClient?.addQueueMeasurement(h,l);const f=await this.sendPostRequest(s,t,{body:i,headers:r},l);return this.config.serverTelemetryManager&&f.status<500&&f.status!==429&&this.config.serverTelemetryManager.clearTelemetryCache(),f}async sendPostRequest(t,i,r,s){Un.preProcess(this.cacheManager,t,s);let l;try{l=await Q(this.networkClient.sendPostRequestAsync.bind(this.networkClient),w.NetworkClientSendPostRequestAsync,this.logger,this.performanceClient,s)(i,r);const h=l.headers||{};this.performanceClient?.addFields({refreshTokenSize:l.body.refresh_token?.length||0,httpVerToken:h[Pt.X_MS_HTTP_VERSION]||"",requestId:h[Pt.X_MS_REQUEST_ID]||""},s)}catch(h){if(h instanceof pl){const f=h.responseHeaders;throw f&&this.performanceClient?.addFields({httpVerToken:f[Pt.X_MS_HTTP_VERSION]||"",requestId:f[Pt.X_MS_REQUEST_ID]||"",contentTypeHeader:f[Pt.CONTENT_TYPE]||void 0,contentLengthHeader:f[Pt.CONTENT_LENGTH]||void 0,httpStatus:h.httpStatus},s),h.error}throw h instanceof Ye?h:re(eS)}return Un.postProcess(this.cacheManager,t,l,s),l}async updateAuthority(t,i){this.performanceClient?.addQueueMeasurement(w.UpdateTokenEndpointAuthority,i);const r=`https://${t}/${this.authority.tenant}/`,s=await $S(r,this.networkClient,this.cacheManager,this.authority.options,this.logger,i,this.performanceClient);this.authority=s}createTokenQueryParameters(t){const i=new Map;return t.embeddedClientId&&ul(i,this.config.authOptions.clientId,this.config.authOptions.redirectUri),t.tokenQueryParameters&&Gi(i,t.tokenQueryParameters),yf(i,t.correlationId),ll(i,t.correlationId,this.performanceClient),Vo(i)}}const Xc="no_tokens_found",ZS="native_account_unavailable",_f="refresh_token_expired",bf="ux_not_allowed",OI="interaction_required",kI="consent_required",MI="login_required",yl="bad_token";const nC=[OI,kI,MI,yl,bf],NI=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],DI={[Xc]:"No refresh token found in the cache. Please sign-in.",[ZS]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[_f]:"Refresh token has expired.",[yl]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve.",[bf]:"`canShowUI` flag in Edge was set to false. User interaction required on web page. Please invoke an interactive API to resolve."};class In extends Ye{constructor(t,i,r,s,l,h,f,g){super(t,i,r),Object.setPrototypeOf(this,In.prototype),this.timestamp=s||W.EMPTY_STRING,this.traceId=l||W.EMPTY_STRING,this.correlationId=h||W.EMPTY_STRING,this.claims=f||W.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=g}}function WS(c,t,i){const r=!!c&&nC.indexOf(c)>-1,s=!!i&&NI.indexOf(i)>-1,l=!!t&&nC.some(h=>t.indexOf(h)>-1);return r||l||s}function Jc(c){return new In(c,DI[c])}class Ur{static setRequestState(t,i,r){const s=Ur.generateLibraryState(t,r);return i?`${s}${W.RESOURCE_DELIM}${i}`:s}static generateLibraryState(t,i){if(!t)throw re(Rh);const r={id:t.createNewGuid()};i&&(r.meta=i);const s=JSON.stringify(r);return t.base64Encode(s)}static parseRequestState(t,i){if(!t)throw re(Rh);if(!i)throw re(Or);try{const r=i.split(W.RESOURCE_DELIM),s=r[0],l=r.length>1?r.slice(1).join(W.RESOURCE_DELIM):W.EMPTY_STRING,h=t.base64Decode(s),f=JSON.parse(h);return{userRequestState:l||W.EMPTY_STRING,libraryState:f}}catch{throw re(Or)}}}const UI={SW:"sw"};class kr{constructor(t,i){this.cryptoUtils=t,this.performanceClient=i}async generateCnf(t,i){this.performanceClient?.addQueueMeasurement(w.PopTokenGenerateCnf,t.correlationId);const r=await Q(this.generateKid.bind(this),w.PopTokenGenerateCnf,i,this.performanceClient,t.correlationId)(t),s=this.cryptoUtils.base64UrlEncode(JSON.stringify(r));return{kid:r.kid,reqCnfString:s}}async generateKid(t){return this.performanceClient?.addQueueMeasurement(w.PopTokenGenerateKid,t.correlationId),{kid:await this.cryptoUtils.getPublicKeyThumbprint(t),xms_ksl:UI.SW}}async signPopToken(t,i,r){return this.signPayload(t,i,r)}async signPayload(t,i,r,s){const{resourceRequestMethod:l,resourceRequestUri:h,shrClaims:f,shrNonce:g,shrOptions:p}=r,T=(h?new Pe(h):void 0)?.getUrlComponents();return this.cryptoUtils.signJwt({at:t,ts:Vt(),m:l?.toUpperCase(),u:T?.HostNameAndPort,nonce:g||this.cryptoUtils.createNewGuid(),p:T?.AbsolutePath,q:T?.QueryString?[[],T.QueryString]:void 0,client_claims:f||void 0,...s},i,p,r.correlationId)}}class xI{constructor(t,i){this.cache=t,this.hasChanged=i}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}class Sa{constructor(t,i,r,s,l,h,f){this.clientId=t,this.cacheStorage=i,this.cryptoObj=r,this.logger=s,this.serializableCache=l,this.persistencePlugin=h,this.performanceClient=f}validateTokenResponse(t,i){if(t.error||t.error_description||t.suberror){const r=`Error(s): ${t.error_codes||W.NOT_AVAILABLE} - Timestamp: ${t.timestamp||W.NOT_AVAILABLE} - Description: ${t.error_description||W.NOT_AVAILABLE} - Correlation ID: ${t.correlation_id||W.NOT_AVAILABLE} - Trace ID: ${t.trace_id||W.NOT_AVAILABLE}`,s=t.error_codes?.length?t.error_codes[0]:void 0,l=new ba(t.error,r,t.suberror,s,t.status);if(i&&t.status&&t.status>=Ki.SERVER_ERROR_RANGE_START&&t.status<=Ki.SERVER_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.
${l}`);return}else if(i&&t.status&&t.status>=Ki.CLIENT_ERROR_RANGE_START&&t.status<=Ki.CLIENT_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.
${l}`);return}throw WS(t.error,t.error_description,t.suberror)?new In(t.error,t.error_description,t.suberror,t.timestamp||W.EMPTY_STRING,t.trace_id||W.EMPTY_STRING,t.correlation_id||W.EMPTY_STRING,t.claims||W.EMPTY_STRING,s):l}}async handleServerTokenResponse(t,i,r,s,l,h,f,g,p){this.performanceClient?.addQueueMeasurement(w.HandleServerTokenResponse,t.correlation_id);let S;if(t.id_token){if(S=Hn(t.id_token||W.EMPTY_STRING,this.cryptoObj.base64Decode),l&&l.nonce&&S.nonce!==l.nonce)throw re(aS);if(s.maxAge||s.maxAge===0){const te=S.auth_time;if(!te)throw re(Jh);kS(te,s.maxAge)}}this.homeAccountIdentifier=at.generateHomeAccountId(t.client_info||W.EMPTY_STRING,i.authorityType,this.logger,this.cryptoObj,S);let T;l&&l.state&&(T=Ur.parseRequestState(this.cryptoObj,l.state)),t.key_id=t.key_id||s.sshKid||void 0;const A=this.generateCacheRecord(t,i,r,s,S,h,l);let K;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),K=new xI(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(K)),f&&!g&&A.account){const te=this.cacheStorage.generateAccountKey(at.getAccountInfo(A.account));if(!this.cacheStorage.getAccount(te,s.correlationId))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),await Sa.generateAuthenticationResult(this.cryptoObj,i,A,!1,s,S,T,void 0,p)}await this.cacheStorage.saveCacheRecord(A,s.correlationId,Ln(S||{}),s.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&K&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(K))}return Sa.generateAuthenticationResult(this.cryptoObj,i,A,!1,s,S,T,t,p)}generateCacheRecord(t,i,r,s,l,h,f){const g=i.getPreferredCache();if(!g)throw re(Zh);const p=lf(l);let S,T;t.id_token&&l&&(S=hl(this.homeAccountIdentifier,g,t.id_token,this.clientId,p||""),T=wf(this.cacheStorage,i,this.homeAccountIdentifier,this.cryptoObj.base64Decode,s.correlationId,l,t.client_info,g,p,f,void 0,this.logger));let A=null;if(t.access_token){const ie=t.scope?pt.fromString(t.scope):new pt(s.scopes||[]),le=(typeof t.expires_in=="string"?parseInt(t.expires_in,10):t.expires_in)||0,se=(typeof t.ext_expires_in=="string"?parseInt(t.ext_expires_in,10):t.ext_expires_in)||0,ce=(typeof t.refresh_in=="string"?parseInt(t.refresh_in,10):t.refresh_in)||void 0,ue=r+le,G=ue+se,oe=ce&&ce>0?r+ce:void 0;A=fl(this.homeAccountIdentifier,g,t.access_token,this.clientId,p||i.tenant||"",ie.printScopes(),ue,G,this.cryptoObj.base64Decode,oe,t.token_type,h,t.key_id,s.claims,s.requestedClaimsHash)}let K=null;if(t.refresh_token){let ie;if(t.refresh_token_expires_in){const le=typeof t.refresh_token_expires_in=="string"?parseInt(t.refresh_token_expires_in,10):t.refresh_token_expires_in;ie=r+le}K=XS(this.homeAccountIdentifier,g,t.refresh_token,this.clientId,t.foci,h,ie)}let te=null;return t.foci&&(te={clientId:this.clientId,environment:g,familyId:t.foci}),{account:T,idToken:S,accessToken:A,refreshToken:K,appMetadata:te}}static async generateAuthenticationResult(t,i,r,s,l,h,f,g,p){let S=W.EMPTY_STRING,T=[],A=null,K,te,ie=W.EMPTY_STRING;if(r.accessToken){if(r.accessToken.tokenType===Ke.POP&&!l.popKid){const ue=new kr(t),{secret:G,keyId:oe}=r.accessToken;if(!oe)throw re(Wh);S=await ue.signPopToken(G,oe,l)}else S=r.accessToken.secret;T=pt.fromString(r.accessToken.target).asArray(),A=_r(r.accessToken.expiresOn),K=_r(r.accessToken.extendedExpiresOn),r.accessToken.refreshOn&&(te=_r(r.accessToken.refreshOn))}r.appMetadata&&(ie=r.appMetadata.familyId===Hc?Hc:"");const le=h?.oid||h?.sub||"",se=h?.tid||"";g?.spa_accountid&&r.account&&(r.account.nativeAccountId=g?.spa_accountid);const ce=r.account?cf(at.getAccountInfo(r.account),void 0,h,r.idToken?.secret):null;return{authority:i.canonicalAuthority,uniqueId:le,tenantId:se,scopes:T,account:ce,idToken:r?.idToken?.secret||"",idTokenClaims:h||{},accessToken:S,fromCache:s,expiresOn:A,extExpiresOn:K,refreshOn:te,correlationId:l.correlationId,requestId:p||W.EMPTY_STRING,familyId:ie,tokenType:r.accessToken?.tokenType||W.EMPTY_STRING,state:f?f.userRequestState:W.EMPTY_STRING,cloudGraphHostName:r.account?.cloudGraphHostName||W.EMPTY_STRING,msGraphHost:r.account?.msGraphHost||W.EMPTY_STRING,code:g?.spa_code,fromNativeBroker:!1}}}function wf(c,t,i,r,s,l,h,f,g,p,S,T){T?.verbose("setCachedAccount called");const K=c.getAccountKeys().find(ce=>ce.startsWith(i));let te=null;K&&(te=c.getAccount(K,s));const ie=te||at.createAccount({homeAccountId:i,idTokenClaims:l,clientInfo:h,environment:f,cloudGraphHostName:p?.cloud_graph_host_name,msGraphHost:p?.msgraph_host,nativeAccountId:S},t,r),le=ie.tenantProfiles||[],se=g||ie.realm;if(se&&!le.find(ce=>ce.tenantId===se)){const ce=cl(i,ie.localAccountId,se,l);le.push(ce)}return ie.tenantProfiles=le,ie}async function eT(c,t,i){return typeof c=="string"?c:c({clientId:t,tokenEndpoint:i})}class tT extends Ef{constructor(t,i){super(t,i),this.includeRedirectUri=!0,this.oidcDefaultScopes=this.config.authOptions.authority.options.OIDCOptions?.defaultScopes}async acquireToken(t,i){if(this.performanceClient?.addQueueMeasurement(w.AuthClientAcquireToken,t.correlationId),!t.code)throw re(sS);const r=Vt(),s=await Q(this.executeTokenRequest.bind(this),w.AuthClientExecuteTokenRequest,this.logger,this.performanceClient,t.correlationId)(this.authority,t),l=s.headers?.[Pt.X_MS_REQUEST_ID],h=new Sa(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return h.validateTokenResponse(s.body),Q(h.handleServerTokenResponse.bind(h),w.HandleServerTokenResponse,this.logger,this.performanceClient,t.correlationId)(s.body,this.authority,r,t,i,void 0,void 0,void 0,l)}getLogoutUri(t){if(!t)throw Xe(TS);const i=this.createLogoutUrlQueryString(t);return Pe.appendQueryString(this.authority.endSessionEndpoint,i)}async executeTokenRequest(t,i){this.performanceClient?.addQueueMeasurement(w.AuthClientExecuteTokenRequest,i.correlationId);const r=this.createTokenQueryParameters(i),s=Pe.appendQueryString(t.tokenEndpoint,r),l=await Q(this.createTokenRequestBody.bind(this),w.AuthClientCreateTokenRequestBody,this.logger,this.performanceClient,i.correlationId)(i);let h;if(i.clientInfo)try{const p=Kc(i.clientInfo,this.cryptoUtils.base64Decode);h={credential:`${p.uid}${Yo.CLIENT_INFO_SEPARATOR}${p.utid}`,type:Rn.HOME_ACCOUNT_ID}}catch(p){this.logger.verbose("Could not parse client info for CCS Header: "+p)}const f=this.createTokenRequestHeaders(h||i.ccsCredential),g=ml(this.config.authOptions.clientId,i);return Q(this.executePostToTokenEndpoint.bind(this),w.AuthorizationCodeClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,i.correlationId)(s,l,f,g,i.correlationId,w.AuthorizationCodeClientExecutePostToTokenEndpoint)}async createTokenRequestBody(t){this.performanceClient?.addQueueMeasurement(w.AuthClientCreateTokenRequestBody,t.correlationId);const i=new Map;if(gf(i,t.embeddedClientId||t.tokenBodyParameters?.[Ca]||this.config.authOptions.clientId),this.includeRedirectUri)mf(i,t.redirectUri);else if(!t.redirectUri)throw Xe(pS);if(ff(i,t.scopes,!0,this.oidcDefaultScopes),uI(i,t.code),vf(i,this.config.libraryInfo),Cf(i,this.config.telemetry.application),VS(i),this.serverTelemetryManager&&!PS(this.config)&&YS(i,this.serverTelemetryManager),t.codeVerifier&&hI(i,t.codeVerifier),this.config.clientCredentials.clientSecret&&KS(i,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const s=this.config.clientCredentials.clientAssertion;qS(i,await eT(s.assertion,this.config.authOptions.clientId,t.resourceRequestUri)),jS(i,s.assertionType)}if(GS(i,JC.AUTHORIZATION_CODE_GRANT),Tf(i),t.authenticationScheme===Ke.POP){const s=new kr(this.cryptoUtils,this.performanceClient);let l;t.popKid?l=this.cryptoUtils.encodeKid(t.popKid):l=(await Q(s.generateCnf.bind(s),w.PopTokenGenerateCnf,this.logger,this.performanceClient,t.correlationId)(t,this.logger)).reqCnfString,Af(i,l)}else if(t.authenticationScheme===Ke.SSH)if(t.sshJwk)QS(i,t.sshJwk);else throw Xe(sl);(!rn.isEmptyObj(t.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&pf(i,t.claims,this.config.authOptions.clientCapabilities);let r;if(t.clientInfo)try{const s=Kc(t.clientInfo,this.cryptoUtils.base64Decode);r={credential:`${s.uid}${Yo.CLIENT_INFO_SEPARATOR}${s.utid}`,type:Rn.HOME_ACCOUNT_ID}}catch(s){this.logger.verbose("Could not parse client info for CCS Header: "+s)}else r=t.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&r)switch(r.type){case Rn.HOME_ACCOUNT_ID:try{const s=Ar(r.credential);jo(i,s)}catch(s){this.logger.verbose("Could not parse home account ID for CCS Header: "+s)}break;case Rn.UPN:Yc(i,r.credential);break}return t.embeddedClientId&&ul(i,this.config.authOptions.clientId,this.config.authOptions.redirectUri),t.tokenBodyParameters&&Gi(i,t.tokenBodyParameters),t.enableSpaAuthorizationCode&&(!t.tokenBodyParameters||!t.tokenBodyParameters[Vv])&&Gi(i,{[Vv]:"1"}),ll(i,t.correlationId,this.performanceClient),Vo(i)}createLogoutUrlQueryString(t){const i=new Map;return t.postLogoutRedirectUri&&rI(i,t.postLogoutRedirectUri),t.correlationId&&yf(i,t.correlationId),t.idTokenHint&&oI(i,t.idTokenHint),t.state&&BS(i,t.state),t.logoutHint&&gI(i,t.logoutHint),t.extraQueryParameters&&Gi(i,t.extraQueryParameters),this.config.authOptions.instanceAware&&FS(i),Vo(i,this.config.authOptions.encodeExtraQueryParams,t.extraQueryParameters)}}const PI=300;class HI extends Ef{constructor(t,i){super(t,i)}async acquireToken(t){this.performanceClient?.addQueueMeasurement(w.RefreshTokenClientAcquireToken,t.correlationId);const i=Vt(),r=await Q(this.executeTokenRequest.bind(this),w.RefreshTokenClientExecuteTokenRequest,this.logger,this.performanceClient,t.correlationId)(t,this.authority),s=r.headers?.[Pt.X_MS_REQUEST_ID],l=new Sa(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return l.validateTokenResponse(r.body),Q(l.handleServerTokenResponse.bind(l),w.HandleServerTokenResponse,this.logger,this.performanceClient,t.correlationId)(r.body,this.authority,i,t,void 0,void 0,!0,t.forceCache,s)}async acquireTokenByRefreshToken(t){if(!t)throw Xe(SS);if(this.performanceClient?.addQueueMeasurement(w.RefreshTokenClientAcquireTokenByRefreshToken,t.correlationId),!t.account)throw re($h);if(this.cacheManager.isAppMetadataFOCI(t.account.environment))try{return await Q(this.acquireTokenWithCachedRefreshToken.bind(this),w.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,t.correlationId)(t,!0)}catch(r){const s=r instanceof In&&r.errorCode===Xc,l=r instanceof ba&&r.errorCode===zv.INVALID_GRANT_ERROR&&r.subError===zv.CLIENT_MISMATCH_ERROR;if(s||l)return Q(this.acquireTokenWithCachedRefreshToken.bind(this),w.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,t.correlationId)(t,!1);throw r}return Q(this.acquireTokenWithCachedRefreshToken.bind(this),w.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,t.correlationId)(t,!1)}async acquireTokenWithCachedRefreshToken(t,i){this.performanceClient?.addQueueMeasurement(w.RefreshTokenClientAcquireTokenWithCachedRefreshToken,t.correlationId);const r=on(this.cacheManager.getRefreshToken.bind(this.cacheManager),w.CacheManagerGetRefreshToken,this.logger,this.performanceClient,t.correlationId)(t.account,i,t.correlationId,void 0,this.performanceClient);if(!r)throw Jc(Xc);if(r.expiresOn&&Vc(r.expiresOn,t.refreshTokenExpirationOffsetSeconds||PI))throw this.performanceClient?.addFields({rtExpiresOnMs:Number(r.expiresOn)},t.correlationId),Jc(_f);const s={...t,refreshToken:r.secret,authenticationScheme:t.authenticationScheme||Ke.BEARER,ccsCredential:{credential:t.account.homeAccountId,type:Rn.HOME_ACCOUNT_ID}};try{return await Q(this.acquireToken.bind(this),w.RefreshTokenClientAcquireToken,this.logger,this.performanceClient,t.correlationId)(s)}catch(l){if(l instanceof In&&(this.performanceClient?.addFields({rtExpiresOnMs:Number(r.expiresOn)},t.correlationId),l.subError===yl)){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");const h=this.cacheManager.generateCredentialKey(r);this.cacheManager.removeRefreshToken(h,t.correlationId)}throw l}}async executeTokenRequest(t,i){this.performanceClient?.addQueueMeasurement(w.RefreshTokenClientExecuteTokenRequest,t.correlationId);const r=this.createTokenQueryParameters(t),s=Pe.appendQueryString(i.tokenEndpoint,r),l=await Q(this.createTokenRequestBody.bind(this),w.RefreshTokenClientCreateTokenRequestBody,this.logger,this.performanceClient,t.correlationId)(t),h=this.createTokenRequestHeaders(t.ccsCredential),f=ml(this.config.authOptions.clientId,t);return Q(this.executePostToTokenEndpoint.bind(this),w.RefreshTokenClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,t.correlationId)(s,l,h,f,t.correlationId,w.RefreshTokenClientExecutePostToTokenEndpoint)}async createTokenRequestBody(t){this.performanceClient?.addQueueMeasurement(w.RefreshTokenClientCreateTokenRequestBody,t.correlationId);const i=new Map;if(gf(i,t.embeddedClientId||t.tokenBodyParameters?.[Ca]||this.config.authOptions.clientId),t.redirectUri&&mf(i,t.redirectUri),ff(i,t.scopes,!0,this.config.authOptions.authority.options.OIDCOptions?.defaultScopes),GS(i,JC.REFRESH_TOKEN_GRANT),Tf(i),vf(i,this.config.libraryInfo),Cf(i,this.config.telemetry.application),VS(i),this.serverTelemetryManager&&!PS(this.config)&&YS(i,this.serverTelemetryManager),dI(i,t.refreshToken),this.config.clientCredentials.clientSecret&&KS(i,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const r=this.config.clientCredentials.clientAssertion;qS(i,await eT(r.assertion,this.config.authOptions.clientId,t.resourceRequestUri)),jS(i,r.assertionType)}if(t.authenticationScheme===Ke.POP){const r=new kr(this.cryptoUtils,this.performanceClient);let s;t.popKid?s=this.cryptoUtils.encodeKid(t.popKid):s=(await Q(r.generateCnf.bind(r),w.PopTokenGenerateCnf,this.logger,this.performanceClient,t.correlationId)(t,this.logger)).reqCnfString,Af(i,s)}else if(t.authenticationScheme===Ke.SSH)if(t.sshJwk)QS(i,t.sshJwk);else throw Xe(sl);if((!rn.isEmptyObj(t.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&pf(i,t.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&t.ccsCredential)switch(t.ccsCredential.type){case Rn.HOME_ACCOUNT_ID:try{const r=Ar(t.ccsCredential.credential);jo(i,r)}catch(r){this.logger.verbose("Could not parse home account ID for CCS Header: "+r)}break;case Rn.UPN:Yc(i,t.ccsCredential.credential);break}return t.embeddedClientId&&ul(i,this.config.authOptions.clientId,this.config.authOptions.redirectUri),t.tokenBodyParameters&&Gi(i,t.tokenBodyParameters),ll(i,t.correlationId,this.performanceClient),Vo(i)}}class LI extends Ef{constructor(t,i){super(t,i)}async acquireCachedToken(t){this.performanceClient?.addQueueMeasurement(w.SilentFlowClientAcquireCachedToken,t.correlationId);let i=pa.NOT_APPLICABLE;if(t.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!rn.isEmptyObj(t.claims))throw this.setCacheOutcome(pa.FORCE_REFRESH_OR_CLAIMS,t.correlationId),re(ji);if(!t.account)throw re($h);const r=t.account.tenantId||RI(t.authority),s=this.cacheManager.getTokenKeys(),l=this.cacheManager.getAccessToken(t.account,t,s,r);if(l){if(SI(l.cachedAt)||Vc(l.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(pa.CACHED_ACCESS_TOKEN_EXPIRED,t.correlationId),re(ji);l.refreshOn&&Vc(l.refreshOn,0)&&(i=pa.PROACTIVELY_REFRESHED)}else throw this.setCacheOutcome(pa.NO_CACHED_ACCESS_TOKEN,t.correlationId),re(ji);const h=t.authority||this.authority.getPreferredCache(),f={account:this.cacheManager.getAccount(this.cacheManager.generateAccountKey(t.account),t.correlationId),accessToken:l,idToken:this.cacheManager.getIdToken(t.account,t.correlationId,s,r,this.performanceClient),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(h)};return this.setCacheOutcome(i,t.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await Q(this.generateResultFromCacheRecord.bind(this),w.SilentFlowClientGenerateResultFromCacheRecord,this.logger,this.performanceClient,t.correlationId)(f,t),i]}setCacheOutcome(t,i){this.serverTelemetryManager?.setCacheOutcome(t),this.performanceClient?.addFields({cacheOutcome:t},i),t!==pa.NOT_APPLICABLE&&this.logger.info(`Token refresh is required due to cache outcome: ${t}`)}async generateResultFromCacheRecord(t,i){this.performanceClient?.addQueueMeasurement(w.SilentFlowClientGenerateResultFromCacheRecord,i.correlationId);let r;if(t.idToken&&(r=Hn(t.idToken.secret,this.config.cryptoInterface.base64Decode)),i.maxAge||i.maxAge===0){const s=r?.auth_time;if(!s)throw re(Jh);kS(s,i.maxAge)}return Sa.generateAuthenticationResult(this.cryptoUtils,this.authority,t,!0,i,r)}}const zI={sendGetRequestAsync:()=>Promise.reject(re(Re)),sendPostRequestAsync:()=>Promise.reject(re(Re))};function BI(c,t,i,r){const s=t.correlationId,l=new Map;gf(l,t.embeddedClientId||t.extraQueryParameters?.[Ca]||c.clientId);const h=[...t.scopes||[],...t.extraScopesToConsent||[]];if(ff(l,h,!0,c.authority.options.OIDCOptions?.defaultScopes),mf(l,t.redirectUri),yf(l,s),iI(l,t.responseMode),Tf(l),t.prompt&&(cI(l,t.prompt),r?.addFields({prompt:t.prompt},s)),t.domainHint&&(sI(l,t.domainHint),r?.addFields({domainHintFromRequest:!0},s)),t.prompt!==kt.SELECT_ACCOUNT)if(t.sid&&t.prompt===kt.NONE)i.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),Xv(l,t.sid),r?.addFields({sidFromRequest:!0},s);else if(t.account){const f=jI(t.account);let g=GI(t.account);if(g&&t.domainHint&&(i.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),g=null),g){i.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),Ec(l,g),r?.addFields({loginHintFromClaim:!0},s);try{const p=Ar(t.account.homeAccountId);jo(l,p)}catch{i.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(f&&t.prompt===kt.NONE){i.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),Xv(l,f),r?.addFields({sidFromClaim:!0},s);try{const p=Ar(t.account.homeAccountId);jo(l,p)}catch{i.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(t.loginHint)i.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),Ec(l,t.loginHint),Yc(l,t.loginHint),r?.addFields({loginHintFromRequest:!0},s);else if(t.account.username){i.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),Ec(l,t.account.username),r?.addFields({loginHintFromUpn:!0},s);try{const p=Ar(t.account.homeAccountId);jo(l,p)}catch{i.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else t.loginHint&&(i.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),Ec(l,t.loginHint),Yc(l,t.loginHint),r?.addFields({loginHintFromRequest:!0},s));else i.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");return t.nonce&&lI(l,t.nonce),t.state&&BS(l,t.state),(t.claims||c.clientCapabilities&&c.clientCapabilities.length>0)&&pf(l,t.claims,c.clientCapabilities),t.embeddedClientId&&ul(l,c.clientId,c.redirectUri),c.instanceAware&&(!t.extraQueryParameters||!Object.keys(t.extraQueryParameters).includes(kh))&&FS(l),l}function Rf(c,t,i,r){const s=Vo(t,i,r);return Pe.appendQueryString(c.authorizationEndpoint,s)}function KI(c,t){if(nT(c,t),!c.code)throw re(hS);return c}function nT(c,t){if(!c.state||!t)throw c.state?re(_h,"Cached State"):re(_h,"Server State");let i,r;try{i=decodeURIComponent(c.state)}catch{throw re(Or,c.state)}try{r=decodeURIComponent(t)}catch{throw re(Or,c.state)}if(i!==r)throw re(iS);if(c.error||c.error_description||c.suberror){const s=qI(c);throw WS(c.error,c.error_description,c.suberror)?new In(c.error||"",c.error_description,c.suberror,c.timestamp||"",c.trace_id||"",c.correlation_id||"",c.claims||"",s):new ba(c.error||"",c.error_description,c.suberror,s)}}function qI(c){const t="code=",i=c.error_uri?.lastIndexOf(t);return i&&i>=0?c.error_uri?.substring(i+t.length):void 0}function jI(c){return c.idTokenClaims?.sid||null}function GI(c){return c.loginHint||c.idTokenClaims?.login_hint||null}const iC=",",iT="|";function FI(c){const{skus:t,libraryName:i,libraryVersion:r,extensionName:s,extensionVersion:l}=c,h=new Map([[0,[i,r]],[2,[s,l]]]);let f=[];if(t?.length){if(f=t.split(iC),f.length<4)return t}else f=Array.from({length:4},()=>iT);return h.forEach((g,p)=>{g.length===2&&g[0]?.length&&g[1]?.length&&QI({skuArr:f,index:p,skuName:g[0],skuVersion:g[1]})}),f.join(iC)}function QI(c){const{skuArr:t,index:i,skuName:r,skuVersion:s}=c;i>=t.length||(t[i]=[r,s].join(iT))}class Xo{constructor(t,i){this.cacheOutcome=pa.NOT_APPLICABLE,this.cacheManager=i,this.apiId=t.apiId,this.correlationId=t.correlationId,this.wrapperSKU=t.wrapperSKU||W.EMPTY_STRING,this.wrapperVer=t.wrapperVer||W.EMPTY_STRING,this.telemetryCacheKey=Rt.CACHE_KEY+Yo.CACHE_KEY_SEPARATOR+t.clientId}generateCurrentRequestHeaderValue(){const t=`${this.apiId}${Rt.VALUE_SEPARATOR}${this.cacheOutcome}`,i=[this.wrapperSKU,this.wrapperVer],r=this.getNativeBrokerErrorCode();r?.length&&i.push(`broker_error=${r}`);const s=i.join(Rt.VALUE_SEPARATOR),l=this.getRegionDiscoveryFields(),h=[t,l].join(Rt.VALUE_SEPARATOR);return[Rt.SCHEMA_VERSION,h,s].join(Rt.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){const t=this.getLastRequests(),i=Xo.maxErrorsToSend(t),r=t.failedRequests.slice(0,2*i).join(Rt.VALUE_SEPARATOR),s=t.errors.slice(0,i).join(Rt.VALUE_SEPARATOR),l=t.errors.length,h=i<l?Rt.OVERFLOW_TRUE:Rt.OVERFLOW_FALSE,f=[l,h].join(Rt.VALUE_SEPARATOR);return[Rt.SCHEMA_VERSION,t.cacheHits,r,s,f].join(Rt.CATEGORY_SEPARATOR)}cacheFailedRequest(t){const i=this.getLastRequests();i.errors.length>=Rt.MAX_CACHED_ERRORS&&(i.failedRequests.shift(),i.failedRequests.shift(),i.errors.shift()),i.failedRequests.push(this.apiId,this.correlationId),t instanceof Error&&t&&t.toString()?t instanceof Ye?t.subError?i.errors.push(t.subError):t.errorCode?i.errors.push(t.errorCode):i.errors.push(t.toString()):i.errors.push(t.toString()):i.errors.push(Rt.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,i,this.correlationId)}incrementCacheHits(){const t=this.getLastRequests();return t.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t,this.correlationId),t.cacheHits}getLastRequests(){const t={failedRequests:[],errors:[],cacheHits:0};return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||t}clearTelemetryCache(){const t=this.getLastRequests(),i=Xo.maxErrorsToSend(t),r=t.errors.length;if(i===r)this.cacheManager.removeItem(this.telemetryCacheKey,this.correlationId);else{const s={failedRequests:t.failedRequests.slice(i*2),errors:t.errors.slice(i),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,s,this.correlationId)}}static maxErrorsToSend(t){let i,r=0,s=0;const l=t.errors.length;for(i=0;i<l;i++){const h=t.failedRequests[2*i]||W.EMPTY_STRING,f=t.failedRequests[2*i+1]||W.EMPTY_STRING,g=t.errors[i]||W.EMPTY_STRING;if(s+=h.toString().length+f.toString().length+g.length+3,s<Rt.MAX_LAST_HEADER_BYTES)r+=1;else break}return r}getRegionDiscoveryFields(){const t=[];return t.push(this.regionUsed||W.EMPTY_STRING),t.push(this.regionSource||W.EMPTY_STRING),t.push(this.regionOutcome||W.EMPTY_STRING),t.join(",")}updateRegionDiscoveryMetadata(t){this.regionUsed=t.region_used,this.regionSource=t.region_source,this.regionOutcome=t.region_outcome}setCacheOutcome(t){this.cacheOutcome=t}setNativeBrokerErrorCode(t){const i=this.getLastRequests();i.nativeBrokerErrorCode=t,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,i,this.correlationId)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){const t=this.getLastRequests();delete t.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t,this.correlationId)}static makeExtraSkuString(t){return FI(t)}}const aT="missing_kid_error",rT="missing_alg_error";const YI={[aT]:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",[rT]:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."};class If extends Ye{constructor(t,i){super(t,i),this.name="JoseHeaderError",Object.setPrototypeOf(this,If.prototype)}}function aC(c){return new If(c,YI[c])}class Of{constructor(t){this.typ=t.typ,this.alg=t.alg,this.kid=t.kid}static getShrHeaderString(t){if(!t.kid)throw aC(aT);if(!t.alg)throw aC(rT);const i=new Of({typ:t.typ||Bw.Pop,kid:t.kid,alg:t.alg});return JSON.stringify(i)}}const kf="pkce_not_created",Mf="ear_jwk_empty",oT="ear_jwe_empty",Mh="crypto_nonexistent",vl="empty_navigate_uri",sT="hash_empty_error",Nf="no_state_in_hash",cT="hash_does_not_contain_known_properties",lT="unable_to_parse_state",uT="state_interaction_type_mismatch",dT="interaction_in_progress",hT="popup_window_error",fT="empty_window_error",Jo="user_cancelled",VI="monitor_popup_timeout",gT="monitor_window_timeout",mT="redirect_in_iframe",pT="block_iframe_reload",yT="block_nested_popups",XI="iframe_closed_prematurely",Cl="silent_logout_unsupported",vT="no_account_error",JI="silent_prompt_value_error",CT="no_token_request_cache_error",ST="unable_to_parse_token_request_cache_error",$I="auth_request_not_set_error",ZI="invalid_cache_type",Sl="non_browser_environment",Cr="database_not_open",$c="no_network_connectivity",TT="post_request_failed",AT="get_request_failed",Nh="failed_to_parse_response",ET="unable_to_load_token",Df="crypto_key_not_found",_T="auth_code_required",bT="auth_code_or_nativeAccountId_required",wT="spa_code_and_nativeAccountId_present",Uf="database_unavailable",RT="unable_to_acquire_token_from_native_platform",IT="native_handshake_timeout",OT="native_extension_not_installed",xf="native_connection_not_established",Go="uninitialized_public_client_application",kT="native_prompt_not_supported",MT="invalid_base64_string",NT="invalid_pop_token_request",DT="failed_to_build_headers",UT="failed_to_parse_headers",Mc="failed_to_decrypt_ear_response",Zc="timed_out";const ai="For more visit: aka.ms/msaljs/browser-errors",WI={[kf]:"The PKCE code challenge and verifier could not be generated.",[Mf]:"No EAR encryption key provided. This is unexpected.",[oT]:"Server response does not contain ear_jwe property. This is unexpected.",[Mh]:"The crypto object or function is not available.",[vl]:"Navigation URI is empty. Please check stack trace for more info.",[sT]:`Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. ${ai}`,[Nf]:"Hash does not contain state. Please verify that the request originated from msal.",[cT]:`Hash does not contain known properites. Please verify that your redirectUri is not changing the hash.  ${ai}`,[lT]:"Unable to parse state. Please verify that the request originated from msal.",[uT]:"Hash contains state but the interaction type does not match the caller.",[dT]:`Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.   ${ai}`,[hT]:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",[fT]:"window.open returned null or undefined window object.",[Jo]:"User cancelled the flow.",[VI]:`Token acquisition in popup failed due to timeout.  ${ai}`,[gT]:`Token acquisition in iframe failed due to timeout.  ${ai}`,[mT]:"Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",[pT]:`Request was blocked inside an iframe because MSAL detected an authentication response.  ${ai}`,[yT]:"Request was blocked inside a popup because MSAL detected it was running in a popup.",[XI]:"The iframe being monitored was closed prematurely.",[Cl]:"Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",[vT]:"No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",[JI]:"The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'.",[CT]:"No token request found in cache.",[ST]:"The cached token request could not be parsed.",[$I]:"Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",[ZI]:"Invalid cache type",[Sl]:"Login and token requests are not supported in non-browser environments.",[Cr]:"Database is not open!",[$c]:"No network connectivity. Check your internet connection.",[TT]:"Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",[AT]:"Network request failed. Please check the network trace to determine root cause.",[Nh]:"Failed to parse network response. Check network trace.",[ET]:"Error loading token to cache.",[Df]:"Cryptographic Key or Keypair not found in browser storage.",[_T]:"An authorization code must be provided (as the `code` property on the request) to this flow.",[bT]:"An authorization code or nativeAccountId must be provided to this flow.",[wT]:"Request cannot contain both spa code and native account id.",[Uf]:"IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",[RT]:`Unable to acquire token from native platform.  ${ai}`,[IT]:"Timed out while attempting to establish connection to browser extension",[OT]:"Native extension is not installed. If you think this is a mistake call the initialize function.",[xf]:`Connection to native platform has not been established. Please install a compatible browser extension and run initialize().  ${ai}`,[Go]:`You must call and await the initialize function before attempting to call any other MSAL API.  ${ai}`,[kT]:"The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",[MT]:"Invalid base64 encoded string.",[NT]:"Invalid PoP token request. The request should not have both a popKid value and signPopToken set to true.",[DT]:"Failed to build request headers object.",[UT]:"Failed to parse response headers",[Mc]:"Failed to decrypt ear response",[Zc]:"The request timed out."};class es extends Ye{constructor(t,i){super(t,WI[t],i),Object.setPrototypeOf(this,es.prototype),this.name="BrowserAuthError"}}function he(c,t){return new es(c,t)}const Qt={INVALID_GRANT_ERROR:"invalid_grant",POPUP_WIDTH:483,POPUP_HEIGHT:600,POPUP_NAME_PREFIX:"msal",DEFAULT_POLL_INTERVAL_MS:30,MSAL_SKU:"msal.js.browser"},Cn={CHANNEL_ID:"53ee284d-920a-4b59-9d30-a60315b26836",PREFERRED_EXTENSION_ID:"ppnbnpeolgkicgegkbkbjmhlideopiji",MATS_TELEMETRY:"MATS",MICROSOFT_ENTRA_BROKERID:"MicrosoftEntra",DOM_API_NAME:"DOM API",PLATFORM_DOM_APIS:"get-token-and-sign-out",PLATFORM_DOM_PROVIDER:"PlatformAuthDOMHandler",PLATFORM_EXTENSION_PROVIDER:"PlatformAuthExtensionHandler"},Ho={HandshakeRequest:"Handshake",HandshakeResponse:"HandshakeResponse",GetToken:"GetToken",Response:"Response"},Tt={LocalStorage:"localStorage",SessionStorage:"sessionStorage",MemoryStorage:"memoryStorage"},rC={GET:"GET",POST:"POST"},Bi={SIGNIN:"signin",SIGNOUT:"signout"},dt={ORIGIN_URI:"request.origin",URL_HASH:"urlHash",REQUEST_PARAMS:"request.params",VERIFIER:"code.verifier",INTERACTION_STATUS_KEY:"interaction.status",NATIVE_REQUEST:"request.native"},bc={WRAPPER_SKU:"wrapper.sku",WRAPPER_VER:"wrapper.version"},Le={acquireTokenRedirect:861,acquireTokenPopup:862,ssoSilent:863,acquireTokenSilent_authCode:864,handleRedirectPromise:865,acquireTokenByCode:866,acquireTokenSilent_silentFlow:61,logout:961,logoutPopup:962};var Se;(function(c){c.Redirect="redirect",c.Popup="popup",c.Silent="silent",c.None="none"})(Se||(Se={}));const oC={scopes:Dr},xT="jwk",Dh="msal.db",eO=1,tO=`${Dh}.keys`,xt={Default:0,AccessToken:1,AccessTokenAndRefreshToken:2,RefreshToken:3,RefreshTokenAndNetwork:4,Skip:5},nO=[xt.Default,xt.Skip,xt.RefreshTokenAndNetwork];function wc(c){return encodeURIComponent($o(c).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function Yi(c){return PT(c).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function $o(c){return PT(new TextEncoder().encode(c))}function PT(c){const t=Array.from(c,i=>String.fromCodePoint(i)).join("");return btoa(t)}function Ht(c){return new TextDecoder().decode(Fi(c))}function Fi(c){let t=c.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw he(MT)}const i=atob(t);return Uint8Array.from(i,r=>r.codePointAt(0)||0)}const iO="RSASSA-PKCS1-v1_5",xr="AES-GCM",HT="HKDF",Pf="SHA-256",aO=2048,rO=new Uint8Array([1,0,1]),sC="0123456789abcdef",cC=new Uint32Array(1),Hf="raw",LT="encrypt",Lf="decrypt",oO="deriveKey",sO="crypto_subtle_undefined",zf={name:iO,hash:Pf,modulusLength:aO,publicExponent:rO};function cO(c){if(!window)throw he(Sl);if(!window.crypto)throw he(Mh);if(!c&&!window.crypto.subtle)throw he(Mh,sO)}async function zT(c,t,i){t?.addQueueMeasurement(w.Sha256Digest,i);const s=new TextEncoder().encode(c);return window.crypto.subtle.digest(Pf,s)}function lO(c){return window.crypto.getRandomValues(c)}function gh(){return window.crypto.getRandomValues(cC),cC[0]}function On(){const c=Date.now(),t=gh()*1024+(gh()&1023),i=new Uint8Array(16),r=Math.trunc(t/2**30),s=t&2**30-1,l=gh();i[0]=c/2**40,i[1]=c/2**32,i[2]=c/2**24,i[3]=c/2**16,i[4]=c/2**8,i[5]=c,i[6]=112|r>>>8,i[7]=r,i[8]=128|s>>>24,i[9]=s>>>16,i[10]=s>>>8,i[11]=s,i[12]=l>>>24,i[13]=l>>>16,i[14]=l>>>8,i[15]=l;let h="";for(let f=0;f<i.length;f++)h+=sC.charAt(i[f]>>>4),h+=sC.charAt(i[f]&15),(f===3||f===5||f===7||f===9)&&(h+="-");return h}async function uO(c,t){return window.crypto.subtle.generateKey(zf,c,t)}async function mh(c){return window.crypto.subtle.exportKey(xT,c)}async function dO(c,t,i){return window.crypto.subtle.importKey(xT,c,zf,t,i)}async function hO(c,t){return window.crypto.subtle.sign(zf,c,t)}async function Bf(){const c=await BT(),i={alg:"dir",kty:"oct",k:Yi(new Uint8Array(c))};return $o(JSON.stringify(i))}async function fO(c){const t=Ht(c),r=JSON.parse(t).k,s=Fi(r);return window.crypto.subtle.importKey(Hf,s,xr,!1,[Lf])}async function gO(c,t){const i=t.split(".");if(i.length!==5)throw he(Mc,"jwe_length");const r=await fO(c).catch(()=>{throw he(Mc,"import_key")});try{const s=new TextEncoder().encode(i[0]),l=Fi(i[2]),h=Fi(i[3]),f=Fi(i[4]),g=f.byteLength*8,p=new Uint8Array(h.length+f.length);p.set(h),p.set(f,h.length);const S=await window.crypto.subtle.decrypt({name:xr,iv:l,tagLength:g,additionalData:s},r,p);return new TextDecoder().decode(S)}catch{throw he(Mc,"decrypt")}}async function BT(){const c=await window.crypto.subtle.generateKey({name:xr,length:256},!0,[LT,Lf]);return window.crypto.subtle.exportKey(Hf,c)}async function lC(c){return window.crypto.subtle.importKey(Hf,c,HT,!1,[oO])}async function KT(c,t,i){return window.crypto.subtle.deriveKey({name:HT,salt:t,hash:Pf,info:new TextEncoder().encode(i)},c,{name:xr,length:256},!1,[LT,Lf])}async function mO(c,t,i){const r=new TextEncoder().encode(t),s=window.crypto.getRandomValues(new Uint8Array(16)),l=await KT(c,s,i),h=await window.crypto.subtle.encrypt({name:xr,iv:new Uint8Array(12)},l,r);return{data:Yi(new Uint8Array(h)),nonce:Yi(s)}}async function uC(c,t,i,r){const s=Fi(r),l=await KT(c,Fi(t),i),h=await window.crypto.subtle.decrypt({name:xr,iv:new Uint8Array(12)},l,s);return new TextDecoder().decode(h)}async function qT(c){const t=await zT(c),i=new Uint8Array(t);return Yi(i)}const Tl="storage_not_supported",jT="stubbed_public_client_application_called",Kf="in_mem_redirect_unavailable";const Nc={[Tl]:"Given storage configuration option was not supported.",[jT]:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors",[Kf]:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."};Nc[Tl],Nc[jT],Nc[Kf];class qf extends Ye{constructor(t,i){super(t,i),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,qf.prototype)}}function jf(c){return new qf(c,Nc[c])}function GT(c){c.location.hash="",typeof c.history.replaceState=="function"&&c.history.replaceState(null,"",`${c.location.origin}${c.location.pathname}${c.location.search}`)}function pO(c){const t=c.split("#");t.shift(),window.location.hash=t.length>0?t.join("#"):""}function Gf(){return window.parent!==window}function yO(){return typeof window<"u"&&!!window.opener&&window.opener!==window&&typeof window.name=="string"&&window.name.indexOf(`${Qt.POPUP_NAME_PREFIX}.`)===0}function si(){return typeof window<"u"&&window.location?window.location.href.split("?")[0].split("#")[0]:""}function vO(){const t=new Pe(window.location.href).getUrlComponents();return`${t.Protocol}//${t.HostNameAndPort}/`}function CO(){if(Pe.hashContainsKnownProperties(window.location.hash)&&Gf())throw he(pT)}function SO(c){if(Gf()&&!c)throw he(mT)}function TO(){if(yO())throw he(yT)}function FT(){if(typeof window>"u")throw he(Sl)}function QT(c){if(!c)throw he(Go)}function Ff(c){FT(),CO(),TO(),QT(c)}function dC(c,t){if(Ff(c),SO(t.system.allowRedirectInIframe),t.cache.cacheLocation===Tt.MemoryStorage&&!t.cache.storeAuthStateInCookie)throw jf(Kf)}function YT(c){const t=document.createElement("link");t.rel="preconnect",t.href=new URL(c).origin,t.crossOrigin="anonymous",document.head.appendChild(t),window.setTimeout(()=>{try{document.head.removeChild(t)}catch{}},1e4)}function AO(){return On()}class Wc{navigateInternal(t,i){return Wc.defaultNavigateWindow(t,i)}navigateExternal(t,i){return Wc.defaultNavigateWindow(t,i)}static defaultNavigateWindow(t,i){return i.noHistory?window.location.replace(t):window.location.assign(t),new Promise((r,s)=>{setTimeout(()=>{s(he(Zc,"failed_to_redirect"))},i.timeout)})}}class EO{async sendGetRequestAsync(t,i){let r,s={},l=0;const h=hC(i);try{r=await fetch(t,{method:rC.GET,headers:h})}catch(f){throw Bo(he(window.navigator.onLine?AT:$c),void 0,void 0,f)}s=fC(r.headers);try{return l=r.status,{headers:s,body:await r.json(),status:l}}catch(f){throw Bo(he(Nh),l,s,f)}}async sendPostRequestAsync(t,i){const r=i&&i.body||"",s=hC(i);let l,h=0,f={};try{l=await fetch(t,{method:rC.POST,headers:s,body:r})}catch(g){throw Bo(he(window.navigator.onLine?TT:$c),void 0,void 0,g)}f=fC(l.headers);try{return h=l.status,{headers:f,body:await l.json(),status:h}}catch(g){throw Bo(he(Nh),h,f,g)}}}function hC(c){try{const t=new Headers;if(!(c&&c.headers))return t;const i=c.headers;return Object.entries(i).forEach(([r,s])=>{t.append(r,s)}),t}catch(t){throw Bo(he(DT),void 0,void 0,t)}}function fC(c){try{const t={};return c.forEach((i,r)=>{t[r]=i}),t}catch{throw he(UT)}}const _O=6e4,Uh=1e4,bO=3e4,VT=2e3;function wO({auth:c,cache:t,system:i,telemetry:r},s){const l={clientId:W.EMPTY_STRING,authority:`${W.DEFAULT_AUTHORITY}`,knownAuthorities:[],cloudDiscoveryMetadata:W.EMPTY_STRING,authorityMetadata:W.EMPTY_STRING,redirectUri:typeof window<"u"?si():"",postLogoutRedirectUri:W.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:Yt.AAD,OIDCOptions:{serverResponseType:ol.FRAGMENT,defaultScopes:[W.OPENID_SCOPE,W.PROFILE_SCOPE,W.OFFLINE_ACCESS_SCOPE]},azureCloudOptions:{azureCloudInstance:nf.None,tenant:W.EMPTY_STRING},skipAuthorityMetadataCache:!1,supportsNestedAppAuth:!1,instanceAware:!1,encodeExtraQueryParams:!1},h={cacheLocation:Tt.SessionStorage,cacheRetentionDays:5,temporaryCacheLocation:Tt.SessionStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!!(t&&t.cacheLocation===Tt.LocalStorage),claimsBasedCachingEnabled:!1},f={loggerCallback:()=>{},logLevel:Qe.Info,piiLoggingEnabled:!1},p={...{...xS,loggerOptions:f,networkClient:s?new EO:zI,navigationClient:new Wc,loadFrameTimeout:0,windowHashTimeout:i?.loadFrameTimeout||_O,iframeHashTimeout:i?.loadFrameTimeout||Uh,navigateFrameWait:0,redirectNavigationTimeout:bO,asyncPopups:!1,allowRedirectInIframe:!1,allowPlatformBroker:!1,nativeBrokerHandshakeTimeout:i?.nativeBrokerHandshakeTimeout||VT,pollIntervalMilliseconds:Qt.DEFAULT_POLL_INTERVAL_MS},...i,loggerOptions:i?.loggerOptions||f},S={application:{appName:W.EMPTY_STRING,appVersion:W.EMPTY_STRING},client:new US};if(c?.protocolMode!==Yt.OIDC&&c?.OIDCOptions&&new Qi(p.loggerOptions).warning(JSON.stringify(Xe(bS))),c?.protocolMode&&c.protocolMode===Yt.OIDC&&p?.allowPlatformBroker)throw Xe(wS);return{auth:{...l,...c,OIDCOptions:{...l.OIDCOptions,...c?.OIDCOptions}},cache:{...h,...t},system:p,telemetry:{...S,...r}}}const RO="@azure/msal-browser",Ta="4.26.2";const Ot="msal",Qf="browser",gC="|",Nt=2,Dc=2,IO=`${Ot}.${Qf}.log.level`,OO=`${Ot}.${Qf}.log.pii`,kO=`${Ot}.${Qf}.platform.auth.dom`,mC=`${Ot}.version`,pC="account.keys",yC="token.keys";function br(c=Dc){return c<1?`${Ot}.${pC}`:`${Ot}.${c}.${pC}`}function wr(c,t=Nt){return t<1?`${Ot}.${yC}.${c}`:`${Ot}.${t}.${yC}.${c}`}class Yf{static loggerCallback(t,i){switch(t){case Qe.Error:console.error(i);return;case Qe.Info:console.info(i);return;case Qe.Verbose:console.debug(i);return;case Qe.Warning:console.warn(i);return;default:console.log(i);return}}constructor(t){this.browserEnvironment=typeof window<"u",this.config=wO(t,this.browserEnvironment);let i;try{i=window[Tt.SessionStorage]}catch{}const r=i?.getItem(IO),s=i?.getItem(OO)?.toLowerCase(),l=s==="true"?!0:s==="false"?!1:void 0,h={...this.config.system.loggerOptions},f=r&&Object.keys(Qe).includes(r)?Qe[r]:void 0;f&&(h.loggerCallback=Yf.loggerCallback,h.logLevel=f),l!==void 0&&(h.piiLoggingEnabled=l),this.logger=new Qi(h,RO,Ta),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}}class Aa extends Yf{getModuleName(){return Aa.MODULE_NAME}getId(){return Aa.ID}async initialize(){return this.available=typeof window<"u",this.available}}Aa.MODULE_NAME="";Aa.ID="StandardOperatingContext";class MO{constructor(){this.dbName=Dh,this.version=eO,this.tableName=tO,this.dbOpen=!1}async open(){return new Promise((t,i)=>{const r=window.indexedDB.open(this.dbName,this.version);r.addEventListener("upgradeneeded",s=>{s.target.result.createObjectStore(this.tableName)}),r.addEventListener("success",s=>{const l=s;this.db=l.target.result,this.dbOpen=!0,t()}),r.addEventListener("error",()=>i(he(Uf)))})}closeConnection(){const t=this.db;t&&this.dbOpen&&(t.close(),this.dbOpen=!1)}async validateDbIsOpen(){if(!this.dbOpen)return this.open()}async getItem(t){return await this.validateDbIsOpen(),new Promise((i,r)=>{if(!this.db)return r(he(Cr));const h=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).get(t);h.addEventListener("success",f=>{const g=f;this.closeConnection(),i(g.target.result)}),h.addEventListener("error",f=>{this.closeConnection(),r(f)})})}async setItem(t,i){return await this.validateDbIsOpen(),new Promise((r,s)=>{if(!this.db)return s(he(Cr));const f=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).put(i,t);f.addEventListener("success",()=>{this.closeConnection(),r()}),f.addEventListener("error",g=>{this.closeConnection(),s(g)})})}async removeItem(t){return await this.validateDbIsOpen(),new Promise((i,r)=>{if(!this.db)return r(he(Cr));const h=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).delete(t);h.addEventListener("success",()=>{this.closeConnection(),i()}),h.addEventListener("error",f=>{this.closeConnection(),r(f)})})}async getKeys(){return await this.validateDbIsOpen(),new Promise((t,i)=>{if(!this.db)return i(he(Cr));const l=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).getAllKeys();l.addEventListener("success",h=>{const f=h;this.closeConnection(),t(f.target.result)}),l.addEventListener("error",h=>{this.closeConnection(),i(h)})})}async containsKey(t){return await this.validateDbIsOpen(),new Promise((i,r)=>{if(!this.db)return r(he(Cr));const h=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).count(t);h.addEventListener("success",f=>{const g=f;this.closeConnection(),i(g.target.result===1)}),h.addEventListener("error",f=>{this.closeConnection(),r(f)})})}async deleteDatabase(){return this.db&&this.dbOpen&&this.closeConnection(),new Promise((t,i)=>{const r=window.indexedDB.deleteDatabase(Dh),s=setTimeout(()=>i(!1),200);r.addEventListener("success",()=>(clearTimeout(s),t(!0))),r.addEventListener("blocked",()=>(clearTimeout(s),t(!0))),r.addEventListener("error",()=>(clearTimeout(s),i(!1)))})}}class Al{constructor(){this.cache=new Map}async initialize(){}getItem(t){return this.cache.get(t)||null}getUserData(t){return this.getItem(t)}setItem(t,i){this.cache.set(t,i)}async setUserData(t,i){this.setItem(t,i)}removeItem(t){this.cache.delete(t)}getKeys(){const t=[];return this.cache.forEach((i,r)=>{t.push(r)}),t}containsKey(t){return this.cache.has(t)}clear(){this.cache.clear()}decryptData(){return Promise.resolve(null)}}class NO{constructor(t){this.inMemoryCache=new Al,this.indexedDBCache=new MO,this.logger=t}handleDatabaseAccessError(t){if(t instanceof es&&t.errorCode===Uf)this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.");else throw t}async getItem(t){const i=this.inMemoryCache.getItem(t);if(!i)try{return this.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.getItem(t)}catch(r){this.handleDatabaseAccessError(r)}return i}async setItem(t,i){this.inMemoryCache.setItem(t,i);try{await this.indexedDBCache.setItem(t,i)}catch(r){this.handleDatabaseAccessError(r)}}async removeItem(t){this.inMemoryCache.removeItem(t);try{await this.indexedDBCache.removeItem(t)}catch(i){this.handleDatabaseAccessError(i)}}async getKeys(){const t=this.inMemoryCache.getKeys();if(t.length===0)try{return this.logger.verbose("In-memory cache is empty, now querying persistent storage."),await this.indexedDBCache.getKeys()}catch(i){this.handleDatabaseAccessError(i)}return t}async containsKey(t){const i=this.inMemoryCache.containsKey(t);if(!i)try{return this.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.containsKey(t)}catch(r){this.handleDatabaseAccessError(r)}return i}clearInMemory(){this.logger.verbose("Deleting in-memory keystore"),this.inMemoryCache.clear(),this.logger.verbose("In-memory keystore deleted")}async clearPersistent(){try{this.logger.verbose("Deleting persistent keystore");const t=await this.indexedDBCache.deleteDatabase();return t&&this.logger.verbose("Persistent keystore deleted"),t}catch(t){return this.handleDatabaseAccessError(t),!1}}}class li{constructor(t,i,r){this.logger=t,cO(r??!1),this.cache=new NO(this.logger),this.performanceClient=i}createNewGuid(){return On()}base64Encode(t){return $o(t)}base64Decode(t){return Ht(t)}base64UrlEncode(t){return wc(t)}encodeKid(t){return this.base64UrlEncode(JSON.stringify({kid:t}))}async getPublicKeyThumbprint(t){const i=this.performanceClient?.startMeasurement(w.CryptoOptsGetPublicKeyThumbprint,t.correlationId),r=await uO(li.EXTRACTABLE,li.POP_KEY_USAGES),s=await mh(r.publicKey),l={e:s.e,kty:s.kty,n:s.n},h=vC(l),f=await this.hashString(h),g=await mh(r.privateKey),p=await dO(g,!1,["sign"]);return await this.cache.setItem(f,{privateKey:p,publicKey:r.publicKey,requestMethod:t.resourceRequestMethod,requestUri:t.resourceRequestUri}),i&&i.end({success:!0}),f}async removeTokenBindingKey(t){if(await this.cache.removeItem(t),await this.cache.containsKey(t))throw re(fS)}async clearKeystore(){this.cache.clearInMemory();try{return await this.cache.clearPersistent(),!0}catch(t){return t instanceof Error?this.logger.error(`Clearing keystore failed with error: ${t.message}`):this.logger.error("Clearing keystore failed with unknown error"),!1}}async signJwt(t,i,r,s){const l=this.performanceClient?.startMeasurement(w.CryptoOptsSignJwt,s),h=await this.cache.getItem(i);if(!h)throw he(Df);const f=await mh(h.publicKey),g=vC(f),p=wc(JSON.stringify({kid:i})),S=Of.getShrHeaderString({...r?.header,alg:f.alg,kid:p}),T=wc(S);t.cnf={jwk:JSON.parse(g)};const A=wc(JSON.stringify(t)),K=`${T}.${A}`,ie=new TextEncoder().encode(K),le=await hO(h.privateKey,ie),se=Yi(new Uint8Array(le)),ce=`${K}.${se}`;return l&&l.end({success:!0}),ce}async hashString(t){return qT(t)}}li.POP_KEY_USAGES=["sign","verify"];li.EXTRACTABLE=!0;function vC(c){return JSON.stringify(c,Object.keys(c).sort())}const DO=1440*60*1e3,xh={Lax:"Lax",None:"None"};class XT{initialize(){return Promise.resolve()}getItem(t){const i=`${encodeURIComponent(t)}`,r=document.cookie.split(";");for(let s=0;s<r.length;s++){const l=r[s],[h,...f]=decodeURIComponent(l).trim().split("="),g=f.join("=");if(h===i)return g}return""}getUserData(){throw re(Re)}setItem(t,i,r,s=!0,l=xh.Lax){let h=`${encodeURIComponent(t)}=${encodeURIComponent(i)};path=/;SameSite=${l};`;if(r){const f=UO(r);h+=`expires=${f};`}(s||l===xh.None)&&(h+="Secure;"),document.cookie=h}async setUserData(){return Promise.reject(re(Re))}removeItem(t){this.setItem(t,"",-1)}getKeys(){const t=document.cookie.split(";"),i=[];return t.forEach(r=>{const s=decodeURIComponent(r).trim().split("=");i.push(s[0])}),i}containsKey(t){return this.getKeys().includes(t)}decryptData(){return Promise.resolve(null)}}function UO(c){const t=new Date;return new Date(t.getTime()+c*DO).toUTCString()}function zi(c,t){const i=c.getItem(br(t));return i?JSON.parse(i):[]}function _n(c,t,i){const r=t.getItem(wr(c,i));if(r){const s=JSON.parse(r);if(s&&s.hasOwnProperty("idToken")&&s.hasOwnProperty("accessToken")&&s.hasOwnProperty("refreshToken"))return s}return{idToken:[],accessToken:[],refreshToken:[]}}function Uc(c){return c.hasOwnProperty("id")&&c.hasOwnProperty("nonce")&&c.hasOwnProperty("data")}const CC="msal.cache.encryption",xO="msal.broadcast.cache";class PO{constructor(t,i,r){if(!window.localStorage)throw jf(Tl);this.memoryStorage=new Al,this.initialized=!1,this.clientId=t,this.logger=i,this.performanceClient=r,this.broadcast=new BroadcastChannel(xO)}async initialize(t){const i=new XT,r=i.getItem(CC);let s={key:"",id:""};if(r)try{s=JSON.parse(r)}catch{}if(s.key&&s.id){const l=on(Fi,w.Base64Decode,this.logger,this.performanceClient,t)(s.key);this.encryptionCookie={id:s.id,key:await Q(lC,w.GenerateHKDF,this.logger,this.performanceClient,t)(l)}}else{const l=On(),h=await Q(BT,w.GenerateBaseKey,this.logger,this.performanceClient,t)(),f=on(Yi,w.UrlEncodeArr,this.logger,this.performanceClient,t)(new Uint8Array(h));this.encryptionCookie={id:l,key:await Q(lC,w.GenerateHKDF,this.logger,this.performanceClient,t)(h)};const g={id:l,key:f};i.setItem(CC,JSON.stringify(g),0,!0,xh.None)}await Q(this.importExistingCache.bind(this),w.ImportExistingCache,this.logger,this.performanceClient,t)(t),this.broadcast.addEventListener("message",this.updateCache.bind(this)),this.initialized=!0}getItem(t){return window.localStorage.getItem(t)}getUserData(t){if(!this.initialized)throw he(Go);return this.memoryStorage.getItem(t)}async decryptData(t,i,r){if(!this.initialized||!this.encryptionCookie)throw he(Go);if(i.id!==this.encryptionCookie.id)return this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},r),null;const s=await Q(uC,w.Decrypt,this.logger,this.performanceClient,r)(this.encryptionCookie.key,i.nonce,this.getContext(t),i.data);if(!s)return null;try{return{...JSON.parse(s),lastUpdatedAt:i.lastUpdatedAt}}catch{return this.performanceClient.incrementFields({encryptedCacheCorruptionCount:1},r),null}}setItem(t,i){window.localStorage.setItem(t,i)}async setUserData(t,i,r,s,l){if(!this.initialized||!this.encryptionCookie)throw he(Go);if(l)this.setItem(t,i);else{const{data:h,nonce:f}=await Q(mO,w.Encrypt,this.logger,this.performanceClient,r)(this.encryptionCookie.key,i,this.getContext(t)),g={id:this.encryptionCookie.id,nonce:f,data:h,lastUpdatedAt:s};this.setItem(t,JSON.stringify(g))}this.memoryStorage.setItem(t,i),this.broadcast.postMessage({key:t,value:i,context:this.getContext(t)})}removeItem(t){this.memoryStorage.containsKey(t)&&(this.memoryStorage.removeItem(t),this.broadcast.postMessage({key:t,value:null,context:this.getContext(t)})),window.localStorage.removeItem(t)}getKeys(){return Object.keys(window.localStorage)}containsKey(t){return window.localStorage.hasOwnProperty(t)}clear(){this.memoryStorage.clear(),zi(this).forEach(r=>this.removeItem(r));const i=_n(this.clientId,this);i.idToken.forEach(r=>this.removeItem(r)),i.accessToken.forEach(r=>this.removeItem(r)),i.refreshToken.forEach(r=>this.removeItem(r)),this.getKeys().forEach(r=>{(r.startsWith(Ot)||r.indexOf(this.clientId)!==-1)&&this.removeItem(r)})}async importExistingCache(t){if(!this.encryptionCookie)return;let i=zi(this);i=await this.importArray(i,t),i.length?this.setItem(br(),JSON.stringify(i)):this.removeItem(br());const r=_n(this.clientId,this);r.idToken=await this.importArray(r.idToken,t),r.accessToken=await this.importArray(r.accessToken,t),r.refreshToken=await this.importArray(r.refreshToken,t),r.idToken.length||r.accessToken.length||r.refreshToken.length?this.setItem(wr(this.clientId),JSON.stringify(r)):this.removeItem(wr(this.clientId))}async getItemFromEncryptedCache(t,i){if(!this.encryptionCookie)return null;const r=this.getItem(t);if(!r)return null;let s;try{s=JSON.parse(r)}catch{return null}return Uc(s)?s.id!==this.encryptionCookie.id?(this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},i),null):(this.performanceClient.incrementFields({encryptedCacheCount:1},i),Q(uC,w.Decrypt,this.logger,this.performanceClient,i)(this.encryptionCookie.key,s.nonce,this.getContext(t),s.data)):(this.performanceClient.incrementFields({unencryptedCacheCount:1},i),r)}async importArray(t,i){const r=[],s=[];return t.forEach(l=>{const h=this.getItemFromEncryptedCache(l,i).then(f=>{f?(this.memoryStorage.setItem(l,f),r.push(l)):this.removeItem(l)});s.push(h)}),await Promise.all(s),r}getContext(t){let i="";return t.includes(this.clientId)&&(i=this.clientId),i}updateCache(t){this.logger.trace("Updating internal cache from broadcast event");const i=this.performanceClient.startMeasurement(w.LocalStorageUpdated);i.add({isBackground:!0});const{key:r,value:s,context:l}=t.data;if(!r){this.logger.error("Broadcast event missing key"),i.end({success:!1,errorCode:"noKey"});return}if(l&&l!==this.clientId){this.logger.trace(`Ignoring broadcast event from clientId: ${l}`),i.end({success:!1,errorCode:"contextMismatch"});return}s?(this.memoryStorage.setItem(r,s),this.logger.verbose("Updated item in internal cache")):(this.memoryStorage.removeItem(r),this.logger.verbose("Removed item from internal cache")),i.end({success:!0})}}class HO{constructor(){if(!window.sessionStorage)throw jf(Tl)}async initialize(){}getItem(t){return window.sessionStorage.getItem(t)}getUserData(t){return this.getItem(t)}setItem(t,i){window.sessionStorage.setItem(t,i)}async setUserData(t,i){this.setItem(t,i)}removeItem(t){window.sessionStorage.removeItem(t)}getKeys(){return Object.keys(window.sessionStorage)}containsKey(t){return window.sessionStorage.hasOwnProperty(t)}decryptData(){return Promise.resolve(null)}}const ye={INITIALIZE_START:"msal:initializeStart",INITIALIZE_END:"msal:initializeEnd",ACCOUNT_ADDED:"msal:accountAdded",ACCOUNT_REMOVED:"msal:accountRemoved",ACTIVE_ACCOUNT_CHANGED:"msal:activeAccountChanged",LOGIN_START:"msal:loginStart",LOGIN_SUCCESS:"msal:loginSuccess",LOGIN_FAILURE:"msal:loginFailure",ACQUIRE_TOKEN_START:"msal:acquireTokenStart",ACQUIRE_TOKEN_SUCCESS:"msal:acquireTokenSuccess",ACQUIRE_TOKEN_FAILURE:"msal:acquireTokenFailure",ACQUIRE_TOKEN_NETWORK_START:"msal:acquireTokenFromNetworkStart",SSO_SILENT_START:"msal:ssoSilentStart",SSO_SILENT_SUCCESS:"msal:ssoSilentSuccess",SSO_SILENT_FAILURE:"msal:ssoSilentFailure",ACQUIRE_TOKEN_BY_CODE_START:"msal:acquireTokenByCodeStart",ACQUIRE_TOKEN_BY_CODE_SUCCESS:"msal:acquireTokenByCodeSuccess",ACQUIRE_TOKEN_BY_CODE_FAILURE:"msal:acquireTokenByCodeFailure",HANDLE_REDIRECT_START:"msal:handleRedirectStart",HANDLE_REDIRECT_END:"msal:handleRedirectEnd",POPUP_OPENED:"msal:popupOpened",LOGOUT_START:"msal:logoutStart",LOGOUT_SUCCESS:"msal:logoutSuccess",LOGOUT_FAILURE:"msal:logoutFailure",LOGOUT_END:"msal:logoutEnd",RESTORE_FROM_BFCACHE:"msal:restoreFromBFCache",BROKER_CONNECTION_ESTABLISHED:"msal:brokerConnectionEstablished"};function Hi(c,t){const i=c.indexOf(t);i>-1&&c.splice(i,1)}class Ph extends Oh{constructor(t,i,r,s,l,h,f){super(t,r,s,l,f),this.cacheConfig=i,this.logger=s,this.internalStorage=new Al,this.browserStorage=SC(t,i.cacheLocation,s,l),this.temporaryCacheStorage=SC(t,i.temporaryCacheLocation,s,l),this.cookieStorage=new XT,this.eventHandler=h}async initialize(t){this.performanceClient.addFields({cacheLocation:this.cacheConfig.cacheLocation,cacheRetentionDays:this.cacheConfig.cacheRetentionDays},t),await this.browserStorage.initialize(t),await this.migrateExistingCache(t),this.trackVersionChanges(t)}async migrateExistingCache(t){let i=zi(this.browserStorage),r=_n(this.clientId,this.browserStorage);this.performanceClient.addFields({preMigrateAcntCount:i.length,preMigrateATCount:r.accessToken.length,preMigrateITCount:r.idToken.length,preMigrateRTCount:r.refreshToken.length},t);for(let l=0;l<Dc;l++){const h=l;await this.removeStaleAccounts(l,h,t)}for(let l=0;l<Nt;l++){const h=l;await this.migrateIdTokens(l,h,t)}const s=this.getKMSIValues();for(let l=0;l<Nt;l++)await this.migrateAccessTokens(l,s,t),await this.migrateRefreshTokens(l,s,t);i=zi(this.browserStorage),r=_n(this.clientId,this.browserStorage),this.performanceClient.addFields({postMigrateAcntCount:i.length,postMigrateATCount:r.accessToken.length,postMigrateITCount:r.idToken.length,postMigrateRTCount:r.refreshToken.length},t)}async updateOldEntry(t,i){const r=this.browserStorage.getItem(t),s=this.validateAndParseJson(r||"");if(!s)return this.browserStorage.removeItem(t),null;if(!s.lastUpdatedAt)s.lastUpdatedAt=Date.now().toString(),this.setItem(t,JSON.stringify(s),i);else if($v(s.lastUpdatedAt,this.cacheConfig.cacheRetentionDays))return this.browserStorage.removeItem(t),this.performanceClient.incrementFields({expiredCacheRemovedCount:1},i),null;const l=Uc(s)?await this.browserStorage.decryptData(t,s,i):s;return!l||!gl(l)?(this.performanceClient.incrementFields({invalidCacheCount:1},i),null):(Zv(l)||Wv(l))&&l.expiresOn&&Vc(l.expiresOn,$C)?(this.browserStorage.removeItem(t),this.performanceClient.incrementFields({expiredCacheRemovedCount:1},i),null):l}async removeStaleAccounts(t,i,r){const s=zi(this.browserStorage,t);if(s.length!==0){for(const l of[...s]){this.performanceClient.incrementFields({oldAcntCount:1},r);const h=this.browserStorage.getItem(l),f=this.validateAndParseJson(h||"");if(!f){Hi(s,l);continue}if(f.lastUpdatedAt)$v(f.lastUpdatedAt,this.cacheConfig.cacheRetentionDays)&&(await this.removeAccountOldSchema(l,f,i,r),Hi(s,l));else{f.lastUpdatedAt=Date.now().toString(),this.setItem(l,JSON.stringify(f),r);continue}}this.setAccountKeys(s,r,t)}}async removeAccountOldSchema(t,i,r,s){const h=(Uc(i)?await this.browserStorage.decryptData(t,i,s):i)?.homeAccountId;if(h){const f=this.getTokenKeys(r);[...f.idToken].filter(g=>g.includes(h)).forEach(g=>{this.browserStorage.removeItem(g),Hi(f.idToken,g)}),[...f.accessToken].filter(g=>g.includes(h)).forEach(g=>{this.browserStorage.removeItem(g),Hi(f.accessToken,g)}),[...f.refreshToken].filter(g=>g.includes(h)).forEach(g=>{this.browserStorage.removeItem(g),Hi(f.refreshToken,g)}),this.setTokenKeys(f,s,r)}this.performanceClient.incrementFields({expiredAcntRemovedCount:1},s),this.browserStorage.removeItem(t)}getKMSIValues(){const t={},i=this.getTokenKeys().idToken;for(const r of i){const s=this.browserStorage.getUserData(r);if(s){const l=JSON.parse(s),h=Hn(l.secret,Ht);h&&(t[l.homeAccountId]=Ln(h))}}return t}async migrateIdTokens(t,i,r){const s=_n(this.clientId,this.browserStorage,t);if(s.idToken.length===0)return;const l=_n(this.clientId,this.browserStorage,Nt),h=zi(this.browserStorage),f=zi(this.browserStorage,i);for(const g of[...s.idToken]){this.performanceClient.incrementFields({oldITCount:1},r);const p=await this.updateOldEntry(g,r);if(!p){Hi(s.idToken,g);continue}const S=h.find(ce=>ce.includes(p.homeAccountId)),T=f.find(ce=>ce.includes(p.homeAccountId));let A=null;if(S)A=this.getAccount(S,r);else if(T){const ce=this.browserStorage.getItem(T),ue=this.validateAndParseJson(ce||"");A=ue&&Uc(ue)?await this.browserStorage.decryptData(T,ue,r):ue}if(!A){this.performanceClient.incrementFields({skipITMigrateCount:1},r);continue}const K=Hn(p.secret,Ht),te=this.generateCredentialKey(p),ie=this.getIdTokenCredential(te,r),le=Object.keys(K).includes("signin_state"),se=ie&&Object.keys(Hn(ie.secret,Ht)||{}).includes("signin_state");if(!ie||p.lastUpdatedAt>ie.lastUpdatedAt&&(le||!se)){const ce=A.tenantProfiles||[],ue=lf(K)||A.realm;if(ue&&!ce.find(J=>J.tenantId===ue)){const J=cl(A.homeAccountId,A.localAccountId,ue,K);ce.push(J)}A.tenantProfiles=ce;const G=this.generateAccountKey(at.getAccountInfo(A)),oe=Ln(K);await this.setUserData(G,JSON.stringify(A),r,A.lastUpdatedAt,oe),h.includes(G)||h.push(G),await this.setUserData(te,JSON.stringify(p),r,p.lastUpdatedAt,oe),this.performanceClient.incrementFields({migratedITCount:1},r),l.idToken.push(te)}}this.setTokenKeys(s,r,t),this.setTokenKeys(l,r),this.setAccountKeys(h,r)}async migrateAccessTokens(t,i,r){const s=_n(this.clientId,this.browserStorage,t);if(s.accessToken.length===0)return;const l=_n(this.clientId,this.browserStorage,Nt);for(const h of[...s.accessToken]){this.performanceClient.incrementFields({oldATCount:1},r);const f=await this.updateOldEntry(h,r);if(!f){Hi(s.accessToken,h);continue}if(!Object.keys(i).includes(f.homeAccountId)){this.performanceClient.incrementFields({skipATMigrateCount:1},r);continue}const g=this.generateCredentialKey(f),p=i[f.homeAccountId];if(!l.accessToken.includes(g))await this.setUserData(g,JSON.stringify(f),r,f.lastUpdatedAt,p),this.performanceClient.incrementFields({migratedATCount:1},r),l.accessToken.push(g);else{const S=this.getAccessTokenCredential(g,r);(!S||f.lastUpdatedAt>S.lastUpdatedAt)&&(await this.setUserData(g,JSON.stringify(f),r,f.lastUpdatedAt,p),this.performanceClient.incrementFields({migratedATCount:1},r))}}this.setTokenKeys(s,r,t),this.setTokenKeys(l,r)}async migrateRefreshTokens(t,i,r){const s=_n(this.clientId,this.browserStorage,t);if(s.refreshToken.length===0)return;const l=_n(this.clientId,this.browserStorage,Nt);for(const h of[...s.refreshToken]){this.performanceClient.incrementFields({oldRTCount:1},r);const f=await this.updateOldEntry(h,r);if(!f){Hi(s.refreshToken,h);continue}if(!Object.keys(i).includes(f.homeAccountId)){this.performanceClient.incrementFields({skipRTMigrateCount:1},r);continue}const g=this.generateCredentialKey(f),p=i[f.homeAccountId];if(!l.refreshToken.includes(g))await this.setUserData(g,JSON.stringify(f),r,f.lastUpdatedAt,p),this.performanceClient.incrementFields({migratedRTCount:1},r),l.refreshToken.push(g);else{const S=this.getRefreshTokenCredential(g,r);(!S||f.lastUpdatedAt>S.lastUpdatedAt)&&(await this.setUserData(g,JSON.stringify(f),r,f.lastUpdatedAt,p),this.performanceClient.incrementFields({migratedRTCount:1},r))}}this.setTokenKeys(s,r,t),this.setTokenKeys(l,r)}trackVersionChanges(t){const i=this.browserStorage.getItem(mC);i&&(this.logger.info(`MSAL.js was last initialized by version: ${i}`),this.performanceClient.addFields({previousLibraryVersion:i},t)),i!==Ta&&this.setItem(mC,Ta,t)}validateAndParseJson(t){if(!t)return null;try{const i=JSON.parse(t);return i&&typeof i=="object"?i:null}catch{return null}}setItem(t,i,r){const s=new Array(Nt+1).fill(0),l=[],h=20;for(let f=0;f<=h;f++)try{if(this.browserStorage.setItem(t,i),f>0)for(let g=0;g<=Nt;g++){const p=s.slice(0,g).reduce((T,A)=>T+A,0);if(p>=f)break;const S=f>p+s[g]?p+s[g]:f;f>p&&s[g]>0&&this.removeAccessTokenKeys(l.slice(p,S),r,g)}break}catch(g){const p=Ih(g);if(p.errorCode===Gc&&f<h){if(!l.length)for(let S=0;S<=Nt;S++)if(t===wr(this.clientId,S)){const T=JSON.parse(i).accessToken;l.push(...T),s[S]=T.length}else{const T=this.getTokenKeys(S).accessToken;l.push(...T),s[S]=T.length}if(l.length<=f)throw p;this.removeAccessToken(l[f],r,!1)}else throw p}}async setUserData(t,i,r,s,l){const h=new Array(Nt+1).fill(0),f=[],g=20;for(let p=0;p<=g;p++)try{if(await Q(this.browserStorage.setUserData.bind(this.browserStorage),w.SetUserData,this.logger,this.performanceClient)(t,i,r,s,l),p>0)for(let S=0;S<=Nt;S++){const T=h.slice(0,S).reduce((K,te)=>K+te,0);if(T>=p)break;const A=p>T+h[S]?T+h[S]:p;p>T&&h[S]>0&&this.removeAccessTokenKeys(f.slice(T,A),r,S)}break}catch(S){const T=Ih(S);if(T.errorCode===Gc&&p<g){if(!f.length)for(let A=0;A<=Nt;A++){const K=this.getTokenKeys(A).accessToken;f.push(...K),h[A]=K.length}if(f.length<=p)throw T;this.removeAccessToken(f[p],r,!1)}else throw T}}getAccount(t,i){this.logger.trace("BrowserCacheManager.getAccount called");const r=this.browserStorage.getUserData(t);if(!r)return this.removeAccountKeyFromMap(t,i),null;const s=this.validateAndParseJson(r);return!s||!at.isAccountEntity(s)?null:Oh.toObject(new at,s)}async setAccount(t,i,r){this.logger.trace("BrowserCacheManager.setAccount called");const s=this.generateAccountKey(at.getAccountInfo(t)),l=Date.now().toString();t.lastUpdatedAt=l,await this.setUserData(s,JSON.stringify(t),i,l,r);const h=this.addAccountKeyToMap(s,i);this.performanceClient.addFields({kmsi:r},i),this.cacheConfig.cacheLocation===Tt.LocalStorage&&h&&this.eventHandler.emitEvent(ye.ACCOUNT_ADDED,void 0,at.getAccountInfo(t))}getAccountKeys(){return zi(this.browserStorage)}setAccountKeys(t,i,r=Dc){t.length===0?this.removeItem(br(r)):this.setItem(br(r),JSON.stringify(t),i)}addAccountKeyToMap(t,i){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii(`BrowserCacheManager.addAccountKeyToMap called with key: ${t}`);const r=this.getAccountKeys();return r.indexOf(t)===-1?(r.push(t),this.setItem(br(),JSON.stringify(r),i),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added"),!0):(this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map"),!1)}removeAccountKeyFromMap(t,i){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii(`BrowserCacheManager.removeAccountKeyFromMap called with key: ${t}`);const r=this.getAccountKeys(),s=r.indexOf(t);s>-1?(r.splice(s,1),this.setAccountKeys(r,i),this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")):this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")}removeAccount(t,i){const r=this.getActiveAccount(i);r?.homeAccountId===t.homeAccountId&&r?.environment===t.environment&&this.setActiveAccount(null,i),super.removeAccount(t,i),this.removeAccountKeyFromMap(this.generateAccountKey(t),i),this.browserStorage.getKeys().forEach(s=>{s.includes(t.homeAccountId)&&s.includes(t.environment)&&this.browserStorage.removeItem(s)}),this.cacheConfig.cacheLocation===Tt.LocalStorage&&this.eventHandler.emitEvent(ye.ACCOUNT_REMOVED,void 0,t)}removeIdToken(t,i){super.removeIdToken(t,i);const r=this.getTokenKeys(),s=r.idToken.indexOf(t);s>-1&&(this.logger.info("idToken removed from tokenKeys map"),r.idToken.splice(s,1),this.setTokenKeys(r,i))}removeAccessToken(t,i,r=!0){super.removeAccessToken(t,i),r&&this.removeAccessTokenKeys([t],i)}removeAccessTokenKeys(t,i,r=Nt){this.logger.trace("removeAccessTokenKey called");const s=this.getTokenKeys(r);let l=0;if(t.forEach(h=>{const f=s.accessToken.indexOf(h);f>-1&&(s.accessToken.splice(f,1),l++)}),l>0){this.logger.info(`removed ${l} accessToken keys from tokenKeys map`),this.setTokenKeys(s,i,r);return}}removeRefreshToken(t,i){super.removeRefreshToken(t,i);const r=this.getTokenKeys(),s=r.refreshToken.indexOf(t);s>-1&&(this.logger.info("refreshToken removed from tokenKeys map"),r.refreshToken.splice(s,1),this.setTokenKeys(r,i))}getTokenKeys(t=Nt){return _n(this.clientId,this.browserStorage,t)}setTokenKeys(t,i,r=Nt){if(t.idToken.length===0&&t.accessToken.length===0&&t.refreshToken.length===0){this.removeItem(wr(this.clientId,r));return}else this.setItem(wr(this.clientId,r),JSON.stringify(t),i)}getIdTokenCredential(t,i){const r=this.browserStorage.getUserData(t);if(!r)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeIdToken(t,i),null;const s=this.validateAndParseJson(r);return!s||!TI(s)?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),s)}async setIdTokenCredential(t,i,r){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");const s=this.generateCredentialKey(t),l=Date.now().toString();t.lastUpdatedAt=l,await this.setUserData(s,JSON.stringify(t),i,l,r);const h=this.getTokenKeys();h.idToken.indexOf(s)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),h.idToken.push(s),this.setTokenKeys(h,i))}getAccessTokenCredential(t,i){const r=this.browserStorage.getUserData(t);if(!r)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeAccessTokenKeys([t],i),null;const s=this.validateAndParseJson(r);return!s||!Zv(s)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),s)}async setAccessTokenCredential(t,i,r){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");const s=this.generateCredentialKey(t),l=Date.now().toString();t.lastUpdatedAt=l,await this.setUserData(s,JSON.stringify(t),i,l,r);const h=this.getTokenKeys(),f=h.accessToken.indexOf(s);f!==-1&&h.accessToken.splice(f,1),this.logger.trace(`access token ${f===-1?"added to":"updated in"} map`),h.accessToken.push(s),this.setTokenKeys(h,i)}getRefreshTokenCredential(t,i){const r=this.browserStorage.getUserData(t);if(!r)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeRefreshToken(t,i),null;const s=this.validateAndParseJson(r);return!s||!Wv(s)?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),s)}async setRefreshTokenCredential(t,i,r){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");const s=this.generateCredentialKey(t),l=Date.now().toString();t.lastUpdatedAt=l,await this.setUserData(s,JSON.stringify(t),i,l,r);const h=this.getTokenKeys();h.refreshToken.indexOf(s)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),h.refreshToken.push(s),this.setTokenKeys(h,i))}getAppMetadata(t){const i=this.browserStorage.getItem(t);if(!i)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;const r=this.validateAndParseJson(i);return!r||!bI(t,r)?(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),r)}setAppMetadata(t,i){this.logger.trace("BrowserCacheManager.setAppMetadata called");const r=_I(t);this.setItem(r,JSON.stringify(t),i)}getServerTelemetry(t){const i=this.browserStorage.getItem(t);if(!i)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;const r=this.validateAndParseJson(i);return!r||!AI(t,r)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),r)}setServerTelemetry(t,i,r){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.setItem(t,JSON.stringify(i),r)}getAuthorityMetadata(t){const i=this.internalStorage.getItem(t);if(!i)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;const r=this.validateAndParseJson(i);return r&&wI(t,r)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),r):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter(i=>this.isAuthorityMetadata(i))}setWrapperMetadata(t,i){this.internalStorage.setItem(bc.WRAPPER_SKU,t),this.internalStorage.setItem(bc.WRAPPER_VER,i)}getWrapperMetadata(){const t=this.internalStorage.getItem(bc.WRAPPER_SKU)||W.EMPTY_STRING,i=this.internalStorage.getItem(bc.WRAPPER_VER)||W.EMPTY_STRING;return[t,i]}setAuthorityMetadata(t,i){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(t,JSON.stringify(i))}getActiveAccount(t){const i=this.generateCacheKey(Lv.ACTIVE_ACCOUNT_FILTERS),r=this.browserStorage.getItem(i);if(!r)return this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters found"),null;const s=this.validateAndParseJson(r);return s?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoFilteredBy({homeAccountId:s.homeAccountId,localAccountId:s.localAccountId,tenantId:s.tenantId},t)):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null)}setActiveAccount(t,i){const r=this.generateCacheKey(Lv.ACTIVE_ACCOUNT_FILTERS);if(t){this.logger.verbose("setActiveAccount: Active account set");const s={homeAccountId:t.homeAccountId,localAccountId:t.localAccountId,tenantId:t.tenantId,lastUpdatedAt:Vt().toString()};this.setItem(r,JSON.stringify(s),i)}else this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(r);this.eventHandler.emitEvent(ye.ACTIVE_ACCOUNT_CHANGED)}getThrottlingCache(t){const i=this.browserStorage.getItem(t);if(!i)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;const r=this.validateAndParseJson(i);return!r||!EI(t,r)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),r)}setThrottlingCache(t,i,r){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.setItem(t,JSON.stringify(i),r)}getTemporaryCache(t,i){const r=i?this.generateCacheKey(t):t;if(this.cacheConfig.storeAuthStateInCookie){const l=this.cookieStorage.getItem(r);if(l)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),l}const s=this.temporaryCacheStorage.getItem(r);if(!s){if(this.cacheConfig.cacheLocation===Tt.LocalStorage){const l=this.browserStorage.getItem(r);if(l)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),l}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),s}setTemporaryCache(t,i,r){const s=r?this.generateCacheKey(t):t;this.temporaryCacheStorage.setItem(s,i),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.cookieStorage.setItem(s,i,void 0,this.cacheConfig.secureCookies))}removeItem(t){this.browserStorage.removeItem(t)}removeTemporaryItem(t){this.temporaryCacheStorage.removeItem(t),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.cookieStorage.removeItem(t))}getKeys(){return this.browserStorage.getKeys()}clear(t){this.removeAllAccounts(t),this.removeAppMetadata(t),this.temporaryCacheStorage.getKeys().forEach(i=>{(i.indexOf(Ot)!==-1||i.indexOf(this.clientId)!==-1)&&this.removeTemporaryItem(i)}),this.browserStorage.getKeys().forEach(i=>{(i.indexOf(Ot)!==-1||i.indexOf(this.clientId)!==-1)&&this.browserStorage.removeItem(i)}),this.internalStorage.clear()}clearTokensAndKeysWithClaims(t){this.performanceClient.addQueueMeasurement(w.ClearTokensAndKeysWithClaims,t);const i=this.getTokenKeys();let r=0;i.accessToken.forEach(s=>{const l=this.getAccessTokenCredential(s,t);l?.requestedClaimsHash&&s.includes(l.requestedClaimsHash.toLowerCase())&&(this.removeAccessToken(s,t),r++)}),r>0&&this.logger.warning(`${r} access tokens with claims in the cache keys have been removed from the cache.`)}generateCacheKey(t){return rn.startsWith(t,Ot)?t:`${Ot}.${this.clientId}.${t}`}generateCredentialKey(t){const i=t.credentialType===It.REFRESH_TOKEN&&t.familyId||t.clientId,r=t.tokenType&&t.tokenType.toLowerCase()!==Ke.BEARER.toLowerCase()?t.tokenType.toLowerCase():"";return[`${Ot}.${Nt}`,t.homeAccountId,t.environment,t.credentialType,i,t.realm||"",t.target||"",t.requestedClaimsHash||"",r].join(gC).toLowerCase()}generateAccountKey(t){const i=t.homeAccountId.split(".")[1];return[`${Ot}.${Dc}`,t.homeAccountId,t.environment,i||t.tenantId||""].join(gC).toLowerCase()}resetRequestCache(){this.logger.trace("BrowserCacheManager.resetRequestCache called"),this.removeTemporaryItem(this.generateCacheKey(dt.REQUEST_PARAMS)),this.removeTemporaryItem(this.generateCacheKey(dt.VERIFIER)),this.removeTemporaryItem(this.generateCacheKey(dt.ORIGIN_URI)),this.removeTemporaryItem(this.generateCacheKey(dt.URL_HASH)),this.removeTemporaryItem(this.generateCacheKey(dt.NATIVE_REQUEST)),this.setInteractionInProgress(!1)}cacheAuthorizeRequest(t,i){this.logger.trace("BrowserCacheManager.cacheAuthorizeRequest called");const r=$o(JSON.stringify(t));if(this.setTemporaryCache(dt.REQUEST_PARAMS,r,!0),i){const s=$o(i);this.setTemporaryCache(dt.VERIFIER,s,!0)}}getCachedRequest(){this.logger.trace("BrowserCacheManager.getCachedRequest called");const t=this.getTemporaryCache(dt.REQUEST_PARAMS,!0);if(!t)throw he(CT);const i=this.getTemporaryCache(dt.VERIFIER,!0);let r,s="";try{r=JSON.parse(Ht(t)),i&&(s=Ht(i))}catch(l){throw this.logger.errorPii(`Attempted to parse: ${t}`),this.logger.error(`Parsing cached token request threw with error: ${l}`),he(ST)}return[r,s]}getCachedNativeRequest(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");const t=this.getTemporaryCache(dt.NATIVE_REQUEST,!0);if(!t)return this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null;const i=this.validateAndParseJson(t);return i||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null)}isInteractionInProgress(t){const i=this.getInteractionInProgress()?.clientId;return t?i===this.clientId:!!i}getInteractionInProgress(){const t=`${Ot}.${dt.INTERACTION_STATUS_KEY}`,i=this.getTemporaryCache(t,!1);try{return i?JSON.parse(i):null}catch{return this.logger.error("Cannot parse interaction status. Removing temporary cache items and clearing url hash. Retrying interaction should fix the error"),this.removeTemporaryItem(t),this.resetRequestCache(),GT(window),null}}setInteractionInProgress(t,i=Bi.SIGNIN){const r=`${Ot}.${dt.INTERACTION_STATUS_KEY}`;if(t){if(this.getInteractionInProgress())throw he(dT);this.setTemporaryCache(r,JSON.stringify({clientId:this.clientId,type:i}),!1)}else!t&&this.getInteractionInProgress()?.clientId===this.clientId&&this.removeTemporaryItem(r)}async hydrateCache(t,i){const r=hl(t.account?.homeAccountId,t.account?.environment,t.idToken,this.clientId,t.tenantId);let s;i.claims&&(s=await this.cryptoImpl.hashString(i.claims));const l=fl(t.account?.homeAccountId,t.account.environment,t.accessToken,this.clientId,t.tenantId,t.scopes.join(" "),t.expiresOn?Jv(t.expiresOn):0,t.extExpiresOn?Jv(t.extExpiresOn):0,Ht,void 0,t.tokenType,void 0,i.sshKid,i.claims,s),h={idToken:r,accessToken:l};return this.saveCacheRecord(h,t.correlationId,Ln(Hn(t.idToken,Ht)))}async saveCacheRecord(t,i,r,s){try{await super.saveCacheRecord(t,i,r,s)}catch(l){if(l instanceof Er&&this.performanceClient&&i)try{const h=this.getTokenKeys();this.performanceClient.addFields({cacheRtCount:h.refreshToken.length,cacheIdCount:h.idToken.length,cacheAtCount:h.accessToken.length},i)}catch{}throw l}}}function SC(c,t,i,r){try{switch(t){case Tt.LocalStorage:return new PO(c,i,r);case Tt.SessionStorage:return new HO;case Tt.MemoryStorage:default:break}}catch(s){i.error(s)}return new Al}const LO=(c,t,i,r)=>{const s={cacheLocation:Tt.MemoryStorage,cacheRetentionDays:5,temporaryCacheLocation:Tt.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};return new Ph(c,s,Bc,t,i,r)};function zO(c,t,i,r,s){return c.verbose("getAllAccounts called"),i?t.getAllAccounts(s||{},r):[]}function BO(c,t,i,r){const s=i.getAccountInfoFilteredBy(c,r);return s?(t.verbose("getAccount: Account matching provided filter found, returning"),s):(t.verbose("getAccount: No matching account found, returning null"),null)}function KO(c,t,i,r){if(t.trace("getAccountByUsername called"),!c)return t.warning("getAccountByUsername: No username provided"),null;const s=i.getAccountInfoFilteredBy({username:c},r);return s?(t.verbose("getAccountByUsername: Account matching username found, returning"),t.verbosePii(`getAccountByUsername: Returning signed-in accounts matching username: ${c}`),s):(t.verbose("getAccountByUsername: No matching account found, returning null"),null)}function qO(c,t,i,r){if(t.trace("getAccountByHomeId called"),!c)return t.warning("getAccountByHomeId: No homeAccountId provided"),null;const s=i.getAccountInfoFilteredBy({homeAccountId:c},r);return s?(t.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),t.verbosePii(`getAccountByHomeId: Returning signed-in accounts matching homeAccountId: ${c}`),s):(t.verbose("getAccountByHomeId: No matching account found, returning null"),null)}function jO(c,t,i,r){if(t.trace("getAccountByLocalId called"),!c)return t.warning("getAccountByLocalId: No localAccountId provided"),null;const s=i.getAccountInfoFilteredBy({localAccountId:c},r);return s?(t.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),t.verbosePii(`getAccountByLocalId: Returning signed-in accounts matching localAccountId: ${c}`),s):(t.verbose("getAccountByLocalId: No matching account found, returning null"),null)}function GO(c,t,i){t.setActiveAccount(c,i)}function FO(c,t){return c.getActiveAccount(t)}const QO="msal.broadcast.event";class YO{constructor(t){this.eventCallbacks=new Map,this.logger=t||new Qi({}),typeof BroadcastChannel<"u"&&(this.broadcastChannel=new BroadcastChannel(QO)),this.invokeCrossTabCallbacks=this.invokeCrossTabCallbacks.bind(this)}addEventCallback(t,i,r){if(typeof window<"u"){const s=r||AO();return this.eventCallbacks.has(s)?(this.logger.error(`Event callback with id: ${s} is already registered. Please provide a unique id or remove the existing callback and try again.`),null):(this.eventCallbacks.set(s,[t,i||[]]),this.logger.verbose(`Event callback registered with id: ${s}`),s)}return null}removeEventCallback(t){this.eventCallbacks.delete(t),this.logger.verbose(`Event callback ${t} removed.`)}emitEvent(t,i,r,s){const l={eventType:t,interactionType:i||null,payload:r||null,error:s||null,timestamp:Date.now()};switch(t){case ye.ACCOUNT_ADDED:case ye.ACCOUNT_REMOVED:case ye.ACTIVE_ACCOUNT_CHANGED:this.broadcastChannel?.postMessage(l);break;default:this.invokeCallbacks(l);break}}invokeCallbacks(t){this.eventCallbacks.forEach(([i,r],s)=>{(r.length===0||r.includes(t.eventType))&&(this.logger.verbose(`Emitting event to callback ${s}: ${t.eventType}`),i.apply(null,[t]))})}invokeCrossTabCallbacks(t){const i=t.data;this.invokeCallbacks(i)}subscribeCrossTab(){this.broadcastChannel?.addEventListener("message",this.invokeCrossTabCallbacks)}unsubscribeCrossTab(){this.broadcastChannel?.removeEventListener("message",this.invokeCrossTabCallbacks)}}class JT{constructor(t,i,r,s,l,h,f,g,p){this.config=t,this.browserStorage=i,this.browserCrypto=r,this.networkClient=this.config.system.networkClient,this.eventHandler=l,this.navigationClient=h,this.platformAuthProvider=g,this.correlationId=p||On(),this.logger=s.clone(Qt.MSAL_SKU,Ta,this.correlationId),this.performanceClient=f}async clearCacheOnLogout(t,i){if(i)try{this.browserStorage.removeAccount(i,t),this.logger.verbose("Cleared cache items belonging to the account provided in the logout request.")}catch{this.logger.error("Account provided in logout request was not found. Local cache unchanged.")}else try{this.logger.verbose("No account provided in logout request, clearing all cache items.",this.correlationId),this.browserStorage.clear(t),await this.browserCrypto.clearKeystore()}catch{this.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged.")}}getRedirectUri(t){this.logger.verbose("getRedirectUri called");const i=t||this.config.auth.redirectUri;return Pe.getAbsoluteUrl(i,si())}initializeServerTelemetryManager(t,i){this.logger.verbose("initializeServerTelemetryManager called");const r={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:t,forceRefresh:i||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]};return new Xo(r,this.browserStorage)}async getDiscoveredAuthority(t){const{account:i}=t,r=t.requestExtraQueryParameters&&t.requestExtraQueryParameters.hasOwnProperty("instance_aware")?t.requestExtraQueryParameters.instance_aware:void 0;this.performanceClient.addQueueMeasurement(w.StandardInteractionClientGetDiscoveredAuthority,this.correlationId);const s={protocolMode:this.config.auth.protocolMode,OIDCOptions:this.config.auth.OIDCOptions,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},l=t.requestAuthority||this.config.auth.authority,h=r?.length?r==="true":this.config.auth.instanceAware,f=i&&h?this.config.auth.authority.replace(Pe.getDomainFromUrl(l),i.environment):l,g=Dt.generateAuthority(f,t.requestAzureCloudOptions||this.config.auth.azureCloudOptions),p=await Q($S,w.AuthorityFactoryCreateDiscoveredInstance,this.logger,this.performanceClient,this.correlationId)(g,this.config.system.networkClient,this.browserStorage,s,this.logger,this.correlationId,this.performanceClient);if(i&&!p.isAlias(i.environment))throw Xe(RS);return p}}async function Vf(c,t,i,r){i.addQueueMeasurement(w.InitializeBaseRequest,c.correlationId);const s=c.authority||t.auth.authority,l=[...c&&c.scopes||[]],h={...c,correlationId:c.correlationId,authority:s,scopes:l};if(!h.authenticationScheme)h.authenticationScheme=Ke.BEARER,r.verbose(`Authentication Scheme wasn't explicitly set in request, defaulting to "Bearer" request`);else{if(h.authenticationScheme===Ke.SSH){if(!c.sshJwk)throw Xe(sl);if(!c.sshKid)throw Xe(_S)}r.verbose(`Authentication Scheme set to "${h.authenticationScheme}" as configured in Auth request`)}return t.cache.claimsBasedCachingEnabled&&c.claims&&!rn.isEmptyObj(c.claims)&&(h.requestedClaimsHash=await qT(c.claims)),h}async function VO(c,t,i,r,s){r.addQueueMeasurement(w.InitializeSilentRequest,c.correlationId);const l=await Q(Vf,w.InitializeBaseRequest,s,r,c.correlationId)(c,i,r,s);return{...c,...l,account:t,forceRefresh:c.forceRefresh||!1}}function $T(c,t){let i;const r=c.httpMethod;if(t===Yt.EAR){if(i=r||va.POST,i!==va.POST)throw Xe(IS)}else i=r||va.GET;if(c.authorizePostBodyParameters&&i!==va.POST)throw Xe(OS);return i}class Pr extends JT{initializeLogoutRequest(t){this.logger.verbose("initializeLogoutRequest called",t?.correlationId);const i={correlationId:this.correlationId||On(),...t};if(t)if(t.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(t.account){const r=this.getLogoutHintFromIdTokenClaims(t.account);r&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),i.logoutHint=r)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set");else this.logger.verbose("logoutHint will not be set since no logout request was configured");return!t||t.postLogoutRedirectUri!==null?t&&t.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",i.correlationId),i.postLogoutRedirectUri=Pe.getAbsoluteUrl(t.postLogoutRedirectUri,si())):this.config.auth.postLogoutRedirectUri===null?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",i.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",i.correlationId),i.postLogoutRedirectUri=Pe.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,si())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",i.correlationId),i.postLogoutRedirectUri=Pe.getAbsoluteUrl(si(),si())):this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",i.correlationId),i}getLogoutHintFromIdTokenClaims(t){const i=t.idTokenClaims;if(i){if(i.login_hint)return i.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null}async createAuthCodeClient(t){this.performanceClient.addQueueMeasurement(w.StandardInteractionClientCreateAuthCodeClient,this.correlationId);const i=await Q(this.getClientConfiguration.bind(this),w.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)(t);return new tT(i,this.performanceClient)}async getClientConfiguration(t){const{serverTelemetryManager:i,requestAuthority:r,requestAzureCloudOptions:s,requestExtraQueryParameters:l,account:h}=t;this.performanceClient.addQueueMeasurement(w.StandardInteractionClientGetClientConfiguration,this.correlationId);const f=t.authority||await Q(this.getDiscoveredAuthority.bind(this),w.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,this.correlationId)({requestAuthority:r,requestAzureCloudOptions:s,requestExtraQueryParameters:l,account:h}),g=this.config.system.loggerOptions;return{authOptions:{clientId:this.config.auth.clientId,authority:f,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:this.config.auth.redirectUri},systemOptions:{tokenRenewalOffsetSeconds:this.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:g.loggerCallback,piiLoggingEnabled:g.piiLoggingEnabled,logLevel:g.logLevel,correlationId:this.correlationId},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.browserCrypto,networkInterface:this.networkClient,storageInterface:this.browserStorage,serverTelemetryManager:i,libraryInfo:{sku:Qt.MSAL_SKU,version:Ta,cpu:W.EMPTY_STRING,os:W.EMPTY_STRING},telemetry:this.config.telemetry}}async initializeAuthorizationRequest(t,i){this.performanceClient.addQueueMeasurement(w.StandardInteractionClientInitializeAuthorizationRequest,this.correlationId);const r=this.getRedirectUri(t.redirectUri),s={interactionType:i},l=Ur.setRequestState(this.browserCrypto,t&&t.state||W.EMPTY_STRING,s),f={...await Q(Vf,w.InitializeBaseRequest,this.logger,this.performanceClient,this.correlationId)({...t,correlationId:this.correlationId},this.config,this.performanceClient,this.logger),redirectUri:r,state:l,nonce:t.nonce||On(),responseMode:this.config.auth.OIDCOptions.serverResponseType},g={...f,httpMethod:$T(f,this.config.auth.protocolMode)};if(t.loginHint||t.sid)return g;const p=t.account||this.browserStorage.getActiveAccount(this.correlationId);return p&&(this.logger.verbose("Setting validated request account",this.correlationId),this.logger.verbosePii(`Setting validated request account: ${p.homeAccountId}`,this.correlationId),g.account=p),g}}function XO(c,t){if(!t)return null;try{return Ur.parseRequestState(c,t).libraryState.meta}catch{throw re(Or)}}function Fo(c,t,i){const r=qc(c);if(!r)throw MS(c)?(i.error(`A ${t} is present in the iframe but it does not contain known properties. It's likely that the ${t} has been replaced by code running on the redirectUri page.`),i.errorPii(`The ${t} detected is: ${c}`),he(cT)):(i.error(`The request has returned to the redirectUri but a ${t} is not present. It's likely that the ${t} has been removed or the page has been redirected by code running on the redirectUri page.`),he(sT));return r}function JO(c,t,i){if(!c.state)throw he(Nf);const r=XO(t,c.state);if(!r)throw he(lT);if(r.interactionType!==i)throw he(uT)}class ZT{constructor(t,i,r,s,l){this.authModule=t,this.browserStorage=i,this.authCodeRequest=r,this.logger=s,this.performanceClient=l}async handleCodeResponse(t,i){this.performanceClient.addQueueMeasurement(w.HandleCodeResponse,i.correlationId);let r;try{r=KI(t,i.state)}catch(s){throw s instanceof ba&&s.subError===Jo?he(Jo):s}return Q(this.handleCodeResponseFromServer.bind(this),w.HandleCodeResponseFromServer,this.logger,this.performanceClient,i.correlationId)(r,i)}async handleCodeResponseFromServer(t,i,r=!0){if(this.performanceClient.addQueueMeasurement(w.HandleCodeResponseFromServer,i.correlationId),this.logger.trace("InteractionHandler.handleCodeResponseFromServer called"),this.authCodeRequest.code=t.code,t.cloud_instance_host_name&&await Q(this.authModule.updateAuthority.bind(this.authModule),w.UpdateTokenEndpointAuthority,this.logger,this.performanceClient,i.correlationId)(t.cloud_instance_host_name,i.correlationId),r&&(t.nonce=i.nonce||void 0),t.state=i.state,t.client_info)this.authCodeRequest.clientInfo=t.client_info;else{const l=this.createCcsCredentials(i);l&&(this.authCodeRequest.ccsCredential=l)}return await Q(this.authModule.acquireToken.bind(this.authModule),w.AuthClientAcquireToken,this.logger,this.performanceClient,i.correlationId)(this.authCodeRequest,t)}createCcsCredentials(t){return t.account?{credential:t.account.homeAccountId,type:Rn.HOME_ACCOUNT_ID}:t.loginHint?{credential:t.loginHint,type:Rn.UPN}:null}}const $O="ContentError",ZO="PageException",WT="user_switch";const WO="USER_INTERACTION_REQUIRED",ek="USER_CANCEL",tk="NO_NETWORK",nk="DISABLED",ik="ACCOUNT_UNAVAILABLE",ak="UX_NOT_ALLOWED";const rk=-2147186943,ok={[WT]:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."};class xn extends Ye{constructor(t,i,r){super(t,i),Object.setPrototypeOf(this,xn.prototype),this.name="NativeAuthError",this.ext=r}}function Sr(c){if(c.ext&&c.ext.status&&c.ext.status===nk||c.ext&&c.ext.error&&c.ext.error===rk)return!0;switch(c.errorCode){case $O:case ZO:return!0;default:return!1}}function el(c,t,i){if(i&&i.status)switch(i.status){case ik:return Jc(ZS);case WO:return new In(c,t);case ek:return he(Jo);case tk:return he($c);case ak:return Jc(bf)}return new xn(c,ok[c]||t,i)}class eA extends Pr{async acquireToken(t){this.performanceClient.addQueueMeasurement(w.SilentCacheClientAcquireToken,t.correlationId);const i=this.initializeServerTelemetryManager(Le.acquireTokenSilent_silentFlow),r=await Q(this.getClientConfiguration.bind(this),w.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:i,requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,account:t.account}),s=new LI(r,this.performanceClient);this.logger.verbose("Silent auth client created");try{const h=(await Q(s.acquireCachedToken.bind(s),w.SilentFlowClientAcquireCachedToken,this.logger,this.performanceClient,t.correlationId)(t))[0];return this.performanceClient.addFields({fromCache:!0},t.correlationId),h}catch(l){throw l instanceof es&&l.errorCode===Df&&this.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),l}}logout(t){this.logger.verbose("logoutRedirect called");const i=this.initializeLogoutRequest(t);return this.clearCacheOnLogout(i.correlationId,i?.account)}}class xc extends JT{constructor(t,i,r,s,l,h,f,g,p,S,T,A){super(t,i,r,s,l,h,g,p,A),this.apiId=f,this.accountId=S,this.platformAuthProvider=p,this.nativeStorageManager=T,this.silentCacheClient=new eA(t,this.nativeStorageManager,r,s,l,h,g,p,A);const K=this.platformAuthProvider.getExtensionName();this.skus=Xo.makeExtraSkuString({libraryName:Qt.MSAL_SKU,libraryVersion:Ta,extensionName:K,extensionVersion:this.platformAuthProvider.getExtensionVersion()})}addRequestSKUs(t){t.extraParameters={...t.extraParameters,[eI]:this.skus}}async acquireToken(t,i){this.performanceClient.addQueueMeasurement(w.NativeInteractionClientAcquireToken,this.correlationId),this.logger.trace("NativeInteractionClient - acquireToken called.");const r=this.performanceClient.startMeasurement(w.NativeInteractionClientAcquireToken,this.correlationId),s=Vt(),l=this.initializeServerTelemetryManager(this.apiId);try{const h=await this.initializeNativeRequest(t);try{const g=await this.acquireTokensFromCache(this.accountId,h);return r.end({success:!0,isNativeBroker:!1,fromCache:!0}),g}catch(g){if(i===xt.AccessToken)throw this.logger.info("MSAL internal Cache does not contain tokens, return error as per cache policy"),r.end({success:!1,brokerErrorCode:"cache_request_failed"}),g;this.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call")}const f=await this.platformAuthProvider.sendMessage(h);return await this.handleNativeResponse(f,h,s).then(g=>(r.end({success:!0,isNativeBroker:!0,requestId:g.requestId}),l.clearNativeBrokerErrorCode(),g)).catch(g=>{throw r.end({success:!1,errorCode:g.errorCode,subErrorCode:g.subError}),g})}catch(h){throw h instanceof xn&&l.setNativeBrokerErrorCode(h.errorCode),r.end({success:!1}),h}}createSilentCacheRequest(t,i){return{authority:t.authority,correlationId:this.correlationId,scopes:pt.fromString(t.scope).asArray(),account:i,forceRefresh:!1}}async acquireTokensFromCache(t,i){if(!t)throw this.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),re(wh);const r=this.browserStorage.getBaseAccountInfo({nativeAccountId:t},this.correlationId);if(!r)throw re(wh);try{const s=this.createSilentCacheRequest(i,r),l=await this.silentCacheClient.acquireToken(s),h={...r,idTokenClaims:l?.idTokenClaims,idToken:l?.idToken};return{...l,account:h}}catch(s){throw s}}async acquireTokenRedirect(t,i){this.logger.trace("NativeInteractionClient - acquireTokenRedirect called.");const{...r}=t;delete r.onRedirectNavigate;const s=await this.initializeNativeRequest(r);try{await this.platformAuthProvider.sendMessage(s)}catch(f){if(f instanceof xn&&(this.initializeServerTelemetryManager(this.apiId).setNativeBrokerErrorCode(f.errorCode),Sr(f)))throw f}this.browserStorage.setTemporaryCache(dt.NATIVE_REQUEST,JSON.stringify(s),!0);const l={apiId:Le.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},h=this.config.auth.navigateToLoginRequestUrl?window.location.href:this.getRedirectUri(t.redirectUri);i.end({success:!0}),await this.navigationClient.navigateExternal(h,l)}async handleRedirectPromise(t,i){if(this.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const r=this.browserStorage.getCachedNativeRequest();if(!r)return this.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),t&&i&&t?.addFields({errorCode:"no_cached_request"},i),null;const{prompt:s,...l}=r;s&&this.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),this.browserStorage.removeItem(this.browserStorage.generateCacheKey(dt.NATIVE_REQUEST));const h=Vt();try{this.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker.");const f=await this.platformAuthProvider.sendMessage(l),g=await this.handleNativeResponse(f,l,h);return this.initializeServerTelemetryManager(this.apiId).clearNativeBrokerErrorCode(),t&&this.correlationId&&this.performanceClient.addFields({isNativeBroker:!0},this.correlationId),g}catch(f){throw f}}logout(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")}async handleNativeResponse(t,i,r){this.logger.trace("NativeInteractionClient - handleNativeResponse called.");const s=Hn(t.id_token,Ht),l=this.createHomeAccountIdentifier(t,s),h=this.browserStorage.getAccountInfoFilteredBy({nativeAccountId:i.accountId},this.correlationId)?.homeAccountId;if(i.extraParameters?.child_client_id&&t.account.id!==i.accountId)this.logger.info("handleNativeServerResponse: Double broker flow detected, ignoring accountId mismatch");else if(l!==h&&t.account.id!==i.accountId)throw el(WT);const f=await this.getDiscoveredAuthority({requestAuthority:i.authority}),g=wf(this.browserStorage,f,l,Ht,this.correlationId,s,t.client_info,void 0,s.tid,void 0,t.account.id,this.logger);t.expires_in=Number(t.expires_in);const p=await this.generateAuthenticationResult(t,i,s,g,f.canonicalAuthority,r);return await this.cacheAccount(g,this.correlationId,Ln(s)),await this.cacheNativeTokens(t,i,l,s,t.access_token,p.tenantId,r),p}createHomeAccountIdentifier(t,i){return at.generateHomeAccountId(t.client_info||W.EMPTY_STRING,bn.Default,this.logger,this.browserCrypto,i)}generateScopes(t,i){return i?pt.fromString(i):pt.fromString(t)}async generatePopAccessToken(t,i){if(i.tokenType===Ke.POP&&i.signPopToken){if(t.shr)return this.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),t.shr;const r=new kr(this.browserCrypto),s={resourceRequestMethod:i.resourceRequestMethod,resourceRequestUri:i.resourceRequestUri,shrClaims:i.shrClaims,shrNonce:i.shrNonce};if(!i.keyId)throw re(Wh);return r.signPopToken(t.access_token,i.keyId,s)}else return t.access_token}async generateAuthenticationResult(t,i,r,s,l,h){const f=this.addTelemetryFromNativeResponse(t.properties.MATS),g=this.generateScopes(i.scope,t.scope),p=t.account.properties||{},S=p.UID||r.oid||r.sub||W.EMPTY_STRING,T=p.TenantId||r.tid||W.EMPTY_STRING,A=cf(at.getAccountInfo(s),void 0,r,t.id_token);A.nativeAccountId!==t.account.id&&(A.nativeAccountId=t.account.id);const K=await this.generatePopAccessToken(t,i),te=i.tokenType===Ke.POP?Ke.POP:Ke.BEARER;return{authority:l,uniqueId:S,tenantId:T,scopes:g.asArray(),account:A,idToken:t.id_token,idTokenClaims:r,accessToken:K,fromCache:f?this.isResponseFromCache(f):!1,expiresOn:_r(h+t.expires_in),tokenType:te,correlationId:this.correlationId,state:t.state,fromNativeBroker:!0}}async cacheAccount(t,i,r){await this.browserStorage.setAccount(t,this.correlationId,r),this.browserStorage.removeAccountContext(at.getAccountInfo(t),i)}cacheNativeTokens(t,i,r,s,l,h,f){const g=hl(r,i.authority,t.id_token||"",i.clientId,s.tid||""),p=i.tokenType===Ke.POP?W.SHR_NONCE_VALIDITY:(typeof t.expires_in=="string"?parseInt(t.expires_in,10):t.expires_in)||0,S=f+p,T=this.generateScopes(t.scope,i.scope),A=fl(r,i.authority,l,i.clientId,s.tid||h,T.printScopes(),S,0,Ht,void 0,i.tokenType,void 0,i.keyId),K={idToken:g,accessToken:A};return this.nativeStorageManager.saveCacheRecord(K,this.correlationId,Ln(s),i.storeInCache)}getExpiresInValue(t,i){return t===Ke.POP?W.SHR_NONCE_VALIDITY:(typeof i=="string"?parseInt(i,10):i)||0}addTelemetryFromNativeResponse(t){const i=this.getMATSFromResponse(t);return i?(this.performanceClient.addFields({extensionId:this.platformAuthProvider.getExtensionId(),extensionVersion:this.platformAuthProvider.getExtensionVersion(),matsBrokerVersion:i.broker_version,matsAccountJoinOnStart:i.account_join_on_start,matsAccountJoinOnEnd:i.account_join_on_end,matsDeviceJoin:i.device_join,matsPromptBehavior:i.prompt_behavior,matsApiErrorCode:i.api_error_code,matsUiVisible:i.ui_visible,matsSilentCode:i.silent_code,matsSilentBiSubCode:i.silent_bi_sub_code,matsSilentMessage:i.silent_message,matsSilentStatus:i.silent_status,matsHttpStatus:i.http_status,matsHttpEventCount:i.http_event_count},this.correlationId),i):null}getMATSFromResponse(t){if(t)try{return JSON.parse(t)}catch{this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null}isResponseFromCache(t){return typeof t.is_cached>"u"?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!t.is_cached}async initializeNativeRequest(t){this.logger.trace("NativeInteractionClient - initializeNativeRequest called");const i=await this.getCanonicalAuthority(t),{scopes:r,...s}=t,l=new pt(r||[]);l.appendScopes(Dr);const h={...s,accountId:this.accountId,clientId:this.config.auth.clientId,authority:i.urlString,scope:l.printScopes(),redirectUri:this.getRedirectUri(t.redirectUri),prompt:this.getPrompt(t.prompt),correlationId:this.correlationId,tokenType:t.authenticationScheme,windowTitleSubstring:document.title,extraParameters:{...t.extraQueryParameters,...t.tokenQueryParameters},extendedExpiryToken:!1,keyId:t.popKid};if(h.signPopToken&&t.popKid)throw he(NT);if(this.handleExtraBrokerParams(h),h.extraParameters=h.extraParameters||{},h.extraParameters.telemetry=Cn.MATS_TELEMETRY,t.authenticationScheme===Ke.POP){const f={resourceRequestUri:t.resourceRequestUri,resourceRequestMethod:t.resourceRequestMethod,shrClaims:t.shrClaims,shrNonce:t.shrNonce},g=new kr(this.browserCrypto);let p;if(h.keyId)p=this.browserCrypto.base64UrlEncode(JSON.stringify({kid:h.keyId})),h.signPopToken=!1;else{const S=await Q(g.generateCnf.bind(g),w.PopTokenGenerateCnf,this.logger,this.performanceClient,this.correlationId)(f,this.logger);p=S.reqCnfString,h.keyId=S.kid,h.signPopToken=!0}h.reqCnf=p}return this.addRequestSKUs(h),h}async getCanonicalAuthority(t){const i=t.authority||this.config.auth.authority;t.account&&await this.getDiscoveredAuthority({requestAuthority:i,requestAzureCloudOptions:t.azureCloudOptions,account:t.account});const r=new Pe(i);return r.validateAsUri(),r}getPrompt(t){switch(this.apiId){case Le.ssoSilent:case Le.acquireTokenSilent_silentFlow:return this.logger.trace("initializeNativeRequest: silent request sets prompt to none"),kt.NONE}if(!t){this.logger.trace("initializeNativeRequest: prompt was not provided");return}switch(t){case kt.NONE:case kt.CONSENT:case kt.LOGIN:case kt.SELECT_ACCOUNT:return this.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),t;default:throw this.logger.trace(`initializeNativeRequest: prompt = ${t} is not compatible with native flow`),he(kT)}}handleExtraBrokerParams(t){const i=t.extraParameters&&t.extraParameters.hasOwnProperty(Fc)&&t.extraParameters.hasOwnProperty(Qc)&&t.extraParameters.hasOwnProperty(Ca);if(!t.embeddedClientId&&!i)return;let r="";const s=t.redirectUri;t.embeddedClientId?(t.redirectUri=this.config.auth.redirectUri,r=t.embeddedClientId):t.extraParameters&&(t.redirectUri=t.extraParameters[Qc],r=t.extraParameters[Ca]),t.extraParameters={child_client_id:r,child_redirect_uri:s},this.performanceClient?.addFields({embeddedClientId:r,embeddedRedirectUri:s},this.correlationId)}}async function Xf(c,t,i,r,s){const l=BI({...c.auth,authority:t},i,r,s);if(vf(l,{sku:Qt.MSAL_SKU,version:Ta,os:"",cpu:""}),c.auth.protocolMode!==Yt.OIDC&&Cf(l,c.telemetry.application),i.platformBroker&&(aI(l),s.addFields({isPlatformAuthorizeRequest:!0},i.correlationId),i.authenticationScheme===Ke.POP)){const h=new li(r,s),f=new kr(h);let g;i.popKid?g=h.encodeKid(i.popKid):g=(await Q(f.generateCnf.bind(f),w.PopTokenGenerateCnf,r,s,i.correlationId)(i,r)).reqCnfString,Af(l,g)}return ll(l,i.correlationId,s),l}async function Jf(c,t,i,r,s){if(!i.codeChallenge)throw Xe(rf);const l=await Q(Xf,w.GetStandardParams,r,s,i.correlationId)(c,t,i,r,s);return hf(l,Qh.CODE),Sf(l,i.codeChallenge,W.S256_CODE_CHALLENGE_METHOD),Gi(l,i.extraQueryParameters||{}),Rf(t,l,c.auth.encodeExtraQueryParams,i.extraQueryParameters)}async function $f(c,t,i,r,s,l){if(!r.earJwk)throw he(Mf);const h=await Xf(t,i,r,s,l);hf(h,Qh.IDTOKEN_TOKEN_REFRESHTOKEN),mI(h,r.earJwk),Sf(h,r.codeChallenge,W.S256_CODE_CHALLENGE_METHOD);const f=new Map;Gi(f,r.extraQueryParameters||{});const g=Rf(i,f,t.auth.encodeExtraQueryParams,r.extraQueryParameters);return tA(c,g,h)}async function Zf(c,t,i,r,s,l){const h=await Xf(t,i,r,s,l);hf(h,Qh.CODE),Sf(h,r.codeChallenge,r.codeChallengeMethod||W.S256_CODE_CHALLENGE_METHOD),pI(h,r.authorizePostBodyParameters||{});const f=new Map;Gi(f,r.extraQueryParameters||{});const g=Rf(i,f,t.auth.encodeExtraQueryParams,r.extraQueryParameters);return tA(c,g,h)}function tA(c,t,i){const r=c.createElement("form");return r.method="post",r.action=t,i.forEach((s,l)=>{const h=c.createElement("input");h.hidden=!0,h.name=l,h.value=s,r.appendChild(h)}),c.body.appendChild(r),r}async function nA(c,t,i,r,s,l,h,f,g,p){if(f.verbose("Account id found, calling WAM for token"),!p)throw he(xf);const S=new li(f,g),T=new xc(r,s,S,f,h,r.system.navigationClient,i,g,p,t,l,c.correlationId),{userRequestState:A}=Ur.parseRequestState(S,c.state);return Q(T.acquireToken.bind(T),w.NativeInteractionClientAcquireToken,f,g,c.correlationId)({...c,state:A,prompt:void 0})}async function Rr(c,t,i,r,s,l,h,f,g,p,S,T){if(Un.removeThrottle(h,s.auth.clientId,c),t.accountId)return Q(nA,w.HandleResponsePlatformBroker,p,S,c.correlationId)(c,t.accountId,r,s,h,f,g,p,S,T);const A={...c,code:t.code||"",codeVerifier:i},K=new ZT(l,h,A,p,S);return await Q(K.handleCodeResponse.bind(K),w.HandleCodeResponse,p,S,c.correlationId)(t,c)}async function Wf(c,t,i,r,s,l,h,f,g,p,S){if(Un.removeThrottle(l,r.auth.clientId,c),nT(t,c.state),!t.ear_jwe)throw he(oT);if(!c.earJwk)throw he(Mf);const T=JSON.parse(await Q(gO,w.DecryptEarResponse,g,p,c.correlationId)(c.earJwk,t.ear_jwe));if(T.accountId)return Q(nA,w.HandleResponsePlatformBroker,g,p,c.correlationId)(c,T.accountId,i,r,l,h,f,g,p,S);const A=new Sa(r.auth.clientId,l,new li(g,p),g,null,null,p);A.validateTokenResponse(T);const K={code:"",state:c.state,nonce:c.nonce,client_info:T.client_info,cloud_graph_host_name:T.cloud_graph_host_name,cloud_instance_host_name:T.cloud_instance_host_name,cloud_instance_name:T.cloud_instance_name,msgraph_host:T.msgraph_host};return await Q(A.handleServerTokenResponse.bind(A),w.HandleServerTokenResponse,g,p,c.correlationId)(T,s,Vt(),c,K,void 0,void 0,void 0,void 0)}const sk=32;async function Ea(c,t,i){c.addQueueMeasurement(w.GeneratePkceCodes,i);const r=on(ck,w.GenerateCodeVerifier,t,c,i)(c,t,i),s=await Q(lk,w.GenerateCodeChallengeFromVerifier,t,c,i)(r,c,t,i);return{verifier:r,challenge:s}}function ck(c,t,i){try{const r=new Uint8Array(sk);return on(lO,w.GetRandomValues,t,c,i)(r),Yi(r)}catch{throw he(kf)}}async function lk(c,t,i,r){t.addQueueMeasurement(w.GenerateCodeChallengeFromVerifier,r);try{const s=await Q(zT,w.Sha256Digest,i,t,r)(c,t,r);return Yi(new Uint8Array(s))}catch{throw he(kf)}}class tl{constructor(t,i,r,s){this.logger=t,this.handshakeTimeoutMs=i,this.extensionId=s,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=r,this.handshakeEvent=r.startMeasurement(w.NativeMessageHandlerHandshake),this.platformAuthType=Cn.PLATFORM_EXTENSION_PROVIDER}async sendMessage(t){this.logger.trace(this.platformAuthType+" - sendMessage called.");const i={method:Ho.GetToken,request:t},r={channel:Cn.CHANNEL_ID,extensionId:this.extensionId,responseId:On(),body:i};this.logger.trace(this.platformAuthType+" - Sending request to browser extension"),this.logger.tracePii(this.platformAuthType+` - Sending request to browser extension: ${JSON.stringify(r)}`),this.messageChannel.port1.postMessage(r);const s=await new Promise((h,f)=>{this.resolvers.set(r.responseId,{resolve:h,reject:f})});return this.validatePlatformBrokerResponse(s)}static async createProvider(t,i,r){t.trace("PlatformAuthExtensionHandler - createProvider called.");try{const s=new tl(t,i,r,Cn.PREFERRED_EXTENSION_ID);return await s.sendHandshakeRequest(),s}catch{const l=new tl(t,i,r);return await l.sendHandshakeRequest(),l}}async sendHandshakeRequest(){this.logger.trace(this.platformAuthType+" - sendHandshakeRequest called."),window.addEventListener("message",this.windowListener,!1);const t={channel:Cn.CHANNEL_ID,extensionId:this.extensionId,responseId:On(),body:{method:Ho.HandshakeRequest}};return this.handshakeEvent.add({extensionId:this.extensionId,extensionHandshakeTimeoutMs:this.handshakeTimeoutMs}),this.messageChannel.port1.onmessage=i=>{this.onChannelMessage(i)},window.postMessage(t,window.origin,[this.messageChannel.port2]),new Promise((i,r)=>{this.handshakeResolvers.set(t.responseId,{resolve:i,reject:r}),this.timeoutId=window.setTimeout(()=>{window.removeEventListener("message",this.windowListener,!1),this.messageChannel.port1.close(),this.messageChannel.port2.close(),this.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),r(he(IT)),this.handshakeResolvers.delete(t.responseId)},this.handshakeTimeoutMs)})}onWindowMessage(t){if(this.logger.trace(this.platformAuthType+" - onWindowMessage called"),t.source!==window)return;const i=t.data;if(!(!i.channel||i.channel!==Cn.CHANNEL_ID)&&!(i.extensionId&&i.extensionId!==this.extensionId)&&i.body.method===Ho.HandshakeRequest){const r=this.handshakeResolvers.get(i.responseId);if(!r){this.logger.trace(this.platformAuthType+`.onWindowMessage - resolver can't be found for request ${i.responseId}`);return}this.logger.verbose(i.extensionId?`Extension with id: ${i.extensionId} not installed`:"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),r.reject(he(OT))}}onChannelMessage(t){this.logger.trace(this.platformAuthType+" - onChannelMessage called.");const i=t.data,r=this.resolvers.get(i.responseId),s=this.handshakeResolvers.get(i.responseId);try{const l=i.body.method;if(l===Ho.Response){if(!r)return;const h=i.body.response;if(this.logger.trace(this.platformAuthType+" - Received response from browser extension"),this.logger.tracePii(this.platformAuthType+` - Received response from browser extension: ${JSON.stringify(h)}`),h.status!=="Success")r.reject(el(h.code,h.description,h.ext));else if(h.result)h.result.code&&h.result.description?r.reject(el(h.result.code,h.result.description,h.result.ext)):r.resolve(h.result);else throw Eh(zc,"Event does not contain result.");this.resolvers.delete(i.responseId)}else if(l===Ho.HandshakeResponse){if(!s){this.logger.trace(this.platformAuthType+`.onChannelMessage - resolver can't be found for request ${i.responseId}`);return}clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=i.extensionId,this.extensionVersion=i.body.version,this.logger.verbose(this.platformAuthType+` - Received HandshakeResponse from extension: ${this.extensionId}`),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),s.resolve(),this.handshakeResolvers.delete(i.responseId)}}catch(l){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii(`Error parsing response from WAM Extension: ${l}`),this.logger.errorPii(`Unable to parse ${t}`),r?r.reject(l):s&&s.reject(l)}}validatePlatformBrokerResponse(t){if(t.hasOwnProperty("access_token")&&t.hasOwnProperty("id_token")&&t.hasOwnProperty("client_info")&&t.hasOwnProperty("account")&&t.hasOwnProperty("scope")&&t.hasOwnProperty("expires_in"))return t;throw Eh(zc,"Response missing expected properties.")}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}getExtensionName(){return this.getExtensionId()===Cn.PREFERRED_EXTENSION_ID?"chrome":this.getExtensionId()?.length?"unknown":void 0}}class eg{constructor(t,i,r){this.logger=t,this.performanceClient=i,this.correlationId=r,this.platformAuthType=Cn.PLATFORM_DOM_PROVIDER}static async createProvider(t,i,r){if(t.trace("PlatformAuthDOMHandler: createProvider called"),window.navigator?.platformAuthentication&&(await window.navigator.platformAuthentication.getSupportedContracts(Cn.MICROSOFT_ENTRA_BROKERID))?.includes(Cn.PLATFORM_DOM_APIS))return t.trace("Platform auth api available in DOM"),new eg(t,i,r)}getExtensionId(){return Cn.MICROSOFT_ENTRA_BROKERID}getExtensionVersion(){return""}getExtensionName(){return Cn.DOM_API_NAME}async sendMessage(t){this.logger.trace(this.platformAuthType+" - Sending request to browser DOM API");try{const i=this.initializePlatformDOMRequest(t),r=await window.navigator.platformAuthentication.executeGetToken(i);return this.validatePlatformBrokerResponse(r)}catch(i){throw this.logger.error(this.platformAuthType+" - executeGetToken DOM API error"),i}}initializePlatformDOMRequest(t){this.logger.trace(this.platformAuthType+" - initializeNativeDOMRequest called");const{accountId:i,clientId:r,authority:s,scope:l,redirectUri:h,correlationId:f,state:g,storeInCache:p,embeddedClientId:S,extraParameters:T,...A}=t,K=this.getDOMExtraParams(A);return{accountId:i,brokerId:this.getExtensionId(),authority:s,clientId:r,correlationId:f||this.correlationId,extraParameters:{...T,...K},isSecurityTokenService:!1,redirectUri:h,scope:l,state:g,storeInCache:p,embeddedClientId:S}}validatePlatformBrokerResponse(t){if(t.hasOwnProperty("isSuccess")){if(t.hasOwnProperty("accessToken")&&t.hasOwnProperty("idToken")&&t.hasOwnProperty("clientInfo")&&t.hasOwnProperty("account")&&t.hasOwnProperty("scopes")&&t.hasOwnProperty("expiresIn"))return this.logger.trace(this.platformAuthType+" - platform broker returned successful and valid response"),this.convertToPlatformBrokerResponse(t);if(t.hasOwnProperty("error")){const i=t;if(i.isSuccess===!1&&i.error&&i.error.code)throw this.logger.trace(this.platformAuthType+" - platform broker returned error response"),el(i.error.code,i.error.description,{error:parseInt(i.error.errorCode),protocol_error:i.error.protocolError,status:i.error.status,properties:i.error.properties})}}throw Eh(zc,"Response missing expected properties.")}convertToPlatformBrokerResponse(t){return this.logger.trace(this.platformAuthType+" - convertToNativeResponse called"),{access_token:t.accessToken,id_token:t.idToken,client_info:t.clientInfo,account:t.account,expires_in:t.expiresIn,scope:t.scopes,state:t.state||"",properties:t.properties||{},extendedLifetimeToken:t.extendedLifetimeToken??!1,shr:t.proofOfPossessionPayload}}getDOMExtraParams(t){return{...Object.entries(t).reduce((s,[l,h])=>(s[l]=String(h),s),{})}}}async function uk(c,t,i,r){c.trace("getPlatformAuthProvider called",i);const s=dk();c.trace("Has client allowed platform auth via DOM API: "+s);let l;try{s&&(l=await eg.createProvider(c,t,i)),l||(c.trace("Platform auth via DOM API not available, checking for extension"),l=await tl.createProvider(c,r||VT,t))}catch(h){c.trace("Platform auth not available",h)}return l}function dk(){let c;try{return c=window[Tt.SessionStorage],c?.getItem(kO)==="true"}catch{return!1}}function Zo(c,t,i,r){if(t.trace("isPlatformAuthAllowed called"),!c.system.allowPlatformBroker)return t.trace("isPlatformAuthAllowed: allowPlatformBroker is not enabled, returning false"),!1;if(!i)return t.trace("isPlatformAuthAllowed: Platform auth provider is not initialized, returning false"),!1;if(r)switch(r){case Ke.BEARER:case Ke.POP:return t.trace("isPlatformAuthAllowed: authenticationScheme is supported, returning true"),!0;default:return t.trace("isPlatformAuthAllowed: authenticationScheme is not supported, returning false"),!1}return!0}class hk extends Pr{constructor(t,i,r,s,l,h,f,g,p,S){super(t,i,r,s,l,h,f,p,S),this.unloadWindow=this.unloadWindow.bind(this),this.nativeStorage=g,this.eventHandler=l}acquireToken(t,i){let r;try{if(r={popupName:this.generatePopupName(t.scopes||Dr,t.authority||this.config.auth.authority),popupWindowAttributes:t.popupWindowAttributes||{},popupWindowParent:t.popupWindowParent??window},this.performanceClient.addFields({isAsyncPopup:this.config.system.asyncPopups},this.correlationId),this.config.system.asyncPopups)return this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(t,r,i);{const l={...t,httpMethod:$T(t,this.config.auth.protocolMode)};return this.logger.verbose("asyncPopup set to false, opening popup before acquiring token"),r.popup=this.openSizedPopup("about:blank",r),this.acquireTokenPopupAsync(l,r,i)}}catch(s){return Promise.reject(s)}}logout(t){try{this.logger.verbose("logoutPopup called");const i=this.initializeLogoutRequest(t),r={popupName:this.generateLogoutPopupName(i),popupWindowAttributes:t?.popupWindowAttributes||{},popupWindowParent:t?.popupWindowParent??window},s=t&&t.authority,l=t&&t.mainWindowRedirectUri;return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(i,r,s,l)):(this.logger.verbose("asyncPopup set to false, opening popup"),r.popup=this.openSizedPopup("about:blank",r),this.logoutPopupAsync(i,r,s,l))}catch(i){return Promise.reject(i)}}async acquireTokenPopupAsync(t,i,r){this.logger.verbose("acquireTokenPopupAsync called");const s=await Q(this.initializeAuthorizationRequest.bind(this),w.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(t,Se.Popup);i.popup&&YT(s.authority);const l=Zo(this.config,this.logger,this.platformAuthProvider,t.authenticationScheme);return s.platformBroker=l,this.config.auth.protocolMode===Yt.EAR?this.executeEarFlow(s,i,r):this.executeCodeFlow(s,i,r)}async executeCodeFlow(t,i,r){const s=t.correlationId,l=this.initializeServerTelemetryManager(Le.acquireTokenPopup),h=r||await Q(Ea,w.GeneratePkceCodes,this.logger,this.performanceClient,s)(this.performanceClient,this.logger,s),f={...t,codeChallenge:h.challenge};try{const g=await Q(this.createAuthCodeClient.bind(this),w.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,s)({serverTelemetryManager:l,requestAuthority:f.authority,requestAzureCloudOptions:f.azureCloudOptions,requestExtraQueryParameters:f.extraQueryParameters,account:f.account});if(f.httpMethod===va.POST)return await this.executeCodeFlowWithPost(f,i,g,h.verifier);{const p=await Q(Jf,w.GetAuthCodeUrl,this.logger,this.performanceClient,s)(this.config,g.authority,f,this.logger,this.performanceClient),S=this.initiateAuthRequest(p,i);this.eventHandler.emitEvent(ye.POPUP_OPENED,Se.Popup,{popupWindow:S},null);const T=await this.monitorPopupForHash(S,i.popupWindowParent),A=on(Fo,w.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(T,this.config.auth.OIDCOptions.serverResponseType,this.logger);return await Q(Rr,w.HandleResponseCode,this.logger,this.performanceClient,s)(t,A,h.verifier,Le.acquireTokenPopup,this.config,g,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}}catch(g){throw i.popup?.close(),g instanceof Ye&&(g.setCorrelationId(this.correlationId),l.cacheFailedRequest(g)),g}}async executeEarFlow(t,i,r){const s=t.correlationId,l=await Q(this.getDiscoveredAuthority.bind(this),w.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,s)({requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account}),h=await Q(Bf,w.GenerateEarKey,this.logger,this.performanceClient,s)(),f=r||await Q(Ea,w.GeneratePkceCodes,this.logger,this.performanceClient,s)(this.performanceClient,this.logger,s),g={...t,earJwk:h,codeChallenge:f.challenge},p=i.popup||this.openPopup("about:blank",i);(await $f(p.document,this.config,l,g,this.logger,this.performanceClient)).submit();const T=await Q(this.monitorPopupForHash.bind(this),w.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,s)(p,i.popupWindowParent),A=on(Fo,w.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(T,this.config.auth.OIDCOptions.serverResponseType,this.logger);if(!A.ear_jwe&&A.code){const K=await Q(this.createAuthCodeClient.bind(this),w.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,s)({serverTelemetryManager:this.initializeServerTelemetryManager(Le.acquireTokenPopup),requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account,authority:l});return Q(Rr,w.HandleResponseCode,this.logger,this.performanceClient,s)(g,A,f.verifier,Le.acquireTokenPopup,this.config,K,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}else return Q(Wf,w.HandleResponseEar,this.logger,this.performanceClient,s)(g,A,Le.acquireTokenPopup,this.config,l,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async executeCodeFlowWithPost(t,i,r,s){const l=t.correlationId,h=await Q(this.getDiscoveredAuthority.bind(this),w.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,l)({requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account}),f=i.popup||this.openPopup("about:blank",i);(await Zf(f.document,this.config,h,t,this.logger,this.performanceClient)).submit();const p=await Q(this.monitorPopupForHash.bind(this),w.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,l)(f,i.popupWindowParent),S=on(Fo,w.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(p,this.config.auth.OIDCOptions.serverResponseType,this.logger);return Q(Rr,w.HandleResponseCode,this.logger,this.performanceClient,l)(t,S,s,Le.acquireTokenPopup,this.config,r,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async logoutPopupAsync(t,i,r,s){this.logger.verbose("logoutPopupAsync called"),this.eventHandler.emitEvent(ye.LOGOUT_START,Se.Popup,t);const l=this.initializeServerTelemetryManager(Le.logoutPopup);try{await this.clearCacheOnLogout(this.correlationId,t.account);const h=await Q(this.createAuthCodeClient.bind(this),w.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:l,requestAuthority:r,account:t.account||void 0});try{h.authority.endSessionEndpoint}catch{if(t.account?.homeAccountId&&t.postLogoutRedirectUri&&h.authority.protocolMode===Yt.OIDC){if(this.eventHandler.emitEvent(ye.LOGOUT_SUCCESS,Se.Popup,t),s){const p={apiId:Le.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},S=Pe.getAbsoluteUrl(s,si());await this.navigationClient.navigateInternal(S,p)}i.popup?.close();return}}const f=h.getLogoutUri(t);this.eventHandler.emitEvent(ye.LOGOUT_SUCCESS,Se.Popup,t);const g=this.openPopup(f,i);if(this.eventHandler.emitEvent(ye.POPUP_OPENED,Se.Popup,{popupWindow:g},null),await this.monitorPopupForHash(g,i.popupWindowParent).catch(()=>{}),s){const p={apiId:Le.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},S=Pe.getAbsoluteUrl(s,si());this.logger.verbose("Redirecting main window to url specified in the request"),this.logger.verbosePii(`Redirecting main window to: ${S}`),await this.navigationClient.navigateInternal(S,p)}else this.logger.verbose("No main window navigation requested")}catch(h){throw i.popup?.close(),h instanceof Ye&&(h.setCorrelationId(this.correlationId),l.cacheFailedRequest(h)),this.eventHandler.emitEvent(ye.LOGOUT_FAILURE,Se.Popup,null,h),this.eventHandler.emitEvent(ye.LOGOUT_END,Se.Popup),h}this.eventHandler.emitEvent(ye.LOGOUT_END,Se.Popup)}initiateAuthRequest(t,i){if(t)return this.logger.infoPii(`Navigate to: ${t}`),this.openPopup(t,i);throw this.logger.error("Navigate url is empty"),he(vl)}monitorPopupForHash(t,i){return new Promise((r,s)=>{this.logger.verbose("PopupHandler.monitorPopupForHash - polling started");const l=setInterval(()=>{if(t.closed){this.logger.error("PopupHandler.monitorPopupForHash - window closed"),clearInterval(l),s(he(Jo));return}let h="";try{h=t.location.href}catch{}if(!h||h==="about:blank")return;clearInterval(l);let f="";const g=this.config.auth.OIDCOptions.serverResponseType;t&&(g===ol.QUERY?f=t.location.search:f=t.location.hash),this.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),r(f)},this.config.system.pollIntervalMilliseconds)}).finally(()=>{this.cleanPopup(t,i)})}openPopup(t,i){try{let r;if(i.popup?(r=i.popup,this.logger.verbosePii(`Navigating popup window to: ${t}`),r.location.assign(t)):typeof i.popup>"u"&&(this.logger.verbosePii(`Opening popup window to: ${t}`),r=this.openSizedPopup(t,i)),!r)throw he(fT);return r.focus&&r.focus(),this.currentWindow=r,i.popupWindowParent.addEventListener("beforeunload",this.unloadWindow),r}catch(r){throw this.logger.error("error opening popup "+r.message),he(hT)}}openSizedPopup(t,{popupName:i,popupWindowAttributes:r,popupWindowParent:s}){const l=s.screenLeft?s.screenLeft:s.screenX,h=s.screenTop?s.screenTop:s.screenY,f=s.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,g=s.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;let p=r.popupSize?.width,S=r.popupSize?.height,T=r.popupPosition?.top,A=r.popupPosition?.left;return(!p||p<0||p>f)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),p=Qt.POPUP_WIDTH),(!S||S<0||S>g)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),S=Qt.POPUP_HEIGHT),(!T||T<0||T>g)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),T=Math.max(0,g/2-Qt.POPUP_HEIGHT/2+h)),(!A||A<0||A>f)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),A=Math.max(0,f/2-Qt.POPUP_WIDTH/2+l)),s.open(t,i,`width=${p}, height=${S}, top=${T}, left=${A}, scrollbars=yes`)}unloadWindow(t){this.currentWindow&&this.currentWindow.close(),t.preventDefault()}cleanPopup(t,i){t.close(),i.removeEventListener("beforeunload",this.unloadWindow)}generatePopupName(t,i){return`${Qt.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${t.join("-")}.${i}.${this.correlationId}`}generateLogoutPopupName(t){const i=t.account&&t.account.homeAccountId;return`${Qt.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${i}.${this.correlationId}`}}function fk(){if(typeof window>"u"||typeof window.performance>"u"||typeof window.performance.getEntriesByType!="function")return;const c=window.performance.getEntriesByType("navigation");return(c.length?c[0]:void 0)?.type}class gk extends Pr{constructor(t,i,r,s,l,h,f,g,p,S){super(t,i,r,s,l,h,f,p,S),this.nativeStorage=g}async acquireToken(t){const i=await Q(this.initializeAuthorizationRequest.bind(this),w.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(t,Se.Redirect);i.platformBroker=Zo(this.config,this.logger,this.platformAuthProvider,t.authenticationScheme);const r=l=>{l.persisted&&(this.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),this.browserStorage.resetRequestCache(),this.eventHandler.emitEvent(ye.RESTORE_FROM_BFCACHE,Se.Redirect))},s=this.getRedirectStartPage(t.redirectStartPage);this.logger.verbosePii(`Redirect start page: ${s}`),this.browserStorage.setTemporaryCache(dt.ORIGIN_URI,s,!0),window.addEventListener("pageshow",r);try{this.config.auth.protocolMode===Yt.EAR?await this.executeEarFlow(i):await this.executeCodeFlow(i,t.onRedirectNavigate)}catch(l){throw l instanceof Ye&&l.setCorrelationId(this.correlationId),window.removeEventListener("pageshow",r),l}}async executeCodeFlow(t,i){const r=t.correlationId,s=this.initializeServerTelemetryManager(Le.acquireTokenRedirect),l=await Q(Ea,w.GeneratePkceCodes,this.logger,this.performanceClient,r)(this.performanceClient,this.logger,r),h={...t,codeChallenge:l.challenge};this.browserStorage.cacheAuthorizeRequest(h,l.verifier);try{if(h.httpMethod===va.POST)return await this.executeCodeFlowWithPost(h);{const f=await Q(this.createAuthCodeClient.bind(this),w.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:s,requestAuthority:h.authority,requestAzureCloudOptions:h.azureCloudOptions,requestExtraQueryParameters:h.extraQueryParameters,account:h.account}),g=await Q(Jf,w.GetAuthCodeUrl,this.logger,this.performanceClient,t.correlationId)(this.config,f.authority,h,this.logger,this.performanceClient);return await this.initiateAuthRequest(g,i)}}catch(f){throw f instanceof Ye&&(f.setCorrelationId(this.correlationId),s.cacheFailedRequest(f)),f}}async executeEarFlow(t){const i=t.correlationId,r=await Q(this.getDiscoveredAuthority.bind(this),w.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,i)({requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account}),s=await Q(Bf,w.GenerateEarKey,this.logger,this.performanceClient,i)(),l=await Q(Ea,w.GeneratePkceCodes,this.logger,this.performanceClient,i)(this.performanceClient,this.logger,i),h={...t,earJwk:s,codeChallenge:l.challenge};return this.browserStorage.cacheAuthorizeRequest(h,l.verifier),(await $f(document,this.config,r,h,this.logger,this.performanceClient)).submit(),new Promise((g,p)=>{setTimeout(()=>{p(he(Zc,"failed_to_redirect"))},this.config.system.redirectNavigationTimeout)})}async executeCodeFlowWithPost(t){const i=t.correlationId,r=await Q(this.getDiscoveredAuthority.bind(this),w.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,i)({requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account});return this.browserStorage.cacheAuthorizeRequest(t),(await Zf(document,this.config,r,t,this.logger,this.performanceClient)).submit(),new Promise((l,h)=>{setTimeout(()=>{h(he(Zc,"failed_to_redirect"))},this.config.system.redirectNavigationTimeout)})}async handleRedirectPromise(t="",i,r,s){const l=this.initializeServerTelemetryManager(Le.handleRedirectPromise);try{const[h,f]=this.getRedirectResponse(t||"");if(!h)return this.logger.info("handleRedirectPromise did not detect a response as a result of a redirect. Cleaning temporary cache."),this.browserStorage.resetRequestCache(),fk()!=="back_forward"?s.event.errorCode="no_server_response":this.logger.verbose("Back navigation event detected. Muting no_server_response error"),null;const g=this.browserStorage.getTemporaryCache(dt.ORIGIN_URI,!0)||W.EMPTY_STRING,p=Gv(g),S=Gv(window.location.href);if(p===S&&this.config.auth.navigateToLoginRequestUrl)return this.logger.verbose("Current page is loginRequestUrl, handling response"),g.indexOf("#")>-1&&pO(g),await this.handleResponse(h,i,r,l);if(this.config.auth.navigateToLoginRequestUrl){if(!Gf()||this.config.system.allowRedirectInIframe){this.browserStorage.setTemporaryCache(dt.URL_HASH,f,!0);const T={apiId:Le.handleRedirectPromise,timeout:this.config.system.redirectNavigationTimeout,noHistory:!0};let A=!0;if(!g||g==="null"){const K=vO();this.browserStorage.setTemporaryCache(dt.ORIGIN_URI,K,!0),this.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),A=await this.navigationClient.navigateInternal(K,T)}else this.logger.verbose(`Navigating to loginRequestUrl: ${g}`),A=await this.navigationClient.navigateInternal(g,T);if(!A)return await this.handleResponse(h,i,r,l)}}else return this.logger.verbose("NavigateToLoginRequestUrl set to false, handling response"),await this.handleResponse(h,i,r,l);return null}catch(h){throw h instanceof Ye&&(h.setCorrelationId(this.correlationId),l.cacheFailedRequest(h)),h}}getRedirectResponse(t){this.logger.verbose("getRedirectResponseHash called");let i=t;i||(this.config.auth.OIDCOptions.serverResponseType===ol.QUERY?i=window.location.search:i=window.location.hash);let r=qc(i);if(r){try{JO(r,this.browserCrypto,Se.Redirect)}catch(l){return l instanceof Ye&&this.logger.error(`Interaction type validation failed due to ${l.errorCode}: ${l.errorMessage}`),[null,""]}return GT(window),this.logger.verbose("Hash contains known properties, returning response hash"),[r,i]}const s=this.browserStorage.getTemporaryCache(dt.URL_HASH,!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey(dt.URL_HASH)),s&&(r=qc(s),r)?(this.logger.verbose("Hash does not contain known properties, returning cached hash"),[r,s]):[null,""]}async handleResponse(t,i,r,s){if(!t.state)throw he(Nf);if(t.ear_jwe){const f=await Q(this.getDiscoveredAuthority.bind(this),w.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,i.correlationId)({requestAuthority:i.authority,requestAzureCloudOptions:i.azureCloudOptions,requestExtraQueryParameters:i.extraQueryParameters,account:i.account});return Q(Wf,w.HandleResponseEar,this.logger,this.performanceClient,i.correlationId)(i,t,Le.acquireTokenRedirect,this.config,f,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}const h=await Q(this.createAuthCodeClient.bind(this),w.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:s,requestAuthority:i.authority});return Q(Rr,w.HandleResponseCode,this.logger,this.performanceClient,i.correlationId)(i,t,r,Le.acquireTokenRedirect,this.config,h,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async initiateAuthRequest(t,i){if(this.logger.verbose("RedirectHandler.initiateAuthRequest called"),t){this.logger.infoPii(`RedirectHandler.initiateAuthRequest: Navigate to: ${t}`);const r={apiId:Le.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},s=i||this.config.auth.onRedirectNavigate;if(typeof s=="function")if(this.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback"),s(t)!==!1){this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),await this.navigationClient.navigateExternal(t,r);return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation");return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),await this.navigationClient.navigateExternal(t,r);return}}else throw this.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),he(vl)}async logout(t){this.logger.verbose("logoutRedirect called");const i=this.initializeLogoutRequest(t),r=this.initializeServerTelemetryManager(Le.logout);try{this.eventHandler.emitEvent(ye.LOGOUT_START,Se.Redirect,t),await this.clearCacheOnLogout(this.correlationId,i.account);const s={apiId:Le.logout,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},l=await Q(this.createAuthCodeClient.bind(this),w.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:r,requestAuthority:t&&t.authority,requestExtraQueryParameters:t?.extraQueryParameters,account:t&&t.account||void 0});if(l.authority.protocolMode===Yt.OIDC)try{l.authority.endSessionEndpoint}catch{if(i.account?.homeAccountId){this.eventHandler.emitEvent(ye.LOGOUT_SUCCESS,Se.Redirect,i);return}}const h=l.getLogoutUri(i);if(this.eventHandler.emitEvent(ye.LOGOUT_SUCCESS,Se.Redirect,i),t&&typeof t.onRedirectNavigate=="function")if(t.onRedirectNavigate(h)!==!1){this.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,Bi.SIGNOUT),await this.navigationClient.navigateExternal(h,s);return}else this.browserStorage.setInteractionInProgress(!1),this.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation");else{this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,Bi.SIGNOUT),await this.navigationClient.navigateExternal(h,s);return}}catch(s){throw s instanceof Ye&&(s.setCorrelationId(this.correlationId),r.cacheFailedRequest(s)),this.eventHandler.emitEvent(ye.LOGOUT_FAILURE,Se.Redirect,null,s),this.eventHandler.emitEvent(ye.LOGOUT_END,Se.Redirect),s}this.eventHandler.emitEvent(ye.LOGOUT_END,Se.Redirect)}getRedirectStartPage(t){const i=t||window.location.href;return Pe.getAbsoluteUrl(i,si())}}async function mk(c,t,i,r,s){if(t.addQueueMeasurement(w.SilentHandlerInitiateAuthRequest,r),!c)throw i.info("Navigate url is empty"),he(vl);return s?Q(vk,w.SilentHandlerLoadFrame,i,t,r)(c,s,t,r):on(Ck,w.SilentHandlerLoadFrameSync,i,t,r)(c)}async function pk(c,t,i,r,s){const l=El();if(!l.contentDocument)throw"No document associated with iframe!";return(await Zf(l.contentDocument,c,t,i,r,s)).submit(),l}async function yk(c,t,i,r,s){const l=El();if(!l.contentDocument)throw"No document associated with iframe!";return(await $f(l.contentDocument,c,t,i,r,s)).submit(),l}async function TC(c,t,i,r,s,l,h){return r.addQueueMeasurement(w.SilentHandlerMonitorIframeForHash,l),new Promise((f,g)=>{t<Uh&&s.warning(`system.loadFrameTimeout or system.iframeHashTimeout set to lower (${t}ms) than the default (${Uh}ms). This may result in timeouts.`);const p=window.setTimeout(()=>{window.clearInterval(S),g(he(gT))},t),S=window.setInterval(()=>{let T="";const A=c.contentWindow;try{T=A?A.location.href:""}catch{}if(!T||T==="about:blank")return;let K="";A&&(h===ol.QUERY?K=A.location.search:K=A.location.hash),window.clearTimeout(p),window.clearInterval(S),f(K)},i)}).finally(()=>{on(Sk,w.RemoveHiddenIframe,s,r,l)(c)})}function vk(c,t,i,r){return i.addQueueMeasurement(w.SilentHandlerLoadFrame,r),new Promise((s,l)=>{const h=El();window.setTimeout(()=>{if(!h){l("Unable to load iframe");return}h.src=c,s(h)},t)})}function Ck(c){const t=El();return t.src=c,t}function El(){const c=document.createElement("iframe");return c.className="msalSilentIframe",c.style.visibility="hidden",c.style.position="absolute",c.style.width=c.style.height="0",c.style.border="0",c.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),c.setAttribute("allow","local-network-access *"),document.body.appendChild(c),c}function Sk(c){document.body===c.parentNode&&document.body.removeChild(c)}class Tk extends Pr{constructor(t,i,r,s,l,h,f,g,p,S,T){super(t,i,r,s,l,h,g,S,T),this.apiId=f,this.nativeStorage=p}async acquireToken(t){this.performanceClient.addQueueMeasurement(w.SilentIframeClientAcquireToken,t.correlationId),!t.loginHint&&!t.sid&&(!t.account||!t.account.username)&&this.logger.warning("No user hint provided. The authorization server may need more information to complete this request.");const i={...t};i.prompt?i.prompt!==kt.NONE&&i.prompt!==kt.NO_SESSION&&(this.logger.warning(`SilentIframeClient. Replacing invalid prompt ${i.prompt} with ${kt.NONE}`),i.prompt=kt.NONE):i.prompt=kt.NONE;const r=await Q(this.initializeAuthorizationRequest.bind(this),w.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,t.correlationId)(i,Se.Silent);return r.platformBroker=Zo(this.config,this.logger,this.platformAuthProvider,r.authenticationScheme),YT(r.authority),this.config.auth.protocolMode===Yt.EAR?this.executeEarFlow(r):this.executeCodeFlow(r)}async executeCodeFlow(t){let i;const r=this.initializeServerTelemetryManager(this.apiId);try{return i=await Q(this.createAuthCodeClient.bind(this),w.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,t.correlationId)({serverTelemetryManager:r,requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account}),await Q(this.silentTokenHelper.bind(this),w.SilentIframeClientTokenHelper,this.logger,this.performanceClient,t.correlationId)(i,t)}catch(s){if(s instanceof Ye&&(s.setCorrelationId(this.correlationId),r.cacheFailedRequest(s)),!i||!(s instanceof Ye)||s.errorCode!==Qt.INVALID_GRANT_ERROR)throw s;return this.performanceClient.addFields({retryError:s.errorCode},this.correlationId),await Q(this.silentTokenHelper.bind(this),w.SilentIframeClientTokenHelper,this.logger,this.performanceClient,this.correlationId)(i,t)}}async executeEarFlow(t){const i=t.correlationId,r=await Q(this.getDiscoveredAuthority.bind(this),w.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,i)({requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account}),s=await Q(Bf,w.GenerateEarKey,this.logger,this.performanceClient,i)(),l=await Q(Ea,w.GeneratePkceCodes,this.logger,this.performanceClient,i)(this.performanceClient,this.logger,i),h={...t,earJwk:s,codeChallenge:l.challenge},f=await Q(yk,w.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,i)(this.config,r,h,this.logger,this.performanceClient),g=this.config.auth.OIDCOptions.serverResponseType,p=await Q(TC,w.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,i)(f,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,i,g),S=on(Fo,w.DeserializeResponse,this.logger,this.performanceClient,i)(p,g,this.logger);if(!S.ear_jwe&&S.code){const T=await Q(this.createAuthCodeClient.bind(this),w.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,i)({serverTelemetryManager:this.initializeServerTelemetryManager(this.apiId),requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account,authority:r});return Q(Rr,w.HandleResponseCode,this.logger,this.performanceClient,i)(h,S,l.verifier,this.apiId,this.config,T,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}else return Q(Wf,w.HandleResponseEar,this.logger,this.performanceClient,i)(h,S,this.apiId,this.config,r,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}logout(){return Promise.reject(he(Cl))}async silentTokenHelper(t,i){const r=i.correlationId;this.performanceClient.addQueueMeasurement(w.SilentIframeClientTokenHelper,r);const s=await Q(Ea,w.GeneratePkceCodes,this.logger,this.performanceClient,r)(this.performanceClient,this.logger,r),l={...i,codeChallenge:s.challenge};let h;if(i.httpMethod===va.POST)h=await Q(pk,w.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,r)(this.config,t.authority,l,this.logger,this.performanceClient);else{const S=await Q(Jf,w.GetAuthCodeUrl,this.logger,this.performanceClient,r)(this.config,t.authority,l,this.logger,this.performanceClient);h=await Q(mk,w.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,r)(S,this.performanceClient,this.logger,r,this.config.system.navigateFrameWait)}const f=this.config.auth.OIDCOptions.serverResponseType,g=await Q(TC,w.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,r)(h,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,r,f),p=on(Fo,w.DeserializeResponse,this.logger,this.performanceClient,r)(g,f,this.logger);return Q(Rr,w.HandleResponseCode,this.logger,this.performanceClient,r)(i,p,s.verifier,this.apiId,this.config,t,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}}class Ak extends Pr{async acquireToken(t){this.performanceClient.addQueueMeasurement(w.SilentRefreshClientAcquireToken,t.correlationId);const i=await Q(Vf,w.InitializeBaseRequest,this.logger,this.performanceClient,t.correlationId)(t,this.config,this.performanceClient,this.logger),r={...t,...i};t.redirectUri&&(r.redirectUri=this.getRedirectUri(t.redirectUri));const s=this.initializeServerTelemetryManager(Le.acquireTokenSilent_silentFlow),l=await this.createRefreshTokenClient({serverTelemetryManager:s,authorityUrl:r.authority,azureCloudOptions:r.azureCloudOptions,account:r.account});return Q(l.acquireTokenByRefreshToken.bind(l),w.RefreshTokenClientAcquireTokenByRefreshToken,this.logger,this.performanceClient,t.correlationId)(r).catch(h=>{throw h.setCorrelationId(this.correlationId),s.cacheFailedRequest(h),h})}logout(){return Promise.reject(he(Cl))}async createRefreshTokenClient(t){const i=await Q(this.getClientConfiguration.bind(this),w.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:t.serverTelemetryManager,requestAuthority:t.authorityUrl,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account});return new HI(i,this.performanceClient)}}class Ek{constructor(t,i,r,s){this.isBrowserEnvironment=typeof window<"u",this.config=t,this.storage=i,this.logger=r,this.cryptoObj=s}async loadExternalTokens(t,i,r){if(!this.isBrowserEnvironment)throw he(Sl);const s=t.correlationId||On(),l=i.id_token?Hn(i.id_token,Ht):void 0,h=Ln(l||{}),f={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},g=t.authority?new Dt(Dt.generateAuthority(t.authority,t.azureCloudOptions),this.config.system.networkClient,this.storage,f,this.logger,t.correlationId||On()):void 0,p=await this.loadAccount(t,r.clientInfo||i.client_info||"",s,l,g),S=await this.loadIdToken(i,p.homeAccountId,p.environment,p.realm,s,h),T=await this.loadAccessToken(t,i,p.homeAccountId,p.environment,p.realm,r,s,h),A=await this.loadRefreshToken(i,p.homeAccountId,p.environment,s,h);return this.generateAuthenticationResult(t,{account:p,idToken:S,accessToken:T,refreshToken:A},l,g)}async loadAccount(t,i,r,s,l){if(this.logger.verbose("TokenCache - loading account"),t.account){const p=at.createFromAccountInfo(t.account);return await this.storage.setAccount(p,r,Ln(s||{})),p}else if(!l||!i&&!s)throw this.logger.error("TokenCache - if an account is not provided on the request, authority and either clientInfo or idToken must be provided instead."),he(ET);const h=at.generateHomeAccountId(i,l.authorityType,this.logger,this.cryptoObj,s),f=s?.tid,g=wf(this.storage,l,h,Ht,r,s,i,l.hostnameAndPort,f,void 0,void 0,this.logger);return await this.storage.setAccount(g,r,Ln(s||{})),g}async loadIdToken(t,i,r,s,l,h){if(!t.id_token)return this.logger.verbose("TokenCache - no id token found in response"),null;this.logger.verbose("TokenCache - loading id token");const f=hl(i,r,t.id_token,this.config.auth.clientId,s);return await this.storage.setIdTokenCredential(f,l,h),f}async loadAccessToken(t,i,r,s,l,h,f,g){if(i.access_token)if(i.expires_in){if(!i.scope&&(!t.scopes||!t.scopes.length))return this.logger.error("TokenCache - scopes not specified in the request or response. Cannot add token to the cache."),null}else return this.logger.error("TokenCache - no expiration set on the access token. Cannot add it to the cache."),null;else return this.logger.verbose("TokenCache - no access token found in response"),null;this.logger.verbose("TokenCache - loading access token");const p=i.scope?pt.fromString(i.scope):new pt(t.scopes),S=h.expiresOn||i.expires_in+Vt(),T=h.extendedExpiresOn||(i.ext_expires_in||i.expires_in)+Vt(),A=fl(r,s,i.access_token,this.config.auth.clientId,l,p.printScopes(),S,T,Ht);return await this.storage.setAccessTokenCredential(A,f,g),A}async loadRefreshToken(t,i,r,s,l){if(!t.refresh_token)return this.logger.verbose("TokenCache - no refresh token found in response"),null;this.logger.verbose("TokenCache - loading refresh token");const h=XS(i,r,t.refresh_token,this.config.auth.clientId,t.foci,void 0,t.refresh_token_expires_in);return await this.storage.setRefreshTokenCredential(h,s,l),h}generateAuthenticationResult(t,i,r,s){let l="",h=[],f=null,g;i?.accessToken&&(l=i.accessToken.secret,h=pt.fromString(i.accessToken.target).asArray(),f=_r(i.accessToken.expiresOn),g=_r(i.accessToken.extendedExpiresOn));const p=i.account;return{authority:s?s.canonicalAuthority:"",uniqueId:i.account.localAccountId,tenantId:i.account.realm,scopes:h,account:at.getAccountInfo(p),idToken:i.idToken?.secret||"",idTokenClaims:r||{},accessToken:l,fromCache:!0,expiresOn:f,correlationId:t.correlationId||"",requestId:"",extExpiresOn:g,familyId:i.refreshToken?.familyId||"",tokenType:i?.accessToken?.tokenType||"",state:t.state||"",cloudGraphHostName:p.cloudGraphHostName||"",msGraphHost:p.msGraphHost||"",fromNativeBroker:!1}}}class _k extends tT{constructor(t){super(t),this.includeRedirectUri=!1}}class bk extends Pr{constructor(t,i,r,s,l,h,f,g,p,S){super(t,i,r,s,l,h,g,p,S),this.apiId=f}async acquireToken(t){if(!t.code)throw he(_T);const i=await Q(this.initializeAuthorizationRequest.bind(this),w.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,t.correlationId)(t,Se.Silent),r=this.initializeServerTelemetryManager(this.apiId);try{const s={...i,code:t.code},l=await Q(this.getClientConfiguration.bind(this),w.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,t.correlationId)({serverTelemetryManager:r,requestAuthority:i.authority,requestAzureCloudOptions:i.azureCloudOptions,requestExtraQueryParameters:i.extraQueryParameters,account:i.account}),h=new _k(l);this.logger.verbose("Auth code client created");const f=new ZT(h,this.browserStorage,s,this.logger,this.performanceClient);return await Q(f.handleCodeResponseFromServer.bind(f),w.HandleCodeResponseFromServer,this.logger,this.performanceClient,t.correlationId)({code:t.code,msgraph_host:t.msGraphHost,cloud_graph_host_name:t.cloudGraphHostName,cloud_instance_host_name:t.cloudInstanceHostName},i,!1)}catch(s){throw s instanceof Ye&&(s.setCorrelationId(this.correlationId),r.cacheFailedRequest(s)),s}}logout(){return Promise.reject(he(Cl))}}function wk(c,t,i){const r=window.msal?.clientIds||[],s=r.length,l=r.filter(h=>h===c).length;l>1&&i.warning("There is already an instance of MSAL.js in the window with the same client id."),t.add({msalInstanceCount:s,sameClientIdInstanceCount:l})}function Rc(c,t,i){try{Ff(c)}catch(r){throw t.end({success:!1},r,i),r}}class _l{constructor(t){this.operatingContext=t,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=t.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new li(this.logger,this.performanceClient):Bc,this.eventHandler=new YO(this.logger),this.browserStorage=this.isBrowserEnvironment?new Ph(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler,II(this.config.auth)):LO(this.config.auth.clientId,this.logger,this.performanceClient,this.eventHandler);const i={cacheLocation:Tt.MemoryStorage,cacheRetentionDays:5,temporaryCacheLocation:Tt.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};this.nativeInternalStorage=new Ph(this.config.auth.clientId,i,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler),this.tokenCache=new Ek(this.config,this.browserStorage,this.logger,this.browserCrypto),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this)}static async createController(t,i){const r=new _l(t);return await r.initialize(i),r}trackPageVisibility(t){t&&(this.logger.info("Perf: Visibility change detected"),this.performanceClient.incrementFields({visibilityChangeCount:1},t))}async initialize(t,i){if(this.logger.trace("initialize called"),this.initialized){this.logger.info("initialize has already been called, exiting early.");return}if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, exiting early."),this.initialized=!0,this.eventHandler.emitEvent(ye.INITIALIZE_END);return}const r=t?.correlationId||this.getRequestCorrelationId(),s=this.config.system.allowPlatformBroker,l=this.performanceClient.startMeasurement(w.InitializeClientApplication,r);if(this.eventHandler.emitEvent(ye.INITIALIZE_START),!i)try{this.logMultipleInstances(l)}catch{}if(await Q(this.browserStorage.initialize.bind(this.browserStorage),w.InitializeCache,this.logger,this.performanceClient,r)(r),s)try{this.platformAuthProvider=await uk(this.logger,this.performanceClient,r,this.config.system.nativeBrokerHandshakeTimeout)}catch(h){this.logger.verbose(h)}this.config.cache.claimsBasedCachingEnabled||(this.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),on(this.browserStorage.clearTokensAndKeysWithClaims.bind(this.browserStorage),w.ClearTokensAndKeysWithClaims,this.logger,this.performanceClient,r)(r)),this.config.system.asyncPopups&&await this.preGeneratePkceCodes(r),this.initialized=!0,this.eventHandler.emitEvent(ye.INITIALIZE_END),l.end({allowPlatformBroker:s,success:!0})}async handleRedirectPromise(t){if(this.logger.verbose("handleRedirectPromise called"),QT(this.initialized),this.isBrowserEnvironment){const i=t||"";let r=this.redirectResponse.get(i);return typeof r>"u"?(r=this.handleRedirectPromiseInternal(t),this.redirectResponse.set(i,r),this.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise")):this.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call"),r}return this.logger.verbose("handleRedirectPromise returns null, not browser environment"),null}async handleRedirectPromiseInternal(t){if(!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;if(this.browserStorage.getInteractionInProgress()?.type===Bi.SIGNOUT)return this.logger.verbose("handleRedirectPromise removing interaction_in_progress flag and returning null after sign-out"),this.browserStorage.setInteractionInProgress(!1),Promise.resolve(null);const r=this.getAllAccounts(),s=this.browserStorage.getCachedNativeRequest(),l=s&&this.platformAuthProvider&&!t;let h;this.eventHandler.emitEvent(ye.HANDLE_REDIRECT_START,Se.Redirect);let f;try{if(l&&this.platformAuthProvider){h=this.performanceClient.startMeasurement(w.AcquireTokenRedirect,s?.correlationId||""),this.logger.trace("handleRedirectPromise - acquiring token from native platform"),h.add({isPlatformBrokerRequest:!0});const g=new xc(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Le.handleRedirectPromise,this.performanceClient,this.platformAuthProvider,s.accountId,this.nativeInternalStorage,s.correlationId);f=Q(g.handleRedirectPromise.bind(g),w.HandleNativeRedirectPromiseMeasurement,this.logger,this.performanceClient,h.event.correlationId)(this.performanceClient,h.event.correlationId)}else{const[g,p]=this.browserStorage.getCachedRequest(),S=g.correlationId;h=this.performanceClient.startMeasurement(w.AcquireTokenRedirect,S),this.logger.trace("handleRedirectPromise - acquiring token from web flow");const T=this.createRedirectClient(S);f=Q(T.handleRedirectPromise.bind(T),w.HandleRedirectPromiseMeasurement,this.logger,this.performanceClient,h.event.correlationId)(t,g,p,h)}}catch(g){throw this.browserStorage.resetRequestCache(),g}return f.then(g=>(g?(this.browserStorage.resetRequestCache(),r.length<this.getAllAccounts().length?(this.eventHandler.emitEvent(ye.LOGIN_SUCCESS,Se.Redirect,g),this.logger.verbose("handleRedirectResponse returned result, login success")):(this.eventHandler.emitEvent(ye.ACQUIRE_TOKEN_SUCCESS,Se.Redirect,g),this.logger.verbose("handleRedirectResponse returned result, acquire token success")),h.end({success:!0},void 0,g.account)):h.event.errorCode?h.end({success:!1},void 0):h.discard(),this.eventHandler.emitEvent(ye.HANDLE_REDIRECT_END,Se.Redirect),g)).catch(g=>{this.browserStorage.resetRequestCache();const p=g;throw r.length>0?this.eventHandler.emitEvent(ye.ACQUIRE_TOKEN_FAILURE,Se.Redirect,null,p):this.eventHandler.emitEvent(ye.LOGIN_FAILURE,Se.Redirect,null,p),this.eventHandler.emitEvent(ye.HANDLE_REDIRECT_END,Se.Redirect),h.end({success:!1},p),g})}async acquireTokenRedirect(t){const i=this.getRequestCorrelationId(t);this.logger.verbose("acquireTokenRedirect called",i);const r=this.performanceClient.startMeasurement(w.AcquireTokenPreRedirect,i);r.add({scenarioId:t.scenarioId});const s=t.onRedirectNavigate;if(s)t.onRedirectNavigate=h=>{const f=typeof s=="function"?s(h):void 0;return r.add({navigateCallbackResult:f!==!1}),r.event=r.end({success:!0},void 0,t.account)||r.event,f};else{const h=this.config.auth.onRedirectNavigate;this.config.auth.onRedirectNavigate=f=>{const g=typeof h=="function"?h(f):void 0;return r.add({navigateCallbackResult:g!==!1}),r.event=r.end({success:!0},void 0,t.account)||r.event,g}}const l=this.getAllAccounts().length>0;try{dC(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,Bi.SIGNIN),l?this.eventHandler.emitEvent(ye.ACQUIRE_TOKEN_START,Se.Redirect,t):this.eventHandler.emitEvent(ye.LOGIN_START,Se.Redirect,t);let h;return this.platformAuthProvider&&this.canUsePlatformBroker(t)?h=new xc(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Le.acquireTokenRedirect,this.performanceClient,this.platformAuthProvider,this.getNativeAccountId(t),this.nativeInternalStorage,i).acquireTokenRedirect(t,r).catch(g=>{if(r.add({brokerErrorName:g.name,brokerErrorCode:g.errorCode}),g instanceof xn&&Sr(g))return this.platformAuthProvider=void 0,this.createRedirectClient(i).acquireToken(t);if(g instanceof In)return this.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createRedirectClient(i).acquireToken(t);throw g}):h=this.createRedirectClient(i).acquireToken(t),await h}catch(h){throw this.browserStorage.resetRequestCache(),r.event.status===2?this.performanceClient.startMeasurement(w.AcquireTokenRedirect,i).end({success:!1},h,t.account):r.end({success:!1},h,t.account),l?this.eventHandler.emitEvent(ye.ACQUIRE_TOKEN_FAILURE,Se.Redirect,null,h):this.eventHandler.emitEvent(ye.LOGIN_FAILURE,Se.Redirect,null,h),h}}acquireTokenPopup(t){const i=this.getRequestCorrelationId(t),r=this.performanceClient.startMeasurement(w.AcquireTokenPopup,i);r.add({scenarioId:t.scenarioId});try{this.logger.verbose("acquireTokenPopup called",i),Rc(this.initialized,r,t.account),this.browserStorage.setInteractionInProgress(!0,Bi.SIGNIN)}catch(f){return Promise.reject(f)}const s=this.getAllAccounts();s.length>0?this.eventHandler.emitEvent(ye.ACQUIRE_TOKEN_START,Se.Popup,t):this.eventHandler.emitEvent(ye.LOGIN_START,Se.Popup,t);let l;const h=this.getPreGeneratedPkceCodes(i);return this.canUsePlatformBroker(t)?(r.add({isPlatformBrokerRequest:!0}),l=this.acquireTokenNative({...t,correlationId:i},Le.acquireTokenPopup).then(f=>(r.end({success:!0},void 0,f.account),f)).catch(f=>{if(r.add({brokerErrorName:f.name,brokerErrorCode:f.errorCode}),f instanceof xn&&Sr(f))return this.platformAuthProvider=void 0,this.createPopupClient(i).acquireToken(t,h);if(f instanceof In)return this.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createPopupClient(i).acquireToken(t,h);throw f})):l=this.createPopupClient(i).acquireToken(t,h),l.then(f=>(s.length<this.getAllAccounts().length?this.eventHandler.emitEvent(ye.LOGIN_SUCCESS,Se.Popup,f):this.eventHandler.emitEvent(ye.ACQUIRE_TOKEN_SUCCESS,Se.Popup,f),r.end({success:!0,accessTokenSize:f.accessToken.length,idTokenSize:f.idToken.length},void 0,f.account),f)).catch(f=>(s.length>0?this.eventHandler.emitEvent(ye.ACQUIRE_TOKEN_FAILURE,Se.Popup,null,f):this.eventHandler.emitEvent(ye.LOGIN_FAILURE,Se.Popup,null,f),r.end({success:!1},f,t.account),Promise.reject(f))).finally(async()=>{this.browserStorage.setInteractionInProgress(!1),this.config.system.asyncPopups&&await this.preGeneratePkceCodes(i)})}trackPageVisibilityWithMeasurement(){const t=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;t&&(this.logger.info("Perf: Visibility change detected in ",t.event.name),t.increment({visibilityChangeCount:1}))}async ssoSilent(t){const i=this.getRequestCorrelationId(t),r={...t,prompt:t.prompt,correlationId:i};this.ssoSilentMeasurement=this.performanceClient.startMeasurement(w.SsoSilent,i),this.ssoSilentMeasurement?.add({scenarioId:t.scenarioId}),Rc(this.initialized,this.ssoSilentMeasurement,t.account),this.ssoSilentMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),this.logger.verbose("ssoSilent called",i),this.eventHandler.emitEvent(ye.SSO_SILENT_START,Se.Silent,r);let s;return this.canUsePlatformBroker(r)?(this.ssoSilentMeasurement?.add({isPlatformBrokerRequest:!0}),s=this.acquireTokenNative(r,Le.ssoSilent).catch(l=>{if(this.ssoSilentMeasurement?.add({brokerErrorName:l.name,brokerErrorCode:l.errorCode}),l instanceof xn&&Sr(l))return this.platformAuthProvider=void 0,this.createSilentIframeClient(r.correlationId).acquireToken(r);throw l})):s=this.createSilentIframeClient(r.correlationId).acquireToken(r),s.then(l=>(this.eventHandler.emitEvent(ye.SSO_SILENT_SUCCESS,Se.Silent,l),this.ssoSilentMeasurement?.end({success:!0,accessTokenSize:l.accessToken.length,idTokenSize:l.idToken.length},void 0,l.account),l)).catch(l=>{throw this.eventHandler.emitEvent(ye.SSO_SILENT_FAILURE,Se.Silent,null,l),this.ssoSilentMeasurement?.end({success:!1},l,t.account),l}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenByCode(t){const i=this.getRequestCorrelationId(t);this.logger.trace("acquireTokenByCode called",i);const r=this.performanceClient.startMeasurement(w.AcquireTokenByCode,i);Rc(this.initialized,r),this.eventHandler.emitEvent(ye.ACQUIRE_TOKEN_BY_CODE_START,Se.Silent,t),r.add({scenarioId:t.scenarioId});try{if(t.code&&t.nativeAccountId)throw he(wT);if(t.code){const s=t.code;let l=this.hybridAuthCodeResponses.get(s);return l?(this.logger.verbose("Existing acquireTokenByCode request found",i),r.discard()):(this.logger.verbose("Initiating new acquireTokenByCode request",i),l=this.acquireTokenByCodeAsync({...t,correlationId:i}).then(h=>(this.eventHandler.emitEvent(ye.ACQUIRE_TOKEN_BY_CODE_SUCCESS,Se.Silent,h),this.hybridAuthCodeResponses.delete(s),r.end({success:!0,accessTokenSize:h.accessToken.length,idTokenSize:h.idToken.length},void 0,h.account),h)).catch(h=>{throw this.hybridAuthCodeResponses.delete(s),this.eventHandler.emitEvent(ye.ACQUIRE_TOKEN_BY_CODE_FAILURE,Se.Silent,null,h),r.end({success:!1},h),h}),this.hybridAuthCodeResponses.set(s,l)),await l}else if(t.nativeAccountId)if(this.canUsePlatformBroker(t,t.nativeAccountId)){r.add({isPlatformBrokerRequest:!0});const s=await this.acquireTokenNative({...t,correlationId:i},Le.acquireTokenByCode,t.nativeAccountId).catch(l=>{throw l instanceof xn&&Sr(l)&&(this.platformAuthProvider=void 0),r.add({brokerErrorName:l.name,brokerErrorCode:l.errorCode}),l});return r.end({success:!0},void 0,s.account),s}else throw he(RT);else throw he(bT)}catch(s){throw this.eventHandler.emitEvent(ye.ACQUIRE_TOKEN_BY_CODE_FAILURE,Se.Silent,null,s),r.end({success:!1},s),s}}async acquireTokenByCodeAsync(t){return this.logger.trace("acquireTokenByCodeAsync called",t.correlationId),this.acquireTokenByCodeAsyncMeasurement=this.performanceClient.startMeasurement(w.AcquireTokenByCodeAsync,t.correlationId),this.acquireTokenByCodeAsyncMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),await this.createSilentAuthCodeClient(t.correlationId).acquireToken(t).then(s=>(this.acquireTokenByCodeAsyncMeasurement?.end({success:!0,fromCache:s.fromCache}),s)).catch(s=>{throw this.acquireTokenByCodeAsyncMeasurement?.end({success:!1},s),s}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenFromCache(t,i){switch(this.performanceClient.addQueueMeasurement(w.AcquireTokenFromCache,t.correlationId),i){case xt.Default:case xt.AccessToken:case xt.AccessTokenAndRefreshToken:const r=this.createSilentCacheClient(t.correlationId);return Q(r.acquireToken.bind(r),w.SilentCacheClientAcquireToken,this.logger,this.performanceClient,t.correlationId)(t);default:throw re(ji)}}async acquireTokenByRefreshToken(t,i){switch(this.performanceClient.addQueueMeasurement(w.AcquireTokenByRefreshToken,t.correlationId),i){case xt.Default:case xt.AccessTokenAndRefreshToken:case xt.RefreshToken:case xt.RefreshTokenAndNetwork:const r=this.createSilentRefreshClient(t.correlationId);return Q(r.acquireToken.bind(r),w.SilentRefreshClientAcquireToken,this.logger,this.performanceClient,t.correlationId)(t);default:throw re(ji)}}async acquireTokenBySilentIframe(t){this.performanceClient.addQueueMeasurement(w.AcquireTokenBySilentIframe,t.correlationId);const i=this.createSilentIframeClient(t.correlationId);return Q(i.acquireToken.bind(i),w.SilentIframeClientAcquireToken,this.logger,this.performanceClient,t.correlationId)(t)}async logout(t){const i=this.getRequestCorrelationId(t);return this.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",i),this.logoutRedirect({correlationId:i,...t})}async logoutRedirect(t){const i=this.getRequestCorrelationId(t);return dC(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,Bi.SIGNOUT),this.createRedirectClient(i).logout(t)}logoutPopup(t){try{const i=this.getRequestCorrelationId(t);return Ff(this.initialized),this.browserStorage.setInteractionInProgress(!0,Bi.SIGNOUT),this.createPopupClient(i).logout(t).finally(()=>{this.browserStorage.setInteractionInProgress(!1)})}catch(i){return Promise.reject(i)}}async clearCache(t){if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, returning early.");return}const i=this.getRequestCorrelationId(t);return this.createSilentCacheClient(i).logout(t)}getAllAccounts(t){const i=this.getRequestCorrelationId();return zO(this.logger,this.browserStorage,this.isBrowserEnvironment,i,t)}getAccount(t){const i=this.getRequestCorrelationId();return BO(t,this.logger,this.browserStorage,i)}getAccountByUsername(t){const i=this.getRequestCorrelationId();return KO(t,this.logger,this.browserStorage,i)}getAccountByHomeId(t){const i=this.getRequestCorrelationId();return qO(t,this.logger,this.browserStorage,i)}getAccountByLocalId(t){const i=this.getRequestCorrelationId();return jO(t,this.logger,this.browserStorage,i)}setActiveAccount(t){const i=this.getRequestCorrelationId();GO(t,this.browserStorage,i)}getActiveAccount(){const t=this.getRequestCorrelationId();return FO(this.browserStorage,t)}async hydrateCache(t,i){this.logger.verbose("hydrateCache called");const r=at.createFromAccountInfo(t.account,t.cloudGraphHostName,t.msGraphHost);return await this.browserStorage.setAccount(r,t.correlationId,Ln(t.idTokenClaims)),t.fromNativeBroker?(this.logger.verbose("Response was from native broker, storing in-memory"),this.nativeInternalStorage.hydrateCache(t,i)):this.browserStorage.hydrateCache(t,i)}async acquireTokenNative(t,i,r,s){if(this.logger.trace("acquireTokenNative called"),!this.platformAuthProvider)throw he(xf);return new xc(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,i,this.performanceClient,this.platformAuthProvider,r||this.getNativeAccountId(t),this.nativeInternalStorage,t.correlationId).acquireToken(t,s)}canUsePlatformBroker(t,i){if(this.logger.trace("canUsePlatformBroker called"),!this.platformAuthProvider)return this.logger.trace("canUsePlatformBroker: platform broker unavilable, returning false"),!1;if(!Zo(this.config,this.logger,this.platformAuthProvider,t.authenticationScheme))return this.logger.trace("canUsePlatformBroker: isBrokerAvailable returned false, returning false"),!1;if(t.prompt)switch(t.prompt){case kt.NONE:case kt.CONSENT:case kt.LOGIN:case kt.SELECT_ACCOUNT:this.logger.trace("canUsePlatformBroker: prompt is compatible with platform broker flow");break;default:return this.logger.trace(`canUsePlatformBroker: prompt = ${t.prompt} is not compatible with platform broker flow, returning false`),!1}return!i&&!this.getNativeAccountId(t)?(this.logger.trace("canUsePlatformBroker: nativeAccountId is not available, returning false"),!1):!0}getNativeAccountId(t){const i=t.account||this.getAccount({loginHint:t.loginHint,sid:t.sid})||this.getActiveAccount();return i&&i.nativeAccountId||""}createPopupClient(t){return new hk(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,t)}createRedirectClient(t){return new gk(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,t)}createSilentIframeClient(t){return new Tk(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Le.ssoSilent,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,t)}createSilentCacheClient(t){return new eA(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.platformAuthProvider,t)}createSilentRefreshClient(t){return new Ak(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.platformAuthProvider,t)}createSilentAuthCodeClient(t){return new bk(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Le.acquireTokenByCode,this.performanceClient,this.platformAuthProvider,t)}addEventCallback(t,i){return this.eventHandler.addEventCallback(t,i)}removeEventCallback(t){this.eventHandler.removeEventCallback(t)}addPerformanceCallback(t){return FT(),this.performanceClient.addPerformanceCallback(t)}removePerformanceCallback(t){return this.performanceClient.removePerformanceCallback(t)}enableAccountStorageEvents(){if(this.config.cache.cacheLocation!==Tt.LocalStorage){this.logger.info("Account storage events are only available when cacheLocation is set to localStorage");return}this.eventHandler.subscribeCrossTab()}disableAccountStorageEvents(){if(this.config.cache.cacheLocation!==Tt.LocalStorage){this.logger.info("Account storage events are only available when cacheLocation is set to localStorage");return}this.eventHandler.unsubscribeCrossTab()}getTokenCache(){return this.tokenCache}getLogger(){return this.logger}setLogger(t){this.logger=t}initializeWrapperLibrary(t,i){this.browserStorage.setWrapperMetadata(t,i)}setNavigationClient(t){this.navigationClient=t}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}isBrowserEnv(){return this.isBrowserEnvironment}getRequestCorrelationId(t){return t?.correlationId?t.correlationId:this.isBrowserEnvironment?On():W.EMPTY_STRING}async loginRedirect(t){const i=this.getRequestCorrelationId(t);return this.logger.verbose("loginRedirect called",i),this.acquireTokenRedirect({correlationId:i,...t||oC})}loginPopup(t){const i=this.getRequestCorrelationId(t);return this.logger.verbose("loginPopup called",i),this.acquireTokenPopup({correlationId:i,...t||oC})}async acquireTokenSilent(t){const i=this.getRequestCorrelationId(t),r=this.performanceClient.startMeasurement(w.AcquireTokenSilent,i);r.add({cacheLookupPolicy:t.cacheLookupPolicy,scenarioId:t.scenarioId}),Rc(this.initialized,r,t.account),this.logger.verbose("acquireTokenSilent called",i);const s=t.account||this.getActiveAccount();if(!s)throw he(vT);return this.acquireTokenSilentDeduped(t,s,i).then(l=>(r.end({success:!0,fromCache:l.fromCache,accessTokenSize:l.accessToken.length,idTokenSize:l.idToken.length},void 0,l.account),{...l,state:t.state,correlationId:i})).catch(l=>{throw l instanceof Ye&&l.setCorrelationId(i),r.end({success:!1},l,s),l})}async acquireTokenSilentDeduped(t,i,r){const s=ml(this.config.auth.clientId,{...t,authority:t.authority||this.config.auth.authority},i.homeAccountId),l=JSON.stringify(s),h=this.activeSilentTokenRequests.get(l);if(typeof h>"u"){this.logger.verbose("acquireTokenSilent called for the first time, storing active request",r),this.performanceClient.addFields({deduped:!1},r);const f=Q(this.acquireTokenSilentAsync.bind(this),w.AcquireTokenSilentAsync,this.logger,this.performanceClient,r)({...t,correlationId:r},i);return this.activeSilentTokenRequests.set(l,f),f.finally(()=>{this.activeSilentTokenRequests.delete(l)})}else return this.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",r),this.performanceClient.addFields({deduped:!0},r),h}async acquireTokenSilentAsync(t,i){const r=()=>this.trackPageVisibility(t.correlationId);this.performanceClient.addQueueMeasurement(w.AcquireTokenSilentAsync,t.correlationId),this.eventHandler.emitEvent(ye.ACQUIRE_TOKEN_START,Se.Silent,t),t.correlationId&&this.performanceClient.incrementFields({visibilityChangeCount:0},t.correlationId),document.addEventListener("visibilitychange",r);const s=await Q(VO,w.InitializeSilentRequest,this.logger,this.performanceClient,t.correlationId)(t,i,this.config,this.performanceClient,this.logger),l=t.cacheLookupPolicy||xt.Default;return this.acquireTokenSilentNoIframe(s,l).catch(async f=>{if(Rk(f,l))if(this.activeIframeRequest)if(l!==xt.Skip){const[p,S]=this.activeIframeRequest;this.logger.verbose(`Iframe request is already in progress, awaiting resolution for request with correlationId: ${S}`,s.correlationId);const T=this.performanceClient.startMeasurement(w.AwaitConcurrentIframe,s.correlationId);T.add({awaitIframeCorrelationId:S});const A=await p;if(T.end({success:A}),A)return this.logger.verbose(`Parallel iframe request with correlationId: ${S} succeeded. Retrying cache and/or RT redemption`,s.correlationId),this.acquireTokenSilentNoIframe(s,l);throw this.logger.info(`Iframe request with correlationId: ${S} failed. Interaction is required.`),f}else return this.logger.warning("Another iframe request is currently in progress and CacheLookupPolicy is set to Skip. This may result in degraded performance and/or reliability for both calls. Please consider changing the CacheLookupPolicy to take advantage of request queuing and token cache.",s.correlationId),Q(this.acquireTokenBySilentIframe.bind(this),w.AcquireTokenBySilentIframe,this.logger,this.performanceClient,s.correlationId)(s);else{let p;return this.activeIframeRequest=[new Promise(S=>{p=S}),s.correlationId],this.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",s.correlationId),Q(this.acquireTokenBySilentIframe.bind(this),w.AcquireTokenBySilentIframe,this.logger,this.performanceClient,s.correlationId)(s).then(S=>(p(!0),S)).catch(S=>{throw p(!1),S}).finally(()=>{this.activeIframeRequest=void 0})}else throw f}).then(f=>(this.eventHandler.emitEvent(ye.ACQUIRE_TOKEN_SUCCESS,Se.Silent,f),this.performanceClient.addFields({fromCache:f.fromCache},t.correlationId),f)).catch(f=>{throw this.eventHandler.emitEvent(ye.ACQUIRE_TOKEN_FAILURE,Se.Silent,null,f),f}).finally(()=>{document.removeEventListener("visibilitychange",r)})}async acquireTokenSilentNoIframe(t,i){return Zo(this.config,this.logger,this.platformAuthProvider,t.authenticationScheme)&&t.account.nativeAccountId?(this.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform"),this.performanceClient.addFields({isPlatformBrokerRequest:!0},t.correlationId),this.acquireTokenNative(t,Le.acquireTokenSilent_silentFlow,t.account.nativeAccountId,i).catch(async r=>{throw this.performanceClient.addFields({brokerErrorName:r.name,brokerErrorCode:r.errorCode},t.correlationId),r instanceof xn&&Sr(r)?(this.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),this.platformAuthProvider=void 0,re(ji)):r})):(this.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow"),i===xt.AccessToken&&this.logger.verbose("acquireTokenSilent - cache lookup policy set to AccessToken, attempting to acquire token from local cache"),Q(this.acquireTokenFromCache.bind(this),w.AcquireTokenFromCache,this.logger,this.performanceClient,t.correlationId)(t,i).catch(r=>{if(i===xt.AccessToken)throw r;return this.eventHandler.emitEvent(ye.ACQUIRE_TOKEN_NETWORK_START,Se.Silent,t),Q(this.acquireTokenByRefreshToken.bind(this),w.AcquireTokenByRefreshToken,this.logger,this.performanceClient,t.correlationId)(t,i)}))}async preGeneratePkceCodes(t){return this.logger.verbose("Generating new PKCE codes"),this.pkceCode=await Q(Ea,w.GeneratePkceCodes,this.logger,this.performanceClient,t)(this.performanceClient,this.logger,t),Promise.resolve()}getPreGeneratedPkceCodes(t){this.logger.verbose("Attempting to pick up pre-generated PKCE codes");const i=this.pkceCode?{...this.pkceCode}:void 0;return this.pkceCode=void 0,this.logger.verbose(`${i?"Found":"Did not find"} pre-generated PKCE codes`),this.performanceClient.addFields({usePreGeneratedPkce:!!i},t),i}logMultipleInstances(t){const i=this.config.auth.clientId;if(!window)return;window.msal=window.msal||{},window.msal.clientIds=window.msal.clientIds||[],window.msal.clientIds.length>0&&this.logger.verbose("There is already an instance of MSAL.js in the window."),window.msal.clientIds.push(i),wk(i,t,this.logger)}}function Rk(c,t){const i=!(c instanceof In&&c.subError!==yl),r=c.errorCode===Qt.INVALID_GRANT_ERROR||c.errorCode===ji,s=i&&r||c.errorCode===Xc||c.errorCode===_f,l=nO.includes(t);return s&&l}async function Ik(c,t){const i=new Aa(c);return await i.initialize(),_l.createController(i,t)}class tg{static async createPublicClientApplication(t){const i=await Ik(t);return new tg(t,i)}constructor(t,i){this.isBroker=!1,this.controller=i||new _l(new Aa(t))}async initialize(t){return this.controller.initialize(t,this.isBroker)}async acquireTokenPopup(t){return this.controller.acquireTokenPopup(t)}acquireTokenRedirect(t){return this.controller.acquireTokenRedirect(t)}acquireTokenSilent(t){return this.controller.acquireTokenSilent(t)}acquireTokenByCode(t){return this.controller.acquireTokenByCode(t)}addEventCallback(t,i){return this.controller.addEventCallback(t,i)}removeEventCallback(t){return this.controller.removeEventCallback(t)}addPerformanceCallback(t){return this.controller.addPerformanceCallback(t)}removePerformanceCallback(t){return this.controller.removePerformanceCallback(t)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(t){return this.controller.getAccount(t)}getAccountByHomeId(t){return this.controller.getAccountByHomeId(t)}getAccountByLocalId(t){return this.controller.getAccountByLocalId(t)}getAccountByUsername(t){return this.controller.getAccountByUsername(t)}getAllAccounts(t){return this.controller.getAllAccounts(t)}handleRedirectPromise(t){return this.controller.handleRedirectPromise(t)}loginPopup(t){return this.controller.loginPopup(t)}loginRedirect(t){return this.controller.loginRedirect(t)}logout(t){return this.controller.logout(t)}logoutRedirect(t){return this.controller.logoutRedirect(t)}logoutPopup(t){return this.controller.logoutPopup(t)}ssoSilent(t){return this.controller.ssoSilent(t)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(t){this.controller.setLogger(t)}setActiveAccount(t){this.controller.setActiveAccount(t)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(t,i){return this.controller.initializeWrapperLibrary(t,i)}setNavigationClient(t){this.controller.setNavigationClient(t)}getConfiguration(){return this.controller.getConfiguration()}async hydrateCache(t,i){return this.controller.hydrateCache(t,i)}clearCache(t){return this.controller.clearCache(t)}}const Ok={auth:{clientId:"15c1c3ef-90d5-4baa-9d92-4c063a1186bf",authority:"https://login.microsoftonline.com/9678d2de-0c68-47d5-80f3-d1b43b726b0e",redirectUri:"http://localhost:5173/src/",postLogoutRedirectUri:"/"},cache:{cacheLocation:"localStorage",storeAuthStateInCookie:!1},system:{loggerOptions:{loggerCallback:(c,t,i)=>{if(!i)switch(c){case Qe.Error:console.error(t);return;case Qe.Info:console.info(t);return;case Qe.Verbose:console.debug(t);return;case Qe.Warning:console.warn(t);return;default:return}}}}},ma={KnowledgeAPI:{endpointCategoryRow:"https://newknowledgeapi20250328090620-abdug4cmhtcmdve4.canadacentral-01.azurewebsites.net/api/CategoryRow",endpointQuestion:"https://newknowledgeapi20250328090620-abdug4cmhtcmdve4.canadacentral-01.azurewebsites.net/api/Question",endpointQuestionChat:"https://newknowledgeapi20250328090620-abdug4cmhtcmdve4.canadacentral-01.azurewebsites.net/api/QuestionChat",endpointHistory:"https://newknowledgeapi20250328090620-abdug4cmhtcmdve4.canadacentral-01.azurewebsites.net/api/History",endpointHistoryFilter:"https://newknowledgeapi20250328090620-abdug4cmhtcmdve4.canadacentral-01.azurewebsites.net/api/HistoryFilter",scopes:{read:["api://91385bcd-f531-4b1c-8b3d-2105439f0a8a/ToDoList.Read"],write:["api://91385bcd-f531-4b1c-8b3d-2105439f0a8a/ToDoList.ReadWrite"]}}};class AC{constructor(t){const{topId:i,id:r,answerTitle:s,answerLink:l}=t;this.chatBotAnswer={topId:i,id:r,answerTitle:s??"",answerLink:l??"",created:t.created,modified:t.modified}}chatBotAnswer}const iA=c=>{const[t]=B.useState({nickName:"Pera",name:"DEMO"}),[i]=B.useState(c),[r,s]=B.useState(null),[l,h]=B.useState([]),[f,g]=B.useState(null),[p,S]=B.useState(null),[T,A]=B.useState(!1),[K,te]=B.useState(-1),ie=async(ee,U,O=null)=>{try{let x=null;const j=new Headers;O&&j.append("Content-Type","application/json");const Y={method:ee,headers:j,body:O?JSON.stringify(O):null};if(x=await fetch(U,Y),x.ok){if(x.status===200||x.status===201){let ne=null;try{ne=await x.json()}catch(fe){console.log(fe)}return ne}}else{const ne=new Error;console.log(ne)}}catch(x){console.log("-------------->>> execute",ee,U,x)}return JSON.parse("")},le=B.useCallback(async()=>new Promise(ee=>{const U=new Map;try{console.time();const O=`${ma.KnowledgeAPI.endpointCategoryRow}/${i}`;ie("GET",O,null).then(x=>{console.timeEnd(),x.forEach(Y=>U.set(Y.Id,new kw(Y).cat)),U.forEach(Y=>{const{id:ne,parentId:fe}=Y;let ve=ne,D=fe;for(;D;){const X=U.get(D);ve=X.id+" / "+ve,D=X.parentId}Y.titlesUpTheTree=ve,U.set(ne,Y)}),s(U),h(Array.from(U.values())),ee(U)})}catch(O){console.log(O)}}),[i]),se=async ee=>new Promise(U=>{try{const O=new kc(ee).toQuery(i),x=`${ma.KnowledgeAPI.endpointQuestion}?${O}`;console.time(),ie("GET",x).then(j=>{const Y=j;console.timeEnd();const{questionDto:ne,msg:fe}=Y;if(ne){const ve=new Nw(ne).question;let D=null;if(ve){const{assignedAnswers:X}=ve;if(X&&X.length>0){const M=X[0],_=new AC(M).chatBotAnswer,N=X.length>1;D={question:ve,firstAnswer:_,hasMoreAnswers:N},A(N),te(0)}}g(D),S(ve),U({...D,msg:""})}else g(null),S(null),te(-1),U({question:null,msg:fe})})}catch(O){console.log(O),U({question:null,firstAnswer:null,msg:"Problemos"})}}),ce=async(ee,U)=>new Promise(O=>{try{console.time();const x=encodeURIComponent(ee),j=`${ma.KnowledgeAPI.endpointQuestion}/${i}/${x}/${U}/null`;ie("GET",j).then(Y=>{const ne=Y,{questionRowDtos:fe,msg:ve}=ne;if(console.log(ve),console.log("questionRowDtos:",{dtos:ne},ma.KnowledgeAPI.endpointCategoryRow),console.timeEnd(),fe){const D=fe.map(X=>{const{TopId:M,ParentId:_,Id:N,Title:v,NumOfAssignedAnswers:C,Included:b}=X;return{topId:M,parentId:_??"",id:N,title:v,categoryTitle:"",numOfAssignedAnswers:C??0,included:b??!1}});O(D)}else console.log("no rows in search")})}catch(x){console.log(x)}}),ue=B.useCallback(async()=>{const{assignedAnswers:ee}=f.question,U=ee.length,O=K+1;return K+1<U?(te(O),{nextChatBotAnswer:new AC(ee[O]).chatBotAnswer,hasMoreAnswers:O+1<U}):{nextChatBotAnswer:null,hasMoreAnswers:!1}},[f,K]),G=B.useCallback(async ee=>{const{assignedAnswers:U}=p,O=U[K],x={questionKey:new kc(p).questionKey,assignedAnswerKey:{topId:O.topId,id:O.id},userAction:ee,created:{nickName:t.nickName,time:new Date}};try{const j=new Iw(x,i).historyDto;console.log("historyDto",{historyDto:j});const Y=`${ma.KnowledgeAPI.endpointHistory}`;console.time(),await ie("POST",Y,j).then(ne=>{const fe=ne,{questionDto:ve,msg:D}=fe;console.timeEnd(),console.log(D),ve&&console.log("History successfully created",{questionDto:ve})})}catch(j){console.log(j)}},[i,t,p,K]),oe=B.useCallback(async ee=>{try{if(f===null)return;const{question:U}=f,O={questionKey:new kc(U).questionKey,filter:ee,created:{time:new Date,nickName:t.nickName}},x=new Ow(O,i).historyFilterDto,j=`${ma.KnowledgeAPI.endpointHistoryFilter}`;console.time(),await ie("POST",j,x).then(Y=>{const ne=Y,{questionDto:fe,msg:ve}=ne;console.log(ve),console.timeEnd(),fe&&console.log("History Filter successfully created",{questionDto:fe})})}catch(U){console.log(U)}},[i,f,t]);return[async ee=>new Promise(U=>{try{const{topId:O,id:x}=ee,j=`${ma.KnowledgeAPI.endpointQuestionChat}/${i}/${O}/${x}/0/20`;console.time(),ie("GET",j).then(Y=>{const ne=Y;console.timeEnd();const{rows:fe}=ne;U(ne)})}catch(O){console.log(O),U({rows:[],HasMoreQuestions:!1})}}),r,le,l,se,T,ue,ce,G,oe]},kk=B.forwardRef(({allCatRows:c},t)=>{const[i]=iA("DEMO"),[r,s]=B.useState([]),l=async S=>{const{topId:T,id:A}=S,te=await i({topId:T,id:A,parentId:null}),{rows:ie}=te;console.log(te);let le="<table><thead><tr>             <th>Id</th>            <th>Title</th>            <th>#Answers</th>            <th>Who</th>            <th>When</th>            </tr></thead><tbody>";for(let ce=0;ce<ie.length;ce++){const ue=ie[ce];le+=`<tr>                <td>${ue.Id}</td>                <td width='30%'>${ue.Title}</td>                <td>${ue.AssignedAnswers}</td>                <td>${ue.Who}</td>                <td>${ue.When}</td>                </tr>`}le+="</tbody></table>";const se=document.getElementById("divQuestions");se&&(se.innerHTML=le)},h=({row:S})=>{const{id:T,hasSubCategories:A,title:K}=S;return Z.jsxs(vc.Item,{eventKey:T,children:[Z.jsx(vc.Header,{className:`${A?"":"hide-icon"}`,children:S.link?Z.jsx("a",{href:"#",className:"cat-link",onClick:()=>l(S),children:K}):Z.jsx("span",{className:"cat-title",children:K})}),Z.jsx(vc.Body,{children:S.hasSubCategories&&Z.jsx(f,{rows:S.catRows})})]})},f=({rows:S})=>Z.jsx(Z.Fragment,{children:S.map(T=>Z.jsx(h,{row:T},T.id))}),g=async(S,T)=>{const A=S[0];c.find(te=>A===te.id)&&(T.stopPropagation(),T.preventDefault())},p=async S=>{const{id:T}=S;return c.forEach(async A=>{A.id!==T&&A.parentId===T&&(await p(A),S.catRows.push(A))}),!0};return B.useImperativeHandle(t,()=>({resetNavigator:()=>{s([]),c.forEach(async S=>{S.catRows=[],S.parentId===null&&(await p(S),s(T=>[...T,S]))})}}),[c]),Z.jsx(vc,{defaultActiveKey:"",alwaysOpen:!0,onSelect:g,children:Z.jsx(f,{rows:r})})}),Mk=({show:c,onHide:t})=>{const[r,s]=B.useState("rem"),l=B.useRef(null),[h,f,g,p,S,T,A,K,te,ie]=iA("DEMO");console.log(typeof h),B.useEffect(()=>{(async()=>f||await g())()},[f,g]);const[le,se]=B.useState(1),[ce,ue]=B.useState(!1),[G,oe]=B.useState(null),[J]=B.useState(!0),[ee,U]=B.useState(!0),[O,x]=B.useState([]),j=async()=>{const _=performance.now();await l?.current?.resetNavigator();const v=performance.now()-_;console.log(`Execution time: ${v} milliseconds`)},Y=B.useRef(null),ne=async(_,N)=>{if(await ie(N),G){const I={type:"ANSWER",isDisabled:!0,txt:G.answerTitle,link:G.answerLink};x(z=>[...z,I])}const v=await S(_),{question:C,firstAnswer:b}=v;if(C){if(C.numOfRelatedFilters>0&&s(C.relatedFilters[0].filter),C){const I={type:"QUESTION",isDisabled:!0,txt:C.title,link:null};x(z=>[...z,I])}se(I=>I+1),U(!1),ue(!0),oe(b)}},fe=async()=>{const _={type:"ANSWER",isDisabled:!0,txt:G?G.answerTitle:"no answer title",link:G?G.answerLink:"no answer link",hasMoreAnswers:!0};x(v=>[...v,_]),te("Fixed"),oe(G),ue(!1)},ve=async()=>{const _={type:"ANSWER",isDisabled:!0,txt:G?G.answerTitle:"no answer",link:G?G.answerLink:"no link",hasMoreAnswers:!0};x(C=>[...C,_]);const N=await A(),{nextChatBotAnswer:v}=N;G&&te(v?"NotFixed":"NotClicked"),console.log("----->>>>",{nextChatBotAnswer:v}),oe(v)},D=_=>{const{txt:N}=_;return Z.jsx("div",{id:le.toString(),className:"d-flex flex-row mx-0 justify-content-start align-items-center",children:Z.jsxs("div",{className:"d-flex flex-row mx-0 justify-content-start align-items-center",children:[Z.jsx("img",{width:"22",height:"18",src:Pw,alt:"Question",className:"ms-1"}),Z.jsx("div",{className:"p-1 bg-warning text-light flex-wrap text-wrap border rounded-1",children:N})]})})},X=_=>{console.log("--------------------------------------AnswerComponent",_);const{isDisabled:N,txt:v,link:C}=_;return Z.jsx("div",{id:G?.id,className:"dark mt-1 mx-1 border border-0 rounded-1",children:Z.jsxs("div",{className:"d-flex flex-row mx-0 justify-content-start align-items-center",children:[Z.jsxs("div",{className:"d-flex flex-row mx-0 justify-content-start align-items-center",children:[Z.jsx("img",{width:"22",height:"18",src:Hw,alt:"Answer",className:"ms-1"}),C?Z.jsx("div",{className:"p-1 bg-info text-light flex-wrap text-wrap border rounded-1 ",children:Z.jsx("a",{href:C,rel:"noopener noreferrer",target:"_blank",className:"text-light text-decoration-underline",children:v})}):Z.jsx("div",{className:"p-1 bg-info text-light flex-wrap text-wrap border rounded-1",children:v})]}),!N&&G&&Z.jsxs("div",{children:[Z.jsx(Ko,{size:"sm",type:"button",onClick:fe,disabled:!G,className:"align-middle ms-1 px-1  py-0",variant:"success",children:"Fixed"}),Z.jsx(Ko,{size:"sm",type:"button",onClick:ve,disabled:!G,className:"align-middle ms-1 border border-1 rounded-1 px-1 py-0",variant:"danger",children:"Not fixed"})]})]})})},M=_=>{const{isDisabled:N,txt:v}=_;return Z.jsxs("div",{className:"dark",children:[Z.jsx("label",{className:"text-warning",children:"Please enter the Question"}),Z.jsx("div",{className:"text-start",children:Z.jsxs("div",{className:"questions",children:[N&&Z.jsx("div",{children:v}),!N&&Z.jsx(xw,{tekst:v,onSelectQuestion:ne,allCats:f,searchQuestions:K})]})})]})};return console.log("=====================>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> rendering ChatBotDlg"),f?Z.jsxs("div",{className:"pe-6 overflow-auto chat-bot-dlg",children:[Z.jsx("style",{children:`
                .accordion-body {
                    padding: 0.0rem 0.5rem;
                    padding-right: 0;
                    font-size: 0.6rem;
                }

                .accordion-button  {
                    padding: 0rem 0.2rem !important;
                    padding-right: 0 !important;
                    border: 0; //px solid inset;
                    //border-radius: 3px;
                    //text-align: left;
                    font-size: 1rem;
                }
                    
                ul {
                    list-style-type: none;
                }

                .cat-link {
                    // text-decoration:  none;
                    color: inherit;
                }

                .cat-link.btn {
                    padding: 0;
                }

                .cat-title {
                    // text-decoration:  none;
                    color: inherit;
                }

                .accordion-header.hide-icon > button.accordion-button::after {
                    display: none;
                    padding: 0rem 0.2rem !important;
                    padding-right: 0 !important;
                }
            }
            `}),Z.jsxs(Cc,{show:c,onHide:t,placement:"end",scroll:!0,backdrop:!0,onEntering:j,children:[" ",Z.jsx(Cc.Header,{closeButton:!0,children:Z.jsx(Cc.Title,{className:"fs-6",children:"I am your Buddy"})}),Z.jsx(Cc.Body,{className:"p-0 border border-1 rounded-3",children:Z.jsxs(LC,{id:"container",fluid:!0,className:"text-primary",children:[" ",Z.jsx(Ah,{className:"m-0",children:Z.jsx(Sh,{children:Z.jsx(kk,{allCatRows:p,ref:l})})}),Z.jsx(Ah,{className:"m-0",children:Z.jsxs(Sh,{className:"border border-0 border-primary mx-1 text-white p-0",children:[Z.jsx("div",{className:"history",children:O.map(_=>{switch(_.type){case"AUTO_SUGGEST":return Z.jsx(M,{..._});case"QUESTION":return Z.jsx(D,{..._});case"ANSWER":return Z.jsx(X,{..._});default:return Z.jsx("div",{children:"unknown"})}})},"history"),ce&&Z.jsx("div",{children:Z.jsx(X,{type:"ANSWER",isDisabled:!1,txt:G?G.answerTitle:"no answers",hasMoreAnswers:T,link:G?G.answerLink:""})},"answer"),J&&!ee&&Z.jsx(Ko,{variant:"secondary",size:"sm",type:"button",onClick:()=>{se(le+1),U(!0)},className:"m-1 border border-1 rounded-1 py-0",children:"New Question"},"newQuestion"),ee&&Z.jsx("div",{className:"pb-35 questions",children:Z.jsx(M,{type:"AUTO_SUGGEST",isDisabled:!1,txt:r,link:null})}),Z.jsx("div",{ref:Y,children:"dno dna"})]})})]})})]})]}):"loading ..."};function Nk(){B.useEffect(()=>{},[]);const[c,t]=B.useState(!1),i=()=>t(!1),r=()=>t(!0);return Z.jsxs(Z.Fragment,{children:[Z.jsxs("div",{className:"card p-1",children:[Z.jsx("img",{width:"64",height:"64",src:U_,alt:"Chat",className:"rounded mx-auto d-block"}),Z.jsx(Ko,{variant:"primary",onClick:r,className:"my-1",children:"I am your buddy."})]}),Z.jsx(Mk,{show:c,onHide:i})]})}const Dk=new tg(Ok);await Dk.initialize();b_.createRoot(document.getElementById("root")).render(Z.jsx(B.StrictMode,{children:Z.jsx(Nk,{})}));
//# sourceMappingURL=index.js.map
