(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function i(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(s){if(s.ep)return;s.ep=!0;const l=i(s);fetch(s.href,l)}})();function wo(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var Bd={exports:{}},xa={};var Wy;function v_(){if(Wy)return xa;Wy=1;var c=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(r,s,l){var h=null;if(l!==void 0&&(h=""+l),s.key!==void 0&&(h=""+s.key),"key"in s){l={};for(var f in s)f!=="key"&&(l[f]=s[f])}else l=s;return s=l.ref,{$$typeof:c,type:r,key:h,ref:s!==void 0?s:null,props:l}}return xa.Fragment=t,xa.jsx=i,xa.jsxs=i,xa}var ev;function C_(){return ev||(ev=1,Bd.exports=v_()),Bd.exports}var J=C_(),Kd={exports:{}},Ee={};var tv;function S_(){if(tv)return Ee;tv=1;var c=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),h=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),A=Symbol.iterator;function K(v){return v===null||typeof v!="object"?null:(v=A&&v[A]||v["@@iterator"],typeof v=="function"?v:null)}var ee={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ie=Object.assign,le={};function se(v,C,b){this.props=v,this.context=C,this.refs=le,this.updater=b||ee}se.prototype.isReactComponent={},se.prototype.setState=function(v,C){if(typeof v!="object"&&typeof v!="function"&&v!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,v,C,"setState")},se.prototype.forceUpdate=function(v){this.updater.enqueueForceUpdate(this,v,"forceUpdate")};function ce(){}ce.prototype=se.prototype;function ue(v,C,b){this.props=v,this.context=C,this.refs=le,this.updater=b||ee}var G=ue.prototype=new ce;G.constructor=ue,ie(G,se.prototype),G.isPureReactComponent=!0;var ae=Array.isArray;function $(){}var te={H:null,A:null,T:null,S:null},U=Object.prototype.hasOwnProperty;function O(v,C,b){var I=b.ref;return{$$typeof:c,type:v,key:C,ref:I!==void 0?I:null,props:b}}function x(v,C){return O(v.type,C,v.props)}function j(v){return typeof v=="object"&&v!==null&&v.$$typeof===c}function Y(v){var C={"=":"=0",":":"=2"};return"$"+v.replace(/[=:]/g,function(b){return C[b]})}var ne=/\/+/g;function fe(v,C){return typeof v=="object"&&v!==null&&v.key!=null?Y(""+v.key):C.toString(36)}function ve(v){switch(v.status){case"fulfilled":return v.value;case"rejected":throw v.reason;default:switch(typeof v.status=="string"?v.then($,$):(v.status="pending",v.then(function(C){v.status==="pending"&&(v.status="fulfilled",v.value=C)},function(C){v.status==="pending"&&(v.status="rejected",v.reason=C)})),v.status){case"fulfilled":return v.value;case"rejected":throw v.reason}}throw v}function D(v,C,b,I,z){var oe=typeof v;(oe==="undefined"||oe==="boolean")&&(v=null);var de=!1;if(v===null)de=!0;else switch(oe){case"bigint":case"string":case"number":de=!0;break;case"object":switch(v.$$typeof){case c:case t:de=!0;break;case S:return de=v._init,D(de(v._payload),C,b,I,z)}}if(de)return z=z(v),de=I===""?"."+fe(v,0):I,ae(z)?(b="",de!=null&&(b=de.replace(ne,"$&/")+"/"),D(z,C,b,"",function(qe){return qe})):z!=null&&(j(z)&&(z=x(z,b+(z.key==null||v&&v.key===z.key?"":(""+z.key).replace(ne,"$&/")+"/")+de)),C.push(z)),1;de=0;var Te=I===""?".":I+":";if(ae(v))for(var Ae=0;Ae<v.length;Ae++)I=v[Ae],oe=Te+fe(I,Ae),de+=D(I,C,b,oe,z);else if(Ae=K(v),typeof Ae=="function")for(v=Ae.call(v),Ae=0;!(I=v.next()).done;)I=I.value,oe=Te+fe(I,Ae++),de+=D(I,C,b,oe,z);else if(oe==="object"){if(typeof v.then=="function")return D(ve(v),C,b,I,z);throw C=String(v),Error("Objects are not valid as a React child (found: "+(C==="[object Object]"?"object with keys {"+Object.keys(v).join(", ")+"}":C)+"). If you meant to render a collection of children, use an array instead.")}return de}function X(v,C,b){if(v==null)return v;var I=[],z=0;return D(v,I,"","",function(oe){return C.call(b,oe,z++)}),I}function M(v){if(v._status===-1){var C=v._result;C=C(),C.then(function(b){(v._status===0||v._status===-1)&&(v._status=1,v._result=b)},function(b){(v._status===0||v._status===-1)&&(v._status=2,v._result=b)}),v._status===-1&&(v._status=0,v._result=C)}if(v._status===1)return v._result.default;throw v._result}var _=typeof reportError=="function"?reportError:function(v){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var C=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof v=="object"&&v!==null&&typeof v.message=="string"?String(v.message):String(v),error:v});if(!window.dispatchEvent(C))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",v);return}console.error(v)},N={map:X,forEach:function(v,C,b){X(v,function(){C.apply(this,arguments)},b)},count:function(v){var C=0;return X(v,function(){C++}),C},toArray:function(v){return X(v,function(C){return C})||[]},only:function(v){if(!j(v))throw Error("React.Children.only expected to receive a single React element child.");return v}};return Ee.Activity=T,Ee.Children=N,Ee.Component=se,Ee.Fragment=i,Ee.Profiler=s,Ee.PureComponent=ue,Ee.StrictMode=r,Ee.Suspense=g,Ee.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=te,Ee.__COMPILER_RUNTIME={__proto__:null,c:function(v){return te.H.useMemoCache(v)}},Ee.cache=function(v){return function(){return v.apply(null,arguments)}},Ee.cacheSignal=function(){return null},Ee.cloneElement=function(v,C,b){if(v==null)throw Error("The argument must be a React element, but you passed "+v+".");var I=ie({},v.props),z=v.key;if(C!=null)for(oe in C.key!==void 0&&(z=""+C.key),C)!U.call(C,oe)||oe==="key"||oe==="__self"||oe==="__source"||oe==="ref"&&C.ref===void 0||(I[oe]=C[oe]);var oe=arguments.length-2;if(oe===1)I.children=b;else if(1<oe){for(var de=Array(oe),Te=0;Te<oe;Te++)de[Te]=arguments[Te+2];I.children=de}return O(v.type,z,I)},Ee.createContext=function(v){return v={$$typeof:h,_currentValue:v,_currentValue2:v,_threadCount:0,Provider:null,Consumer:null},v.Provider=v,v.Consumer={$$typeof:l,_context:v},v},Ee.createElement=function(v,C,b){var I,z={},oe=null;if(C!=null)for(I in C.key!==void 0&&(oe=""+C.key),C)U.call(C,I)&&I!=="key"&&I!=="__self"&&I!=="__source"&&(z[I]=C[I]);var de=arguments.length-2;if(de===1)z.children=b;else if(1<de){for(var Te=Array(de),Ae=0;Ae<de;Ae++)Te[Ae]=arguments[Ae+2];z.children=Te}if(v&&v.defaultProps)for(I in de=v.defaultProps,de)z[I]===void 0&&(z[I]=de[I]);return O(v,oe,z)},Ee.createRef=function(){return{current:null}},Ee.forwardRef=function(v){return{$$typeof:f,render:v}},Ee.isValidElement=j,Ee.lazy=function(v){return{$$typeof:S,_payload:{_status:-1,_result:v},_init:M}},Ee.memo=function(v,C){return{$$typeof:p,type:v,compare:C===void 0?null:C}},Ee.startTransition=function(v){var C=te.T,b={};te.T=b;try{var I=v(),z=te.S;z!==null&&z(b,I),typeof I=="object"&&I!==null&&typeof I.then=="function"&&I.then($,_)}catch(oe){_(oe)}finally{C!==null&&b.types!==null&&(C.types=b.types),te.T=C}},Ee.unstable_useCacheRefresh=function(){return te.H.useCacheRefresh()},Ee.use=function(v){return te.H.use(v)},Ee.useActionState=function(v,C,b){return te.H.useActionState(v,C,b)},Ee.useCallback=function(v,C){return te.H.useCallback(v,C)},Ee.useContext=function(v){return te.H.useContext(v)},Ee.useDebugValue=function(){},Ee.useDeferredValue=function(v,C){return te.H.useDeferredValue(v,C)},Ee.useEffect=function(v,C){return te.H.useEffect(v,C)},Ee.useEffectEvent=function(v){return te.H.useEffectEvent(v)},Ee.useId=function(){return te.H.useId()},Ee.useImperativeHandle=function(v,C,b){return te.H.useImperativeHandle(v,C,b)},Ee.useInsertionEffect=function(v,C){return te.H.useInsertionEffect(v,C)},Ee.useLayoutEffect=function(v,C){return te.H.useLayoutEffect(v,C)},Ee.useMemo=function(v,C){return te.H.useMemo(v,C)},Ee.useOptimistic=function(v,C){return te.H.useOptimistic(v,C)},Ee.useReducer=function(v,C,b){return te.H.useReducer(v,C,b)},Ee.useRef=function(v){return te.H.useRef(v)},Ee.useState=function(v){return te.H.useState(v)},Ee.useSyncExternalStore=function(v,C,b){return te.H.useSyncExternalStore(v,C,b)},Ee.useTransition=function(){return te.H.useTransition()},Ee.version="19.2.0",Ee}var nv;function Xi(){return nv||(nv=1,Kd.exports=S_()),Kd.exports}var B=Xi();const Hn=wo(B);var qd={exports:{}},Pa={},jd={exports:{}},Gd={};var iv;function T_(){return iv||(iv=1,(function(c){function t(D,X){var M=D.length;D.push(X);e:for(;0<M;){var _=M-1>>>1,N=D[_];if(0<s(N,X))D[_]=X,D[M]=N,M=_;else break e}}function i(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var X=D[0],M=D.pop();if(M!==X){D[0]=M;e:for(var _=0,N=D.length,v=N>>>1;_<v;){var C=2*(_+1)-1,b=D[C],I=C+1,z=D[I];if(0>s(b,M))I<N&&0>s(z,b)?(D[_]=z,D[I]=M,_=I):(D[_]=b,D[C]=M,_=C);else if(I<N&&0>s(z,M))D[_]=z,D[I]=M,_=I;else break e}}return X}function s(D,X){var M=D.sortIndex-X.sortIndex;return M!==0?M:D.id-X.id}if(c.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;c.unstable_now=function(){return l.now()}}else{var h=Date,f=h.now();c.unstable_now=function(){return h.now()-f}}var g=[],p=[],S=1,T=null,A=3,K=!1,ee=!1,ie=!1,le=!1,se=typeof setTimeout=="function"?setTimeout:null,ce=typeof clearTimeout=="function"?clearTimeout:null,ue=typeof setImmediate<"u"?setImmediate:null;function G(D){for(var X=i(p);X!==null;){if(X.callback===null)r(p);else if(X.startTime<=D)r(p),X.sortIndex=X.expirationTime,t(g,X);else break;X=i(p)}}function ae(D){if(ie=!1,G(D),!ee)if(i(g)!==null)ee=!0,$||($=!0,Y());else{var X=i(p);X!==null&&ve(ae,X.startTime-D)}}var $=!1,te=-1,U=5,O=-1;function x(){return le?!0:!(c.unstable_now()-O<U)}function j(){if(le=!1,$){var D=c.unstable_now();O=D;var X=!0;try{e:{ee=!1,ie&&(ie=!1,ce(te),te=-1),K=!0;var M=A;try{t:{for(G(D),T=i(g);T!==null&&!(T.expirationTime>D&&x());){var _=T.callback;if(typeof _=="function"){T.callback=null,A=T.priorityLevel;var N=_(T.expirationTime<=D);if(D=c.unstable_now(),typeof N=="function"){T.callback=N,G(D),X=!0;break t}T===i(g)&&r(g),G(D)}else r(g);T=i(g)}if(T!==null)X=!0;else{var v=i(p);v!==null&&ve(ae,v.startTime-D),X=!1}}break e}finally{T=null,A=M,K=!1}X=void 0}}finally{X?Y():$=!1}}}var Y;if(typeof ue=="function")Y=function(){ue(j)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,fe=ne.port2;ne.port1.onmessage=j,Y=function(){fe.postMessage(null)}}else Y=function(){se(j,0)};function ve(D,X){te=se(function(){D(c.unstable_now())},X)}c.unstable_IdlePriority=5,c.unstable_ImmediatePriority=1,c.unstable_LowPriority=4,c.unstable_NormalPriority=3,c.unstable_Profiling=null,c.unstable_UserBlockingPriority=2,c.unstable_cancelCallback=function(D){D.callback=null},c.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<D?Math.floor(1e3/D):5},c.unstable_getCurrentPriorityLevel=function(){return A},c.unstable_next=function(D){switch(A){case 1:case 2:case 3:var X=3;break;default:X=A}var M=A;A=X;try{return D()}finally{A=M}},c.unstable_requestPaint=function(){le=!0},c.unstable_runWithPriority=function(D,X){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var M=A;A=D;try{return X()}finally{A=M}},c.unstable_scheduleCallback=function(D,X,M){var _=c.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?_+M:_):M=_,D){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=M+N,D={id:S++,callback:X,priorityLevel:D,startTime:M,expirationTime:N,sortIndex:-1},M>_?(D.sortIndex=M,t(p,D),i(g)===null&&D===i(p)&&(ie?(ce(te),te=-1):ie=!0,ve(ae,M-_))):(D.sortIndex=N,t(g,D),ee||K||(ee=!0,$||($=!0,Y()))),D},c.unstable_shouldYield=x,c.unstable_wrapCallback=function(D){var X=A;return function(){var M=A;A=X;try{return D.apply(this,arguments)}finally{A=M}}}})(Gd)),Gd}var ov;function A_(){return ov||(ov=1,jd.exports=T_()),jd.exports}var Fd={exports:{}},Mt={};var rv;function E_(){if(rv)return Mt;rv=1;var c=Xi();function t(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)p+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var r={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},s=Symbol.for("react.portal");function l(g,p,S){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:T==null?null:""+T,children:g,containerInfo:p,implementation:S}}var h=c.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Mt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Mt.createPortal=function(g,p){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return l(g,p,null,S)},Mt.flushSync=function(g){var p=h.T,S=r.p;try{if(h.T=null,r.p=2,g)return g()}finally{h.T=p,r.p=S,r.d.f()}},Mt.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(g,p))},Mt.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},Mt.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var S=p.as,T=f(S,p.crossOrigin),A=typeof p.integrity=="string"?p.integrity:void 0,K=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;S==="style"?r.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:T,integrity:A,fetchPriority:K}):S==="script"&&r.d.X(g,{crossOrigin:T,integrity:A,fetchPriority:K,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Mt.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var S=f(p.as,p.crossOrigin);r.d.M(g,{crossOrigin:S,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(g)},Mt.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var S=p.as,T=f(S,p.crossOrigin);r.d.L(g,S,{crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Mt.preloadModule=function(g,p){if(typeof g=="string")if(p){var S=f(p.as,p.crossOrigin);r.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:S,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(g)},Mt.requestFormReset=function(g){r.d.r(g)},Mt.unstable_batchedUpdates=function(g,p){return g(p)},Mt.useFormState=function(g,p,S){return h.H.useFormState(g,p,S)},Mt.useFormStatus=function(){return h.H.useHostTransitionStatus()},Mt.version="19.2.0",Mt}var av;function _C(){if(av)return Fd.exports;av=1;function c(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(c)}catch(t){console.error(t)}}return c(),Fd.exports=E_(),Fd.exports}var sv;function __(){if(sv)return Pa;sv=1;var c=A_(),t=Xi(),i=_C();function r(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)n+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function l(e){var n=e,o=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(o=n.return),e=n.return;while(e)}return n.tag===3?o:null}function h(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function f(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function g(e){if(l(e)!==e)throw Error(r(188))}function p(e){var n=e.alternate;if(!n){if(n=l(e),n===null)throw Error(r(188));return n!==e?null:e}for(var o=e,a=n;;){var u=o.return;if(u===null)break;var d=u.alternate;if(d===null){if(a=u.return,a!==null){o=a;continue}break}if(u.child===d.child){for(d=u.child;d;){if(d===o)return g(u),e;if(d===a)return g(u),n;d=d.sibling}throw Error(r(188))}if(o.return!==a.return)o=u,a=d;else{for(var m=!1,y=u.child;y;){if(y===o){m=!0,o=u,a=d;break}if(y===a){m=!0,a=u,o=d;break}y=y.sibling}if(!m){for(y=d.child;y;){if(y===o){m=!0,o=d,a=u;break}if(y===a){m=!0,a=d,o=u;break}y=y.sibling}if(!m)throw Error(r(189))}}if(o.alternate!==a)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?e:n}function S(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=S(e),n!==null)return n;e=e.sibling}return null}var T=Object.assign,A=Symbol.for("react.element"),K=Symbol.for("react.transitional.element"),ee=Symbol.for("react.portal"),ie=Symbol.for("react.fragment"),le=Symbol.for("react.strict_mode"),se=Symbol.for("react.profiler"),ce=Symbol.for("react.consumer"),ue=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),ae=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),te=Symbol.for("react.memo"),U=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),x=Symbol.for("react.memo_cache_sentinel"),j=Symbol.iterator;function Y(e){return e===null||typeof e!="object"?null:(e=j&&e[j]||e["@@iterator"],typeof e=="function"?e:null)}var ne=Symbol.for("react.client.reference");function fe(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===ne?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ie:return"Fragment";case se:return"Profiler";case le:return"StrictMode";case ae:return"Suspense";case $:return"SuspenseList";case O:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case ee:return"Portal";case ue:return e.displayName||"Context";case ce:return(e._context.displayName||"Context")+".Consumer";case G:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case te:return n=e.displayName||null,n!==null?n:fe(e.type)||"Memo";case U:n=e._payload,e=e._init;try{return fe(e(n))}catch{}}return null}var ve=Array.isArray,D=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M={pending:!1,data:null,method:null,action:null},_=[],N=-1;function v(e){return{current:e}}function C(e){0>N||(e.current=_[N],_[N]=null,N--)}function b(e,n){N++,_[N]=e.current,e.current=n}var I=v(null),z=v(null),oe=v(null),de=v(null);function Te(e,n){switch(b(oe,n),b(z,e),b(I,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?Ay(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=Ay(n),e=Ey(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}C(I),b(I,e)}function Ae(){C(I),C(z),C(oe)}function qe(e){e.memoizedState!==null&&b(de,e);var n=I.current,o=Ey(n,e.type);n!==o&&(b(z,e),b(I,o))}function We(e){z.current===e&&(C(I),C(z)),de.current===e&&(C(de),Ma._currentValue=M)}var ht,ft;function at(e){if(ht===void 0)try{throw Error()}catch(o){var n=o.stack.trim().match(/\n( *(at )?)/);ht=n&&n[1]||"",ft=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ht+e+ft}var we=!1;function Xt(e,n){if(!e||we)return"";we=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var a={DetermineComponentFrameRoot:function(){try{if(n){var Z=function(){throw Error()};if(Object.defineProperty(Z.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Z,[])}catch(q){var L=q}Reflect.construct(e,[],Z)}else{try{Z.call()}catch(q){L=q}e.call(Z.prototype)}}else{try{throw Error()}catch(q){L=q}(Z=e())&&typeof Z.catch=="function"&&Z.catch(function(){})}}catch(q){if(q&&L&&typeof q.stack=="string")return[q.stack,L.stack]}return[null,null]}};a.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var u=Object.getOwnPropertyDescriptor(a.DetermineComponentFrameRoot,"name");u&&u.configurable&&Object.defineProperty(a.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=a.DetermineComponentFrameRoot(),m=d[0],y=d[1];if(m&&y){var E=m.split(`
`),H=y.split(`
`);for(u=a=0;a<E.length&&!E[a].includes("DetermineComponentFrameRoot");)a++;for(;u<H.length&&!H[u].includes("DetermineComponentFrameRoot");)u++;if(a===E.length||u===H.length)for(a=E.length-1,u=H.length-1;1<=a&&0<=u&&E[a]!==H[u];)u--;for(;1<=a&&0<=u;a--,u--)if(E[a]!==H[u]){if(a!==1||u!==1)do if(a--,u--,0>u||E[a]!==H[u]){var F=`
`+E[a].replace(" at new "," at ");return e.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",e.displayName)),F}while(1<=a&&0<=u);break}}}finally{we=!1,Error.prepareStackTrace=o}return(o=e?e.displayName||e.name:"")?at(o):""}function sn(e,n){switch(e.tag){case 26:case 27:case 5:return at(e.type);case 16:return at("Lazy");case 13:return e.child!==n&&n!==null?at("Suspense Fallback"):at("Suspense");case 19:return at("SuspenseList");case 0:case 15:return Xt(e.type,!1);case 11:return Xt(e.type.render,!1);case 1:return Xt(e.type,!0);case 31:return at("Activity");default:return""}}function cn(e){try{var n="",o=null;do n+=sn(e,o),o=e,e=e.return;while(e);return n}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}var zr=Object.prototype.hasOwnProperty,Io=c.unstable_scheduleCallback,Oo=c.unstable_cancelCallback,ns=c.unstable_shouldYield,ko=c.unstable_requestPaint,yt=c.unstable_now,hi=c.unstable_getCurrentPriorityLevel,Br=c.unstable_ImmediatePriority,Kr=c.unstable_UserBlockingPriority,Mo=c.unstable_NormalPriority,No=c.unstable_LowPriority,is=c.unstable_IdlePriority,wl=c.log,Rl=c.unstable_setDisableYieldValue,Bn=null,De=null;function vt(e){if(typeof wl=="function"&&Rl(e),De&&typeof De.setStrictMode=="function")try{De.setStrictMode(Bn,e)}catch{}}var gt=Math.clz32?Math.clz32:jr,os=Math.log,qr=Math.LN2;function jr(e){return e>>>=0,e===0?32:31-(os(e)/qr|0)|0}var fi=256,Ji=262144,$i=4194304;function Sn(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function rs(e,n,o){var a=e.pendingLanes;if(a===0)return 0;var u=0,d=e.suspendedLanes,m=e.pingedLanes;e=e.warmLanes;var y=a&134217727;return y!==0?(a=y&~d,a!==0?u=Sn(a):(m&=y,m!==0?u=Sn(m):o||(o=y&~e,o!==0&&(u=Sn(o))))):(y=a&~d,y!==0?u=Sn(y):m!==0?u=Sn(m):o||(o=a&~e,o!==0&&(u=Sn(o)))),u===0?0:n!==0&&n!==u&&(n&d)===0&&(d=u&-u,o=n&-n,d>=o||d===32&&(o&4194048)!==0)?n:u}function Gr(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function rA(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ig(){var e=$i;return $i<<=1,($i&62914560)===0&&($i=4194304),e}function Il(e){for(var n=[],o=0;31>o;o++)n.push(e);return n}function Fr(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function aA(e,n,o,a,u,d){var m=e.pendingLanes;e.pendingLanes=o,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=o,e.entangledLanes&=o,e.errorRecoveryDisabledLanes&=o,e.shellSuspendCounter=0;var y=e.entanglements,E=e.expirationTimes,H=e.hiddenUpdates;for(o=m&~o;0<o;){var F=31-gt(o),Z=1<<F;y[F]=0,E[F]=-1;var L=H[F];if(L!==null)for(H[F]=null,F=0;F<L.length;F++){var q=L[F];q!==null&&(q.lane&=-536870913)}o&=~Z}a!==0&&og(e,a,0),d!==0&&u===0&&e.tag!==0&&(e.suspendedLanes|=d&~(m&~n))}function og(e,n,o){e.pendingLanes|=n,e.suspendedLanes&=~n;var a=31-gt(n);e.entangledLanes|=n,e.entanglements[a]=e.entanglements[a]|1073741824|o&261930}function rg(e,n){var o=e.entangledLanes|=n;for(e=e.entanglements;o;){var a=31-gt(o),u=1<<a;u&n|e[a]&n&&(e[a]|=n),o&=~u}}function ag(e,n){var o=n&-n;return o=(o&42)!==0?1:Ol(o),(o&(e.suspendedLanes|n))!==0?0:o}function Ol(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function kl(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function sg(){var e=X.p;return e!==0?e:(e=window.event,e===void 0?32:Qy(e.type))}function cg(e,n){var o=X.p;try{return X.p=e,n()}finally{X.p=o}}var gi=Math.random().toString(36).slice(2),At="__reactFiber$"+gi,zt="__reactProps$"+gi,Do="__reactContainer$"+gi,Ml="__reactEvents$"+gi,sA="__reactListeners$"+gi,cA="__reactHandles$"+gi,lg="__reactResources$"+gi,Qr="__reactMarker$"+gi;function Nl(e){delete e[At],delete e[zt],delete e[Ml],delete e[sA],delete e[cA]}function Uo(e){var n=e[At];if(n)return n;for(var o=e.parentNode;o;){if(n=o[Do]||o[At]){if(o=n.alternate,n.child!==null||o!==null&&o.child!==null)for(e=ky(e);e!==null;){if(o=e[At])return o;e=ky(e)}return n}e=o,o=e.parentNode}return null}function xo(e){if(e=e[At]||e[Do]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function Yr(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(r(33))}function Po(e){var n=e[lg];return n||(n=e[lg]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function Ct(e){e[Qr]=!0}var ug=new Set,dg={};function Zi(e,n){Ho(e,n),Ho(e+"Capture",n)}function Ho(e,n){for(dg[e]=n,e=0;e<n.length;e++)ug.add(n[e])}var lA=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),hg={},fg={};function uA(e){return zr.call(fg,e)?!0:zr.call(hg,e)?!1:lA.test(e)?fg[e]=!0:(hg[e]=!0,!1)}function as(e,n,o){if(uA(n))if(o===null)e.removeAttribute(n);else{switch(typeof o){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var a=n.toLowerCase().slice(0,5);if(a!=="data-"&&a!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+o)}}function ss(e,n,o){if(o===null)e.removeAttribute(n);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+o)}}function Kn(e,n,o,a){if(a===null)e.removeAttribute(o);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(o);return}e.setAttributeNS(n,o,""+a)}}function ln(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function gg(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function dA(e,n,o){var a=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var u=a.get,d=a.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return u.call(this)},set:function(m){o=""+m,d.call(this,m)}}),Object.defineProperty(e,n,{enumerable:a.enumerable}),{getValue:function(){return o},setValue:function(m){o=""+m},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Dl(e){if(!e._valueTracker){var n=gg(e)?"checked":"value";e._valueTracker=dA(e,n,""+e[n])}}function mg(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var o=n.getValue(),a="";return e&&(a=gg(e)?e.checked?"true":"false":e.value),e=a,e!==o?(n.setValue(e),!0):!1}function cs(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var hA=/[\n"\\]/g;function un(e){return e.replace(hA,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Ul(e,n,o,a,u,d,m,y){e.name="",m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"?e.type=m:e.removeAttribute("type"),n!=null?m==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+ln(n)):e.value!==""+ln(n)&&(e.value=""+ln(n)):m!=="submit"&&m!=="reset"||e.removeAttribute("value"),n!=null?xl(e,m,ln(n)):o!=null?xl(e,m,ln(o)):a!=null&&e.removeAttribute("value"),u==null&&d!=null&&(e.defaultChecked=!!d),u!=null&&(e.checked=u&&typeof u!="function"&&typeof u!="symbol"),y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?e.name=""+ln(y):e.removeAttribute("name")}function pg(e,n,o,a,u,d,m,y){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),n!=null||o!=null){if(!(d!=="submit"&&d!=="reset"||n!=null)){Dl(e);return}o=o!=null?""+ln(o):"",n=n!=null?""+ln(n):o,y||n===e.value||(e.value=n),e.defaultValue=n}a=a??u,a=typeof a!="function"&&typeof a!="symbol"&&!!a,e.checked=y?e.checked:!!a,e.defaultChecked=!!a,m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(e.name=m),Dl(e)}function xl(e,n,o){n==="number"&&cs(e.ownerDocument)===e||e.defaultValue===""+o||(e.defaultValue=""+o)}function Lo(e,n,o,a){if(e=e.options,n){n={};for(var u=0;u<o.length;u++)n["$"+o[u]]=!0;for(o=0;o<e.length;o++)u=n.hasOwnProperty("$"+e[o].value),e[o].selected!==u&&(e[o].selected=u),u&&a&&(e[o].defaultSelected=!0)}else{for(o=""+ln(o),n=null,u=0;u<e.length;u++){if(e[u].value===o){e[u].selected=!0,a&&(e[u].defaultSelected=!0);return}n!==null||e[u].disabled||(n=e[u])}n!==null&&(n.selected=!0)}}function yg(e,n,o){if(n!=null&&(n=""+ln(n),n!==e.value&&(e.value=n),o==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=o!=null?""+ln(o):""}function vg(e,n,o,a){if(n==null){if(a!=null){if(o!=null)throw Error(r(92));if(ve(a)){if(1<a.length)throw Error(r(93));a=a[0]}o=a}o==null&&(o=""),n=o}o=ln(n),e.defaultValue=o,a=e.textContent,a===o&&a!==""&&a!==null&&(e.value=a),Dl(e)}function zo(e,n){if(n){var o=e.firstChild;if(o&&o===e.lastChild&&o.nodeType===3){o.nodeValue=n;return}}e.textContent=n}var fA=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Cg(e,n,o){var a=n.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?a?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":a?e.setProperty(n,o):typeof o!="number"||o===0||fA.has(n)?n==="float"?e.cssFloat=o:e[n]=(""+o).trim():e[n]=o+"px"}function Sg(e,n,o){if(n!=null&&typeof n!="object")throw Error(r(62));if(e=e.style,o!=null){for(var a in o)!o.hasOwnProperty(a)||n!=null&&n.hasOwnProperty(a)||(a.indexOf("--")===0?e.setProperty(a,""):a==="float"?e.cssFloat="":e[a]="");for(var u in n)a=n[u],n.hasOwnProperty(u)&&o[u]!==a&&Cg(e,u,a)}else for(var d in n)n.hasOwnProperty(d)&&Cg(e,d,n[d])}function Pl(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gA=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),mA=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ls(e){return mA.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function qn(){}var Hl=null;function Ll(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Bo=null,Ko=null;function Tg(e){var n=xo(e);if(n&&(e=n.stateNode)){var o=e[zt]||null;e:switch(e=n.stateNode,n.type){case"input":if(Ul(e,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),n=o.name,o.type==="radio"&&n!=null){for(o=e;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+un(""+n)+'"][type="radio"]'),n=0;n<o.length;n++){var a=o[n];if(a!==e&&a.form===e.form){var u=a[zt]||null;if(!u)throw Error(r(90));Ul(a,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name)}}for(n=0;n<o.length;n++)a=o[n],a.form===e.form&&mg(a)}break e;case"textarea":yg(e,o.value,o.defaultValue);break e;case"select":n=o.value,n!=null&&Lo(e,!!o.multiple,n,!1)}}}var zl=!1;function Ag(e,n,o){if(zl)return e(n,o);zl=!0;try{var a=e(n);return a}finally{if(zl=!1,(Bo!==null||Ko!==null)&&(Js(),Bo&&(n=Bo,e=Ko,Ko=Bo=null,Tg(n),e)))for(n=0;n<e.length;n++)Tg(e[n])}}function Vr(e,n){var o=e.stateNode;if(o===null)return null;var a=o[zt]||null;if(a===null)return null;o=a[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(o&&typeof o!="function")throw Error(r(231,n,typeof o));return o}var jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bl=!1;if(jn)try{var Xr={};Object.defineProperty(Xr,"passive",{get:function(){Bl=!0}}),window.addEventListener("test",Xr,Xr),window.removeEventListener("test",Xr,Xr)}catch{Bl=!1}var mi=null,Kl=null,us=null;function Eg(){if(us)return us;var e,n=Kl,o=n.length,a,u="value"in mi?mi.value:mi.textContent,d=u.length;for(e=0;e<o&&n[e]===u[e];e++);var m=o-e;for(a=1;a<=m&&n[o-a]===u[d-a];a++);return us=u.slice(e,1<a?1-a:void 0)}function ds(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function hs(){return!0}function _g(){return!1}function Bt(e){function n(o,a,u,d,m){this._reactName=o,this._targetInst=u,this.type=a,this.nativeEvent=d,this.target=m,this.currentTarget=null;for(var y in e)e.hasOwnProperty(y)&&(o=e[y],this[y]=o?o(d):d[y]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?hs:_g,this.isPropagationStopped=_g,this}return T(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=hs)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=hs)},persist:function(){},isPersistent:hs}),n}var Wi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fs=Bt(Wi),Jr=T({},Wi,{view:0,detail:0}),pA=Bt(Jr),ql,jl,$r,gs=T({},Jr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==$r&&($r&&e.type==="mousemove"?(ql=e.screenX-$r.screenX,jl=e.screenY-$r.screenY):jl=ql=0,$r=e),ql)},movementY:function(e){return"movementY"in e?e.movementY:jl}}),bg=Bt(gs),yA=T({},gs,{dataTransfer:0}),vA=Bt(yA),CA=T({},Jr,{relatedTarget:0}),Gl=Bt(CA),SA=T({},Wi,{animationName:0,elapsedTime:0,pseudoElement:0}),TA=Bt(SA),AA=T({},Wi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),EA=Bt(AA),_A=T({},Wi,{data:0}),wg=Bt(_A),bA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},RA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function IA(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=RA[e])?!!n[e]:!1}function Fl(){return IA}var OA=T({},Jr,{key:function(e){if(e.key){var n=bA[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=ds(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?wA[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fl,charCode:function(e){return e.type==="keypress"?ds(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ds(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),kA=Bt(OA),MA=T({},gs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rg=Bt(MA),NA=T({},Jr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fl}),DA=Bt(NA),UA=T({},Wi,{propertyName:0,elapsedTime:0,pseudoElement:0}),xA=Bt(UA),PA=T({},gs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),HA=Bt(PA),LA=T({},Wi,{newState:0,oldState:0}),zA=Bt(LA),BA=[9,13,27,32],Ql=jn&&"CompositionEvent"in window,Zr=null;jn&&"documentMode"in document&&(Zr=document.documentMode);var KA=jn&&"TextEvent"in window&&!Zr,Ig=jn&&(!Ql||Zr&&8<Zr&&11>=Zr),Og=" ",kg=!1;function Mg(e,n){switch(e){case"keyup":return BA.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ng(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var qo=!1;function qA(e,n){switch(e){case"compositionend":return Ng(n);case"keypress":return n.which!==32?null:(kg=!0,Og);case"textInput":return e=n.data,e===Og&&kg?null:e;default:return null}}function jA(e,n){if(qo)return e==="compositionend"||!Ql&&Mg(e,n)?(e=Eg(),us=Kl=mi=null,qo=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Ig&&n.locale!=="ko"?null:n.data;default:return null}}var GA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dg(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!GA[e.type]:n==="textarea"}function Ug(e,n,o,a){Bo?Ko?Ko.push(a):Ko=[a]:Bo=a,n=ic(n,"onChange"),0<n.length&&(o=new fs("onChange","change",null,o,a),e.push({event:o,listeners:n}))}var Wr=null,ea=null;function FA(e){py(e,0)}function ms(e){var n=Yr(e);if(mg(n))return e}function xg(e,n){if(e==="change")return n}var Pg=!1;if(jn){var Yl;if(jn){var Vl="oninput"in document;if(!Vl){var Hg=document.createElement("div");Hg.setAttribute("oninput","return;"),Vl=typeof Hg.oninput=="function"}Yl=Vl}else Yl=!1;Pg=Yl&&(!document.documentMode||9<document.documentMode)}function Lg(){Wr&&(Wr.detachEvent("onpropertychange",zg),ea=Wr=null)}function zg(e){if(e.propertyName==="value"&&ms(ea)){var n=[];Ug(n,ea,e,Ll(e)),Ag(FA,n)}}function QA(e,n,o){e==="focusin"?(Lg(),Wr=n,ea=o,Wr.attachEvent("onpropertychange",zg)):e==="focusout"&&Lg()}function YA(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ms(ea)}function VA(e,n){if(e==="click")return ms(n)}function XA(e,n){if(e==="input"||e==="change")return ms(n)}function JA(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var Jt=typeof Object.is=="function"?Object.is:JA;function ta(e,n){if(Jt(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var o=Object.keys(e),a=Object.keys(n);if(o.length!==a.length)return!1;for(a=0;a<o.length;a++){var u=o[a];if(!zr.call(n,u)||!Jt(e[u],n[u]))return!1}return!0}function Bg(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Kg(e,n){var o=Bg(e);e=0;for(var a;o;){if(o.nodeType===3){if(a=e+o.textContent.length,e<=n&&a>=n)return{node:o,offset:n-e};e=a}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Bg(o)}}function qg(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?qg(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function jg(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=cs(e.document);n instanceof e.HTMLIFrameElement;){try{var o=typeof n.contentWindow.location.href=="string"}catch{o=!1}if(o)e=n.contentWindow;else break;n=cs(e.document)}return n}function Xl(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var $A=jn&&"documentMode"in document&&11>=document.documentMode,jo=null,Jl=null,na=null,$l=!1;function Gg(e,n,o){var a=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;$l||jo==null||jo!==cs(a)||(a=jo,"selectionStart"in a&&Xl(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),na&&ta(na,a)||(na=a,a=ic(Jl,"onSelect"),0<a.length&&(n=new fs("onSelect","select",null,n,o),e.push({event:n,listeners:a}),n.target=jo)))}function eo(e,n){var o={};return o[e.toLowerCase()]=n.toLowerCase(),o["Webkit"+e]="webkit"+n,o["Moz"+e]="moz"+n,o}var Go={animationend:eo("Animation","AnimationEnd"),animationiteration:eo("Animation","AnimationIteration"),animationstart:eo("Animation","AnimationStart"),transitionrun:eo("Transition","TransitionRun"),transitionstart:eo("Transition","TransitionStart"),transitioncancel:eo("Transition","TransitionCancel"),transitionend:eo("Transition","TransitionEnd")},Zl={},Fg={};jn&&(Fg=document.createElement("div").style,"AnimationEvent"in window||(delete Go.animationend.animation,delete Go.animationiteration.animation,delete Go.animationstart.animation),"TransitionEvent"in window||delete Go.transitionend.transition);function to(e){if(Zl[e])return Zl[e];if(!Go[e])return e;var n=Go[e],o;for(o in n)if(n.hasOwnProperty(o)&&o in Fg)return Zl[e]=n[o];return e}var Qg=to("animationend"),Yg=to("animationiteration"),Vg=to("animationstart"),ZA=to("transitionrun"),WA=to("transitionstart"),eE=to("transitioncancel"),Xg=to("transitionend"),Jg=new Map,Wl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Wl.push("scrollEnd");function Tn(e,n){Jg.set(e,n),Zi(n,[e])}var ps=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},dn=[],Fo=0,eu=0;function ys(){for(var e=Fo,n=eu=Fo=0;n<e;){var o=dn[n];dn[n++]=null;var a=dn[n];dn[n++]=null;var u=dn[n];dn[n++]=null;var d=dn[n];if(dn[n++]=null,a!==null&&u!==null){var m=a.pending;m===null?u.next=u:(u.next=m.next,m.next=u),a.pending=u}d!==0&&$g(o,u,d)}}function vs(e,n,o,a){dn[Fo++]=e,dn[Fo++]=n,dn[Fo++]=o,dn[Fo++]=a,eu|=a,e.lanes|=a,e=e.alternate,e!==null&&(e.lanes|=a)}function tu(e,n,o,a){return vs(e,n,o,a),Cs(e)}function no(e,n){return vs(e,null,null,n),Cs(e)}function $g(e,n,o){e.lanes|=o;var a=e.alternate;a!==null&&(a.lanes|=o);for(var u=!1,d=e.return;d!==null;)d.childLanes|=o,a=d.alternate,a!==null&&(a.childLanes|=o),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(u=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,u&&n!==null&&(u=31-gt(o),e=d.hiddenUpdates,a=e[u],a===null?e[u]=[n]:a.push(n),n.lane=o|536870912),d):null}function Cs(e){if(50<_a)throw _a=0,ud=null,Error(r(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var Qo={};function tE(e,n,o,a){this.tag=e,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $t(e,n,o,a){return new tE(e,n,o,a)}function nu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Gn(e,n){var o=e.alternate;return o===null?(o=$t(e.tag,n,e.key,e.mode),o.elementType=e.elementType,o.type=e.type,o.stateNode=e.stateNode,o.alternate=e,e.alternate=o):(o.pendingProps=n,o.type=e.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=e.flags&65011712,o.childLanes=e.childLanes,o.lanes=e.lanes,o.child=e.child,o.memoizedProps=e.memoizedProps,o.memoizedState=e.memoizedState,o.updateQueue=e.updateQueue,n=e.dependencies,o.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},o.sibling=e.sibling,o.index=e.index,o.ref=e.ref,o.refCleanup=e.refCleanup,o}function Zg(e,n){e.flags&=65011714;var o=e.alternate;return o===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=o.childLanes,e.lanes=o.lanes,e.child=o.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=o.memoizedProps,e.memoizedState=o.memoizedState,e.updateQueue=o.updateQueue,e.type=o.type,n=o.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function Ss(e,n,o,a,u,d){var m=0;if(a=e,typeof e=="function")nu(e)&&(m=1);else if(typeof e=="string")m=a_(e,o,I.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case O:return e=$t(31,o,n,u),e.elementType=O,e.lanes=d,e;case ie:return io(o.children,u,d,n);case le:m=8,u|=24;break;case se:return e=$t(12,o,n,u|2),e.elementType=se,e.lanes=d,e;case ae:return e=$t(13,o,n,u),e.elementType=ae,e.lanes=d,e;case $:return e=$t(19,o,n,u),e.elementType=$,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ue:m=10;break e;case ce:m=9;break e;case G:m=11;break e;case te:m=14;break e;case U:m=16,a=null;break e}m=29,o=Error(r(130,e===null?"null":typeof e,"")),a=null}return n=$t(m,o,n,u),n.elementType=e,n.type=a,n.lanes=d,n}function io(e,n,o,a){return e=$t(7,e,a,n),e.lanes=o,e}function iu(e,n,o){return e=$t(6,e,null,n),e.lanes=o,e}function Wg(e){var n=$t(18,null,null,0);return n.stateNode=e,n}function ou(e,n,o){return n=$t(4,e.children!==null?e.children:[],e.key,n),n.lanes=o,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var em=new WeakMap;function hn(e,n){if(typeof e=="object"&&e!==null){var o=em.get(e);return o!==void 0?o:(n={value:e,source:n,stack:cn(n)},em.set(e,n),n)}return{value:e,source:n,stack:cn(n)}}var Yo=[],Vo=0,Ts=null,ia=0,fn=[],gn=0,pi=null,Mn=1,Nn="";function Fn(e,n){Yo[Vo++]=ia,Yo[Vo++]=Ts,Ts=e,ia=n}function tm(e,n,o){fn[gn++]=Mn,fn[gn++]=Nn,fn[gn++]=pi,pi=e;var a=Mn;e=Nn;var u=32-gt(a)-1;a&=~(1<<u),o+=1;var d=32-gt(n)+u;if(30<d){var m=u-u%5;d=(a&(1<<m)-1).toString(32),a>>=m,u-=m,Mn=1<<32-gt(n)+u|o<<u|a,Nn=d+e}else Mn=1<<d|o<<u|a,Nn=e}function ru(e){e.return!==null&&(Fn(e,1),tm(e,1,0))}function au(e){for(;e===Ts;)Ts=Yo[--Vo],Yo[Vo]=null,ia=Yo[--Vo],Yo[Vo]=null;for(;e===pi;)pi=fn[--gn],fn[gn]=null,Nn=fn[--gn],fn[gn]=null,Mn=fn[--gn],fn[gn]=null}function nm(e,n){fn[gn++]=Mn,fn[gn++]=Nn,fn[gn++]=pi,Mn=n.id,Nn=n.overflow,pi=e}var Et=null,Je=null,Ne=!1,yi=null,mn=!1,su=Error(r(519));function vi(e){var n=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw oa(hn(n,e)),su}function im(e){var n=e.stateNode,o=e.type,a=e.memoizedProps;switch(n[At]=e,n[zt]=a,o){case"dialog":Oe("cancel",n),Oe("close",n);break;case"iframe":case"object":case"embed":Oe("load",n);break;case"video":case"audio":for(o=0;o<wa.length;o++)Oe(wa[o],n);break;case"source":Oe("error",n);break;case"img":case"image":case"link":Oe("error",n),Oe("load",n);break;case"details":Oe("toggle",n);break;case"input":Oe("invalid",n),pg(n,a.value,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name,!0);break;case"select":Oe("invalid",n);break;case"textarea":Oe("invalid",n),vg(n,a.value,a.defaultValue,a.children)}o=a.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||n.textContent===""+o||a.suppressHydrationWarning===!0||Sy(n.textContent,o)?(a.popover!=null&&(Oe("beforetoggle",n),Oe("toggle",n)),a.onScroll!=null&&Oe("scroll",n),a.onScrollEnd!=null&&Oe("scrollend",n),a.onClick!=null&&(n.onclick=qn),n=!0):n=!1,n||vi(e,!0)}function om(e){for(Et=e.return;Et;)switch(Et.tag){case 5:case 31:case 13:mn=!1;return;case 27:case 3:mn=!0;return;default:Et=Et.return}}function Xo(e){if(e!==Et)return!1;if(!Ne)return om(e),Ne=!0,!1;var n=e.tag,o;if((o=n!==3&&n!==27)&&((o=n===5)&&(o=e.type,o=!(o!=="form"&&o!=="button")||bd(e.type,e.memoizedProps)),o=!o),o&&Je&&vi(e),om(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));Je=Oy(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));Je=Oy(e)}else n===27?(n=Je,Ni(e.type)?(e=kd,kd=null,Je=e):Je=n):Je=Et?yn(e.stateNode.nextSibling):null;return!0}function oo(){Je=Et=null,Ne=!1}function cu(){var e=yi;return e!==null&&(Gt===null?Gt=e:Gt.push.apply(Gt,e),yi=null),e}function oa(e){yi===null?yi=[e]:yi.push(e)}var lu=v(null),ro=null,Qn=null;function Ci(e,n,o){b(lu,n._currentValue),n._currentValue=o}function Yn(e){e._currentValue=lu.current,C(lu)}function uu(e,n,o){for(;e!==null;){var a=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,a!==null&&(a.childLanes|=n)):a!==null&&(a.childLanes&n)!==n&&(a.childLanes|=n),e===o)break;e=e.return}}function du(e,n,o,a){var u=e.child;for(u!==null&&(u.return=e);u!==null;){var d=u.dependencies;if(d!==null){var m=u.child;d=d.firstContext;e:for(;d!==null;){var y=d;d=u;for(var E=0;E<n.length;E++)if(y.context===n[E]){d.lanes|=o,y=d.alternate,y!==null&&(y.lanes|=o),uu(d.return,o,e),a||(m=null);break e}d=y.next}}else if(u.tag===18){if(m=u.return,m===null)throw Error(r(341));m.lanes|=o,d=m.alternate,d!==null&&(d.lanes|=o),uu(m,o,e),m=null}else m=u.child;if(m!==null)m.return=u;else for(m=u;m!==null;){if(m===e){m=null;break}if(u=m.sibling,u!==null){u.return=m.return,m=u;break}m=m.return}u=m}}function Jo(e,n,o,a){e=null;for(var u=n,d=!1;u!==null;){if(!d){if((u.flags&524288)!==0)d=!0;else if((u.flags&262144)!==0)break}if(u.tag===10){var m=u.alternate;if(m===null)throw Error(r(387));if(m=m.memoizedProps,m!==null){var y=u.type;Jt(u.pendingProps.value,m.value)||(e!==null?e.push(y):e=[y])}}else if(u===de.current){if(m=u.alternate,m===null)throw Error(r(387));m.memoizedState.memoizedState!==u.memoizedState.memoizedState&&(e!==null?e.push(Ma):e=[Ma])}u=u.return}e!==null&&du(n,e,o,a),n.flags|=262144}function As(e){for(e=e.firstContext;e!==null;){if(!Jt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ao(e){ro=e,Qn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function _t(e){return rm(ro,e)}function Es(e,n){return ro===null&&ao(e),rm(e,n)}function rm(e,n){var o=n._currentValue;if(n={context:n,memoizedValue:o,next:null},Qn===null){if(e===null)throw Error(r(308));Qn=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else Qn=Qn.next=n;return o}var nE=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(o,a){e.push(a)}};this.abort=function(){n.aborted=!0,e.forEach(function(o){return o()})}},iE=c.unstable_scheduleCallback,oE=c.unstable_NormalPriority,st={$$typeof:ue,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function hu(){return{controller:new nE,data:new Map,refCount:0}}function ra(e){e.refCount--,e.refCount===0&&iE(oE,function(){e.controller.abort()})}var aa=null,fu=0,$o=0,Zo=null;function rE(e,n){if(aa===null){var o=aa=[];fu=0,$o=pd(),Zo={status:"pending",value:void 0,then:function(a){o.push(a)}}}return fu++,n.then(am,am),n}function am(){if(--fu===0&&aa!==null){Zo!==null&&(Zo.status="fulfilled");var e=aa;aa=null,$o=0,Zo=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function aE(e,n){var o=[],a={status:"pending",value:null,reason:null,then:function(u){o.push(u)}};return e.then(function(){a.status="fulfilled",a.value=n;for(var u=0;u<o.length;u++)(0,o[u])(n)},function(u){for(a.status="rejected",a.reason=u,u=0;u<o.length;u++)(0,o[u])(void 0)}),a}var sm=D.S;D.S=function(e,n){Gp=yt(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&rE(e,n),sm!==null&&sm(e,n)};var so=v(null);function gu(){var e=so.current;return e!==null?e:Ve.pooledCache}function _s(e,n){n===null?b(so,so.current):b(so,n.pool)}function cm(){var e=gu();return e===null?null:{parent:st._currentValue,pool:e}}var Wo=Error(r(460)),mu=Error(r(474)),bs=Error(r(542)),ws={then:function(){}};function lm(e){return e=e.status,e==="fulfilled"||e==="rejected"}function um(e,n,o){switch(o=e[o],o===void 0?e.push(n):o!==n&&(n.then(qn,qn),n=o),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,hm(e),e;default:if(typeof n.status=="string")n.then(qn,qn);else{if(e=Ve,e!==null&&100<e.shellSuspendCounter)throw Error(r(482));e=n,e.status="pending",e.then(function(a){if(n.status==="pending"){var u=n;u.status="fulfilled",u.value=a}},function(a){if(n.status==="pending"){var u=n;u.status="rejected",u.reason=a}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,hm(e),e}throw lo=n,Wo}}function co(e){try{var n=e._init;return n(e._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(lo=o,Wo):o}}var lo=null;function dm(){if(lo===null)throw Error(r(459));var e=lo;return lo=null,e}function hm(e){if(e===Wo||e===bs)throw Error(r(483))}var er=null,sa=0;function Rs(e){var n=sa;return sa+=1,er===null&&(er=[]),um(er,e,n)}function ca(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function Is(e,n){throw n.$$typeof===A?Error(r(525)):(e=Object.prototype.toString.call(n),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function fm(e){function n(k,R){if(e){var P=k.deletions;P===null?(k.deletions=[R],k.flags|=16):P.push(R)}}function o(k,R){if(!e)return null;for(;R!==null;)n(k,R),R=R.sibling;return null}function a(k){for(var R=new Map;k!==null;)k.key!==null?R.set(k.key,k):R.set(k.index,k),k=k.sibling;return R}function u(k,R){return k=Gn(k,R),k.index=0,k.sibling=null,k}function d(k,R,P){return k.index=P,e?(P=k.alternate,P!==null?(P=P.index,P<R?(k.flags|=67108866,R):P):(k.flags|=67108866,R)):(k.flags|=1048576,R)}function m(k){return e&&k.alternate===null&&(k.flags|=67108866),k}function y(k,R,P,V){return R===null||R.tag!==6?(R=iu(P,k.mode,V),R.return=k,R):(R=u(R,P),R.return=k,R)}function E(k,R,P,V){var pe=P.type;return pe===ie?F(k,R,P.props.children,V,P.key):R!==null&&(R.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===U&&co(pe)===R.type)?(R=u(R,P.props),ca(R,P),R.return=k,R):(R=Ss(P.type,P.key,P.props,null,k.mode,V),ca(R,P),R.return=k,R)}function H(k,R,P,V){return R===null||R.tag!==4||R.stateNode.containerInfo!==P.containerInfo||R.stateNode.implementation!==P.implementation?(R=ou(P,k.mode,V),R.return=k,R):(R=u(R,P.children||[]),R.return=k,R)}function F(k,R,P,V,pe){return R===null||R.tag!==7?(R=io(P,k.mode,V,pe),R.return=k,R):(R=u(R,P),R.return=k,R)}function Z(k,R,P){if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return R=iu(""+R,k.mode,P),R.return=k,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case K:return P=Ss(R.type,R.key,R.props,null,k.mode,P),ca(P,R),P.return=k,P;case ee:return R=ou(R,k.mode,P),R.return=k,R;case U:return R=co(R),Z(k,R,P)}if(ve(R)||Y(R))return R=io(R,k.mode,P,null),R.return=k,R;if(typeof R.then=="function")return Z(k,Rs(R),P);if(R.$$typeof===ue)return Z(k,Es(k,R),P);Is(k,R)}return null}function L(k,R,P,V){var pe=R!==null?R.key:null;if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return pe!==null?null:y(k,R,""+P,V);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case K:return P.key===pe?E(k,R,P,V):null;case ee:return P.key===pe?H(k,R,P,V):null;case U:return P=co(P),L(k,R,P,V)}if(ve(P)||Y(P))return pe!==null?null:F(k,R,P,V,null);if(typeof P.then=="function")return L(k,R,Rs(P),V);if(P.$$typeof===ue)return L(k,R,Es(k,P),V);Is(k,P)}return null}function q(k,R,P,V,pe){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return k=k.get(P)||null,y(R,k,""+V,pe);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case K:return k=k.get(V.key===null?P:V.key)||null,E(R,k,V,pe);case ee:return k=k.get(V.key===null?P:V.key)||null,H(R,k,V,pe);case U:return V=co(V),q(k,R,P,V,pe)}if(ve(V)||Y(V))return k=k.get(P)||null,F(R,k,V,pe,null);if(typeof V.then=="function")return q(k,R,P,Rs(V),pe);if(V.$$typeof===ue)return q(k,R,P,Es(R,V),pe);Is(R,V)}return null}function ge(k,R,P,V){for(var pe=null,Ue=null,me=R,be=R=0,Me=null;me!==null&&be<P.length;be++){me.index>be?(Me=me,me=null):Me=me.sibling;var xe=L(k,me,P[be],V);if(xe===null){me===null&&(me=Me);break}e&&me&&xe.alternate===null&&n(k,me),R=d(xe,R,be),Ue===null?pe=xe:Ue.sibling=xe,Ue=xe,me=Me}if(be===P.length)return o(k,me),Ne&&Fn(k,be),pe;if(me===null){for(;be<P.length;be++)me=Z(k,P[be],V),me!==null&&(R=d(me,R,be),Ue===null?pe=me:Ue.sibling=me,Ue=me);return Ne&&Fn(k,be),pe}for(me=a(me);be<P.length;be++)Me=q(me,k,be,P[be],V),Me!==null&&(e&&Me.alternate!==null&&me.delete(Me.key===null?be:Me.key),R=d(Me,R,be),Ue===null?pe=Me:Ue.sibling=Me,Ue=Me);return e&&me.forEach(function(Hi){return n(k,Hi)}),Ne&&Fn(k,be),pe}function Ce(k,R,P,V){if(P==null)throw Error(r(151));for(var pe=null,Ue=null,me=R,be=R=0,Me=null,xe=P.next();me!==null&&!xe.done;be++,xe=P.next()){me.index>be?(Me=me,me=null):Me=me.sibling;var Hi=L(k,me,xe.value,V);if(Hi===null){me===null&&(me=Me);break}e&&me&&Hi.alternate===null&&n(k,me),R=d(Hi,R,be),Ue===null?pe=Hi:Ue.sibling=Hi,Ue=Hi,me=Me}if(xe.done)return o(k,me),Ne&&Fn(k,be),pe;if(me===null){for(;!xe.done;be++,xe=P.next())xe=Z(k,xe.value,V),xe!==null&&(R=d(xe,R,be),Ue===null?pe=xe:Ue.sibling=xe,Ue=xe);return Ne&&Fn(k,be),pe}for(me=a(me);!xe.done;be++,xe=P.next())xe=q(me,k,be,xe.value,V),xe!==null&&(e&&xe.alternate!==null&&me.delete(xe.key===null?be:xe.key),R=d(xe,R,be),Ue===null?pe=xe:Ue.sibling=xe,Ue=xe);return e&&me.forEach(function(y_){return n(k,y_)}),Ne&&Fn(k,be),pe}function Fe(k,R,P,V){if(typeof P=="object"&&P!==null&&P.type===ie&&P.key===null&&(P=P.props.children),typeof P=="object"&&P!==null){switch(P.$$typeof){case K:e:{for(var pe=P.key;R!==null;){if(R.key===pe){if(pe=P.type,pe===ie){if(R.tag===7){o(k,R.sibling),V=u(R,P.props.children),V.return=k,k=V;break e}}else if(R.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===U&&co(pe)===R.type){o(k,R.sibling),V=u(R,P.props),ca(V,P),V.return=k,k=V;break e}o(k,R);break}else n(k,R);R=R.sibling}P.type===ie?(V=io(P.props.children,k.mode,V,P.key),V.return=k,k=V):(V=Ss(P.type,P.key,P.props,null,k.mode,V),ca(V,P),V.return=k,k=V)}return m(k);case ee:e:{for(pe=P.key;R!==null;){if(R.key===pe)if(R.tag===4&&R.stateNode.containerInfo===P.containerInfo&&R.stateNode.implementation===P.implementation){o(k,R.sibling),V=u(R,P.children||[]),V.return=k,k=V;break e}else{o(k,R);break}else n(k,R);R=R.sibling}V=ou(P,k.mode,V),V.return=k,k=V}return m(k);case U:return P=co(P),Fe(k,R,P,V)}if(ve(P))return ge(k,R,P,V);if(Y(P)){if(pe=Y(P),typeof pe!="function")throw Error(r(150));return P=pe.call(P),Ce(k,R,P,V)}if(typeof P.then=="function")return Fe(k,R,Rs(P),V);if(P.$$typeof===ue)return Fe(k,R,Es(k,P),V);Is(k,P)}return typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint"?(P=""+P,R!==null&&R.tag===6?(o(k,R.sibling),V=u(R,P),V.return=k,k=V):(o(k,R),V=iu(P,k.mode,V),V.return=k,k=V),m(k)):o(k,R)}return function(k,R,P,V){try{sa=0;var pe=Fe(k,R,P,V);return er=null,pe}catch(me){if(me===Wo||me===bs)throw me;var Ue=$t(29,me,null,k.mode);return Ue.lanes=V,Ue.return=k,Ue}finally{}}}var uo=fm(!0),gm=fm(!1),Si=!1;function pu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function yu(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ti(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ai(e,n,o){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,(He&2)!==0){var u=a.pending;return u===null?n.next=n:(n.next=u.next,u.next=n),a.pending=n,n=Cs(e),$g(e,null,o),n}return vs(e,a,n,o),Cs(e)}function la(e,n,o){if(n=n.updateQueue,n!==null&&(n=n.shared,(o&4194048)!==0)){var a=n.lanes;a&=e.pendingLanes,o|=a,n.lanes=o,rg(e,o)}}function vu(e,n){var o=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,o===a)){var u=null,d=null;if(o=o.firstBaseUpdate,o!==null){do{var m={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};d===null?u=d=m:d=d.next=m,o=o.next}while(o!==null);d===null?u=d=n:d=d.next=n}else u=d=n;o={baseState:a.baseState,firstBaseUpdate:u,lastBaseUpdate:d,shared:a.shared,callbacks:a.callbacks},e.updateQueue=o;return}e=o.lastBaseUpdate,e===null?o.firstBaseUpdate=n:e.next=n,o.lastBaseUpdate=n}var Cu=!1;function ua(){if(Cu){var e=Zo;if(e!==null)throw e}}function da(e,n,o,a){Cu=!1;var u=e.updateQueue;Si=!1;var d=u.firstBaseUpdate,m=u.lastBaseUpdate,y=u.shared.pending;if(y!==null){u.shared.pending=null;var E=y,H=E.next;E.next=null,m===null?d=H:m.next=H,m=E;var F=e.alternate;F!==null&&(F=F.updateQueue,y=F.lastBaseUpdate,y!==m&&(y===null?F.firstBaseUpdate=H:y.next=H,F.lastBaseUpdate=E))}if(d!==null){var Z=u.baseState;m=0,F=H=E=null,y=d;do{var L=y.lane&-536870913,q=L!==y.lane;if(q?(ke&L)===L:(a&L)===L){L!==0&&L===$o&&(Cu=!0),F!==null&&(F=F.next={lane:0,tag:y.tag,payload:y.payload,callback:null,next:null});e:{var ge=e,Ce=y;L=n;var Fe=o;switch(Ce.tag){case 1:if(ge=Ce.payload,typeof ge=="function"){Z=ge.call(Fe,Z,L);break e}Z=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=Ce.payload,L=typeof ge=="function"?ge.call(Fe,Z,L):ge,L==null)break e;Z=T({},Z,L);break e;case 2:Si=!0}}L=y.callback,L!==null&&(e.flags|=64,q&&(e.flags|=8192),q=u.callbacks,q===null?u.callbacks=[L]:q.push(L))}else q={lane:L,tag:y.tag,payload:y.payload,callback:y.callback,next:null},F===null?(H=F=q,E=Z):F=F.next=q,m|=L;if(y=y.next,y===null){if(y=u.shared.pending,y===null)break;q=y,y=q.next,q.next=null,u.lastBaseUpdate=q,u.shared.pending=null}}while(!0);F===null&&(E=Z),u.baseState=E,u.firstBaseUpdate=H,u.lastBaseUpdate=F,d===null&&(u.shared.lanes=0),Ri|=m,e.lanes=m,e.memoizedState=Z}}function mm(e,n){if(typeof e!="function")throw Error(r(191,e));e.call(n)}function pm(e,n){var o=e.callbacks;if(o!==null)for(e.callbacks=null,e=0;e<o.length;e++)mm(o[e],n)}var tr=v(null),Os=v(0);function ym(e,n){e=ni,b(Os,e),b(tr,n),ni=e|n.baseLanes}function Su(){b(Os,ni),b(tr,tr.current)}function Tu(){ni=Os.current,C(tr),C(Os)}var Zt=v(null),pn=null;function Ei(e){var n=e.alternate;b(nt,nt.current&1),b(Zt,e),pn===null&&(n===null||tr.current!==null||n.memoizedState!==null)&&(pn=e)}function Au(e){b(nt,nt.current),b(Zt,e),pn===null&&(pn=e)}function vm(e){e.tag===22?(b(nt,nt.current),b(Zt,e),pn===null&&(pn=e)):_i()}function _i(){b(nt,nt.current),b(Zt,Zt.current)}function Wt(e){C(Zt),pn===e&&(pn=null),C(nt)}var nt=v(0);function ks(e){for(var n=e;n!==null;){if(n.tag===13){var o=n.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Id(o)||Od(o)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Vn=0,_e=null,je=null,ct=null,Ms=!1,nr=!1,ho=!1,Ns=0,ha=0,ir=null,sE=0;function et(){throw Error(r(321))}function Eu(e,n){if(n===null)return!1;for(var o=0;o<n.length&&o<e.length;o++)if(!Jt(e[o],n[o]))return!1;return!0}function _u(e,n,o,a,u,d){return Vn=d,_e=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,D.H=e===null||e.memoizedState===null?tp:zu,ho=!1,d=o(a,u),ho=!1,nr&&(d=Sm(n,o,a,u)),Cm(e),d}function Cm(e){D.H=ma;var n=je!==null&&je.next!==null;if(Vn=0,ct=je=_e=null,Ms=!1,ha=0,ir=null,n)throw Error(r(300));e===null||lt||(e=e.dependencies,e!==null&&As(e)&&(lt=!0))}function Sm(e,n,o,a){_e=e;var u=0;do{if(nr&&(ir=null),ha=0,nr=!1,25<=u)throw Error(r(301));if(u+=1,ct=je=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}D.H=np,d=n(o,a)}while(nr);return d}function cE(){var e=D.H,n=e.useState()[0];return n=typeof n.then=="function"?fa(n):n,e=e.useState()[0],(je!==null?je.memoizedState:null)!==e&&(_e.flags|=1024),n}function bu(){var e=Ns!==0;return Ns=0,e}function wu(e,n,o){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~o}function Ru(e){if(Ms){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}Ms=!1}Vn=0,ct=je=_e=null,nr=!1,ha=Ns=0,ir=null}function Ut(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ct===null?_e.memoizedState=ct=e:ct=ct.next=e,ct}function it(){if(je===null){var e=_e.alternate;e=e!==null?e.memoizedState:null}else e=je.next;var n=ct===null?_e.memoizedState:ct.next;if(n!==null)ct=n,je=e;else{if(e===null)throw _e.alternate===null?Error(r(467)):Error(r(310));je=e,e={memoizedState:je.memoizedState,baseState:je.baseState,baseQueue:je.baseQueue,queue:je.queue,next:null},ct===null?_e.memoizedState=ct=e:ct=ct.next=e}return ct}function Ds(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function fa(e){var n=ha;return ha+=1,ir===null&&(ir=[]),e=um(ir,e,n),n=_e,(ct===null?n.memoizedState:ct.next)===null&&(n=n.alternate,D.H=n===null||n.memoizedState===null?tp:zu),e}function Us(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return fa(e);if(e.$$typeof===ue)return _t(e)}throw Error(r(438,String(e)))}function Iu(e){var n=null,o=_e.updateQueue;if(o!==null&&(n=o.memoCache),n==null){var a=_e.alternate;a!==null&&(a=a.updateQueue,a!==null&&(a=a.memoCache,a!=null&&(n={data:a.data.map(function(u){return u.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),o===null&&(o=Ds(),_e.updateQueue=o),o.memoCache=n,o=n.data[n.index],o===void 0)for(o=n.data[n.index]=Array(e),a=0;a<e;a++)o[a]=x;return n.index++,o}function Xn(e,n){return typeof n=="function"?n(e):n}function xs(e){var n=it();return Ou(n,je,e)}function Ou(e,n,o){var a=e.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=o;var u=e.baseQueue,d=a.pending;if(d!==null){if(u!==null){var m=u.next;u.next=d.next,d.next=m}n.baseQueue=u=d,a.pending=null}if(d=e.baseState,u===null)e.memoizedState=d;else{n=u.next;var y=m=null,E=null,H=n,F=!1;do{var Z=H.lane&-536870913;if(Z!==H.lane?(ke&Z)===Z:(Vn&Z)===Z){var L=H.revertLane;if(L===0)E!==null&&(E=E.next={lane:0,revertLane:0,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),Z===$o&&(F=!0);else if((Vn&L)===L){H=H.next,L===$o&&(F=!0);continue}else Z={lane:0,revertLane:H.revertLane,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},E===null?(y=E=Z,m=d):E=E.next=Z,_e.lanes|=L,Ri|=L;Z=H.action,ho&&o(d,Z),d=H.hasEagerState?H.eagerState:o(d,Z)}else L={lane:Z,revertLane:H.revertLane,gesture:H.gesture,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},E===null?(y=E=L,m=d):E=E.next=L,_e.lanes|=Z,Ri|=Z;H=H.next}while(H!==null&&H!==n);if(E===null?m=d:E.next=y,!Jt(d,e.memoizedState)&&(lt=!0,F&&(o=Zo,o!==null)))throw o;e.memoizedState=d,e.baseState=m,e.baseQueue=E,a.lastRenderedState=d}return u===null&&(a.lanes=0),[e.memoizedState,a.dispatch]}function ku(e){var n=it(),o=n.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=e;var a=o.dispatch,u=o.pending,d=n.memoizedState;if(u!==null){o.pending=null;var m=u=u.next;do d=e(d,m.action),m=m.next;while(m!==u);Jt(d,n.memoizedState)||(lt=!0),n.memoizedState=d,n.baseQueue===null&&(n.baseState=d),o.lastRenderedState=d}return[d,a]}function Tm(e,n,o){var a=_e,u=it(),d=Ne;if(d){if(o===void 0)throw Error(r(407));o=o()}else o=n();var m=!Jt((je||u).memoizedState,o);if(m&&(u.memoizedState=o,lt=!0),u=u.queue,Du(_m.bind(null,a,u,e),[e]),u.getSnapshot!==n||m||ct!==null&&ct.memoizedState.tag&1){if(a.flags|=2048,or(9,{destroy:void 0},Em.bind(null,a,u,o,n),null),Ve===null)throw Error(r(349));d||(Vn&127)!==0||Am(a,n,o)}return o}function Am(e,n,o){e.flags|=16384,e={getSnapshot:n,value:o},n=_e.updateQueue,n===null?(n=Ds(),_e.updateQueue=n,n.stores=[e]):(o=n.stores,o===null?n.stores=[e]:o.push(e))}function Em(e,n,o,a){n.value=o,n.getSnapshot=a,bm(n)&&wm(e)}function _m(e,n,o){return o(function(){bm(n)&&wm(e)})}function bm(e){var n=e.getSnapshot;e=e.value;try{var o=n();return!Jt(e,o)}catch{return!0}}function wm(e){var n=no(e,2);n!==null&&Ft(n,e,2)}function Mu(e){var n=Ut();if(typeof e=="function"){var o=e;if(e=o(),ho){vt(!0);try{o()}finally{vt(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xn,lastRenderedState:e},n}function Rm(e,n,o,a){return e.baseState=o,Ou(e,je,typeof a=="function"?a:Xn)}function lE(e,n,o,a,u){if(Ls(e))throw Error(r(485));if(e=n.action,e!==null){var d={payload:u,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(m){d.listeners.push(m)}};D.T!==null?o(!0):d.isTransition=!1,a(d),o=n.pending,o===null?(d.next=n.pending=d,Im(n,d)):(d.next=o.next,n.pending=o.next=d)}}function Im(e,n){var o=n.action,a=n.payload,u=e.state;if(n.isTransition){var d=D.T,m={};D.T=m;try{var y=o(u,a),E=D.S;E!==null&&E(m,y),Om(e,n,y)}catch(H){Nu(e,n,H)}finally{d!==null&&m.types!==null&&(d.types=m.types),D.T=d}}else try{d=o(u,a),Om(e,n,d)}catch(H){Nu(e,n,H)}}function Om(e,n,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(a){km(e,n,a)},function(a){return Nu(e,n,a)}):km(e,n,o)}function km(e,n,o){n.status="fulfilled",n.value=o,Mm(n),e.state=o,n=e.pending,n!==null&&(o=n.next,o===n?e.pending=null:(o=o.next,n.next=o,Im(e,o)))}function Nu(e,n,o){var a=e.pending;if(e.pending=null,a!==null){a=a.next;do n.status="rejected",n.reason=o,Mm(n),n=n.next;while(n!==a)}e.action=null}function Mm(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function Nm(e,n){return n}function Dm(e,n){if(Ne){var o=Ve.formState;if(o!==null){e:{var a=_e;if(Ne){if(Je){t:{for(var u=Je,d=mn;u.nodeType!==8;){if(!d){u=null;break t}if(u=yn(u.nextSibling),u===null){u=null;break t}}d=u.data,u=d==="F!"||d==="F"?u:null}if(u){Je=yn(u.nextSibling),a=u.data==="F!";break e}}vi(a)}a=!1}a&&(n=o[0])}}return o=Ut(),o.memoizedState=o.baseState=n,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Nm,lastRenderedState:n},o.queue=a,o=Zm.bind(null,_e,a),a.dispatch=o,a=Mu(!1),d=Lu.bind(null,_e,!1,a.queue),a=Ut(),u={state:n,dispatch:null,action:e,pending:null},a.queue=u,o=lE.bind(null,_e,u,d,o),u.dispatch=o,a.memoizedState=e,[n,o,!1]}function Um(e){var n=it();return xm(n,je,e)}function xm(e,n,o){if(n=Ou(e,n,Nm)[0],e=xs(Xn)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var a=fa(n)}catch(m){throw m===Wo?bs:m}else a=n;n=it();var u=n.queue,d=u.dispatch;return o!==n.memoizedState&&(_e.flags|=2048,or(9,{destroy:void 0},uE.bind(null,u,o),null)),[a,d,e]}function uE(e,n){e.action=n}function Pm(e){var n=it(),o=je;if(o!==null)return xm(n,o,e);it(),n=n.memoizedState,o=it();var a=o.queue.dispatch;return o.memoizedState=e,[n,a,!1]}function or(e,n,o,a){return e={tag:e,create:o,deps:a,inst:n,next:null},n=_e.updateQueue,n===null&&(n=Ds(),_e.updateQueue=n),o=n.lastEffect,o===null?n.lastEffect=e.next=e:(a=o.next,o.next=e,e.next=a,n.lastEffect=e),e}function Hm(){return it().memoizedState}function Ps(e,n,o,a){var u=Ut();_e.flags|=e,u.memoizedState=or(1|n,{destroy:void 0},o,a===void 0?null:a)}function Hs(e,n,o,a){var u=it();a=a===void 0?null:a;var d=u.memoizedState.inst;je!==null&&a!==null&&Eu(a,je.memoizedState.deps)?u.memoizedState=or(n,d,o,a):(_e.flags|=e,u.memoizedState=or(1|n,d,o,a))}function Lm(e,n){Ps(8390656,8,e,n)}function Du(e,n){Hs(2048,8,e,n)}function dE(e){_e.flags|=4;var n=_e.updateQueue;if(n===null)n=Ds(),_e.updateQueue=n,n.events=[e];else{var o=n.events;o===null?n.events=[e]:o.push(e)}}function zm(e){var n=it().memoizedState;return dE({ref:n,nextImpl:e}),function(){if((He&2)!==0)throw Error(r(440));return n.impl.apply(void 0,arguments)}}function Bm(e,n){return Hs(4,2,e,n)}function Km(e,n){return Hs(4,4,e,n)}function qm(e,n){if(typeof n=="function"){e=e();var o=n(e);return function(){typeof o=="function"?o():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function jm(e,n,o){o=o!=null?o.concat([e]):null,Hs(4,4,qm.bind(null,n,e),o)}function Uu(){}function Gm(e,n){var o=it();n=n===void 0?null:n;var a=o.memoizedState;return n!==null&&Eu(n,a[1])?a[0]:(o.memoizedState=[e,n],e)}function Fm(e,n){var o=it();n=n===void 0?null:n;var a=o.memoizedState;if(n!==null&&Eu(n,a[1]))return a[0];if(a=e(),ho){vt(!0);try{e()}finally{vt(!1)}}return o.memoizedState=[a,n],a}function xu(e,n,o){return o===void 0||(Vn&1073741824)!==0&&(ke&261930)===0?e.memoizedState=n:(e.memoizedState=o,e=Qp(),_e.lanes|=e,Ri|=e,o)}function Qm(e,n,o,a){return Jt(o,n)?o:tr.current!==null?(e=xu(e,o,a),Jt(e,n)||(lt=!0),e):(Vn&42)===0||(Vn&1073741824)!==0&&(ke&261930)===0?(lt=!0,e.memoizedState=o):(e=Qp(),_e.lanes|=e,Ri|=e,n)}function Ym(e,n,o,a,u){var d=X.p;X.p=d!==0&&8>d?d:8;var m=D.T,y={};D.T=y,Lu(e,!1,n,o);try{var E=u(),H=D.S;if(H!==null&&H(y,E),E!==null&&typeof E=="object"&&typeof E.then=="function"){var F=aE(E,a);ga(e,n,F,nn(e))}else ga(e,n,a,nn(e))}catch(Z){ga(e,n,{then:function(){},status:"rejected",reason:Z},nn())}finally{X.p=d,m!==null&&y.types!==null&&(m.types=y.types),D.T=m}}function hE(){}function Pu(e,n,o,a){if(e.tag!==5)throw Error(r(476));var u=Vm(e).queue;Ym(e,u,n,M,o===null?hE:function(){return Xm(e),o(a)})}function Vm(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:M,baseState:M,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xn,lastRenderedState:M},next:null};var o={};return n.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xn,lastRenderedState:o},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function Xm(e){var n=Vm(e);n.next===null&&(n=e.alternate.memoizedState),ga(e,n.next.queue,{},nn())}function Hu(){return _t(Ma)}function Jm(){return it().memoizedState}function $m(){return it().memoizedState}function fE(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var o=nn();e=Ti(o);var a=Ai(n,e,o);a!==null&&(Ft(a,n,o),la(a,n,o)),n={cache:hu()},e.payload=n;return}n=n.return}}function gE(e,n,o){var a=nn();o={lane:a,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Ls(e)?Wm(n,o):(o=tu(e,n,o,a),o!==null&&(Ft(o,e,a),ep(o,n,a)))}function Zm(e,n,o){var a=nn();ga(e,n,o,a)}function ga(e,n,o,a){var u={lane:a,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Ls(e))Wm(n,u);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=n.lastRenderedReducer,d!==null))try{var m=n.lastRenderedState,y=d(m,o);if(u.hasEagerState=!0,u.eagerState=y,Jt(y,m))return vs(e,n,u,0),Ve===null&&ys(),!1}catch{}finally{}if(o=tu(e,n,u,a),o!==null)return Ft(o,e,a),ep(o,n,a),!0}return!1}function Lu(e,n,o,a){if(a={lane:2,revertLane:pd(),gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Ls(e)){if(n)throw Error(r(479))}else n=tu(e,o,a,2),n!==null&&Ft(n,e,2)}function Ls(e){var n=e.alternate;return e===_e||n!==null&&n===_e}function Wm(e,n){nr=Ms=!0;var o=e.pending;o===null?n.next=n:(n.next=o.next,o.next=n),e.pending=n}function ep(e,n,o){if((o&4194048)!==0){var a=n.lanes;a&=e.pendingLanes,o|=a,n.lanes=o,rg(e,o)}}var ma={readContext:_t,use:Us,useCallback:et,useContext:et,useEffect:et,useImperativeHandle:et,useLayoutEffect:et,useInsertionEffect:et,useMemo:et,useReducer:et,useRef:et,useState:et,useDebugValue:et,useDeferredValue:et,useTransition:et,useSyncExternalStore:et,useId:et,useHostTransitionStatus:et,useFormState:et,useActionState:et,useOptimistic:et,useMemoCache:et,useCacheRefresh:et};ma.useEffectEvent=et;var tp={readContext:_t,use:Us,useCallback:function(e,n){return Ut().memoizedState=[e,n===void 0?null:n],e},useContext:_t,useEffect:Lm,useImperativeHandle:function(e,n,o){o=o!=null?o.concat([e]):null,Ps(4194308,4,qm.bind(null,n,e),o)},useLayoutEffect:function(e,n){return Ps(4194308,4,e,n)},useInsertionEffect:function(e,n){Ps(4,2,e,n)},useMemo:function(e,n){var o=Ut();n=n===void 0?null:n;var a=e();if(ho){vt(!0);try{e()}finally{vt(!1)}}return o.memoizedState=[a,n],a},useReducer:function(e,n,o){var a=Ut();if(o!==void 0){var u=o(n);if(ho){vt(!0);try{o(n)}finally{vt(!1)}}}else u=n;return a.memoizedState=a.baseState=u,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:u},a.queue=e,e=e.dispatch=gE.bind(null,_e,e),[a.memoizedState,e]},useRef:function(e){var n=Ut();return e={current:e},n.memoizedState=e},useState:function(e){e=Mu(e);var n=e.queue,o=Zm.bind(null,_e,n);return n.dispatch=o,[e.memoizedState,o]},useDebugValue:Uu,useDeferredValue:function(e,n){var o=Ut();return xu(o,e,n)},useTransition:function(){var e=Mu(!1);return e=Ym.bind(null,_e,e.queue,!0,!1),Ut().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,o){var a=_e,u=Ut();if(Ne){if(o===void 0)throw Error(r(407));o=o()}else{if(o=n(),Ve===null)throw Error(r(349));(ke&127)!==0||Am(a,n,o)}u.memoizedState=o;var d={value:o,getSnapshot:n};return u.queue=d,Lm(_m.bind(null,a,d,e),[e]),a.flags|=2048,or(9,{destroy:void 0},Em.bind(null,a,d,o,n),null),o},useId:function(){var e=Ut(),n=Ve.identifierPrefix;if(Ne){var o=Nn,a=Mn;o=(a&~(1<<32-gt(a)-1)).toString(32)+o,n="_"+n+"R_"+o,o=Ns++,0<o&&(n+="H"+o.toString(32)),n+="_"}else o=sE++,n="_"+n+"r_"+o.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:Hu,useFormState:Dm,useActionState:Dm,useOptimistic:function(e){var n=Ut();n.memoizedState=n.baseState=e;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=o,n=Lu.bind(null,_e,!0,o),o.dispatch=n,[e,n]},useMemoCache:Iu,useCacheRefresh:function(){return Ut().memoizedState=fE.bind(null,_e)},useEffectEvent:function(e){var n=Ut(),o={impl:e};return n.memoizedState=o,function(){if((He&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}},zu={readContext:_t,use:Us,useCallback:Gm,useContext:_t,useEffect:Du,useImperativeHandle:jm,useInsertionEffect:Bm,useLayoutEffect:Km,useMemo:Fm,useReducer:xs,useRef:Hm,useState:function(){return xs(Xn)},useDebugValue:Uu,useDeferredValue:function(e,n){var o=it();return Qm(o,je.memoizedState,e,n)},useTransition:function(){var e=xs(Xn)[0],n=it().memoizedState;return[typeof e=="boolean"?e:fa(e),n]},useSyncExternalStore:Tm,useId:Jm,useHostTransitionStatus:Hu,useFormState:Um,useActionState:Um,useOptimistic:function(e,n){var o=it();return Rm(o,je,e,n)},useMemoCache:Iu,useCacheRefresh:$m};zu.useEffectEvent=zm;var np={readContext:_t,use:Us,useCallback:Gm,useContext:_t,useEffect:Du,useImperativeHandle:jm,useInsertionEffect:Bm,useLayoutEffect:Km,useMemo:Fm,useReducer:ku,useRef:Hm,useState:function(){return ku(Xn)},useDebugValue:Uu,useDeferredValue:function(e,n){var o=it();return je===null?xu(o,e,n):Qm(o,je.memoizedState,e,n)},useTransition:function(){var e=ku(Xn)[0],n=it().memoizedState;return[typeof e=="boolean"?e:fa(e),n]},useSyncExternalStore:Tm,useId:Jm,useHostTransitionStatus:Hu,useFormState:Pm,useActionState:Pm,useOptimistic:function(e,n){var o=it();return je!==null?Rm(o,je,e,n):(o.baseState=e,[e,o.queue.dispatch])},useMemoCache:Iu,useCacheRefresh:$m};np.useEffectEvent=zm;function Bu(e,n,o,a){n=e.memoizedState,o=o(a,n),o=o==null?n:T({},n,o),e.memoizedState=o,e.lanes===0&&(e.updateQueue.baseState=o)}var Ku={enqueueSetState:function(e,n,o){e=e._reactInternals;var a=nn(),u=Ti(a);u.payload=n,o!=null&&(u.callback=o),n=Ai(e,u,a),n!==null&&(Ft(n,e,a),la(n,e,a))},enqueueReplaceState:function(e,n,o){e=e._reactInternals;var a=nn(),u=Ti(a);u.tag=1,u.payload=n,o!=null&&(u.callback=o),n=Ai(e,u,a),n!==null&&(Ft(n,e,a),la(n,e,a))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var o=nn(),a=Ti(o);a.tag=2,n!=null&&(a.callback=n),n=Ai(e,a,o),n!==null&&(Ft(n,e,o),la(n,e,o))}};function ip(e,n,o,a,u,d,m){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,d,m):n.prototype&&n.prototype.isPureReactComponent?!ta(o,a)||!ta(u,d):!0}function op(e,n,o,a){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(o,a),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(o,a),n.state!==e&&Ku.enqueueReplaceState(n,n.state,null)}function fo(e,n){var o=n;if("ref"in n){o={};for(var a in n)a!=="ref"&&(o[a]=n[a])}if(e=e.defaultProps){o===n&&(o=T({},o));for(var u in e)o[u]===void 0&&(o[u]=e[u])}return o}function rp(e){ps(e)}function ap(e){console.error(e)}function sp(e){ps(e)}function zs(e,n){try{var o=e.onUncaughtError;o(n.value,{componentStack:n.stack})}catch(a){setTimeout(function(){throw a})}}function cp(e,n,o){try{var a=e.onCaughtError;a(o.value,{componentStack:o.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(u){setTimeout(function(){throw u})}}function qu(e,n,o){return o=Ti(o),o.tag=3,o.payload={element:null},o.callback=function(){zs(e,n)},o}function lp(e){return e=Ti(e),e.tag=3,e}function up(e,n,o,a){var u=o.type.getDerivedStateFromError;if(typeof u=="function"){var d=a.value;e.payload=function(){return u(d)},e.callback=function(){cp(n,o,a)}}var m=o.stateNode;m!==null&&typeof m.componentDidCatch=="function"&&(e.callback=function(){cp(n,o,a),typeof u!="function"&&(Ii===null?Ii=new Set([this]):Ii.add(this));var y=a.stack;this.componentDidCatch(a.value,{componentStack:y!==null?y:""})})}function mE(e,n,o,a,u){if(o.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){if(n=o.alternate,n!==null&&Jo(n,o,u,!0),o=Zt.current,o!==null){switch(o.tag){case 31:case 13:return pn===null?$s():o.alternate===null&&tt===0&&(tt=3),o.flags&=-257,o.flags|=65536,o.lanes=u,a===ws?o.flags|=16384:(n=o.updateQueue,n===null?o.updateQueue=new Set([a]):n.add(a),fd(e,a,u)),!1;case 22:return o.flags|=65536,a===ws?o.flags|=16384:(n=o.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([a])},o.updateQueue=n):(o=n.retryQueue,o===null?n.retryQueue=new Set([a]):o.add(a)),fd(e,a,u)),!1}throw Error(r(435,o.tag))}return fd(e,a,u),$s(),!1}if(Ne)return n=Zt.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=u,a!==su&&(e=Error(r(422),{cause:a}),oa(hn(e,o)))):(a!==su&&(n=Error(r(423),{cause:a}),oa(hn(n,o))),e=e.current.alternate,e.flags|=65536,u&=-u,e.lanes|=u,a=hn(a,o),u=qu(e.stateNode,a,u),vu(e,u),tt!==4&&(tt=2)),!1;var d=Error(r(520),{cause:a});if(d=hn(d,o),Ea===null?Ea=[d]:Ea.push(d),tt!==4&&(tt=2),n===null)return!0;a=hn(a,o),o=n;do{switch(o.tag){case 3:return o.flags|=65536,e=u&-u,o.lanes|=e,e=qu(o.stateNode,a,e),vu(o,e),!1;case 1:if(n=o.type,d=o.stateNode,(o.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Ii===null||!Ii.has(d))))return o.flags|=65536,u&=-u,o.lanes|=u,u=lp(u),up(u,e,o,a),vu(o,u),!1}o=o.return}while(o!==null);return!1}var ju=Error(r(461)),lt=!1;function bt(e,n,o,a){n.child=e===null?gm(n,null,o,a):uo(n,e.child,o,a)}function dp(e,n,o,a,u){o=o.render;var d=n.ref;if("ref"in a){var m={};for(var y in a)y!=="ref"&&(m[y]=a[y])}else m=a;return ao(n),a=_u(e,n,o,m,d,u),y=bu(),e!==null&&!lt?(wu(e,n,u),Jn(e,n,u)):(Ne&&y&&ru(n),n.flags|=1,bt(e,n,a,u),n.child)}function hp(e,n,o,a,u){if(e===null){var d=o.type;return typeof d=="function"&&!nu(d)&&d.defaultProps===void 0&&o.compare===null?(n.tag=15,n.type=d,fp(e,n,d,a,u)):(e=Ss(o.type,null,a,n,n.mode,u),e.ref=n.ref,e.return=n,n.child=e)}if(d=e.child,!$u(e,u)){var m=d.memoizedProps;if(o=o.compare,o=o!==null?o:ta,o(m,a)&&e.ref===n.ref)return Jn(e,n,u)}return n.flags|=1,e=Gn(d,a),e.ref=n.ref,e.return=n,n.child=e}function fp(e,n,o,a,u){if(e!==null){var d=e.memoizedProps;if(ta(d,a)&&e.ref===n.ref)if(lt=!1,n.pendingProps=a=d,$u(e,u))(e.flags&131072)!==0&&(lt=!0);else return n.lanes=e.lanes,Jn(e,n,u)}return Gu(e,n,o,a,u)}function gp(e,n,o,a){var u=a.children,d=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.mode==="hidden"){if((n.flags&128)!==0){if(d=d!==null?d.baseLanes|o:o,e!==null){for(a=n.child=e.child,u=0;a!==null;)u=u|a.lanes|a.childLanes,a=a.sibling;a=u&~d}else a=0,n.child=null;return mp(e,n,d,o,a)}if((o&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&_s(n,d!==null?d.cachePool:null),d!==null?ym(n,d):Su(),vm(n);else return a=n.lanes=536870912,mp(e,n,d!==null?d.baseLanes|o:o,o,a)}else d!==null?(_s(n,d.cachePool),ym(n,d),_i(),n.memoizedState=null):(e!==null&&_s(n,null),Su(),_i());return bt(e,n,u,o),n.child}function pa(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function mp(e,n,o,a,u){var d=gu();return d=d===null?null:{parent:st._currentValue,pool:d},n.memoizedState={baseLanes:o,cachePool:d},e!==null&&_s(n,null),Su(),vm(n),e!==null&&Jo(e,n,a,!0),n.childLanes=u,null}function Bs(e,n){return n=qs({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function pp(e,n,o){return uo(n,e.child,null,o),e=Bs(n,n.pendingProps),e.flags|=2,Wt(n),n.memoizedState=null,e}function pE(e,n,o){var a=n.pendingProps,u=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(Ne){if(a.mode==="hidden")return e=Bs(n,a),n.lanes=536870912,pa(null,e);if(Au(n),(e=Je)?(e=Iy(e,mn),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:pi!==null?{id:Mn,overflow:Nn}:null,retryLane:536870912,hydrationErrors:null},o=Wg(e),o.return=n,n.child=o,Et=n,Je=null)):e=null,e===null)throw vi(n);return n.lanes=536870912,null}return Bs(n,a)}var d=e.memoizedState;if(d!==null){var m=d.dehydrated;if(Au(n),u)if(n.flags&256)n.flags&=-257,n=pp(e,n,o);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(r(558));else if(lt||Jo(e,n,o,!1),u=(o&e.childLanes)!==0,lt||u){if(a=Ve,a!==null&&(m=ag(a,o),m!==0&&m!==d.retryLane))throw d.retryLane=m,no(e,m),Ft(a,e,m),ju;$s(),n=pp(e,n,o)}else e=d.treeContext,Je=yn(m.nextSibling),Et=n,Ne=!0,yi=null,mn=!1,e!==null&&nm(n,e),n=Bs(n,a),n.flags|=4096;return n}return e=Gn(e.child,{mode:a.mode,children:a.children}),e.ref=n.ref,n.child=e,e.return=n,e}function Ks(e,n){var o=n.ref;if(o===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(e===null||e.ref!==o)&&(n.flags|=4194816)}}function Gu(e,n,o,a,u){return ao(n),o=_u(e,n,o,a,void 0,u),a=bu(),e!==null&&!lt?(wu(e,n,u),Jn(e,n,u)):(Ne&&a&&ru(n),n.flags|=1,bt(e,n,o,u),n.child)}function yp(e,n,o,a,u,d){return ao(n),n.updateQueue=null,o=Sm(n,a,o,u),Cm(e),a=bu(),e!==null&&!lt?(wu(e,n,d),Jn(e,n,d)):(Ne&&a&&ru(n),n.flags|=1,bt(e,n,o,d),n.child)}function vp(e,n,o,a,u){if(ao(n),n.stateNode===null){var d=Qo,m=o.contextType;typeof m=="object"&&m!==null&&(d=_t(m)),d=new o(a,d),n.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Ku,n.stateNode=d,d._reactInternals=n,d=n.stateNode,d.props=a,d.state=n.memoizedState,d.refs={},pu(n),m=o.contextType,d.context=typeof m=="object"&&m!==null?_t(m):Qo,d.state=n.memoizedState,m=o.getDerivedStateFromProps,typeof m=="function"&&(Bu(n,o,m,a),d.state=n.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(m=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),m!==d.state&&Ku.enqueueReplaceState(d,d.state,null),da(n,a,d,u),ua(),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308),a=!0}else if(e===null){d=n.stateNode;var y=n.memoizedProps,E=fo(o,y);d.props=E;var H=d.context,F=o.contextType;m=Qo,typeof F=="object"&&F!==null&&(m=_t(F));var Z=o.getDerivedStateFromProps;F=typeof Z=="function"||typeof d.getSnapshotBeforeUpdate=="function",y=n.pendingProps!==y,F||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(y||H!==m)&&op(n,d,a,m),Si=!1;var L=n.memoizedState;d.state=L,da(n,a,d,u),ua(),H=n.memoizedState,y||L!==H||Si?(typeof Z=="function"&&(Bu(n,o,Z,a),H=n.memoizedState),(E=Si||ip(n,o,E,a,L,H,m))?(F||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(n.flags|=4194308)):(typeof d.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=a,n.memoizedState=H),d.props=a,d.state=H,d.context=m,a=E):(typeof d.componentDidMount=="function"&&(n.flags|=4194308),a=!1)}else{d=n.stateNode,yu(e,n),m=n.memoizedProps,F=fo(o,m),d.props=F,Z=n.pendingProps,L=d.context,H=o.contextType,E=Qo,typeof H=="object"&&H!==null&&(E=_t(H)),y=o.getDerivedStateFromProps,(H=typeof y=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(m!==Z||L!==E)&&op(n,d,a,E),Si=!1,L=n.memoizedState,d.state=L,da(n,a,d,u),ua();var q=n.memoizedState;m!==Z||L!==q||Si||e!==null&&e.dependencies!==null&&As(e.dependencies)?(typeof y=="function"&&(Bu(n,o,y,a),q=n.memoizedState),(F=Si||ip(n,o,F,a,L,q,E)||e!==null&&e.dependencies!==null&&As(e.dependencies))?(H||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(a,q,E),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(a,q,E)),typeof d.componentDidUpdate=="function"&&(n.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof d.componentDidUpdate!="function"||m===e.memoizedProps&&L===e.memoizedState||(n.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&L===e.memoizedState||(n.flags|=1024),n.memoizedProps=a,n.memoizedState=q),d.props=a,d.state=q,d.context=E,a=F):(typeof d.componentDidUpdate!="function"||m===e.memoizedProps&&L===e.memoizedState||(n.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&L===e.memoizedState||(n.flags|=1024),a=!1)}return d=a,Ks(e,n),a=(n.flags&128)!==0,d||a?(d=n.stateNode,o=a&&typeof o.getDerivedStateFromError!="function"?null:d.render(),n.flags|=1,e!==null&&a?(n.child=uo(n,e.child,null,u),n.child=uo(n,null,o,u)):bt(e,n,o,u),n.memoizedState=d.state,e=n.child):e=Jn(e,n,u),e}function Cp(e,n,o,a){return oo(),n.flags|=256,bt(e,n,o,a),n.child}var Fu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Qu(e){return{baseLanes:e,cachePool:cm()}}function Yu(e,n,o){return e=e!==null?e.childLanes&~o:0,n&&(e|=tn),e}function Sp(e,n,o){var a=n.pendingProps,u=!1,d=(n.flags&128)!==0,m;if((m=d)||(m=e!==null&&e.memoizedState===null?!1:(nt.current&2)!==0),m&&(u=!0,n.flags&=-129),m=(n.flags&32)!==0,n.flags&=-33,e===null){if(Ne){if(u?Ei(n):_i(),(e=Je)?(e=Iy(e,mn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:pi!==null?{id:Mn,overflow:Nn}:null,retryLane:536870912,hydrationErrors:null},o=Wg(e),o.return=n,n.child=o,Et=n,Je=null)):e=null,e===null)throw vi(n);return Od(e)?n.lanes=32:n.lanes=536870912,null}var y=a.children;return a=a.fallback,u?(_i(),u=n.mode,y=qs({mode:"hidden",children:y},u),a=io(a,u,o,null),y.return=n,a.return=n,y.sibling=a,n.child=y,a=n.child,a.memoizedState=Qu(o),a.childLanes=Yu(e,m,o),n.memoizedState=Fu,pa(null,a)):(Ei(n),Vu(n,y))}var E=e.memoizedState;if(E!==null&&(y=E.dehydrated,y!==null)){if(d)n.flags&256?(Ei(n),n.flags&=-257,n=Xu(e,n,o)):n.memoizedState!==null?(_i(),n.child=e.child,n.flags|=128,n=null):(_i(),y=a.fallback,u=n.mode,a=qs({mode:"visible",children:a.children},u),y=io(y,u,o,null),y.flags|=2,a.return=n,y.return=n,a.sibling=y,n.child=a,uo(n,e.child,null,o),a=n.child,a.memoizedState=Qu(o),a.childLanes=Yu(e,m,o),n.memoizedState=Fu,n=pa(null,a));else if(Ei(n),Od(y)){if(m=y.nextSibling&&y.nextSibling.dataset,m)var H=m.dgst;m=H,a=Error(r(419)),a.stack="",a.digest=m,oa({value:a,source:null,stack:null}),n=Xu(e,n,o)}else if(lt||Jo(e,n,o,!1),m=(o&e.childLanes)!==0,lt||m){if(m=Ve,m!==null&&(a=ag(m,o),a!==0&&a!==E.retryLane))throw E.retryLane=a,no(e,a),Ft(m,e,a),ju;Id(y)||$s(),n=Xu(e,n,o)}else Id(y)?(n.flags|=192,n.child=e.child,n=null):(e=E.treeContext,Je=yn(y.nextSibling),Et=n,Ne=!0,yi=null,mn=!1,e!==null&&nm(n,e),n=Vu(n,a.children),n.flags|=4096);return n}return u?(_i(),y=a.fallback,u=n.mode,E=e.child,H=E.sibling,a=Gn(E,{mode:"hidden",children:a.children}),a.subtreeFlags=E.subtreeFlags&65011712,H!==null?y=Gn(H,y):(y=io(y,u,o,null),y.flags|=2),y.return=n,a.return=n,a.sibling=y,n.child=a,pa(null,a),a=n.child,y=e.child.memoizedState,y===null?y=Qu(o):(u=y.cachePool,u!==null?(E=st._currentValue,u=u.parent!==E?{parent:E,pool:E}:u):u=cm(),y={baseLanes:y.baseLanes|o,cachePool:u}),a.memoizedState=y,a.childLanes=Yu(e,m,o),n.memoizedState=Fu,pa(e.child,a)):(Ei(n),o=e.child,e=o.sibling,o=Gn(o,{mode:"visible",children:a.children}),o.return=n,o.sibling=null,e!==null&&(m=n.deletions,m===null?(n.deletions=[e],n.flags|=16):m.push(e)),n.child=o,n.memoizedState=null,o)}function Vu(e,n){return n=qs({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function qs(e,n){return e=$t(22,e,null,n),e.lanes=0,e}function Xu(e,n,o){return uo(n,e.child,null,o),e=Vu(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function Tp(e,n,o){e.lanes|=n;var a=e.alternate;a!==null&&(a.lanes|=n),uu(e.return,n,o)}function Ju(e,n,o,a,u,d){var m=e.memoizedState;m===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:a,tail:o,tailMode:u,treeForkCount:d}:(m.isBackwards=n,m.rendering=null,m.renderingStartTime=0,m.last=a,m.tail=o,m.tailMode=u,m.treeForkCount=d)}function Ap(e,n,o){var a=n.pendingProps,u=a.revealOrder,d=a.tail;a=a.children;var m=nt.current,y=(m&2)!==0;if(y?(m=m&1|2,n.flags|=128):m&=1,b(nt,m),bt(e,n,a,o),a=Ne?ia:0,!y&&e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Tp(e,o,n);else if(e.tag===19)Tp(e,o,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(u){case"forwards":for(o=n.child,u=null;o!==null;)e=o.alternate,e!==null&&ks(e)===null&&(u=o),o=o.sibling;o=u,o===null?(u=n.child,n.child=null):(u=o.sibling,o.sibling=null),Ju(n,!1,u,o,d,a);break;case"backwards":case"unstable_legacy-backwards":for(o=null,u=n.child,n.child=null;u!==null;){if(e=u.alternate,e!==null&&ks(e)===null){n.child=u;break}e=u.sibling,u.sibling=o,o=u,u=e}Ju(n,!0,o,null,d,a);break;case"together":Ju(n,!1,null,null,void 0,a);break;default:n.memoizedState=null}return n.child}function Jn(e,n,o){if(e!==null&&(n.dependencies=e.dependencies),Ri|=n.lanes,(o&n.childLanes)===0)if(e!==null){if(Jo(e,n,o,!1),(o&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(r(153));if(n.child!==null){for(e=n.child,o=Gn(e,e.pendingProps),n.child=o,o.return=n;e.sibling!==null;)e=e.sibling,o=o.sibling=Gn(e,e.pendingProps),o.return=n;o.sibling=null}return n.child}function $u(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&As(e)))}function yE(e,n,o){switch(n.tag){case 3:Te(n,n.stateNode.containerInfo),Ci(n,st,e.memoizedState.cache),oo();break;case 27:case 5:qe(n);break;case 4:Te(n,n.stateNode.containerInfo);break;case 10:Ci(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Au(n),null;break;case 13:var a=n.memoizedState;if(a!==null)return a.dehydrated!==null?(Ei(n),n.flags|=128,null):(o&n.child.childLanes)!==0?Sp(e,n,o):(Ei(n),e=Jn(e,n,o),e!==null?e.sibling:null);Ei(n);break;case 19:var u=(e.flags&128)!==0;if(a=(o&n.childLanes)!==0,a||(Jo(e,n,o,!1),a=(o&n.childLanes)!==0),u){if(a)return Ap(e,n,o);n.flags|=128}if(u=n.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),b(nt,nt.current),a)break;return null;case 22:return n.lanes=0,gp(e,n,o,n.pendingProps);case 24:Ci(n,st,e.memoizedState.cache)}return Jn(e,n,o)}function Ep(e,n,o){if(e!==null)if(e.memoizedProps!==n.pendingProps)lt=!0;else{if(!$u(e,o)&&(n.flags&128)===0)return lt=!1,yE(e,n,o);lt=(e.flags&131072)!==0}else lt=!1,Ne&&(n.flags&1048576)!==0&&tm(n,ia,n.index);switch(n.lanes=0,n.tag){case 16:e:{var a=n.pendingProps;if(e=co(n.elementType),n.type=e,typeof e=="function")nu(e)?(a=fo(e,a),n.tag=1,n=vp(null,n,e,a,o)):(n.tag=0,n=Gu(null,n,e,a,o));else{if(e!=null){var u=e.$$typeof;if(u===G){n.tag=11,n=dp(null,n,e,a,o);break e}else if(u===te){n.tag=14,n=hp(null,n,e,a,o);break e}}throw n=fe(e)||e,Error(r(306,n,""))}}return n;case 0:return Gu(e,n,n.type,n.pendingProps,o);case 1:return a=n.type,u=fo(a,n.pendingProps),vp(e,n,a,u,o);case 3:e:{if(Te(n,n.stateNode.containerInfo),e===null)throw Error(r(387));a=n.pendingProps;var d=n.memoizedState;u=d.element,yu(e,n),da(n,a,null,o);var m=n.memoizedState;if(a=m.cache,Ci(n,st,a),a!==d.cache&&du(n,[st],o,!0),ua(),a=m.element,d.isDehydrated)if(d={element:a,isDehydrated:!1,cache:m.cache},n.updateQueue.baseState=d,n.memoizedState=d,n.flags&256){n=Cp(e,n,a,o);break e}else if(a!==u){u=hn(Error(r(424)),n),oa(u),n=Cp(e,n,a,o);break e}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Je=yn(e.firstChild),Et=n,Ne=!0,yi=null,mn=!0,o=gm(n,null,a,o),n.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(oo(),a===u){n=Jn(e,n,o);break e}bt(e,n,a,o)}n=n.child}return n;case 26:return Ks(e,n),e===null?(o=Uy(n.type,null,n.pendingProps,null))?n.memoizedState=o:Ne||(o=n.type,e=n.pendingProps,a=oc(oe.current).createElement(o),a[At]=n,a[zt]=e,wt(a,o,e),Ct(a),n.stateNode=a):n.memoizedState=Uy(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return qe(n),e===null&&Ne&&(a=n.stateNode=My(n.type,n.pendingProps,oe.current),Et=n,mn=!0,u=Je,Ni(n.type)?(kd=u,Je=yn(a.firstChild)):Je=u),bt(e,n,n.pendingProps.children,o),Ks(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&Ne&&((u=a=Je)&&(a=YE(a,n.type,n.pendingProps,mn),a!==null?(n.stateNode=a,Et=n,Je=yn(a.firstChild),mn=!1,u=!0):u=!1),u||vi(n)),qe(n),u=n.type,d=n.pendingProps,m=e!==null?e.memoizedProps:null,a=d.children,bd(u,d)?a=null:m!==null&&bd(u,m)&&(n.flags|=32),n.memoizedState!==null&&(u=_u(e,n,cE,null,null,o),Ma._currentValue=u),Ks(e,n),bt(e,n,a,o),n.child;case 6:return e===null&&Ne&&((e=o=Je)&&(o=VE(o,n.pendingProps,mn),o!==null?(n.stateNode=o,Et=n,Je=null,e=!0):e=!1),e||vi(n)),null;case 13:return Sp(e,n,o);case 4:return Te(n,n.stateNode.containerInfo),a=n.pendingProps,e===null?n.child=uo(n,null,a,o):bt(e,n,a,o),n.child;case 11:return dp(e,n,n.type,n.pendingProps,o);case 7:return bt(e,n,n.pendingProps,o),n.child;case 8:return bt(e,n,n.pendingProps.children,o),n.child;case 12:return bt(e,n,n.pendingProps.children,o),n.child;case 10:return a=n.pendingProps,Ci(n,n.type,a.value),bt(e,n,a.children,o),n.child;case 9:return u=n.type._context,a=n.pendingProps.children,ao(n),u=_t(u),a=a(u),n.flags|=1,bt(e,n,a,o),n.child;case 14:return hp(e,n,n.type,n.pendingProps,o);case 15:return fp(e,n,n.type,n.pendingProps,o);case 19:return Ap(e,n,o);case 31:return pE(e,n,o);case 22:return gp(e,n,o,n.pendingProps);case 24:return ao(n),a=_t(st),e===null?(u=gu(),u===null&&(u=Ve,d=hu(),u.pooledCache=d,d.refCount++,d!==null&&(u.pooledCacheLanes|=o),u=d),n.memoizedState={parent:a,cache:u},pu(n),Ci(n,st,u)):((e.lanes&o)!==0&&(yu(e,n),da(n,null,null,o),ua()),u=e.memoizedState,d=n.memoizedState,u.parent!==a?(u={parent:a,cache:a},n.memoizedState=u,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=u),Ci(n,st,a)):(a=d.cache,Ci(n,st,a),a!==u.cache&&du(n,[st],o,!0))),bt(e,n,n.pendingProps.children,o),n.child;case 29:throw n.pendingProps}throw Error(r(156,n.tag))}function $n(e){e.flags|=4}function Zu(e,n,o,a,u){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(u&335544128)===u)if(e.stateNode.complete)e.flags|=8192;else if(Jp())e.flags|=8192;else throw lo=ws,mu}else e.flags&=-16777217}function _p(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!zy(n))if(Jp())e.flags|=8192;else throw lo=ws,mu}function js(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?ig():536870912,e.lanes|=n,cr|=n)}function ya(e,n){if(!Ne)switch(e.tailMode){case"hidden":n=e.tail;for(var o=null;n!==null;)n.alternate!==null&&(o=n),n=n.sibling;o===null?e.tail=null:o.sibling=null;break;case"collapsed":o=e.tail;for(var a=null;o!==null;)o.alternate!==null&&(a=o),o=o.sibling;a===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function $e(e){var n=e.alternate!==null&&e.alternate.child===e.child,o=0,a=0;if(n)for(var u=e.child;u!==null;)o|=u.lanes|u.childLanes,a|=u.subtreeFlags&65011712,a|=u.flags&65011712,u.return=e,u=u.sibling;else for(u=e.child;u!==null;)o|=u.lanes|u.childLanes,a|=u.subtreeFlags,a|=u.flags,u.return=e,u=u.sibling;return e.subtreeFlags|=a,e.childLanes=o,n}function vE(e,n,o){var a=n.pendingProps;switch(au(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $e(n),null;case 1:return $e(n),null;case 3:return o=n.stateNode,a=null,e!==null&&(a=e.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),Yn(st),Ae(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(Xo(n)?$n(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,cu())),$e(n),null;case 26:var u=n.type,d=n.memoizedState;return e===null?($n(n),d!==null?($e(n),_p(n,d)):($e(n),Zu(n,u,null,a,o))):d?d!==e.memoizedState?($n(n),$e(n),_p(n,d)):($e(n),n.flags&=-16777217):(e=e.memoizedProps,e!==a&&$n(n),$e(n),Zu(n,u,e,a,o)),null;case 27:if(We(n),o=oe.current,u=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==a&&$n(n);else{if(!a){if(n.stateNode===null)throw Error(r(166));return $e(n),null}e=I.current,Xo(n)?im(n):(e=My(u,a,o),n.stateNode=e,$n(n))}return $e(n),null;case 5:if(We(n),u=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==a&&$n(n);else{if(!a){if(n.stateNode===null)throw Error(r(166));return $e(n),null}if(d=I.current,Xo(n))im(n);else{var m=oc(oe.current);switch(d){case 1:d=m.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:d=m.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":d=m.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":d=m.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":d=m.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof a.is=="string"?m.createElement("select",{is:a.is}):m.createElement("select"),a.multiple?d.multiple=!0:a.size&&(d.size=a.size);break;default:d=typeof a.is=="string"?m.createElement(u,{is:a.is}):m.createElement(u)}}d[At]=n,d[zt]=a;e:for(m=n.child;m!==null;){if(m.tag===5||m.tag===6)d.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===n)break e;for(;m.sibling===null;){if(m.return===null||m.return===n)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}n.stateNode=d;e:switch(wt(d,u,a),u){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&$n(n)}}return $e(n),Zu(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,o),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==a&&$n(n);else{if(typeof a!="string"&&n.stateNode===null)throw Error(r(166));if(e=oe.current,Xo(n)){if(e=n.stateNode,o=n.memoizedProps,a=null,u=Et,u!==null)switch(u.tag){case 27:case 5:a=u.memoizedProps}e[At]=n,e=!!(e.nodeValue===o||a!==null&&a.suppressHydrationWarning===!0||Sy(e.nodeValue,o)),e||vi(n,!0)}else e=oc(e).createTextNode(a),e[At]=n,n.stateNode=e}return $e(n),null;case 31:if(o=n.memoizedState,e===null||e.memoizedState!==null){if(a=Xo(n),o!==null){if(e===null){if(!a)throw Error(r(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(557));e[At]=n}else oo(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;$e(n),e=!1}else o=cu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=o),e=!0;if(!e)return n.flags&256?(Wt(n),n):(Wt(n),null);if((n.flags&128)!==0)throw Error(r(558))}return $e(n),null;case 13:if(a=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(u=Xo(n),a!==null&&a.dehydrated!==null){if(e===null){if(!u)throw Error(r(318));if(u=n.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(r(317));u[At]=n}else oo(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;$e(n),u=!1}else u=cu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=u),u=!0;if(!u)return n.flags&256?(Wt(n),n):(Wt(n),null)}return Wt(n),(n.flags&128)!==0?(n.lanes=o,n):(o=a!==null,e=e!==null&&e.memoizedState!==null,o&&(a=n.child,u=null,a.alternate!==null&&a.alternate.memoizedState!==null&&a.alternate.memoizedState.cachePool!==null&&(u=a.alternate.memoizedState.cachePool.pool),d=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),d!==u&&(a.flags|=2048)),o!==e&&o&&(n.child.flags|=8192),js(n,n.updateQueue),$e(n),null);case 4:return Ae(),e===null&&Sd(n.stateNode.containerInfo),$e(n),null;case 10:return Yn(n.type),$e(n),null;case 19:if(C(nt),a=n.memoizedState,a===null)return $e(n),null;if(u=(n.flags&128)!==0,d=a.rendering,d===null)if(u)ya(a,!1);else{if(tt!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(d=ks(e),d!==null){for(n.flags|=128,ya(a,!1),e=d.updateQueue,n.updateQueue=e,js(n,e),n.subtreeFlags=0,e=o,o=n.child;o!==null;)Zg(o,e),o=o.sibling;return b(nt,nt.current&1|2),Ne&&Fn(n,a.treeForkCount),n.child}e=e.sibling}a.tail!==null&&yt()>Vs&&(n.flags|=128,u=!0,ya(a,!1),n.lanes=4194304)}else{if(!u)if(e=ks(d),e!==null){if(n.flags|=128,u=!0,e=e.updateQueue,n.updateQueue=e,js(n,e),ya(a,!0),a.tail===null&&a.tailMode==="hidden"&&!d.alternate&&!Ne)return $e(n),null}else 2*yt()-a.renderingStartTime>Vs&&o!==536870912&&(n.flags|=128,u=!0,ya(a,!1),n.lanes=4194304);a.isBackwards?(d.sibling=n.child,n.child=d):(e=a.last,e!==null?e.sibling=d:n.child=d,a.last=d)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=yt(),e.sibling=null,o=nt.current,b(nt,u?o&1|2:o&1),Ne&&Fn(n,a.treeForkCount),e):($e(n),null);case 22:case 23:return Wt(n),Tu(),a=n.memoizedState!==null,e!==null?e.memoizedState!==null!==a&&(n.flags|=8192):a&&(n.flags|=8192),a?(o&536870912)!==0&&(n.flags&128)===0&&($e(n),n.subtreeFlags&6&&(n.flags|=8192)):$e(n),o=n.updateQueue,o!==null&&js(n,o.retryQueue),o=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(o=e.memoizedState.cachePool.pool),a=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),a!==o&&(n.flags|=2048),e!==null&&C(so),null;case 24:return o=null,e!==null&&(o=e.memoizedState.cache),n.memoizedState.cache!==o&&(n.flags|=2048),Yn(st),$e(n),null;case 25:return null;case 30:return null}throw Error(r(156,n.tag))}function CE(e,n){switch(au(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Yn(st),Ae(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return We(n),null;case 31:if(n.memoizedState!==null){if(Wt(n),n.alternate===null)throw Error(r(340));oo()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(Wt(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(r(340));oo()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return C(nt),null;case 4:return Ae(),null;case 10:return Yn(n.type),null;case 22:case 23:return Wt(n),Tu(),e!==null&&C(so),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return Yn(st),null;case 25:return null;default:return null}}function bp(e,n){switch(au(n),n.tag){case 3:Yn(st),Ae();break;case 26:case 27:case 5:We(n);break;case 4:Ae();break;case 31:n.memoizedState!==null&&Wt(n);break;case 13:Wt(n);break;case 19:C(nt);break;case 10:Yn(n.type);break;case 22:case 23:Wt(n),Tu(),e!==null&&C(so);break;case 24:Yn(st)}}function va(e,n){try{var o=n.updateQueue,a=o!==null?o.lastEffect:null;if(a!==null){var u=a.next;o=u;do{if((o.tag&e)===e){a=void 0;var d=o.create,m=o.inst;a=d(),m.destroy=a}o=o.next}while(o!==u)}}catch(y){Be(n,n.return,y)}}function bi(e,n,o){try{var a=n.updateQueue,u=a!==null?a.lastEffect:null;if(u!==null){var d=u.next;a=d;do{if((a.tag&e)===e){var m=a.inst,y=m.destroy;if(y!==void 0){m.destroy=void 0,u=n;var E=o,H=y;try{H()}catch(F){Be(u,E,F)}}}a=a.next}while(a!==d)}}catch(F){Be(n,n.return,F)}}function wp(e){var n=e.updateQueue;if(n!==null){var o=e.stateNode;try{pm(n,o)}catch(a){Be(e,e.return,a)}}}function Rp(e,n,o){o.props=fo(e.type,e.memoizedProps),o.state=e.memoizedState;try{o.componentWillUnmount()}catch(a){Be(e,n,a)}}function Ca(e,n){try{var o=e.ref;if(o!==null){switch(e.tag){case 26:case 27:case 5:var a=e.stateNode;break;case 30:a=e.stateNode;break;default:a=e.stateNode}typeof o=="function"?e.refCleanup=o(a):o.current=a}}catch(u){Be(e,n,u)}}function Dn(e,n){var o=e.ref,a=e.refCleanup;if(o!==null)if(typeof a=="function")try{a()}catch(u){Be(e,n,u)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(u){Be(e,n,u)}else o.current=null}function Ip(e){var n=e.type,o=e.memoizedProps,a=e.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":o.autoFocus&&a.focus();break e;case"img":o.src?a.src=o.src:o.srcSet&&(a.srcset=o.srcSet)}}catch(u){Be(e,e.return,u)}}function Wu(e,n,o){try{var a=e.stateNode;KE(a,e.type,o,n),a[zt]=n}catch(u){Be(e,e.return,u)}}function Op(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Ni(e.type)||e.tag===4}function ed(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Op(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Ni(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function td(e,n,o){var a=e.tag;if(a===5||a===6)e=e.stateNode,n?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(e,n):(n=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,n.appendChild(e),o=o._reactRootContainer,o!=null||n.onclick!==null||(n.onclick=qn));else if(a!==4&&(a===27&&Ni(e.type)&&(o=e.stateNode,n=null),e=e.child,e!==null))for(td(e,n,o),e=e.sibling;e!==null;)td(e,n,o),e=e.sibling}function Gs(e,n,o){var a=e.tag;if(a===5||a===6)e=e.stateNode,n?o.insertBefore(e,n):o.appendChild(e);else if(a!==4&&(a===27&&Ni(e.type)&&(o=e.stateNode),e=e.child,e!==null))for(Gs(e,n,o),e=e.sibling;e!==null;)Gs(e,n,o),e=e.sibling}function kp(e){var n=e.stateNode,o=e.memoizedProps;try{for(var a=e.type,u=n.attributes;u.length;)n.removeAttributeNode(u[0]);wt(n,a,o),n[At]=e,n[zt]=o}catch(d){Be(e,e.return,d)}}var Zn=!1,ut=!1,nd=!1,Mp=typeof WeakSet=="function"?WeakSet:Set,St=null;function SE(e,n){if(e=e.containerInfo,Ed=dc,e=jg(e),Xl(e)){if("selectionStart"in e)var o={start:e.selectionStart,end:e.selectionEnd};else e:{o=(o=e.ownerDocument)&&o.defaultView||window;var a=o.getSelection&&o.getSelection();if(a&&a.rangeCount!==0){o=a.anchorNode;var u=a.anchorOffset,d=a.focusNode;a=a.focusOffset;try{o.nodeType,d.nodeType}catch{o=null;break e}var m=0,y=-1,E=-1,H=0,F=0,Z=e,L=null;t:for(;;){for(var q;Z!==o||u!==0&&Z.nodeType!==3||(y=m+u),Z!==d||a!==0&&Z.nodeType!==3||(E=m+a),Z.nodeType===3&&(m+=Z.nodeValue.length),(q=Z.firstChild)!==null;)L=Z,Z=q;for(;;){if(Z===e)break t;if(L===o&&++H===u&&(y=m),L===d&&++F===a&&(E=m),(q=Z.nextSibling)!==null)break;Z=L,L=Z.parentNode}Z=q}o=y===-1||E===-1?null:{start:y,end:E}}else o=null}o=o||{start:0,end:0}}else o=null;for(_d={focusedElem:e,selectionRange:o},dc=!1,St=n;St!==null;)if(n=St,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,St=e;else for(;St!==null;){switch(n=St,d=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(o=0;o<e.length;o++)u=e[o],u.ref.impl=u.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,o=n,u=d.memoizedProps,d=d.memoizedState,a=o.stateNode;try{var ge=fo(o.type,u);e=a.getSnapshotBeforeUpdate(ge,d),a.__reactInternalSnapshotBeforeUpdate=e}catch(Ce){Be(o,o.return,Ce)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,o=e.nodeType,o===9)Rd(e);else if(o===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Rd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(r(163))}if(e=n.sibling,e!==null){e.return=n.return,St=e;break}St=n.return}}function Np(e,n,o){var a=o.flags;switch(o.tag){case 0:case 11:case 15:ei(e,o),a&4&&va(5,o);break;case 1:if(ei(e,o),a&4)if(e=o.stateNode,n===null)try{e.componentDidMount()}catch(m){Be(o,o.return,m)}else{var u=fo(o.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(u,n,e.__reactInternalSnapshotBeforeUpdate)}catch(m){Be(o,o.return,m)}}a&64&&wp(o),a&512&&Ca(o,o.return);break;case 3:if(ei(e,o),a&64&&(e=o.updateQueue,e!==null)){if(n=null,o.child!==null)switch(o.child.tag){case 27:case 5:n=o.child.stateNode;break;case 1:n=o.child.stateNode}try{pm(e,n)}catch(m){Be(o,o.return,m)}}break;case 27:n===null&&a&4&&kp(o);case 26:case 5:ei(e,o),n===null&&a&4&&Ip(o),a&512&&Ca(o,o.return);break;case 12:ei(e,o);break;case 31:ei(e,o),a&4&&xp(e,o);break;case 13:ei(e,o),a&4&&Pp(e,o),a&64&&(e=o.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(o=OE.bind(null,o),XE(e,o))));break;case 22:if(a=o.memoizedState!==null||Zn,!a){n=n!==null&&n.memoizedState!==null||ut,u=Zn;var d=ut;Zn=a,(ut=n)&&!d?ti(e,o,(o.subtreeFlags&8772)!==0):ei(e,o),Zn=u,ut=d}break;case 30:break;default:ei(e,o)}}function Dp(e){var n=e.alternate;n!==null&&(e.alternate=null,Dp(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&Nl(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ze=null,Kt=!1;function Wn(e,n,o){for(o=o.child;o!==null;)Up(e,n,o),o=o.sibling}function Up(e,n,o){if(De&&typeof De.onCommitFiberUnmount=="function")try{De.onCommitFiberUnmount(Bn,o)}catch{}switch(o.tag){case 26:ut||Dn(o,n),Wn(e,n,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:ut||Dn(o,n);var a=Ze,u=Kt;Ni(o.type)&&(Ze=o.stateNode,Kt=!1),Wn(e,n,o),Ia(o.stateNode),Ze=a,Kt=u;break;case 5:ut||Dn(o,n);case 6:if(a=Ze,u=Kt,Ze=null,Wn(e,n,o),Ze=a,Kt=u,Ze!==null)if(Kt)try{(Ze.nodeType===9?Ze.body:Ze.nodeName==="HTML"?Ze.ownerDocument.body:Ze).removeChild(o.stateNode)}catch(d){Be(o,n,d)}else try{Ze.removeChild(o.stateNode)}catch(d){Be(o,n,d)}break;case 18:Ze!==null&&(Kt?(e=Ze,wy(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,o.stateNode),pr(e)):wy(Ze,o.stateNode));break;case 4:a=Ze,u=Kt,Ze=o.stateNode.containerInfo,Kt=!0,Wn(e,n,o),Ze=a,Kt=u;break;case 0:case 11:case 14:case 15:bi(2,o,n),ut||bi(4,o,n),Wn(e,n,o);break;case 1:ut||(Dn(o,n),a=o.stateNode,typeof a.componentWillUnmount=="function"&&Rp(o,n,a)),Wn(e,n,o);break;case 21:Wn(e,n,o);break;case 22:ut=(a=ut)||o.memoizedState!==null,Wn(e,n,o),ut=a;break;default:Wn(e,n,o)}}function xp(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{pr(e)}catch(o){Be(n,n.return,o)}}}function Pp(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{pr(e)}catch(o){Be(n,n.return,o)}}function TE(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new Mp),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new Mp),n;default:throw Error(r(435,e.tag))}}function Fs(e,n){var o=TE(e);n.forEach(function(a){if(!o.has(a)){o.add(a);var u=kE.bind(null,e,a);a.then(u,u)}})}function qt(e,n){var o=n.deletions;if(o!==null)for(var a=0;a<o.length;a++){var u=o[a],d=e,m=n,y=m;e:for(;y!==null;){switch(y.tag){case 27:if(Ni(y.type)){Ze=y.stateNode,Kt=!1;break e}break;case 5:Ze=y.stateNode,Kt=!1;break e;case 3:case 4:Ze=y.stateNode.containerInfo,Kt=!0;break e}y=y.return}if(Ze===null)throw Error(r(160));Up(d,m,u),Ze=null,Kt=!1,d=u.alternate,d!==null&&(d.return=null),u.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)Hp(n,e),n=n.sibling}var An=null;function Hp(e,n){var o=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:qt(n,e),jt(e),a&4&&(bi(3,e,e.return),va(3,e),bi(5,e,e.return));break;case 1:qt(n,e),jt(e),a&512&&(ut||o===null||Dn(o,o.return)),a&64&&Zn&&(e=e.updateQueue,e!==null&&(a=e.callbacks,a!==null&&(o=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=o===null?a:o.concat(a))));break;case 26:var u=An;if(qt(n,e),jt(e),a&512&&(ut||o===null||Dn(o,o.return)),a&4){var d=o!==null?o.memoizedState:null;if(a=e.memoizedState,o===null)if(a===null)if(e.stateNode===null){e:{a=e.type,o=e.memoizedProps,u=u.ownerDocument||u;t:switch(a){case"title":d=u.getElementsByTagName("title")[0],(!d||d[Qr]||d[At]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=u.createElement(a),u.head.insertBefore(d,u.querySelector("head > title"))),wt(d,a,o),d[At]=e,Ct(d),a=d;break e;case"link":var m=Hy("link","href",u).get(a+(o.href||""));if(m){for(var y=0;y<m.length;y++)if(d=m[y],d.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&d.getAttribute("rel")===(o.rel==null?null:o.rel)&&d.getAttribute("title")===(o.title==null?null:o.title)&&d.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){m.splice(y,1);break t}}d=u.createElement(a),wt(d,a,o),u.head.appendChild(d);break;case"meta":if(m=Hy("meta","content",u).get(a+(o.content||""))){for(y=0;y<m.length;y++)if(d=m[y],d.getAttribute("content")===(o.content==null?null:""+o.content)&&d.getAttribute("name")===(o.name==null?null:o.name)&&d.getAttribute("property")===(o.property==null?null:o.property)&&d.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&d.getAttribute("charset")===(o.charSet==null?null:o.charSet)){m.splice(y,1);break t}}d=u.createElement(a),wt(d,a,o),u.head.appendChild(d);break;default:throw Error(r(468,a))}d[At]=e,Ct(d),a=d}e.stateNode=a}else Ly(u,e.type,e.stateNode);else e.stateNode=Py(u,a,e.memoizedProps);else d!==a?(d===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):d.count--,a===null?Ly(u,e.type,e.stateNode):Py(u,a,e.memoizedProps)):a===null&&e.stateNode!==null&&Wu(e,e.memoizedProps,o.memoizedProps)}break;case 27:qt(n,e),jt(e),a&512&&(ut||o===null||Dn(o,o.return)),o!==null&&a&4&&Wu(e,e.memoizedProps,o.memoizedProps);break;case 5:if(qt(n,e),jt(e),a&512&&(ut||o===null||Dn(o,o.return)),e.flags&32){u=e.stateNode;try{zo(u,"")}catch(ge){Be(e,e.return,ge)}}a&4&&e.stateNode!=null&&(u=e.memoizedProps,Wu(e,u,o!==null?o.memoizedProps:u)),a&1024&&(nd=!0);break;case 6:if(qt(n,e),jt(e),a&4){if(e.stateNode===null)throw Error(r(162));a=e.memoizedProps,o=e.stateNode;try{o.nodeValue=a}catch(ge){Be(e,e.return,ge)}}break;case 3:if(sc=null,u=An,An=rc(n.containerInfo),qt(n,e),An=u,jt(e),a&4&&o!==null&&o.memoizedState.isDehydrated)try{pr(n.containerInfo)}catch(ge){Be(e,e.return,ge)}nd&&(nd=!1,Lp(e));break;case 4:a=An,An=rc(e.stateNode.containerInfo),qt(n,e),jt(e),An=a;break;case 12:qt(n,e),jt(e);break;case 31:qt(n,e),jt(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Fs(e,a)));break;case 13:qt(n,e),jt(e),e.child.flags&8192&&e.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Ys=yt()),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Fs(e,a)));break;case 22:u=e.memoizedState!==null;var E=o!==null&&o.memoizedState!==null,H=Zn,F=ut;if(Zn=H||u,ut=F||E,qt(n,e),ut=F,Zn=H,jt(e),a&8192)e:for(n=e.stateNode,n._visibility=u?n._visibility&-2:n._visibility|1,u&&(o===null||E||Zn||ut||go(e)),o=null,n=e;;){if(n.tag===5||n.tag===26){if(o===null){E=o=n;try{if(d=E.stateNode,u)m=d.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none";else{y=E.stateNode;var Z=E.memoizedProps.style,L=Z!=null&&Z.hasOwnProperty("display")?Z.display:null;y.style.display=L==null||typeof L=="boolean"?"":(""+L).trim()}}catch(ge){Be(E,E.return,ge)}}}else if(n.tag===6){if(o===null){E=n;try{E.stateNode.nodeValue=u?"":E.memoizedProps}catch(ge){Be(E,E.return,ge)}}}else if(n.tag===18){if(o===null){E=n;try{var q=E.stateNode;u?Ry(q,!0):Ry(E.stateNode,!1)}catch(ge){Be(E,E.return,ge)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;o===n&&(o=null),n=n.return}o===n&&(o=null),n.sibling.return=n.return,n=n.sibling}a&4&&(a=e.updateQueue,a!==null&&(o=a.retryQueue,o!==null&&(a.retryQueue=null,Fs(e,o))));break;case 19:qt(n,e),jt(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Fs(e,a)));break;case 30:break;case 21:break;default:qt(n,e),jt(e)}}function jt(e){var n=e.flags;if(n&2){try{for(var o,a=e.return;a!==null;){if(Op(a)){o=a;break}a=a.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var u=o.stateNode,d=ed(e);Gs(e,d,u);break;case 5:var m=o.stateNode;o.flags&32&&(zo(m,""),o.flags&=-33);var y=ed(e);Gs(e,y,m);break;case 3:case 4:var E=o.stateNode.containerInfo,H=ed(e);td(e,H,E);break;default:throw Error(r(161))}}catch(F){Be(e,e.return,F)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function Lp(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;Lp(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function ei(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Np(e,n.alternate,n),n=n.sibling}function go(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:bi(4,n,n.return),go(n);break;case 1:Dn(n,n.return);var o=n.stateNode;typeof o.componentWillUnmount=="function"&&Rp(n,n.return,o),go(n);break;case 27:Ia(n.stateNode);case 26:case 5:Dn(n,n.return),go(n);break;case 22:n.memoizedState===null&&go(n);break;case 30:go(n);break;default:go(n)}e=e.sibling}}function ti(e,n,o){for(o=o&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var a=n.alternate,u=e,d=n,m=d.flags;switch(d.tag){case 0:case 11:case 15:ti(u,d,o),va(4,d);break;case 1:if(ti(u,d,o),a=d,u=a.stateNode,typeof u.componentDidMount=="function")try{u.componentDidMount()}catch(H){Be(a,a.return,H)}if(a=d,u=a.updateQueue,u!==null){var y=a.stateNode;try{var E=u.shared.hiddenCallbacks;if(E!==null)for(u.shared.hiddenCallbacks=null,u=0;u<E.length;u++)mm(E[u],y)}catch(H){Be(a,a.return,H)}}o&&m&64&&wp(d),Ca(d,d.return);break;case 27:kp(d);case 26:case 5:ti(u,d,o),o&&a===null&&m&4&&Ip(d),Ca(d,d.return);break;case 12:ti(u,d,o);break;case 31:ti(u,d,o),o&&m&4&&xp(u,d);break;case 13:ti(u,d,o),o&&m&4&&Pp(u,d);break;case 22:d.memoizedState===null&&ti(u,d,o),Ca(d,d.return);break;case 30:break;default:ti(u,d,o)}n=n.sibling}}function id(e,n){var o=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(o=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==o&&(e!=null&&e.refCount++,o!=null&&ra(o))}function od(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&ra(e))}function En(e,n,o,a){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)zp(e,n,o,a),n=n.sibling}function zp(e,n,o,a){var u=n.flags;switch(n.tag){case 0:case 11:case 15:En(e,n,o,a),u&2048&&va(9,n);break;case 1:En(e,n,o,a);break;case 3:En(e,n,o,a),u&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&ra(e)));break;case 12:if(u&2048){En(e,n,o,a),e=n.stateNode;try{var d=n.memoizedProps,m=d.id,y=d.onPostCommit;typeof y=="function"&&y(m,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(E){Be(n,n.return,E)}}else En(e,n,o,a);break;case 31:En(e,n,o,a);break;case 13:En(e,n,o,a);break;case 23:break;case 22:d=n.stateNode,m=n.alternate,n.memoizedState!==null?d._visibility&2?En(e,n,o,a):Sa(e,n):d._visibility&2?En(e,n,o,a):(d._visibility|=2,rr(e,n,o,a,(n.subtreeFlags&10256)!==0||!1)),u&2048&&id(m,n);break;case 24:En(e,n,o,a),u&2048&&od(n.alternate,n);break;default:En(e,n,o,a)}}function rr(e,n,o,a,u){for(u=u&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var d=e,m=n,y=o,E=a,H=m.flags;switch(m.tag){case 0:case 11:case 15:rr(d,m,y,E,u),va(8,m);break;case 23:break;case 22:var F=m.stateNode;m.memoizedState!==null?F._visibility&2?rr(d,m,y,E,u):Sa(d,m):(F._visibility|=2,rr(d,m,y,E,u)),u&&H&2048&&id(m.alternate,m);break;case 24:rr(d,m,y,E,u),u&&H&2048&&od(m.alternate,m);break;default:rr(d,m,y,E,u)}n=n.sibling}}function Sa(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var o=e,a=n,u=a.flags;switch(a.tag){case 22:Sa(o,a),u&2048&&id(a.alternate,a);break;case 24:Sa(o,a),u&2048&&od(a.alternate,a);break;default:Sa(o,a)}n=n.sibling}}var Ta=8192;function ar(e,n,o){if(e.subtreeFlags&Ta)for(e=e.child;e!==null;)Bp(e,n,o),e=e.sibling}function Bp(e,n,o){switch(e.tag){case 26:ar(e,n,o),e.flags&Ta&&e.memoizedState!==null&&s_(o,An,e.memoizedState,e.memoizedProps);break;case 5:ar(e,n,o);break;case 3:case 4:var a=An;An=rc(e.stateNode.containerInfo),ar(e,n,o),An=a;break;case 22:e.memoizedState===null&&(a=e.alternate,a!==null&&a.memoizedState!==null?(a=Ta,Ta=16777216,ar(e,n,o),Ta=a):ar(e,n,o));break;default:ar(e,n,o)}}function Kp(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function Aa(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var o=0;o<n.length;o++){var a=n[o];St=a,jp(a,e)}Kp(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)qp(e),e=e.sibling}function qp(e){switch(e.tag){case 0:case 11:case 15:Aa(e),e.flags&2048&&bi(9,e,e.return);break;case 3:Aa(e);break;case 12:Aa(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,Qs(e)):Aa(e);break;default:Aa(e)}}function Qs(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var o=0;o<n.length;o++){var a=n[o];St=a,jp(a,e)}Kp(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:bi(8,n,n.return),Qs(n);break;case 22:o=n.stateNode,o._visibility&2&&(o._visibility&=-3,Qs(n));break;default:Qs(n)}e=e.sibling}}function jp(e,n){for(;St!==null;){var o=St;switch(o.tag){case 0:case 11:case 15:bi(8,o,n);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var a=o.memoizedState.cachePool.pool;a!=null&&a.refCount++}break;case 24:ra(o.memoizedState.cache)}if(a=o.child,a!==null)a.return=o,St=a;else e:for(o=e;St!==null;){a=St;var u=a.sibling,d=a.return;if(Dp(a),a===o){St=null;break e}if(u!==null){u.return=d,St=u;break e}St=d}}}var AE={getCacheForType:function(e){var n=_t(st),o=n.data.get(e);return o===void 0&&(o=e(),n.data.set(e,o)),o},cacheSignal:function(){return _t(st).controller.signal}},EE=typeof WeakMap=="function"?WeakMap:Map,He=0,Ve=null,Ie=null,ke=0,ze=0,en=null,wi=!1,sr=!1,rd=!1,ni=0,tt=0,Ri=0,mo=0,ad=0,tn=0,cr=0,Ea=null,Gt=null,sd=!1,Ys=0,Gp=0,Vs=1/0,Xs=null,Ii=null,mt=0,Oi=null,lr=null,ii=0,cd=0,ld=null,Fp=null,_a=0,ud=null;function nn(){return(He&2)!==0&&ke!==0?ke&-ke:D.T!==null?pd():sg()}function Qp(){if(tn===0)if((ke&536870912)===0||Ne){var e=Ji;Ji<<=1,(Ji&3932160)===0&&(Ji=262144),tn=e}else tn=536870912;return e=Zt.current,e!==null&&(e.flags|=32),tn}function Ft(e,n,o){(e===Ve&&(ze===2||ze===9)||e.cancelPendingCommit!==null)&&(ur(e,0),ki(e,ke,tn,!1)),Fr(e,o),((He&2)===0||e!==Ve)&&(e===Ve&&((He&2)===0&&(mo|=o),tt===4&&ki(e,ke,tn,!1)),Un(e))}function Yp(e,n,o){if((He&6)!==0)throw Error(r(327));var a=!o&&(n&127)===0&&(n&e.expiredLanes)===0||Gr(e,n),u=a?wE(e,n):hd(e,n,!0),d=a;do{if(u===0){sr&&!a&&ki(e,n,0,!1);break}else{if(o=e.current.alternate,d&&!_E(o)){u=hd(e,n,!1),d=!1;continue}if(u===2){if(d=n,e.errorRecoveryDisabledLanes&d)var m=0;else m=e.pendingLanes&-536870913,m=m!==0?m:m&536870912?536870912:0;if(m!==0){n=m;e:{var y=e;u=Ea;var E=y.current.memoizedState.isDehydrated;if(E&&(ur(y,m).flags|=256),m=hd(y,m,!1),m!==2){if(rd&&!E){y.errorRecoveryDisabledLanes|=d,mo|=d,u=4;break e}d=Gt,Gt=u,d!==null&&(Gt===null?Gt=d:Gt.push.apply(Gt,d))}u=m}if(d=!1,u!==2)continue}}if(u===1){ur(e,0),ki(e,n,0,!0);break}e:{switch(a=e,d=u,d){case 0:case 1:throw Error(r(345));case 4:if((n&4194048)!==n)break;case 6:ki(a,n,tn,!wi);break e;case 2:Gt=null;break;case 3:case 5:break;default:throw Error(r(329))}if((n&62914560)===n&&(u=Ys+300-yt(),10<u)){if(ki(a,n,tn,!wi),rs(a,0,!0)!==0)break e;ii=n,a.timeoutHandle=_y(Vp.bind(null,a,o,Gt,Xs,sd,n,tn,mo,cr,wi,d,"Throttled",-0,0),u);break e}Vp(a,o,Gt,Xs,sd,n,tn,mo,cr,wi,d,null,-0,0)}}break}while(!0);Un(e)}function Vp(e,n,o,a,u,d,m,y,E,H,F,Z,L,q){if(e.timeoutHandle=-1,Z=n.subtreeFlags,Z&8192||(Z&16785408)===16785408){Z={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:qn},Bp(n,d,Z);var ge=(d&62914560)===d?Ys-yt():(d&4194048)===d?Gp-yt():0;if(ge=c_(Z,ge),ge!==null){ii=d,e.cancelPendingCommit=ge(ny.bind(null,e,n,d,o,a,u,m,y,E,F,Z,null,L,q)),ki(e,d,m,!H);return}}ny(e,n,d,o,a,u,m,y,E)}function _E(e){for(var n=e;;){var o=n.tag;if((o===0||o===11||o===15)&&n.flags&16384&&(o=n.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var a=0;a<o.length;a++){var u=o[a],d=u.getSnapshot;u=u.value;try{if(!Jt(d(),u))return!1}catch{return!1}}if(o=n.child,n.subtreeFlags&16384&&o!==null)o.return=n,n=o;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function ki(e,n,o,a){n&=~ad,n&=~mo,e.suspendedLanes|=n,e.pingedLanes&=~n,a&&(e.warmLanes|=n),a=e.expirationTimes;for(var u=n;0<u;){var d=31-gt(u),m=1<<d;a[d]=-1,u&=~m}o!==0&&og(e,o,n)}function Js(){return(He&6)===0?(ba(0),!1):!0}function dd(){if(Ie!==null){if(ze===0)var e=Ie.return;else e=Ie,Qn=ro=null,Ru(e),er=null,sa=0,e=Ie;for(;e!==null;)bp(e.alternate,e),e=e.return;Ie=null}}function ur(e,n){var o=e.timeoutHandle;o!==-1&&(e.timeoutHandle=-1,GE(o)),o=e.cancelPendingCommit,o!==null&&(e.cancelPendingCommit=null,o()),ii=0,dd(),Ve=e,Ie=o=Gn(e.current,null),ke=n,ze=0,en=null,wi=!1,sr=Gr(e,n),rd=!1,cr=tn=ad=mo=Ri=tt=0,Gt=Ea=null,sd=!1,(n&8)!==0&&(n|=n&32);var a=e.entangledLanes;if(a!==0)for(e=e.entanglements,a&=n;0<a;){var u=31-gt(a),d=1<<u;n|=e[u],a&=~d}return ni=n,ys(),o}function Xp(e,n){_e=null,D.H=ma,n===Wo||n===bs?(n=dm(),ze=3):n===mu?(n=dm(),ze=4):ze=n===ju?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,en=n,Ie===null&&(tt=1,zs(e,hn(n,e.current)))}function Jp(){var e=Zt.current;return e===null?!0:(ke&4194048)===ke?pn===null:(ke&62914560)===ke||(ke&536870912)!==0?e===pn:!1}function $p(){var e=D.H;return D.H=ma,e===null?ma:e}function Zp(){var e=D.A;return D.A=AE,e}function $s(){tt=4,wi||(ke&4194048)!==ke&&Zt.current!==null||(sr=!0),(Ri&134217727)===0&&(mo&134217727)===0||Ve===null||ki(Ve,ke,tn,!1)}function hd(e,n,o){var a=He;He|=2;var u=$p(),d=Zp();(Ve!==e||ke!==n)&&(Xs=null,ur(e,n)),n=!1;var m=tt;e:do try{if(ze!==0&&Ie!==null){var y=Ie,E=en;switch(ze){case 8:dd(),m=6;break e;case 3:case 2:case 9:case 6:Zt.current===null&&(n=!0);var H=ze;if(ze=0,en=null,dr(e,y,E,H),o&&sr){m=0;break e}break;default:H=ze,ze=0,en=null,dr(e,y,E,H)}}bE(),m=tt;break}catch(F){Xp(e,F)}while(!0);return n&&e.shellSuspendCounter++,Qn=ro=null,He=a,D.H=u,D.A=d,Ie===null&&(Ve=null,ke=0,ys()),m}function bE(){for(;Ie!==null;)Wp(Ie)}function wE(e,n){var o=He;He|=2;var a=$p(),u=Zp();Ve!==e||ke!==n?(Xs=null,Vs=yt()+500,ur(e,n)):sr=Gr(e,n);e:do try{if(ze!==0&&Ie!==null){n=Ie;var d=en;t:switch(ze){case 1:ze=0,en=null,dr(e,n,d,1);break;case 2:case 9:if(lm(d)){ze=0,en=null,ey(n);break}n=function(){ze!==2&&ze!==9||Ve!==e||(ze=7),Un(e)},d.then(n,n);break e;case 3:ze=7;break e;case 4:ze=5;break e;case 7:lm(d)?(ze=0,en=null,ey(n)):(ze=0,en=null,dr(e,n,d,7));break;case 5:var m=null;switch(Ie.tag){case 26:m=Ie.memoizedState;case 5:case 27:var y=Ie;if(m?zy(m):y.stateNode.complete){ze=0,en=null;var E=y.sibling;if(E!==null)Ie=E;else{var H=y.return;H!==null?(Ie=H,Zs(H)):Ie=null}break t}}ze=0,en=null,dr(e,n,d,5);break;case 6:ze=0,en=null,dr(e,n,d,6);break;case 8:dd(),tt=6;break e;default:throw Error(r(462))}}RE();break}catch(F){Xp(e,F)}while(!0);return Qn=ro=null,D.H=a,D.A=u,He=o,Ie!==null?0:(Ve=null,ke=0,ys(),tt)}function RE(){for(;Ie!==null&&!ns();)Wp(Ie)}function Wp(e){var n=Ep(e.alternate,e,ni);e.memoizedProps=e.pendingProps,n===null?Zs(e):Ie=n}function ey(e){var n=e,o=n.alternate;switch(n.tag){case 15:case 0:n=yp(o,n,n.pendingProps,n.type,void 0,ke);break;case 11:n=yp(o,n,n.pendingProps,n.type.render,n.ref,ke);break;case 5:Ru(n);default:bp(o,n),n=Ie=Zg(n,ni),n=Ep(o,n,ni)}e.memoizedProps=e.pendingProps,n===null?Zs(e):Ie=n}function dr(e,n,o,a){Qn=ro=null,Ru(n),er=null,sa=0;var u=n.return;try{if(mE(e,u,n,o,ke)){tt=1,zs(e,hn(o,e.current)),Ie=null;return}}catch(d){if(u!==null)throw Ie=u,d;tt=1,zs(e,hn(o,e.current)),Ie=null;return}n.flags&32768?(Ne||a===1?e=!0:sr||(ke&536870912)!==0?e=!1:(wi=e=!0,(a===2||a===9||a===3||a===6)&&(a=Zt.current,a!==null&&a.tag===13&&(a.flags|=16384))),ty(n,e)):Zs(n)}function Zs(e){var n=e;do{if((n.flags&32768)!==0){ty(n,wi);return}e=n.return;var o=vE(n.alternate,n,ni);if(o!==null){Ie=o;return}if(n=n.sibling,n!==null){Ie=n;return}Ie=n=e}while(n!==null);tt===0&&(tt=5)}function ty(e,n){do{var o=CE(e.alternate,e);if(o!==null){o.flags&=32767,Ie=o;return}if(o=e.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!n&&(e=e.sibling,e!==null)){Ie=e;return}Ie=e=o}while(e!==null);tt=6,Ie=null}function ny(e,n,o,a,u,d,m,y,E){e.cancelPendingCommit=null;do Ws();while(mt!==0);if((He&6)!==0)throw Error(r(327));if(n!==null){if(n===e.current)throw Error(r(177));if(d=n.lanes|n.childLanes,d|=eu,aA(e,o,d,m,y,E),e===Ve&&(Ie=Ve=null,ke=0),lr=n,Oi=e,ii=o,cd=d,ld=u,Fp=a,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,ME(Mo,function(){return sy(),null})):(e.callbackNode=null,e.callbackPriority=0),a=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||a){a=D.T,D.T=null,u=X.p,X.p=2,m=He,He|=4;try{SE(e,n,o)}finally{He=m,X.p=u,D.T=a}}mt=1,iy(),oy(),ry()}}function iy(){if(mt===1){mt=0;var e=Oi,n=lr,o=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||o){o=D.T,D.T=null;var a=X.p;X.p=2;var u=He;He|=4;try{Hp(n,e);var d=_d,m=jg(e.containerInfo),y=d.focusedElem,E=d.selectionRange;if(m!==y&&y&&y.ownerDocument&&qg(y.ownerDocument.documentElement,y)){if(E!==null&&Xl(y)){var H=E.start,F=E.end;if(F===void 0&&(F=H),"selectionStart"in y)y.selectionStart=H,y.selectionEnd=Math.min(F,y.value.length);else{var Z=y.ownerDocument||document,L=Z&&Z.defaultView||window;if(L.getSelection){var q=L.getSelection(),ge=y.textContent.length,Ce=Math.min(E.start,ge),Fe=E.end===void 0?Ce:Math.min(E.end,ge);!q.extend&&Ce>Fe&&(m=Fe,Fe=Ce,Ce=m);var k=Kg(y,Ce),R=Kg(y,Fe);if(k&&R&&(q.rangeCount!==1||q.anchorNode!==k.node||q.anchorOffset!==k.offset||q.focusNode!==R.node||q.focusOffset!==R.offset)){var P=Z.createRange();P.setStart(k.node,k.offset),q.removeAllRanges(),Ce>Fe?(q.addRange(P),q.extend(R.node,R.offset)):(P.setEnd(R.node,R.offset),q.addRange(P))}}}}for(Z=[],q=y;q=q.parentNode;)q.nodeType===1&&Z.push({element:q,left:q.scrollLeft,top:q.scrollTop});for(typeof y.focus=="function"&&y.focus(),y=0;y<Z.length;y++){var V=Z[y];V.element.scrollLeft=V.left,V.element.scrollTop=V.top}}dc=!!Ed,_d=Ed=null}finally{He=u,X.p=a,D.T=o}}e.current=n,mt=2}}function oy(){if(mt===2){mt=0;var e=Oi,n=lr,o=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||o){o=D.T,D.T=null;var a=X.p;X.p=2;var u=He;He|=4;try{Np(e,n.alternate,n)}finally{He=u,X.p=a,D.T=o}}mt=3}}function ry(){if(mt===4||mt===3){mt=0,ko();var e=Oi,n=lr,o=ii,a=Fp;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?mt=5:(mt=0,lr=Oi=null,ay(e,e.pendingLanes));var u=e.pendingLanes;if(u===0&&(Ii=null),kl(o),n=n.stateNode,De&&typeof De.onCommitFiberRoot=="function")try{De.onCommitFiberRoot(Bn,n,void 0,(n.current.flags&128)===128)}catch{}if(a!==null){n=D.T,u=X.p,X.p=2,D.T=null;try{for(var d=e.onRecoverableError,m=0;m<a.length;m++){var y=a[m];d(y.value,{componentStack:y.stack})}}finally{D.T=n,X.p=u}}(ii&3)!==0&&Ws(),Un(e),u=e.pendingLanes,(o&261930)!==0&&(u&42)!==0?e===ud?_a++:(_a=0,ud=e):_a=0,ba(0)}}function ay(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,ra(n)))}function Ws(){return iy(),oy(),ry(),sy()}function sy(){if(mt!==5)return!1;var e=Oi,n=cd;cd=0;var o=kl(ii),a=D.T,u=X.p;try{X.p=32>o?32:o,D.T=null,o=ld,ld=null;var d=Oi,m=ii;if(mt=0,lr=Oi=null,ii=0,(He&6)!==0)throw Error(r(331));var y=He;if(He|=4,qp(d.current),zp(d,d.current,m,o),He=y,ba(0,!1),De&&typeof De.onPostCommitFiberRoot=="function")try{De.onPostCommitFiberRoot(Bn,d)}catch{}return!0}finally{X.p=u,D.T=a,ay(e,n)}}function cy(e,n,o){n=hn(o,n),n=qu(e.stateNode,n,2),e=Ai(e,n,2),e!==null&&(Fr(e,2),Un(e))}function Be(e,n,o){if(e.tag===3)cy(e,e,o);else for(;n!==null;){if(n.tag===3){cy(n,e,o);break}else if(n.tag===1){var a=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Ii===null||!Ii.has(a))){e=hn(o,e),o=lp(2),a=Ai(n,o,2),a!==null&&(up(o,a,n,e),Fr(a,2),Un(a));break}}n=n.return}}function fd(e,n,o){var a=e.pingCache;if(a===null){a=e.pingCache=new EE;var u=new Set;a.set(n,u)}else u=a.get(n),u===void 0&&(u=new Set,a.set(n,u));u.has(o)||(rd=!0,u.add(o),e=IE.bind(null,e,n,o),n.then(e,e))}function IE(e,n,o){var a=e.pingCache;a!==null&&a.delete(n),e.pingedLanes|=e.suspendedLanes&o,e.warmLanes&=~o,Ve===e&&(ke&o)===o&&(tt===4||tt===3&&(ke&62914560)===ke&&300>yt()-Ys?(He&2)===0&&ur(e,0):ad|=o,cr===ke&&(cr=0)),Un(e)}function ly(e,n){n===0&&(n=ig()),e=no(e,n),e!==null&&(Fr(e,n),Un(e))}function OE(e){var n=e.memoizedState,o=0;n!==null&&(o=n.retryLane),ly(e,o)}function kE(e,n){var o=0;switch(e.tag){case 31:case 13:var a=e.stateNode,u=e.memoizedState;u!==null&&(o=u.retryLane);break;case 19:a=e.stateNode;break;case 22:a=e.stateNode._retryCache;break;default:throw Error(r(314))}a!==null&&a.delete(n),ly(e,o)}function ME(e,n){return Io(e,n)}var ec=null,hr=null,gd=!1,tc=!1,md=!1,Mi=0;function Un(e){e!==hr&&e.next===null&&(hr===null?ec=hr=e:hr=hr.next=e),tc=!0,gd||(gd=!0,DE())}function ba(e,n){if(!md&&tc){md=!0;do for(var o=!1,a=ec;a!==null;){if(e!==0){var u=a.pendingLanes;if(u===0)var d=0;else{var m=a.suspendedLanes,y=a.pingedLanes;d=(1<<31-gt(42|e)+1)-1,d&=u&~(m&~y),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(o=!0,fy(a,d))}else d=ke,d=rs(a,a===Ve?d:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),(d&3)===0||Gr(a,d)||(o=!0,fy(a,d));a=a.next}while(o);md=!1}}function NE(){uy()}function uy(){tc=gd=!1;var e=0;Mi!==0&&jE()&&(e=Mi);for(var n=yt(),o=null,a=ec;a!==null;){var u=a.next,d=dy(a,n);d===0?(a.next=null,o===null?ec=u:o.next=u,u===null&&(hr=o)):(o=a,(e!==0||(d&3)!==0)&&(tc=!0)),a=u}mt!==0&&mt!==5||ba(e),Mi!==0&&(Mi=0)}function dy(e,n){for(var o=e.suspendedLanes,a=e.pingedLanes,u=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var m=31-gt(d),y=1<<m,E=u[m];E===-1?((y&o)===0||(y&a)!==0)&&(u[m]=rA(y,n)):E<=n&&(e.expiredLanes|=y),d&=~y}if(n=Ve,o=ke,o=rs(e,e===n?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a=e.callbackNode,o===0||e===n&&(ze===2||ze===9)||e.cancelPendingCommit!==null)return a!==null&&a!==null&&Oo(a),e.callbackNode=null,e.callbackPriority=0;if((o&3)===0||Gr(e,o)){if(n=o&-o,n===e.callbackPriority)return n;switch(a!==null&&Oo(a),kl(o)){case 2:case 8:o=Kr;break;case 32:o=Mo;break;case 268435456:o=is;break;default:o=Mo}return a=hy.bind(null,e),o=Io(o,a),e.callbackPriority=n,e.callbackNode=o,n}return a!==null&&a!==null&&Oo(a),e.callbackPriority=2,e.callbackNode=null,2}function hy(e,n){if(mt!==0&&mt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var o=e.callbackNode;if(Ws()&&e.callbackNode!==o)return null;var a=ke;return a=rs(e,e===Ve?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a===0?null:(Yp(e,a,n),dy(e,yt()),e.callbackNode!=null&&e.callbackNode===o?hy.bind(null,e):null)}function fy(e,n){if(Ws())return null;Yp(e,n,!0)}function DE(){FE(function(){(He&6)!==0?Io(Br,NE):uy()})}function pd(){if(Mi===0){var e=$o;e===0&&(e=fi,fi<<=1,(fi&261888)===0&&(fi=256)),Mi=e}return Mi}function gy(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ls(""+e)}function my(e,n){var o=n.ownerDocument.createElement("input");return o.name=n.name,o.value=n.value,e.id&&o.setAttribute("form",e.id),n.parentNode.insertBefore(o,n),e=new FormData(e),o.parentNode.removeChild(o),e}function UE(e,n,o,a,u){if(n==="submit"&&o&&o.stateNode===u){var d=gy((u[zt]||null).action),m=a.submitter;m&&(n=(n=m[zt]||null)?gy(n.formAction):m.getAttribute("formAction"),n!==null&&(d=n,m=null));var y=new fs("action","action",null,a,u);e.push({event:y,listeners:[{instance:null,listener:function(){if(a.defaultPrevented){if(Mi!==0){var E=m?my(u,m):new FormData(u);Pu(o,{pending:!0,data:E,method:u.method,action:d},null,E)}}else typeof d=="function"&&(y.preventDefault(),E=m?my(u,m):new FormData(u),Pu(o,{pending:!0,data:E,method:u.method,action:d},d,E))},currentTarget:u}]})}}for(var yd=0;yd<Wl.length;yd++){var vd=Wl[yd],xE=vd.toLowerCase(),PE=vd[0].toUpperCase()+vd.slice(1);Tn(xE,"on"+PE)}Tn(Qg,"onAnimationEnd"),Tn(Yg,"onAnimationIteration"),Tn(Vg,"onAnimationStart"),Tn("dblclick","onDoubleClick"),Tn("focusin","onFocus"),Tn("focusout","onBlur"),Tn(ZA,"onTransitionRun"),Tn(WA,"onTransitionStart"),Tn(eE,"onTransitionCancel"),Tn(Xg,"onTransitionEnd"),Ho("onMouseEnter",["mouseout","mouseover"]),Ho("onMouseLeave",["mouseout","mouseover"]),Ho("onPointerEnter",["pointerout","pointerover"]),Ho("onPointerLeave",["pointerout","pointerover"]),Zi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Zi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Zi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Zi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Zi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Zi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),HE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(wa));function py(e,n){n=(n&4)!==0;for(var o=0;o<e.length;o++){var a=e[o],u=a.event;a=a.listeners;e:{var d=void 0;if(n)for(var m=a.length-1;0<=m;m--){var y=a[m],E=y.instance,H=y.currentTarget;if(y=y.listener,E!==d&&u.isPropagationStopped())break e;d=y,u.currentTarget=H;try{d(u)}catch(F){ps(F)}u.currentTarget=null,d=E}else for(m=0;m<a.length;m++){if(y=a[m],E=y.instance,H=y.currentTarget,y=y.listener,E!==d&&u.isPropagationStopped())break e;d=y,u.currentTarget=H;try{d(u)}catch(F){ps(F)}u.currentTarget=null,d=E}}}}function Oe(e,n){var o=n[Ml];o===void 0&&(o=n[Ml]=new Set);var a=e+"__bubble";o.has(a)||(yy(n,e,2,!1),o.add(a))}function Cd(e,n,o){var a=0;n&&(a|=4),yy(o,e,a,n)}var nc="_reactListening"+Math.random().toString(36).slice(2);function Sd(e){if(!e[nc]){e[nc]=!0,ug.forEach(function(o){o!=="selectionchange"&&(HE.has(o)||Cd(o,!1,e),Cd(o,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[nc]||(n[nc]=!0,Cd("selectionchange",!1,n))}}function yy(e,n,o,a){switch(Qy(n)){case 2:var u=d_;break;case 8:u=h_;break;default:u=xd}o=u.bind(null,n,o,e),u=void 0,!Bl||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(u=!0),a?u!==void 0?e.addEventListener(n,o,{capture:!0,passive:u}):e.addEventListener(n,o,!0):u!==void 0?e.addEventListener(n,o,{passive:u}):e.addEventListener(n,o,!1)}function Td(e,n,o,a,u){var d=a;if((n&1)===0&&(n&2)===0&&a!==null)e:for(;;){if(a===null)return;var m=a.tag;if(m===3||m===4){var y=a.stateNode.containerInfo;if(y===u)break;if(m===4)for(m=a.return;m!==null;){var E=m.tag;if((E===3||E===4)&&m.stateNode.containerInfo===u)return;m=m.return}for(;y!==null;){if(m=Uo(y),m===null)return;if(E=m.tag,E===5||E===6||E===26||E===27){a=d=m;continue e}y=y.parentNode}}a=a.return}Ag(function(){var H=d,F=Ll(o),Z=[];e:{var L=Jg.get(e);if(L!==void 0){var q=fs,ge=e;switch(e){case"keypress":if(ds(o)===0)break e;case"keydown":case"keyup":q=kA;break;case"focusin":ge="focus",q=Gl;break;case"focusout":ge="blur",q=Gl;break;case"beforeblur":case"afterblur":q=Gl;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":q=bg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":q=vA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":q=DA;break;case Qg:case Yg:case Vg:q=TA;break;case Xg:q=xA;break;case"scroll":case"scrollend":q=pA;break;case"wheel":q=HA;break;case"copy":case"cut":case"paste":q=EA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":q=Rg;break;case"toggle":case"beforetoggle":q=zA}var Ce=(n&4)!==0,Fe=!Ce&&(e==="scroll"||e==="scrollend"),k=Ce?L!==null?L+"Capture":null:L;Ce=[];for(var R=H,P;R!==null;){var V=R;if(P=V.stateNode,V=V.tag,V!==5&&V!==26&&V!==27||P===null||k===null||(V=Vr(R,k),V!=null&&Ce.push(Ra(R,V,P))),Fe)break;R=R.return}0<Ce.length&&(L=new q(L,ge,null,o,F),Z.push({event:L,listeners:Ce}))}}if((n&7)===0){e:{if(L=e==="mouseover"||e==="pointerover",q=e==="mouseout"||e==="pointerout",L&&o!==Hl&&(ge=o.relatedTarget||o.fromElement)&&(Uo(ge)||ge[Do]))break e;if((q||L)&&(L=F.window===F?F:(L=F.ownerDocument)?L.defaultView||L.parentWindow:window,q?(ge=o.relatedTarget||o.toElement,q=H,ge=ge?Uo(ge):null,ge!==null&&(Fe=l(ge),Ce=ge.tag,ge!==Fe||Ce!==5&&Ce!==27&&Ce!==6)&&(ge=null)):(q=null,ge=H),q!==ge)){if(Ce=bg,V="onMouseLeave",k="onMouseEnter",R="mouse",(e==="pointerout"||e==="pointerover")&&(Ce=Rg,V="onPointerLeave",k="onPointerEnter",R="pointer"),Fe=q==null?L:Yr(q),P=ge==null?L:Yr(ge),L=new Ce(V,R+"leave",q,o,F),L.target=Fe,L.relatedTarget=P,V=null,Uo(F)===H&&(Ce=new Ce(k,R+"enter",ge,o,F),Ce.target=P,Ce.relatedTarget=Fe,V=Ce),Fe=V,q&&ge)t:{for(Ce=LE,k=q,R=ge,P=0,V=k;V;V=Ce(V))P++;V=0;for(var pe=R;pe;pe=Ce(pe))V++;for(;0<P-V;)k=Ce(k),P--;for(;0<V-P;)R=Ce(R),V--;for(;P--;){if(k===R||R!==null&&k===R.alternate){Ce=k;break t}k=Ce(k),R=Ce(R)}Ce=null}else Ce=null;q!==null&&vy(Z,L,q,Ce,!1),ge!==null&&Fe!==null&&vy(Z,Fe,ge,Ce,!0)}}e:{if(L=H?Yr(H):window,q=L.nodeName&&L.nodeName.toLowerCase(),q==="select"||q==="input"&&L.type==="file")var Ue=xg;else if(Dg(L))if(Pg)Ue=XA;else{Ue=YA;var me=QA}else q=L.nodeName,!q||q.toLowerCase()!=="input"||L.type!=="checkbox"&&L.type!=="radio"?H&&Pl(H.elementType)&&(Ue=xg):Ue=VA;if(Ue&&(Ue=Ue(e,H))){Ug(Z,Ue,o,F);break e}me&&me(e,L,H),e==="focusout"&&H&&L.type==="number"&&H.memoizedProps.value!=null&&xl(L,"number",L.value)}switch(me=H?Yr(H):window,e){case"focusin":(Dg(me)||me.contentEditable==="true")&&(jo=me,Jl=H,na=null);break;case"focusout":na=Jl=jo=null;break;case"mousedown":$l=!0;break;case"contextmenu":case"mouseup":case"dragend":$l=!1,Gg(Z,o,F);break;case"selectionchange":if($A)break;case"keydown":case"keyup":Gg(Z,o,F)}var be;if(Ql)e:{switch(e){case"compositionstart":var Me="onCompositionStart";break e;case"compositionend":Me="onCompositionEnd";break e;case"compositionupdate":Me="onCompositionUpdate";break e}Me=void 0}else qo?Mg(e,o)&&(Me="onCompositionEnd"):e==="keydown"&&o.keyCode===229&&(Me="onCompositionStart");Me&&(Ig&&o.locale!=="ko"&&(qo||Me!=="onCompositionStart"?Me==="onCompositionEnd"&&qo&&(be=Eg()):(mi=F,Kl="value"in mi?mi.value:mi.textContent,qo=!0)),me=ic(H,Me),0<me.length&&(Me=new wg(Me,e,null,o,F),Z.push({event:Me,listeners:me}),be?Me.data=be:(be=Ng(o),be!==null&&(Me.data=be)))),(be=KA?qA(e,o):jA(e,o))&&(Me=ic(H,"onBeforeInput"),0<Me.length&&(me=new wg("onBeforeInput","beforeinput",null,o,F),Z.push({event:me,listeners:Me}),me.data=be)),UE(Z,e,H,o,F)}py(Z,n)})}function Ra(e,n,o){return{instance:e,listener:n,currentTarget:o}}function ic(e,n){for(var o=n+"Capture",a=[];e!==null;){var u=e,d=u.stateNode;if(u=u.tag,u!==5&&u!==26&&u!==27||d===null||(u=Vr(e,o),u!=null&&a.unshift(Ra(e,u,d)),u=Vr(e,n),u!=null&&a.push(Ra(e,u,d))),e.tag===3)return a;e=e.return}return[]}function LE(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function vy(e,n,o,a,u){for(var d=n._reactName,m=[];o!==null&&o!==a;){var y=o,E=y.alternate,H=y.stateNode;if(y=y.tag,E!==null&&E===a)break;y!==5&&y!==26&&y!==27||H===null||(E=H,u?(H=Vr(o,d),H!=null&&m.unshift(Ra(o,H,E))):u||(H=Vr(o,d),H!=null&&m.push(Ra(o,H,E)))),o=o.return}m.length!==0&&e.push({event:n,listeners:m})}var zE=/\r\n?/g,BE=/\u0000|\uFFFD/g;function Cy(e){return(typeof e=="string"?e:""+e).replace(zE,`
`).replace(BE,"")}function Sy(e,n){return n=Cy(n),Cy(e)===n}function Ge(e,n,o,a,u,d){switch(o){case"children":typeof a=="string"?n==="body"||n==="textarea"&&a===""||zo(e,a):(typeof a=="number"||typeof a=="bigint")&&n!=="body"&&zo(e,""+a);break;case"className":ss(e,"class",a);break;case"tabIndex":ss(e,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":ss(e,o,a);break;case"style":Sg(e,a,d);break;case"data":if(n!=="object"){ss(e,"data",a);break}case"src":case"href":if(a===""&&(n!=="a"||o!=="href")){e.removeAttribute(o);break}if(a==null||typeof a=="function"||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(o);break}a=ls(""+a),e.setAttribute(o,a);break;case"action":case"formAction":if(typeof a=="function"){e.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(o==="formAction"?(n!=="input"&&Ge(e,n,"name",u.name,u,null),Ge(e,n,"formEncType",u.formEncType,u,null),Ge(e,n,"formMethod",u.formMethod,u,null),Ge(e,n,"formTarget",u.formTarget,u,null)):(Ge(e,n,"encType",u.encType,u,null),Ge(e,n,"method",u.method,u,null),Ge(e,n,"target",u.target,u,null)));if(a==null||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(o);break}a=ls(""+a),e.setAttribute(o,a);break;case"onClick":a!=null&&(e.onclick=qn);break;case"onScroll":a!=null&&Oe("scroll",e);break;case"onScrollEnd":a!=null&&Oe("scrollend",e);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(r(61));if(o=a.__html,o!=null){if(u.children!=null)throw Error(r(60));e.innerHTML=o}}break;case"multiple":e.multiple=a&&typeof a!="function"&&typeof a!="symbol";break;case"muted":e.muted=a&&typeof a!="function"&&typeof a!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(a==null||typeof a=="function"||typeof a=="boolean"||typeof a=="symbol"){e.removeAttribute("xlink:href");break}o=ls(""+a),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(o,""+a):e.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(o,""):e.removeAttribute(o);break;case"capture":case"download":a===!0?e.setAttribute(o,""):a!==!1&&a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(o,a):e.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":a!=null&&typeof a!="function"&&typeof a!="symbol"&&!isNaN(a)&&1<=a?e.setAttribute(o,a):e.removeAttribute(o);break;case"rowSpan":case"start":a==null||typeof a=="function"||typeof a=="symbol"||isNaN(a)?e.removeAttribute(o):e.setAttribute(o,a);break;case"popover":Oe("beforetoggle",e),Oe("toggle",e),as(e,"popover",a);break;case"xlinkActuate":Kn(e,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":Kn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":Kn(e,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":Kn(e,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":Kn(e,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":Kn(e,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":Kn(e,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":Kn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":Kn(e,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":as(e,"is",a);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=gA.get(o)||o,as(e,o,a))}}function Ad(e,n,o,a,u,d){switch(o){case"style":Sg(e,a,d);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(r(61));if(o=a.__html,o!=null){if(u.children!=null)throw Error(r(60));e.innerHTML=o}}break;case"children":typeof a=="string"?zo(e,a):(typeof a=="number"||typeof a=="bigint")&&zo(e,""+a);break;case"onScroll":a!=null&&Oe("scroll",e);break;case"onScrollEnd":a!=null&&Oe("scrollend",e);break;case"onClick":a!=null&&(e.onclick=qn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!dg.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(u=o.endsWith("Capture"),n=o.slice(2,u?o.length-7:void 0),d=e[zt]||null,d=d!=null?d[o]:null,typeof d=="function"&&e.removeEventListener(n,d,u),typeof a=="function")){typeof d!="function"&&d!==null&&(o in e?e[o]=null:e.hasAttribute(o)&&e.removeAttribute(o)),e.addEventListener(n,a,u);break e}o in e?e[o]=a:a===!0?e.setAttribute(o,""):as(e,o,a)}}}function wt(e,n,o){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Oe("error",e),Oe("load",e);var a=!1,u=!1,d;for(d in o)if(o.hasOwnProperty(d)){var m=o[d];if(m!=null)switch(d){case"src":a=!0;break;case"srcSet":u=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:Ge(e,n,d,m,o,null)}}u&&Ge(e,n,"srcSet",o.srcSet,o,null),a&&Ge(e,n,"src",o.src,o,null);return;case"input":Oe("invalid",e);var y=d=m=u=null,E=null,H=null;for(a in o)if(o.hasOwnProperty(a)){var F=o[a];if(F!=null)switch(a){case"name":u=F;break;case"type":m=F;break;case"checked":E=F;break;case"defaultChecked":H=F;break;case"value":d=F;break;case"defaultValue":y=F;break;case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(r(137,n));break;default:Ge(e,n,a,F,o,null)}}pg(e,d,y,E,H,m,u,!1);return;case"select":Oe("invalid",e),a=m=d=null;for(u in o)if(o.hasOwnProperty(u)&&(y=o[u],y!=null))switch(u){case"value":d=y;break;case"defaultValue":m=y;break;case"multiple":a=y;default:Ge(e,n,u,y,o,null)}n=d,o=m,e.multiple=!!a,n!=null?Lo(e,!!a,n,!1):o!=null&&Lo(e,!!a,o,!0);return;case"textarea":Oe("invalid",e),d=u=a=null;for(m in o)if(o.hasOwnProperty(m)&&(y=o[m],y!=null))switch(m){case"value":a=y;break;case"defaultValue":u=y;break;case"children":d=y;break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(r(91));break;default:Ge(e,n,m,y,o,null)}vg(e,a,u,d);return;case"option":for(E in o)if(o.hasOwnProperty(E)&&(a=o[E],a!=null))switch(E){case"selected":e.selected=a&&typeof a!="function"&&typeof a!="symbol";break;default:Ge(e,n,E,a,o,null)}return;case"dialog":Oe("beforetoggle",e),Oe("toggle",e),Oe("cancel",e),Oe("close",e);break;case"iframe":case"object":Oe("load",e);break;case"video":case"audio":for(a=0;a<wa.length;a++)Oe(wa[a],e);break;case"image":Oe("error",e),Oe("load",e);break;case"details":Oe("toggle",e);break;case"embed":case"source":case"link":Oe("error",e),Oe("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in o)if(o.hasOwnProperty(H)&&(a=o[H],a!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:Ge(e,n,H,a,o,null)}return;default:if(Pl(n)){for(F in o)o.hasOwnProperty(F)&&(a=o[F],a!==void 0&&Ad(e,n,F,a,o,void 0));return}}for(y in o)o.hasOwnProperty(y)&&(a=o[y],a!=null&&Ge(e,n,y,a,o,null))}function KE(e,n,o,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var u=null,d=null,m=null,y=null,E=null,H=null,F=null;for(q in o){var Z=o[q];if(o.hasOwnProperty(q)&&Z!=null)switch(q){case"checked":break;case"value":break;case"defaultValue":E=Z;default:a.hasOwnProperty(q)||Ge(e,n,q,null,a,Z)}}for(var L in a){var q=a[L];if(Z=o[L],a.hasOwnProperty(L)&&(q!=null||Z!=null))switch(L){case"type":d=q;break;case"name":u=q;break;case"checked":H=q;break;case"defaultChecked":F=q;break;case"value":m=q;break;case"defaultValue":y=q;break;case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(r(137,n));break;default:q!==Z&&Ge(e,n,L,q,a,Z)}}Ul(e,m,y,E,H,F,d,u);return;case"select":q=m=y=L=null;for(d in o)if(E=o[d],o.hasOwnProperty(d)&&E!=null)switch(d){case"value":break;case"multiple":q=E;default:a.hasOwnProperty(d)||Ge(e,n,d,null,a,E)}for(u in a)if(d=a[u],E=o[u],a.hasOwnProperty(u)&&(d!=null||E!=null))switch(u){case"value":L=d;break;case"defaultValue":y=d;break;case"multiple":m=d;default:d!==E&&Ge(e,n,u,d,a,E)}n=y,o=m,a=q,L!=null?Lo(e,!!o,L,!1):!!a!=!!o&&(n!=null?Lo(e,!!o,n,!0):Lo(e,!!o,o?[]:"",!1));return;case"textarea":q=L=null;for(y in o)if(u=o[y],o.hasOwnProperty(y)&&u!=null&&!a.hasOwnProperty(y))switch(y){case"value":break;case"children":break;default:Ge(e,n,y,null,a,u)}for(m in a)if(u=a[m],d=o[m],a.hasOwnProperty(m)&&(u!=null||d!=null))switch(m){case"value":L=u;break;case"defaultValue":q=u;break;case"children":break;case"dangerouslySetInnerHTML":if(u!=null)throw Error(r(91));break;default:u!==d&&Ge(e,n,m,u,a,d)}yg(e,L,q);return;case"option":for(var ge in o)if(L=o[ge],o.hasOwnProperty(ge)&&L!=null&&!a.hasOwnProperty(ge))switch(ge){case"selected":e.selected=!1;break;default:Ge(e,n,ge,null,a,L)}for(E in a)if(L=a[E],q=o[E],a.hasOwnProperty(E)&&L!==q&&(L!=null||q!=null))switch(E){case"selected":e.selected=L&&typeof L!="function"&&typeof L!="symbol";break;default:Ge(e,n,E,L,a,q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ce in o)L=o[Ce],o.hasOwnProperty(Ce)&&L!=null&&!a.hasOwnProperty(Ce)&&Ge(e,n,Ce,null,a,L);for(H in a)if(L=a[H],q=o[H],a.hasOwnProperty(H)&&L!==q&&(L!=null||q!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(L!=null)throw Error(r(137,n));break;default:Ge(e,n,H,L,a,q)}return;default:if(Pl(n)){for(var Fe in o)L=o[Fe],o.hasOwnProperty(Fe)&&L!==void 0&&!a.hasOwnProperty(Fe)&&Ad(e,n,Fe,void 0,a,L);for(F in a)L=a[F],q=o[F],!a.hasOwnProperty(F)||L===q||L===void 0&&q===void 0||Ad(e,n,F,L,a,q);return}}for(var k in o)L=o[k],o.hasOwnProperty(k)&&L!=null&&!a.hasOwnProperty(k)&&Ge(e,n,k,null,a,L);for(Z in a)L=a[Z],q=o[Z],!a.hasOwnProperty(Z)||L===q||L==null&&q==null||Ge(e,n,Z,L,a,q)}function Ty(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function qE(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,o=performance.getEntriesByType("resource"),a=0;a<o.length;a++){var u=o[a],d=u.transferSize,m=u.initiatorType,y=u.duration;if(d&&y&&Ty(m)){for(m=0,y=u.responseEnd,a+=1;a<o.length;a++){var E=o[a],H=E.startTime;if(H>y)break;var F=E.transferSize,Z=E.initiatorType;F&&Ty(Z)&&(E=E.responseEnd,m+=F*(E<y?1:(y-H)/(E-H)))}if(--a,n+=8*(d+m)/(u.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Ed=null,_d=null;function oc(e){return e.nodeType===9?e:e.ownerDocument}function Ay(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ey(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function bd(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var wd=null;function jE(){var e=window.event;return e&&e.type==="popstate"?e===wd?!1:(wd=e,!0):(wd=null,!1)}var _y=typeof setTimeout=="function"?setTimeout:void 0,GE=typeof clearTimeout=="function"?clearTimeout:void 0,by=typeof Promise=="function"?Promise:void 0,FE=typeof queueMicrotask=="function"?queueMicrotask:typeof by<"u"?function(e){return by.resolve(null).then(e).catch(QE)}:_y;function QE(e){setTimeout(function(){throw e})}function Ni(e){return e==="head"}function wy(e,n){var o=n,a=0;do{var u=o.nextSibling;if(e.removeChild(o),u&&u.nodeType===8)if(o=u.data,o==="/$"||o==="/&"){if(a===0){e.removeChild(u),pr(n);return}a--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")a++;else if(o==="html")Ia(e.ownerDocument.documentElement);else if(o==="head"){o=e.ownerDocument.head,Ia(o);for(var d=o.firstChild;d;){var m=d.nextSibling,y=d.nodeName;d[Qr]||y==="SCRIPT"||y==="STYLE"||y==="LINK"&&d.rel.toLowerCase()==="stylesheet"||o.removeChild(d),d=m}}else o==="body"&&Ia(e.ownerDocument.body);o=u}while(o);pr(n)}function Ry(e,n){var o=e;e=0;do{var a=o.nextSibling;if(o.nodeType===1?n?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(n?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),a&&a.nodeType===8)if(o=a.data,o==="/$"){if(e===0)break;e--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||e++;o=a}while(o)}function Rd(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var o=n;switch(n=n.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Rd(o),Nl(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}e.removeChild(o)}}function YE(e,n,o,a){for(;e.nodeType===1;){var u=o;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!a&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(a){if(!e[Qr])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==u.rel||e.getAttribute("href")!==(u.href==null||u.href===""?null:u.href)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin)||e.getAttribute("title")!==(u.title==null?null:u.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(u.src==null?null:u.src)||e.getAttribute("type")!==(u.type==null?null:u.type)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var d=u.name==null?null:""+u.name;if(u.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=yn(e.nextSibling),e===null)break}return null}function VE(e,n,o){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!o||(e=yn(e.nextSibling),e===null))return null;return e}function Iy(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=yn(e.nextSibling),e===null))return null;return e}function Id(e){return e.data==="$?"||e.data==="$~"}function Od(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function XE(e,n){var o=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||o.readyState!=="loading")n();else{var a=function(){n(),o.removeEventListener("DOMContentLoaded",a)};o.addEventListener("DOMContentLoaded",a),e._reactRetry=a}}function yn(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var kd=null;function Oy(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var o=e.data;if(o==="/$"||o==="/&"){if(n===0)return yn(e.nextSibling);n--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||n++}e=e.nextSibling}return null}function ky(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var o=e.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(n===0)return e;n--}else o!=="/$"&&o!=="/&"||n++}e=e.previousSibling}return null}function My(e,n,o){switch(n=oc(o),e){case"html":if(e=n.documentElement,!e)throw Error(r(452));return e;case"head":if(e=n.head,!e)throw Error(r(453));return e;case"body":if(e=n.body,!e)throw Error(r(454));return e;default:throw Error(r(451))}}function Ia(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);Nl(e)}var vn=new Map,Ny=new Set;function rc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var oi=X.d;X.d={f:JE,r:$E,D:ZE,C:WE,L:e_,m:t_,X:i_,S:n_,M:o_};function JE(){var e=oi.f(),n=Js();return e||n}function $E(e){var n=xo(e);n!==null&&n.tag===5&&n.type==="form"?Xm(n):oi.r(e)}var fr=typeof document>"u"?null:document;function Dy(e,n,o){var a=fr;if(a&&typeof n=="string"&&n){var u=un(n);u='link[rel="'+e+'"][href="'+u+'"]',typeof o=="string"&&(u+='[crossorigin="'+o+'"]'),Ny.has(u)||(Ny.add(u),e={rel:e,crossOrigin:o,href:n},a.querySelector(u)===null&&(n=a.createElement("link"),wt(n,"link",e),Ct(n),a.head.appendChild(n)))}}function ZE(e){oi.D(e),Dy("dns-prefetch",e,null)}function WE(e,n){oi.C(e,n),Dy("preconnect",e,n)}function e_(e,n,o){oi.L(e,n,o);var a=fr;if(a&&e&&n){var u='link[rel="preload"][as="'+un(n)+'"]';n==="image"&&o&&o.imageSrcSet?(u+='[imagesrcset="'+un(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(u+='[imagesizes="'+un(o.imageSizes)+'"]')):u+='[href="'+un(e)+'"]';var d=u;switch(n){case"style":d=gr(e);break;case"script":d=mr(e)}vn.has(d)||(e=T({rel:"preload",href:n==="image"&&o&&o.imageSrcSet?void 0:e,as:n},o),vn.set(d,e),a.querySelector(u)!==null||n==="style"&&a.querySelector(Oa(d))||n==="script"&&a.querySelector(ka(d))||(n=a.createElement("link"),wt(n,"link",e),Ct(n),a.head.appendChild(n)))}}function t_(e,n){oi.m(e,n);var o=fr;if(o&&e){var a=n&&typeof n.as=="string"?n.as:"script",u='link[rel="modulepreload"][as="'+un(a)+'"][href="'+un(e)+'"]',d=u;switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=mr(e)}if(!vn.has(d)&&(e=T({rel:"modulepreload",href:e},n),vn.set(d,e),o.querySelector(u)===null)){switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(ka(d)))return}a=o.createElement("link"),wt(a,"link",e),Ct(a),o.head.appendChild(a)}}}function n_(e,n,o){oi.S(e,n,o);var a=fr;if(a&&e){var u=Po(a).hoistableStyles,d=gr(e);n=n||"default";var m=u.get(d);if(!m){var y={loading:0,preload:null};if(m=a.querySelector(Oa(d)))y.loading=5;else{e=T({rel:"stylesheet",href:e,"data-precedence":n},o),(o=vn.get(d))&&Md(e,o);var E=m=a.createElement("link");Ct(E),wt(E,"link",e),E._p=new Promise(function(H,F){E.onload=H,E.onerror=F}),E.addEventListener("load",function(){y.loading|=1}),E.addEventListener("error",function(){y.loading|=2}),y.loading|=4,ac(m,n,a)}m={type:"stylesheet",instance:m,count:1,state:y},u.set(d,m)}}}function i_(e,n){oi.X(e,n);var o=fr;if(o&&e){var a=Po(o).hoistableScripts,u=mr(e),d=a.get(u);d||(d=o.querySelector(ka(u)),d||(e=T({src:e,async:!0},n),(n=vn.get(u))&&Nd(e,n),d=o.createElement("script"),Ct(d),wt(d,"link",e),o.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},a.set(u,d))}}function o_(e,n){oi.M(e,n);var o=fr;if(o&&e){var a=Po(o).hoistableScripts,u=mr(e),d=a.get(u);d||(d=o.querySelector(ka(u)),d||(e=T({src:e,async:!0,type:"module"},n),(n=vn.get(u))&&Nd(e,n),d=o.createElement("script"),Ct(d),wt(d,"link",e),o.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},a.set(u,d))}}function Uy(e,n,o,a){var u=(u=oe.current)?rc(u):null;if(!u)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(n=gr(o.href),o=Po(u).hoistableStyles,a=o.get(n),a||(a={type:"style",instance:null,count:0,state:null},o.set(n,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){e=gr(o.href);var d=Po(u).hoistableStyles,m=d.get(e);if(m||(u=u.ownerDocument||u,m={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,m),(d=u.querySelector(Oa(e)))&&!d._p&&(m.instance=d,m.state.loading=5),vn.has(e)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},vn.set(e,o),d||r_(u,e,o,m.state))),n&&a===null)throw Error(r(528,""));return m}if(n&&a!==null)throw Error(r(529,""));return null;case"script":return n=o.async,o=o.src,typeof o=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=mr(o),o=Po(u).hoistableScripts,a=o.get(n),a||(a={type:"script",instance:null,count:0,state:null},o.set(n,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function gr(e){return'href="'+un(e)+'"'}function Oa(e){return'link[rel="stylesheet"]['+e+"]"}function xy(e){return T({},e,{"data-precedence":e.precedence,precedence:null})}function r_(e,n,o,a){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?a.loading=1:(n=e.createElement("link"),a.preload=n,n.addEventListener("load",function(){return a.loading|=1}),n.addEventListener("error",function(){return a.loading|=2}),wt(n,"link",o),Ct(n),e.head.appendChild(n))}function mr(e){return'[src="'+un(e)+'"]'}function ka(e){return"script[async]"+e}function Py(e,n,o){if(n.count++,n.instance===null)switch(n.type){case"style":var a=e.querySelector('style[data-href~="'+un(o.href)+'"]');if(a)return n.instance=a,Ct(a),a;var u=T({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return a=(e.ownerDocument||e).createElement("style"),Ct(a),wt(a,"style",u),ac(a,o.precedence,e),n.instance=a;case"stylesheet":u=gr(o.href);var d=e.querySelector(Oa(u));if(d)return n.state.loading|=4,n.instance=d,Ct(d),d;a=xy(o),(u=vn.get(u))&&Md(a,u),d=(e.ownerDocument||e).createElement("link"),Ct(d);var m=d;return m._p=new Promise(function(y,E){m.onload=y,m.onerror=E}),wt(d,"link",a),n.state.loading|=4,ac(d,o.precedence,e),n.instance=d;case"script":return d=mr(o.src),(u=e.querySelector(ka(d)))?(n.instance=u,Ct(u),u):(a=o,(u=vn.get(d))&&(a=T({},o),Nd(a,u)),e=e.ownerDocument||e,u=e.createElement("script"),Ct(u),wt(u,"link",a),e.head.appendChild(u),n.instance=u);case"void":return null;default:throw Error(r(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(a=n.instance,n.state.loading|=4,ac(a,o.precedence,e));return n.instance}function ac(e,n,o){for(var a=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),u=a.length?a[a.length-1]:null,d=u,m=0;m<a.length;m++){var y=a[m];if(y.dataset.precedence===n)d=y;else if(d!==u)break}d?d.parentNode.insertBefore(e,d.nextSibling):(n=o.nodeType===9?o.head:o,n.insertBefore(e,n.firstChild))}function Md(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function Nd(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var sc=null;function Hy(e,n,o){if(sc===null){var a=new Map,u=sc=new Map;u.set(o,a)}else u=sc,a=u.get(o),a||(a=new Map,u.set(o,a));if(a.has(e))return a;for(a.set(e,null),o=o.getElementsByTagName(e),u=0;u<o.length;u++){var d=o[u];if(!(d[Qr]||d[At]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var m=d.getAttribute(n)||"";m=e+m;var y=a.get(m);y?y.push(d):a.set(m,[d])}}return a}function Ly(e,n,o){e=e.ownerDocument||e,e.head.insertBefore(o,n==="title"?e.querySelector("head > title"):null)}function a_(e,n,o){if(o===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function zy(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function s_(e,n,o,a){if(o.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var u=gr(a.href),d=n.querySelector(Oa(u));if(d){n=d._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=cc.bind(e),n.then(e,e)),o.state.loading|=4,o.instance=d,Ct(d);return}d=n.ownerDocument||n,a=xy(a),(u=vn.get(u))&&Md(a,u),d=d.createElement("link"),Ct(d);var m=d;m._p=new Promise(function(y,E){m.onload=y,m.onerror=E}),wt(d,"link",a),o.instance=d}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(o,n),(n=o.state.preload)&&(o.state.loading&3)===0&&(e.count++,o=cc.bind(e),n.addEventListener("load",o),n.addEventListener("error",o))}}var Dd=0;function c_(e,n){return e.stylesheets&&e.count===0&&uc(e,e.stylesheets),0<e.count||0<e.imgCount?function(o){var a=setTimeout(function(){if(e.stylesheets&&uc(e,e.stylesheets),e.unsuspend){var d=e.unsuspend;e.unsuspend=null,d()}},6e4+n);0<e.imgBytes&&Dd===0&&(Dd=62500*qE());var u=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&uc(e,e.stylesheets),e.unsuspend)){var d=e.unsuspend;e.unsuspend=null,d()}},(e.imgBytes>Dd?50:800)+n);return e.unsuspend=o,function(){e.unsuspend=null,clearTimeout(a),clearTimeout(u)}}:null}function cc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)uc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var lc=null;function uc(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,lc=new Map,n.forEach(l_,e),lc=null,cc.call(e))}function l_(e,n){if(!(n.state.loading&4)){var o=lc.get(e);if(o)var a=o.get(null);else{o=new Map,lc.set(e,o);for(var u=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<u.length;d++){var m=u[d];(m.nodeName==="LINK"||m.getAttribute("media")!=="not all")&&(o.set(m.dataset.precedence,m),a=m)}a&&o.set(null,a)}u=n.instance,m=u.getAttribute("data-precedence"),d=o.get(m)||a,d===a&&o.set(null,u),o.set(m,u),this.count++,a=cc.bind(this),u.addEventListener("load",a),u.addEventListener("error",a),d?d.parentNode.insertBefore(u,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(u,e.firstChild)),n.state.loading|=4}}var Ma={$$typeof:ue,Provider:null,Consumer:null,_currentValue:M,_currentValue2:M,_threadCount:0};function u_(e,n,o,a,u,d,m,y,E){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Il(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Il(0),this.hiddenUpdates=Il(null),this.identifierPrefix=a,this.onUncaughtError=u,this.onCaughtError=d,this.onRecoverableError=m,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function By(e,n,o,a,u,d,m,y,E,H,F,Z){return e=new u_(e,n,o,m,E,H,F,Z,y),n=1,d===!0&&(n|=24),d=$t(3,null,null,n),e.current=d,d.stateNode=e,n=hu(),n.refCount++,e.pooledCache=n,n.refCount++,d.memoizedState={element:a,isDehydrated:o,cache:n},pu(d),e}function Ky(e){return e?(e=Qo,e):Qo}function qy(e,n,o,a,u,d){u=Ky(u),a.context===null?a.context=u:a.pendingContext=u,a=Ti(n),a.payload={element:o},d=d===void 0?null:d,d!==null&&(a.callback=d),o=Ai(e,a,n),o!==null&&(Ft(o,e,n),la(o,e,n))}function jy(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var o=e.retryLane;e.retryLane=o!==0&&o<n?o:n}}function Ud(e,n){jy(e,n),(e=e.alternate)&&jy(e,n)}function Gy(e){if(e.tag===13||e.tag===31){var n=no(e,67108864);n!==null&&Ft(n,e,67108864),Ud(e,67108864)}}function Fy(e){if(e.tag===13||e.tag===31){var n=nn();n=Ol(n);var o=no(e,n);o!==null&&Ft(o,e,n),Ud(e,n)}}var dc=!0;function d_(e,n,o,a){var u=D.T;D.T=null;var d=X.p;try{X.p=2,xd(e,n,o,a)}finally{X.p=d,D.T=u}}function h_(e,n,o,a){var u=D.T;D.T=null;var d=X.p;try{X.p=8,xd(e,n,o,a)}finally{X.p=d,D.T=u}}function xd(e,n,o,a){if(dc){var u=Pd(a);if(u===null)Td(e,n,a,hc,o),Yy(e,a);else if(g_(u,e,n,o,a))a.stopPropagation();else if(Yy(e,a),n&4&&-1<f_.indexOf(e)){for(;u!==null;){var d=xo(u);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var m=Sn(d.pendingLanes);if(m!==0){var y=d;for(y.pendingLanes|=2,y.entangledLanes|=2;m;){var E=1<<31-gt(m);y.entanglements[1]|=E,m&=~E}Un(d),(He&6)===0&&(Vs=yt()+500,ba(0))}}break;case 31:case 13:y=no(d,2),y!==null&&Ft(y,d,2),Js(),Ud(d,2)}if(d=Pd(a),d===null&&Td(e,n,a,hc,o),d===u)break;u=d}u!==null&&a.stopPropagation()}else Td(e,n,a,null,o)}}function Pd(e){return e=Ll(e),Hd(e)}var hc=null;function Hd(e){if(hc=null,e=Uo(e),e!==null){var n=l(e);if(n===null)e=null;else{var o=n.tag;if(o===13){if(e=h(n),e!==null)return e;e=null}else if(o===31){if(e=f(n),e!==null)return e;e=null}else if(o===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return hc=e,null}function Qy(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(hi()){case Br:return 2;case Kr:return 8;case Mo:case No:return 32;case is:return 268435456;default:return 32}default:return 32}}var Ld=!1,Di=null,Ui=null,xi=null,Na=new Map,Da=new Map,Pi=[],f_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Yy(e,n){switch(e){case"focusin":case"focusout":Di=null;break;case"dragenter":case"dragleave":Ui=null;break;case"mouseover":case"mouseout":xi=null;break;case"pointerover":case"pointerout":Na.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Da.delete(n.pointerId)}}function Ua(e,n,o,a,u,d){return e===null||e.nativeEvent!==d?(e={blockedOn:n,domEventName:o,eventSystemFlags:a,nativeEvent:d,targetContainers:[u]},n!==null&&(n=xo(n),n!==null&&Gy(n)),e):(e.eventSystemFlags|=a,n=e.targetContainers,u!==null&&n.indexOf(u)===-1&&n.push(u),e)}function g_(e,n,o,a,u){switch(n){case"focusin":return Di=Ua(Di,e,n,o,a,u),!0;case"dragenter":return Ui=Ua(Ui,e,n,o,a,u),!0;case"mouseover":return xi=Ua(xi,e,n,o,a,u),!0;case"pointerover":var d=u.pointerId;return Na.set(d,Ua(Na.get(d)||null,e,n,o,a,u)),!0;case"gotpointercapture":return d=u.pointerId,Da.set(d,Ua(Da.get(d)||null,e,n,o,a,u)),!0}return!1}function Vy(e){var n=Uo(e.target);if(n!==null){var o=l(n);if(o!==null){if(n=o.tag,n===13){if(n=h(o),n!==null){e.blockedOn=n,cg(e.priority,function(){Fy(o)});return}}else if(n===31){if(n=f(o),n!==null){e.blockedOn=n,cg(e.priority,function(){Fy(o)});return}}else if(n===3&&o.stateNode.current.memoizedState.isDehydrated){e.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}e.blockedOn=null}function fc(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var o=Pd(e.nativeEvent);if(o===null){o=e.nativeEvent;var a=new o.constructor(o.type,o);Hl=a,o.target.dispatchEvent(a),Hl=null}else return n=xo(o),n!==null&&Gy(n),e.blockedOn=o,!1;n.shift()}return!0}function Xy(e,n,o){fc(e)&&o.delete(n)}function m_(){Ld=!1,Di!==null&&fc(Di)&&(Di=null),Ui!==null&&fc(Ui)&&(Ui=null),xi!==null&&fc(xi)&&(xi=null),Na.forEach(Xy),Da.forEach(Xy)}function gc(e,n){e.blockedOn===n&&(e.blockedOn=null,Ld||(Ld=!0,c.unstable_scheduleCallback(c.unstable_NormalPriority,m_)))}var mc=null;function Jy(e){mc!==e&&(mc=e,c.unstable_scheduleCallback(c.unstable_NormalPriority,function(){mc===e&&(mc=null);for(var n=0;n<e.length;n+=3){var o=e[n],a=e[n+1],u=e[n+2];if(typeof a!="function"){if(Hd(a||o)===null)continue;break}var d=xo(o);d!==null&&(e.splice(n,3),n-=3,Pu(d,{pending:!0,data:u,method:o.method,action:a},a,u))}}))}function pr(e){function n(E){return gc(E,e)}Di!==null&&gc(Di,e),Ui!==null&&gc(Ui,e),xi!==null&&gc(xi,e),Na.forEach(n),Da.forEach(n);for(var o=0;o<Pi.length;o++){var a=Pi[o];a.blockedOn===e&&(a.blockedOn=null)}for(;0<Pi.length&&(o=Pi[0],o.blockedOn===null);)Vy(o),o.blockedOn===null&&Pi.shift();if(o=(e.ownerDocument||e).$$reactFormReplay,o!=null)for(a=0;a<o.length;a+=3){var u=o[a],d=o[a+1],m=u[zt]||null;if(typeof d=="function")m||Jy(o);else if(m){var y=null;if(d&&d.hasAttribute("formAction")){if(u=d,m=d[zt]||null)y=m.formAction;else if(Hd(u)!==null)continue}else y=m.action;typeof y=="function"?o[a+1]=y:(o.splice(a,3),a-=3),Jy(o)}}}function $y(){function e(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(m){return u=m})},focusReset:"manual",scroll:"manual"})}function n(){u!==null&&(u(),u=null),a||setTimeout(o,20)}function o(){if(!a&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var a=!1,u=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(o,100),function(){a=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),u!==null&&(u(),u=null)}}}function zd(e){this._internalRoot=e}pc.prototype.render=zd.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(r(409));var o=n.current,a=nn();qy(o,a,e,n,null,null)},pc.prototype.unmount=zd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;qy(e.current,2,null,e,null,null),Js(),n[Do]=null}};function pc(e){this._internalRoot=e}pc.prototype.unstable_scheduleHydration=function(e){if(e){var n=sg();e={blockedOn:null,target:e,priority:n};for(var o=0;o<Pi.length&&n!==0&&n<Pi[o].priority;o++);Pi.splice(o,0,e),o===0&&Vy(e)}};var Zy=t.version;if(Zy!=="19.2.0")throw Error(r(527,Zy,"19.2.0"));X.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=p(n),e=e!==null?S(e):null,e=e===null?null:e.stateNode,e};var p_={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:D,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yc.isDisabled&&yc.supportsFiber)try{Bn=yc.inject(p_),De=yc}catch{}}return Pa.createRoot=function(e,n){if(!s(e))throw Error(r(299));var o=!1,a="",u=rp,d=ap,m=sp;return n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onUncaughtError!==void 0&&(u=n.onUncaughtError),n.onCaughtError!==void 0&&(d=n.onCaughtError),n.onRecoverableError!==void 0&&(m=n.onRecoverableError)),n=By(e,1,!1,null,null,o,a,null,u,d,m,$y),e[Do]=n.current,Sd(e),new zd(n)},Pa.hydrateRoot=function(e,n,o){if(!s(e))throw Error(r(299));var a=!1,u="",d=rp,m=ap,y=sp,E=null;return o!=null&&(o.unstable_strictMode===!0&&(a=!0),o.identifierPrefix!==void 0&&(u=o.identifierPrefix),o.onUncaughtError!==void 0&&(d=o.onUncaughtError),o.onCaughtError!==void 0&&(m=o.onCaughtError),o.onRecoverableError!==void 0&&(y=o.onRecoverableError),o.formState!==void 0&&(E=o.formState)),n=By(e,1,!0,n,o??null,a,u,E,d,m,y,$y),n.context=Ky(null),o=n.current,a=nn(),a=Ol(a),u=Ti(a),u.callback=null,Ai(o,u,a),o=a,n.current.lanes=o,Fr(n,o),Un(n),e[Do]=n.current,Sd(e),new pc(n)},Pa.version="19.2.0",Pa}var cv;function b_(){if(cv)return qd.exports;cv=1;function c(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(c)}catch(t){console.error(t)}}return c(),qd.exports=__(),qd.exports}var w_=b_(),Qd={exports:{}};var lv;function R_(){return lv||(lv=1,(function(c){(function(){var t={}.hasOwnProperty;function i(){for(var l="",h=0;h<arguments.length;h++){var f=arguments[h];f&&(l=s(l,r(f)))}return l}function r(l){if(typeof l=="string"||typeof l=="number")return l;if(typeof l!="object")return"";if(Array.isArray(l))return i.apply(null,l);if(l.toString!==Object.prototype.toString&&!l.toString.toString().includes("[native code]"))return l.toString();var h="";for(var f in l)t.call(l,f)&&l[f]&&(h=s(h,f));return h}function s(l,h){return h?l?l+" "+h:l+h:l}c.exports?(i.default=i,c.exports=i):window.classNames=i})()})(Qd)),Qd.exports}var I_=R_();const rt=wo(I_),O_=["as","disabled"];function k_(c,t){if(c==null)return{};var i={};for(var r in c)if({}.hasOwnProperty.call(c,r)){if(t.indexOf(r)>=0)continue;i[r]=c[r]}return i}function M_(c){return!c||c.trim()==="#"}function bC({tagName:c,disabled:t,href:i,target:r,rel:s,role:l,onClick:h,tabIndex:f=0,type:g}){c||(i!=null||r!=null||s!=null?c="a":c="button");const p={tagName:c};if(c==="button")return[{type:g||"button",disabled:t},p];const S=A=>{if((t||c==="a"&&M_(i))&&A.preventDefault(),t){A.stopPropagation();return}h?.(A)},T=A=>{A.key===" "&&(A.preventDefault(),S(A))};return c==="a"&&(i||(i="#"),t&&(i=void 0)),[{role:l??"button",disabled:void 0,tabIndex:t?void 0:f,href:i,target:c==="a"?r:void 0,"aria-disabled":t||void 0,rel:c==="a"?s:void 0,onClick:S,onKeyDown:T},p]}const N_=B.forwardRef((c,t)=>{let{as:i,disabled:r}=c,s=k_(c,O_);const[l,{tagName:h}]=bC(Object.assign({tagName:i,disabled:r},s));return J.jsx(h,Object.assign({},s,l,{ref:t}))});N_.displayName="Button";const D_=["xxl","xl","lg","md","sm","xs"],U_="xs",il=B.createContext({prefixes:{},breakpoints:D_,minBreakpoint:U_}),{Consumer:Hk,Provider:Lk}=il;function Lt(c,t){const{prefixes:i}=B.useContext(il);return c||i[t]||t}function wC(){const{breakpoints:c}=B.useContext(il);return c}function RC(){const{minBreakpoint:c}=B.useContext(il);return c}const qa=B.forwardRef(({as:c,bsPrefix:t,variant:i="primary",size:r,active:s=!1,disabled:l=!1,className:h,...f},g)=>{const p=Lt(t,"btn"),[S,{tagName:T}]=bC({tagName:c,disabled:l,...f}),A=T;return J.jsx(A,{...S,...f,ref:g,disabled:l,className:rt(h,p,s&&"active",i&&`${p}-${i}`,r&&`${p}-${r}`,f.href&&l&&"disabled")})});qa.displayName="Button";const x_="/knowledge-lib/assets/Stamena.jpg";function yh(){return yh=Object.assign?Object.assign.bind():function(c){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)({}).hasOwnProperty.call(i,r)&&(c[r]=i[r])}return c},yh.apply(null,arguments)}function IC(c,t){if(c==null)return{};var i={};for(var r in c)if({}.hasOwnProperty.call(c,r)){if(t.indexOf(r)!==-1)continue;i[r]=c[r]}return i}function uv(c){return"default"+c.charAt(0).toUpperCase()+c.substr(1)}function P_(c){var t=H_(c,"string");return typeof t=="symbol"?t:String(t)}function H_(c,t){if(typeof c!="object"||c===null)return c;var i=c[Symbol.toPrimitive];if(i!==void 0){var r=i.call(c,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(c)}function L_(c,t,i){var r=B.useRef(c!==void 0),s=B.useState(t),l=s[0],h=s[1],f=c!==void 0,g=r.current;return r.current=f,!f&&g&&l!==t&&h(t),[f?c:l,B.useCallback(function(p){for(var S=arguments.length,T=new Array(S>1?S-1:0),A=1;A<S;A++)T[A-1]=arguments[A];i&&i.apply(void 0,[p].concat(T)),h(p)},[i])]}function z_(c,t){return Object.keys(t).reduce(function(i,r){var s,l=i,h=l[uv(r)],f=l[r],g=IC(l,[uv(r),r].map(P_)),p=t[r],S=L_(f,h,c[p]),T=S[0],A=S[1];return yh({},g,(s={},s[r]=T,s[p]=A,s))},c)}function vh(c,t){return vh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,r){return i.__proto__=r,i},vh(c,t)}function B_(c,t){c.prototype=Object.create(t.prototype),c.prototype.constructor=c,vh(c,t)}function Lh(c){return c&&c.ownerDocument||document}function K_(c){var t=Lh(c);return t&&t.defaultView||window}function q_(c,t){return K_(c).getComputedStyle(c,t)}var j_=/([A-Z])/g;function G_(c){return c.replace(j_,"-$1").toLowerCase()}var F_=/^ms-/;function vc(c){return G_(c).replace(F_,"-ms-")}var Q_=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function Y_(c){return!!(c&&Q_.test(c))}function li(c,t){var i="",r="";if(typeof t=="string")return c.style.getPropertyValue(vc(t))||q_(c).getPropertyValue(vc(t));Object.keys(t).forEach(function(s){var l=t[s];!l&&l!==0?c.style.removeProperty(vc(s)):Y_(s)?r+=s+"("+l+") ":i+=vc(s)+": "+l+";"}),r&&(i+="transform: "+r+";"),c.style.cssText+=";"+i}var Yd={exports:{}},Vd,dv;function V_(){if(dv)return Vd;dv=1;var c="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Vd=c,Vd}var Xd,hv;function X_(){if(hv)return Xd;hv=1;var c=V_();function t(){}function i(){}return i.resetWarningCache=t,Xd=function(){function r(h,f,g,p,S,T){if(T!==c){var A=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw A.name="Invariant Violation",A}}r.isRequired=r;function s(){return r}var l={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:s,element:r,elementType:r,instanceOf:s,node:r,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:i,resetWarningCache:t};return l.PropTypes=l,l},Xd}var fv;function Dr(){return fv||(fv=1,Yd.exports=X_()()),Yd.exports}var J_=Dr();const Jd=wo(J_);var $_=_C();const Er=wo($_),gv={disabled:!1},OC=Hn.createContext(null);var Z_=function(t){return t.scrollTop},za="unmounted",zi="exited",Rn="entering",si="entered",Ya="exiting",di=(function(c){B_(t,c);function t(r,s){var l;l=c.call(this,r,s)||this;var h=s,f=h&&!h.isMounting?r.enter:r.appear,g;return l.appearStatus=null,r.in?f?(g=zi,l.appearStatus=Rn):g=si:r.unmountOnExit||r.mountOnEnter?g=za:g=zi,l.state={status:g},l.nextCallback=null,l}t.getDerivedStateFromProps=function(s,l){var h=s.in;return h&&l.status===za?{status:zi}:null};var i=t.prototype;return i.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},i.componentDidUpdate=function(s){var l=null;if(s!==this.props){var h=this.state.status;this.props.in?h!==Rn&&h!==si&&(l=Rn):(h===Rn||h===si)&&(l=Ya)}this.updateStatus(!1,l)},i.componentWillUnmount=function(){this.cancelNextCallback()},i.getTimeouts=function(){var s=this.props.timeout,l,h,f;return l=h=f=s,s!=null&&typeof s!="number"&&(l=s.exit,h=s.enter,f=s.appear!==void 0?s.appear:h),{exit:l,enter:h,appear:f}},i.updateStatus=function(s,l){if(s===void 0&&(s=!1),l!==null)if(this.cancelNextCallback(),l===Rn){if(this.props.unmountOnExit||this.props.mountOnEnter){var h=this.props.nodeRef?this.props.nodeRef.current:Er.findDOMNode(this);h&&Z_(h)}this.performEnter(s)}else this.performExit();else this.props.unmountOnExit&&this.state.status===zi&&this.setState({status:za})},i.performEnter=function(s){var l=this,h=this.props.enter,f=this.context?this.context.isMounting:s,g=this.props.nodeRef?[f]:[Er.findDOMNode(this),f],p=g[0],S=g[1],T=this.getTimeouts(),A=f?T.appear:T.enter;if(!s&&!h||gv.disabled){this.safeSetState({status:si},function(){l.props.onEntered(p)});return}this.props.onEnter(p,S),this.safeSetState({status:Rn},function(){l.props.onEntering(p,S),l.onTransitionEnd(A,function(){l.safeSetState({status:si},function(){l.props.onEntered(p,S)})})})},i.performExit=function(){var s=this,l=this.props.exit,h=this.getTimeouts(),f=this.props.nodeRef?void 0:Er.findDOMNode(this);if(!l||gv.disabled){this.safeSetState({status:zi},function(){s.props.onExited(f)});return}this.props.onExit(f),this.safeSetState({status:Ya},function(){s.props.onExiting(f),s.onTransitionEnd(h.exit,function(){s.safeSetState({status:zi},function(){s.props.onExited(f)})})})},i.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},i.safeSetState=function(s,l){l=this.setNextCallback(l),this.setState(s,l)},i.setNextCallback=function(s){var l=this,h=!0;return this.nextCallback=function(f){h&&(h=!1,l.nextCallback=null,s(f))},this.nextCallback.cancel=function(){h=!1},this.nextCallback},i.onTransitionEnd=function(s,l){this.setNextCallback(l);var h=this.props.nodeRef?this.props.nodeRef.current:Er.findDOMNode(this),f=s==null&&!this.props.addEndListener;if(!h||f){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var g=this.props.nodeRef?[this.nextCallback]:[h,this.nextCallback],p=g[0],S=g[1];this.props.addEndListener(p,S)}s!=null&&setTimeout(this.nextCallback,s)},i.render=function(){var s=this.state.status;if(s===za)return null;var l=this.props,h=l.children;l.in,l.mountOnEnter,l.unmountOnExit,l.appear,l.enter,l.exit,l.timeout,l.addEndListener,l.onEnter,l.onEntering,l.onEntered,l.onExit,l.onExiting,l.onExited,l.nodeRef;var f=IC(l,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Hn.createElement(OC.Provider,{value:null},typeof h=="function"?h(s,f):Hn.cloneElement(Hn.Children.only(h),f))},t})(Hn.Component);di.contextType=OC;di.propTypes={};function yr(){}di.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:yr,onEntering:yr,onEntered:yr,onExit:yr,onExiting:yr,onExited:yr};di.UNMOUNTED=za;di.EXITED=zi;di.ENTERING=Rn;di.ENTERED=si;di.EXITING=Ya;function W_(c){return c.code==="Escape"||c.keyCode===27}function eb(){const c=B.version.split(".");return{major:+c[0],minor:+c[1],patch:+c[2]}}function Ur(c){if(!c||typeof c=="function")return null;const{major:t}=eb();return t>=19?c.props.ref:c.ref}const ol=!!(typeof window<"u"&&window.document&&window.document.createElement);var Ch=!1,Sh=!1;try{var $d={get passive(){return Ch=!0},get once(){return Sh=Ch=!0}};ol&&(window.addEventListener("test",$d,$d),window.removeEventListener("test",$d,!0))}catch{}function tb(c,t,i,r){if(r&&typeof r!="boolean"&&!Sh){var s=r.once,l=r.capture,h=i;!Sh&&s&&(h=i.__once||function f(g){this.removeEventListener(t,f,l),i.call(this,g)},i.__once=h),c.addEventListener(t,h,Ch?r:l)}c.addEventListener(t,i,r)}function nb(c,t,i,r){var s=r&&typeof r!="boolean"?r.capture:r;c.removeEventListener(t,i,s),i.__once&&c.removeEventListener(t,i.__once,s)}function Hc(c,t,i,r){return tb(c,t,i,r),function(){nb(c,t,i,r)}}function ib(c,t,i,r){if(r===void 0&&(r=!0),c){var s=document.createEvent("HTMLEvents");s.initEvent(t,i,r),c.dispatchEvent(s)}}function ob(c){var t=li(c,"transitionDuration")||"",i=t.indexOf("ms")===-1?1e3:1;return parseFloat(t)*i}function rb(c,t,i){i===void 0&&(i=5);var r=!1,s=setTimeout(function(){r||ib(c,"transitionend",!0)},t+i),l=Hc(c,"transitionend",function(){r=!0},{once:!0});return function(){clearTimeout(s),l()}}function ab(c,t,i,r){i==null&&(i=ob(c)||0);var s=rb(c,i,r),l=Hc(c,"transitionend",t);return function(){s(),l()}}function mv(c,t){const i=li(c,t)||"",r=i.indexOf("ms")===-1?1e3:1;return parseFloat(i)*r}function zh(c,t){const i=mv(c,"transitionDuration"),r=mv(c,"transitionDelay"),s=ab(c,l=>{l.target===c&&(s(),t(l))},i+r)}function Ha(...c){return c.filter(t=>t!=null).reduce((t,i)=>{if(typeof i!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return t===null?i:function(...s){t.apply(this,s),i.apply(this,s)}},null)}function kC(c){c.offsetHeight}const pv=c=>!c||typeof c=="function"?c:t=>{c.current=t};function sb(c,t){const i=pv(c),r=pv(t);return s=>{i&&i(s),r&&r(s)}}function cb(c,t){return B.useMemo(()=>sb(c,t),[c,t])}function lb(c){return c&&"setState"in c?Er.findDOMNode(c):c??null}const rl=Hn.forwardRef(({onEnter:c,onEntering:t,onEntered:i,onExit:r,onExiting:s,onExited:l,addEndListener:h,children:f,childRef:g,...p},S)=>{const T=B.useRef(null),A=cb(T,g),K=$=>{A(lb($))},ee=$=>te=>{$&&T.current&&$(T.current,te)},ie=B.useCallback(ee(c),[c]),le=B.useCallback(ee(t),[t]),se=B.useCallback(ee(i),[i]),ce=B.useCallback(ee(r),[r]),ue=B.useCallback(ee(s),[s]),G=B.useCallback(ee(l),[l]),ae=B.useCallback(ee(h),[h]);return J.jsx(di,{ref:S,...p,onEnter:ie,onEntered:se,onEntering:le,onExit:ce,onExited:G,onExiting:ue,addEndListener:ae,nodeRef:T,children:typeof f=="function"?($,te)=>f($,{...te,ref:K}):Hn.cloneElement(f,{ref:K})})});rl.displayName="TransitionWrapper";const ub={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function db(c,t){const i=`offset${c[0].toUpperCase()}${c.slice(1)}`,r=t[i],s=ub[c];return r+parseInt(li(t,s[0]),10)+parseInt(li(t,s[1]),10)}const hb={[zi]:"collapse",[Ya]:"collapsing",[Rn]:"collapsing",[si]:"collapse show"},MC=Hn.forwardRef(({onEnter:c,onEntering:t,onEntered:i,onExit:r,onExiting:s,className:l,children:h,dimension:f="height",in:g=!1,timeout:p=300,mountOnEnter:S=!1,unmountOnExit:T=!1,appear:A=!1,getDimensionValue:K=db,...ee},ie)=>{const le=typeof f=="function"?f():f,se=B.useMemo(()=>Ha($=>{$.style[le]="0"},c),[le,c]),ce=B.useMemo(()=>Ha($=>{const te=`scroll${le[0].toUpperCase()}${le.slice(1)}`;$.style[le]=`${$[te]}px`},t),[le,t]),ue=B.useMemo(()=>Ha($=>{$.style[le]=null},i),[le,i]),G=B.useMemo(()=>Ha($=>{$.style[le]=`${K(le,$)}px`,kC($)},r),[r,K,le]),ae=B.useMemo(()=>Ha($=>{$.style[le]=null},s),[le,s]);return J.jsx(rl,{ref:ie,addEndListener:zh,...ee,"aria-expanded":ee.role?g:null,onEnter:se,onEntering:ce,onEntered:ue,onExit:G,onExiting:ae,childRef:Ur(h),in:g,timeout:p,mountOnEnter:S,unmountOnExit:T,appear:A,children:($,te)=>Hn.cloneElement(h,{...te,className:rt(l,h.props.className,hb[$],le==="width"&&"collapse-horizontal")})})});MC.displayName="Collapse";function NC(c,t){return Array.isArray(c)?c.includes(t):c===t}const es=B.createContext({});es.displayName="AccordionContext";const Bh=B.forwardRef(({as:c="div",bsPrefix:t,className:i,children:r,eventKey:s,...l},h)=>{const{activeEventKey:f}=B.useContext(es);return t=Lt(t,"accordion-collapse"),J.jsx(MC,{ref:h,in:NC(f,s),...l,className:rt(i,t),children:J.jsx(c,{children:B.Children.only(r)})})});Bh.displayName="AccordionCollapse";const al=B.createContext({eventKey:""});al.displayName="AccordionItemContext";const DC=B.forwardRef(({as:c="div",bsPrefix:t,className:i,onEnter:r,onEntering:s,onEntered:l,onExit:h,onExiting:f,onExited:g,...p},S)=>{t=Lt(t,"accordion-body");const{eventKey:T}=B.useContext(al);return J.jsx(Bh,{eventKey:T,onEnter:r,onEntering:s,onEntered:l,onExit:h,onExiting:f,onExited:g,children:J.jsx(c,{ref:S,...p,className:rt(i,t)})})});DC.displayName="AccordionBody";function fb(c,t){const{activeEventKey:i,onSelect:r,alwaysOpen:s}=B.useContext(es);return l=>{let h=c===i?null:c;s&&(Array.isArray(i)?i.includes(c)?h=i.filter(f=>f!==c):h=[...i,c]:h=[c]),r?.(h,l),t?.(l)}}const Kh=B.forwardRef(({as:c="button",bsPrefix:t,className:i,onClick:r,...s},l)=>{t=Lt(t,"accordion-button");const{eventKey:h}=B.useContext(al),f=fb(h,r),{activeEventKey:g}=B.useContext(es);return c==="button"&&(s.type="button"),J.jsx(c,{ref:l,onClick:f,...s,"aria-expanded":Array.isArray(g)?g.includes(h):h===g,className:rt(i,t,!NC(g,h)&&"collapsed")})});Kh.displayName="AccordionButton";const UC=B.forwardRef(({as:c="h2","aria-controls":t,bsPrefix:i,className:r,children:s,onClick:l,...h},f)=>(i=Lt(i,"accordion-header"),J.jsx(c,{ref:f,...h,className:rt(r,i),children:J.jsx(Kh,{onClick:l,"aria-controls":t,children:s})})));UC.displayName="AccordionHeader";const xC=B.forwardRef(({as:c="div",bsPrefix:t,className:i,eventKey:r,...s},l)=>{t=Lt(t,"accordion-item");const h=B.useMemo(()=>({eventKey:r}),[r]);return J.jsx(al.Provider,{value:h,children:J.jsx(c,{ref:l,...s,className:rt(i,t)})})});xC.displayName="AccordionItem";const PC=B.forwardRef((c,t)=>{const{as:i="div",activeKey:r,bsPrefix:s,className:l,onSelect:h,flush:f,alwaysOpen:g,...p}=z_(c,{activeKey:"onSelect"}),S=Lt(s,"accordion"),T=B.useMemo(()=>({activeEventKey:r,onSelect:h,alwaysOpen:g}),[r,h,g]);return J.jsx(es.Provider,{value:T,children:J.jsx(i,{ref:t,...p,className:rt(l,S,f&&`${S}-flush`)})})});PC.displayName="Accordion";const Cc=Object.assign(PC,{Button:Kh,Collapse:Bh,Item:xC,Header:UC,Body:DC});function gb(c){const t=B.useRef(c);return B.useEffect(()=>{t.current=c},[c]),t}function HC(c){const t=gb(c);return B.useCallback(function(...i){return t.current&&t.current(...i)},[t])}const mb=(c=>B.forwardRef((t,i)=>J.jsx("div",{...t,ref:i,className:rt(t.className,c)})));function pb(c){const t=B.useRef(c);return B.useEffect(()=>{t.current=c},[c]),t}function Co(c){const t=pb(c);return B.useCallback(function(...i){return t.current&&t.current(...i)},[t])}function yb(){const c=B.useRef(!0),t=B.useRef(()=>c.current);return B.useEffect(()=>(c.current=!0,()=>{c.current=!1}),[]),t.current}function vb(c){const t=B.useRef(null);return B.useEffect(()=>{t.current=c}),t.current}const Cb=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",Sb=typeof document<"u",yv=Sb||Cb?B.useLayoutEffect:B.useEffect,Tb={[Rn]:"show",[si]:"show"},LC=B.forwardRef(({className:c,children:t,transitionClasses:i={},onEnter:r,...s},l)=>{const h={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...s},f=B.useCallback((g,p)=>{kC(g),r?.(g,p)},[r]);return J.jsx(rl,{ref:l,addEndListener:zh,...h,onEnter:f,childRef:Ur(t),children:(g,p)=>B.cloneElement(t,{...p,className:rt("fade",c,t.props.className,Tb[g],i[g])})})});LC.displayName="Fade";const Ab={"aria-label":Jd.string,onClick:Jd.func,variant:Jd.oneOf(["white"])},qh=B.forwardRef(({className:c,variant:t,"aria-label":i="Close",...r},s)=>J.jsx("button",{ref:s,type:"button",className:rt("btn-close",t&&`btn-close-${t}`,c),"aria-label":i,...r}));qh.displayName="CloseButton";qh.propTypes=Ab;function Eb({as:c,bsPrefix:t,className:i,...r}){t=Lt(t,"col");const s=wC(),l=RC(),h=[],f=[];return s.forEach(g=>{const p=r[g];delete r[g];let S,T,A;typeof p=="object"&&p!=null?{span:S,offset:T,order:A}=p:S=p;const K=g!==l?`-${g}`:"";S&&h.push(S===!0?`${t}${K}`:`${t}${K}-${S}`),A!=null&&f.push(`order${K}-${A}`),T!=null&&f.push(`offset${K}-${T}`)}),[{...r,className:rt(i,...h,...f)},{as:c,bsPrefix:t,spans:h}]}const Th=B.forwardRef((c,t)=>{const[{className:i,...r},{as:s="div",bsPrefix:l,spans:h}]=Eb(c);return J.jsx(s,{...r,ref:t,className:rt(i,!h.length&&l)})});Th.displayName="Col";const zC=B.forwardRef(({bsPrefix:c,fluid:t=!1,as:i="div",className:r,...s},l)=>{const h=Lt(c,"container"),f=typeof t=="string"?`-${t}`:"-fluid";return J.jsx(i,{ref:l,...s,className:rt(r,t?`${h}${f}`:h)})});zC.displayName="Container";var _b=Function.prototype.bind.call(Function.prototype.call,[].slice);function vr(c,t){return _b(c.querySelectorAll(t))}function vv(c,t){if(c.contains)return c.contains(t);if(c.compareDocumentPosition)return c===t||!!(c.compareDocumentPosition(t)&16)}const bb="data-rr-ui-";function wb(c){return`${bb}${c}`}const BC=B.createContext(ol?window:void 0);BC.Provider;function jh(){return B.useContext(BC)}const Rb=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",Ib=typeof document<"u",Ob=Ib||Rb?B.useLayoutEffect:B.useEffect,Cv=c=>!c||typeof c=="function"?c:t=>{c.current=t};function kb(c,t){const i=Cv(c),r=Cv(t);return s=>{i&&i(s),r&&r(s)}}function Gh(c,t){return B.useMemo(()=>kb(c,t),[c,t])}function Zd(c){c===void 0&&(c=Lh());try{var t=c.activeElement;return!t||!t.nodeName?null:t}catch{return c.body}}function Mb(c){const t=B.useRef(c);return t.current=c,t}function Nb(c){const t=Mb(c);B.useEffect(()=>()=>t.current(),[])}function Db(c=document){const t=c.defaultView;return Math.abs(t.innerWidth-c.documentElement.clientWidth)}const Sv=wb("modal-open");class Fh{constructor({ownerDocument:t,handleContainerOverflow:i=!0,isRTL:r=!1}={}){this.handleContainerOverflow=i,this.isRTL=r,this.modals=[],this.ownerDocument=t}getScrollbarWidth(){return Db(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(t){}removeModalAttributes(t){}setContainerStyle(t){const i={overflow:"hidden"},r=this.isRTL?"paddingLeft":"paddingRight",s=this.getElement();t.style={overflow:s.style.overflow,[r]:s.style[r]},t.scrollBarWidth&&(i[r]=`${parseInt(li(s,r)||"0",10)+t.scrollBarWidth}px`),s.setAttribute(Sv,""),li(s,i)}reset(){[...this.modals].forEach(t=>this.remove(t))}removeContainerStyle(t){const i=this.getElement();i.removeAttribute(Sv),Object.assign(i.style,t.style)}add(t){let i=this.modals.indexOf(t);return i!==-1||(i=this.modals.length,this.modals.push(t),this.setModalAttributes(t),i!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),i}remove(t){const i=this.modals.indexOf(t);i!==-1&&(this.modals.splice(i,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(t))}isTopModal(t){return!!this.modals.length&&this.modals[this.modals.length-1]===t}}const Wd=(c,t)=>ol?c==null?(t||Lh()).body:(typeof c=="function"&&(c=c()),c&&"current"in c&&(c=c.current),c&&("nodeType"in c||c.getBoundingClientRect)?c:null):null;function Ub(c,t){const i=jh(),[r,s]=B.useState(()=>Wd(c,i?.document));if(!r){const l=Wd(c);l&&s(l)}return B.useEffect(()=>{},[t,r]),B.useEffect(()=>{const l=Wd(c);l!==r&&s(l)},[c,r]),r}function xb({children:c,in:t,onExited:i,mountOnEnter:r,unmountOnExit:s}){const l=B.useRef(null),h=B.useRef(t),f=Co(i);B.useEffect(()=>{t?h.current=!0:f(l.current)},[t,f]);const g=Gh(l,Ur(c)),p=B.cloneElement(c,{ref:g});return t?p:s||!h.current&&r?null:p}const Pb=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function Hb(c,t){if(c==null)return{};var i={};for(var r in c)if({}.hasOwnProperty.call(c,r)){if(t.indexOf(r)>=0)continue;i[r]=c[r]}return i}function Lb(c){let{onEnter:t,onEntering:i,onEntered:r,onExit:s,onExiting:l,onExited:h,addEndListener:f,children:g}=c,p=Hb(c,Pb);const S=B.useRef(null),T=Gh(S,Ur(g)),A=G=>ae=>{G&&S.current&&G(S.current,ae)},K=B.useCallback(A(t),[t]),ee=B.useCallback(A(i),[i]),ie=B.useCallback(A(r),[r]),le=B.useCallback(A(s),[s]),se=B.useCallback(A(l),[l]),ce=B.useCallback(A(h),[h]),ue=B.useCallback(A(f),[f]);return Object.assign({},p,{nodeRef:S},t&&{onEnter:K},i&&{onEntering:ee},r&&{onEntered:ie},s&&{onExit:le},l&&{onExiting:se},h&&{onExited:ce},f&&{addEndListener:ue},{children:typeof g=="function"?(G,ae)=>g(G,Object.assign({},ae,{ref:T})):B.cloneElement(g,{ref:T})})}const zb=["component"];function Bb(c,t){if(c==null)return{};var i={};for(var r in c)if({}.hasOwnProperty.call(c,r)){if(t.indexOf(r)>=0)continue;i[r]=c[r]}return i}const Kb=B.forwardRef((c,t)=>{let{component:i}=c,r=Bb(c,zb);const s=Lb(r);return J.jsx(i,Object.assign({ref:t},s))});function qb({in:c,onTransition:t}){const i=B.useRef(null),r=B.useRef(!0),s=Co(t);return yv(()=>{if(!i.current)return;let l=!1;return s({in:c,element:i.current,initial:r.current,isStale:()=>l}),()=>{l=!0}},[c,s]),yv(()=>(r.current=!1,()=>{r.current=!0}),[]),i}function jb({children:c,in:t,onExited:i,onEntered:r,transition:s}){const[l,h]=B.useState(!t);t&&l&&h(!1);const f=qb({in:!!t,onTransition:p=>{const S=()=>{p.isStale()||(p.in?r?.(p.element,p.initial):(h(!0),i?.(p.element)))};Promise.resolve(s(p)).then(S,T=>{throw p.in||h(!0),T})}}),g=Gh(f,Ur(c));return l&&!t?null:B.cloneElement(c,{ref:g})}function Tv(c,t,i){return c?J.jsx(Kb,Object.assign({},i,{component:c})):t?J.jsx(jb,Object.assign({},i,{transition:t})):J.jsx(xb,Object.assign({},i))}const Gb=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function Fb(c,t){if(c==null)return{};var i={};for(var r in c)if({}.hasOwnProperty.call(c,r)){if(t.indexOf(r)>=0)continue;i[r]=c[r]}return i}let eh;function Qb(c){return eh||(eh=new Fh({ownerDocument:c?.document})),eh}function Yb(c){const t=jh(),i=c||Qb(t),r=B.useRef({dialog:null,backdrop:null});return Object.assign(r.current,{add:()=>i.add(r.current),remove:()=>i.remove(r.current),isTopModal:()=>i.isTopModal(r.current),setDialogRef:B.useCallback(s=>{r.current.dialog=s},[]),setBackdropRef:B.useCallback(s=>{r.current.backdrop=s},[])})}const KC=B.forwardRef((c,t)=>{let{show:i=!1,role:r="dialog",className:s,style:l,children:h,backdrop:f=!0,keyboard:g=!0,onBackdropClick:p,onEscapeKeyDown:S,transition:T,runTransition:A,backdropTransition:K,runBackdropTransition:ee,autoFocus:ie=!0,enforceFocus:le=!0,restoreFocus:se=!0,restoreFocusOptions:ce,renderDialog:ue,renderBackdrop:G=we=>J.jsx("div",Object.assign({},we)),manager:ae,container:$,onShow:te,onHide:U=()=>{},onExit:O,onExited:x,onExiting:j,onEnter:Y,onEntering:ne,onEntered:fe}=c,ve=Fb(c,Gb);const D=jh(),X=Ub($),M=Yb(ae),_=yb(),N=vb(i),[v,C]=B.useState(!i),b=B.useRef(null);B.useImperativeHandle(t,()=>M,[M]),ol&&!N&&i&&(b.current=Zd(D?.document)),i&&v&&C(!1);const I=Co(()=>{if(M.add(),qe.current=Hc(document,"keydown",Te),Ae.current=Hc(document,"focus",()=>setTimeout(oe),!0),te&&te(),ie){var we,Xt;const sn=Zd((we=(Xt=M.dialog)==null?void 0:Xt.ownerDocument)!=null?we:D?.document);M.dialog&&sn&&!vv(M.dialog,sn)&&(b.current=sn,M.dialog.focus())}}),z=Co(()=>{if(M.remove(),qe.current==null||qe.current(),Ae.current==null||Ae.current(),se){var we;(we=b.current)==null||we.focus==null||we.focus(ce),b.current=null}});B.useEffect(()=>{!i||!X||I()},[i,X,I]),B.useEffect(()=>{v&&z()},[v,z]),Nb(()=>{z()});const oe=Co(()=>{if(!le||!_()||!M.isTopModal())return;const we=Zd(D?.document);M.dialog&&we&&!vv(M.dialog,we)&&M.dialog.focus()}),de=Co(we=>{we.target===we.currentTarget&&(p?.(we),f===!0&&U())}),Te=Co(we=>{g&&W_(we)&&M.isTopModal()&&(S?.(we),we.defaultPrevented||U())}),Ae=B.useRef(),qe=B.useRef(),We=(...we)=>{C(!0),x?.(...we)};if(!X)return null;const ht=Object.assign({role:r,ref:M.setDialogRef,"aria-modal":r==="dialog"?!0:void 0},ve,{style:l,className:s,tabIndex:-1});let ft=ue?ue(ht):J.jsx("div",Object.assign({},ht,{children:B.cloneElement(h,{role:"document"})}));ft=Tv(T,A,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!i,onExit:O,onExiting:j,onExited:We,onEnter:Y,onEntering:ne,onEntered:fe,children:ft});let at=null;return f&&(at=G({ref:M.setBackdropRef,onClick:de}),at=Tv(K,ee,{in:!!i,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:at})),J.jsx(J.Fragment,{children:Er.createPortal(J.jsxs(J.Fragment,{children:[at,ft]}),X)})});KC.displayName="Modal";const Vb=Object.assign(KC,{Manager:Fh});function Xb(c,t){return c.classList?c.classList.contains(t):(" "+(c.className.baseVal||c.className)+" ").indexOf(" "+t+" ")!==-1}function Jb(c,t){c.classList?c.classList.add(t):Xb(c,t)||(typeof c.className=="string"?c.className=c.className+" "+t:c.setAttribute("class",(c.className&&c.className.baseVal||"")+" "+t))}function Av(c,t){return c.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function $b(c,t){c.classList?c.classList.remove(t):typeof c.className=="string"?c.className=Av(c.className,t):c.setAttribute("class",Av(c.className&&c.className.baseVal||"",t))}const Cr={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class qC extends Fh{adjustAndStore(t,i,r){const s=i.style[t];i.dataset[t]=s,li(i,{[t]:`${parseFloat(li(i,t))+r}px`})}restore(t,i){const r=i.dataset[t];r!==void 0&&(delete i.dataset[t],li(i,{[t]:r}))}setContainerStyle(t){super.setContainerStyle(t);const i=this.getElement();if(Jb(i,"modal-open"),!t.scrollBarWidth)return;const r=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";vr(i,Cr.FIXED_CONTENT).forEach(l=>this.adjustAndStore(r,l,t.scrollBarWidth)),vr(i,Cr.STICKY_CONTENT).forEach(l=>this.adjustAndStore(s,l,-t.scrollBarWidth)),vr(i,Cr.NAVBAR_TOGGLER).forEach(l=>this.adjustAndStore(s,l,t.scrollBarWidth))}removeContainerStyle(t){super.removeContainerStyle(t);const i=this.getElement();$b(i,"modal-open");const r=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";vr(i,Cr.FIXED_CONTENT).forEach(l=>this.restore(r,l)),vr(i,Cr.STICKY_CONTENT).forEach(l=>this.restore(s,l)),vr(i,Cr.NAVBAR_TOGGLER).forEach(l=>this.restore(s,l))}}let th;function Zb(c){return th||(th=new qC(c)),th}const jC=B.createContext({onHide(){}}),GC=B.forwardRef(({closeLabel:c="Close",closeVariant:t,closeButton:i=!1,onHide:r,children:s,...l},h)=>{const f=B.useContext(jC),g=HC(()=>{f?.onHide(),r?.()});return J.jsxs("div",{ref:h,...l,children:[s,i&&J.jsx(qh,{"aria-label":c,variant:t,onClick:g})]})});GC.displayName="AbstractModalHeader";const Ah=new WeakMap,Ev=(c,t)=>{if(!c||!t)return;const i=Ah.get(t)||new Map;Ah.set(t,i);let r=i.get(c);return r||(r=t.matchMedia(c),r.refCount=0,i.set(r.media,r)),r};function Wb(c,t=typeof window>"u"?void 0:window){const i=Ev(c,t),[r,s]=B.useState(()=>i?i.matches:!1);return Ob(()=>{let l=Ev(c,t);if(!l)return s(!1);let h=Ah.get(t);const f=()=>{s(l.matches)};return l.refCount++,l.addListener(f),f(),()=>{l.removeListener(f),l.refCount--,l.refCount<=0&&h?.delete(l.media),l=void 0}},[c]),r}function ew(c){const t=Object.keys(c);function i(f,g){return f===g?g:f?`${f} and ${g}`:g}function r(f){return t[Math.min(t.indexOf(f)+1,t.length-1)]}function s(f){const g=r(f);let p=c[g];return typeof p=="number"?p=`${p-.2}px`:p=`calc(${p} - 0.2px)`,`(max-width: ${p})`}function l(f){let g=c[f];return typeof g=="number"&&(g=`${g}px`),`(min-width: ${g})`}function h(f,g,p){let S;typeof f=="object"?(S=f,p=g,g=!0):(g=g||!0,S={[f]:g});let T=B.useMemo(()=>Object.entries(S).reduce((A,[K,ee])=>((ee==="up"||ee===!0)&&(A=i(A,l(K))),(ee==="down"||ee===!0)&&(A=i(A,s(K))),A),""),[JSON.stringify(S)]);return Wb(T,p)}return h}const tw=ew({xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400}),FC=B.forwardRef(({className:c,bsPrefix:t,as:i="div",...r},s)=>(t=Lt(t,"offcanvas-body"),J.jsx(i,{ref:s,className:rt(c,t),...r})));FC.displayName="OffcanvasBody";const nw={[Rn]:"show",[si]:"show"},QC=B.forwardRef(({bsPrefix:c,className:t,children:i,in:r=!1,mountOnEnter:s=!1,unmountOnExit:l=!1,appear:h=!1,...f},g)=>(c=Lt(c,"offcanvas"),J.jsx(rl,{ref:g,addEndListener:zh,in:r,mountOnEnter:s,unmountOnExit:l,appear:h,...f,childRef:Ur(i),children:(p,S)=>B.cloneElement(i,{...S,className:rt(t,i.props.className,(p===Rn||p===Ya)&&`${c}-toggling`,nw[p])})})));QC.displayName="OffcanvasToggling";const YC=B.forwardRef(({bsPrefix:c,className:t,closeLabel:i="Close",closeButton:r=!1,...s},l)=>(c=Lt(c,"offcanvas-header"),J.jsx(GC,{ref:l,...s,className:rt(t,c),closeLabel:i,closeButton:r})));YC.displayName="OffcanvasHeader";const iw=mb("h5"),VC=B.forwardRef(({className:c,bsPrefix:t,as:i=iw,...r},s)=>(t=Lt(t,"offcanvas-title"),J.jsx(i,{ref:s,className:rt(c,t),...r})));VC.displayName="OffcanvasTitle";function ow(c){return J.jsx(QC,{...c})}function rw(c){return J.jsx(LC,{...c})}const XC=B.forwardRef(({bsPrefix:c,className:t,children:i,"aria-labelledby":r,placement:s="start",responsive:l,show:h=!1,backdrop:f=!0,keyboard:g=!0,scroll:p=!1,onEscapeKeyDown:S,onShow:T,onHide:A,container:K,autoFocus:ee=!0,enforceFocus:ie=!0,restoreFocus:le=!0,restoreFocusOptions:se,onEntered:ce,onExit:ue,onExiting:G,onEnter:ae,onEntering:$,onExited:te,backdropClassName:U,manager:O,renderStaticNode:x=!1,...j},Y)=>{const ne=B.useRef();c=Lt(c,"offcanvas");const[fe,ve]=B.useState(!1),D=HC(A),X=tw(l||"xs","up");B.useEffect(()=>{ve(l?h&&!X:h)},[h,l,X]);const M=B.useMemo(()=>({onHide:D}),[D]);function _(){return O||(p?(ne.current||(ne.current=new qC({handleContainerOverflow:!1})),ne.current):Zb())}const N=(I,...z)=>{I&&(I.style.visibility="visible"),ae?.(I,...z)},v=(I,...z)=>{I&&(I.style.visibility=""),te?.(...z)},C=B.useCallback(I=>J.jsx("div",{...I,className:rt(`${c}-backdrop`,U)}),[U,c]),b=I=>J.jsx("div",{...I,...j,className:rt(t,l?`${c}-${l}`:c,`${c}-${s}`),"aria-labelledby":r,children:i});return J.jsxs(J.Fragment,{children:[!fe&&(l||x)&&b({}),J.jsx(jC.Provider,{value:M,children:J.jsx(Vb,{show:fe,ref:Y,backdrop:f,container:K,keyboard:g,autoFocus:ee,enforceFocus:ie&&!p,restoreFocus:le,restoreFocusOptions:se,onEscapeKeyDown:S,onShow:T,onHide:D,onEnter:N,onEntering:$,onEntered:ce,onExit:ue,onExiting:G,onExited:v,manager:_(),transition:ow,backdropTransition:rw,renderBackdrop:C,renderDialog:b})})]})});XC.displayName="Offcanvas";const Sc=Object.assign(XC,{Body:FC,Header:YC,Title:VC}),Eh=B.forwardRef(({bsPrefix:c,className:t,as:i="div",...r},s)=>{const l=Lt(c,"row"),h=wC(),f=RC(),g=`${l}-cols`,p=[];return h.forEach(S=>{const T=r[S];delete r[S];let A;T!=null&&typeof T=="object"?{cols:A}=T:A=T;const K=S!==f?`-${S}`:"";A!=null&&p.push(`${g}${K}-${A}`)}),J.jsx(i,{ref:s,...r,className:rt(t,l,...p)})});Eh.displayName="Row";var nh={},ih,_v;function aw(){if(_v)return ih;_v=1;function c(t,i){if(t===i)return!0;if(!t||!i)return!1;var r=t.length;if(i.length!==r)return!1;for(var s=0;s<r;s++)if(t[s]!==i[s])return!1;return!0}return ih=c,ih}var oh={},rh,bv;function sw(){if(bv)return rh;bv=1;var c=(function(){function t(i,r){var s=[],l=!0,h=!1,f=void 0;try{for(var g=i[Symbol.iterator](),p;!(l=(p=g.next()).done)&&(s.push(p.value),!(r&&s.length===r));l=!0);}catch(S){h=!0,f=S}finally{try{!l&&g.return&&g.return()}finally{if(h)throw f}}return s}return function(i,r){if(Array.isArray(i))return i;if(Symbol.iterator in Object(i))return t(i,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})();return rh=function(t){var i=t.data,r=t.multiSection;function s(p){for(p===null?p=0:p++;p<i.length&&i[p]===0;)p++;return p===i.length?null:p}function l(p){for(p===null?p=i.length-1:p--;p>=0&&i[p]===0;)p--;return p===-1?null:p}function h(p){var S=c(p,2),T=S[0],A=S[1];return r?A===null||A===i[T]-1?(T=s(T),T===null?[null,null]:[T,0]):[T,A+1]:i===0||A===i-1?[null,null]:A===null?[null,0]:[null,A+1]}function f(p){var S=c(p,2),T=S[0],A=S[1];return r?A===null||A===0?(T=l(T),T===null?[null,null]:[T,i[T]-1]):[T,A-1]:i===0||A===0?[null,null]:A===null?[null,i-1]:[null,A-1]}function g(p){return h(p)[1]===null}return{next:h,prev:f,isLast:g}},rh}var Tc={exports:{}},ah,wv;function cw(){if(wv)return ah;wv=1;var c=Object.prototype.propertyIsEnumerable;function t(r){if(r==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(r)}function i(r){var s=Object.getOwnPropertyNames(r);return Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(r))),s.filter(function(l){return c.call(r,l)})}return ah=Object.assign||function(r,s){for(var l,h,f=t(r),g=1;g<arguments.length;g++){l=arguments[g],h=i(Object(l));for(var p=0;p<h.length;p++)f[h[p]]=l[h[p]]}return f},ah}var Rv;function lw(){return Rv||(Rv=1,(function(c,t){Object.defineProperty(t,"__esModule",{value:!0});var i=(function(){function g(p,S){var T=[],A=!0,K=!1,ee=void 0;try{for(var ie=p[Symbol.iterator](),le;!(A=(le=ie.next()).done)&&(T.push(le.value),!(S&&T.length===S));A=!0);}catch(se){K=!0,ee=se}finally{try{!A&&ie.return&&ie.return()}finally{if(K)throw ee}}return T}return function(p,S){if(Array.isArray(p))return p;if(Symbol.iterator in Object(p))return g(p,S);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})();function r(g){return g&&g.__esModule?g:{default:g}}function s(g){if(Array.isArray(g)){for(var p=0,S=Array(g.length);p<g.length;p++)S[p]=g[p];return S}else return Array.from(g)}var l=cw(),h=r(l),f=function(p){return p};t.default=function(g){var p=Array.isArray(g)&&g.length===2?g:[g,null],S=i(p,2),T=S[0],A=S[1];return function(K){for(var ee=arguments.length,ie=Array(ee>1?ee-1:0),le=1;le<ee;le++)ie[le-1]=arguments[le];var se=ie.map(function(ce){return T[ce]}).filter(f);return typeof se[0]=="string"||typeof A=="function"?{key:K,className:A?A.apply(void 0,s(se)):se.join(" ")}:{key:K,style:h.default.apply(void 0,[{}].concat(s(se)))}}},c.exports=t.default})(Tc,Tc.exports)),Tc.exports}var sh={},ch={},Iv;function Qh(){return Iv||(Iv=1,(function(c){Object.defineProperty(c,"__esModule",{value:!0}),c.default=i;function t(r){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(l){return typeof l}:t=function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},t(r)}function i(r,s){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(r===s)return!1;var h=Object.keys(r),f=Object.keys(s);if(h.length!==f.length)return!0;var g={},p,S;for(p=0,S=l.length;p<S;p++)g[l[p]]=!0;for(p=0,S=h.length;p<S;p++){var T=h[p],A=r[T],K=s[T];if(A!==K){if(!g[T]||A===null||K===null||t(A)!=="object"||t(K)!=="object")return!0;var ee=Object.keys(A),ie=Object.keys(K);if(ee.length!==ie.length)return!0;for(var le=0,se=ee.length;le<se;le++){var ce=ee[le];if(A[ce]!==K[ce])return!0}}}return!1}})(ch)),ch}var Ov;function uw(){return Ov||(Ov=1,(function(c){Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var t=h(Xi()),i=s(Dr()),r=s(Qh());function s(G){return G&&G.__esModule?G:{default:G}}function l(){if(typeof WeakMap!="function")return null;var G=new WeakMap;return l=function(){return G},G}function h(G){if(G&&G.__esModule)return G;if(G===null||f(G)!=="object"&&typeof G!="function")return{default:G};var ae=l();if(ae&&ae.has(G))return ae.get(G);var $={},te=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var U in G)if(Object.prototype.hasOwnProperty.call(G,U)){var O=te?Object.getOwnPropertyDescriptor(G,U):null;O&&(O.get||O.set)?Object.defineProperty($,U,O):$[U]=G[U]}return $.default=G,ae&&ae.set(G,$),$}function f(G){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?f=function($){return typeof $}:f=function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},f(G)}function g(G,ae){if(!(G instanceof ae))throw new TypeError("Cannot call a class as a function")}function p(G,ae){for(var $=0;$<ae.length;$++){var te=ae[$];te.enumerable=te.enumerable||!1,te.configurable=!0,"value"in te&&(te.writable=!0),Object.defineProperty(G,te.key,te)}}function S(G,ae,$){return ae&&p(G.prototype,ae),G}function T(G){return function(){var ae=ie(G),$;if(ee()){var te=ie(this).constructor;$=Reflect.construct(ae,arguments,te)}else $=ae.apply(this,arguments);return A(this,$)}}function A(G,ae){return ae&&(f(ae)==="object"||typeof ae=="function")?ae:K(G)}function K(G){if(G===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return G}function ee(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function ie(G){return ie=Object.setPrototypeOf?Object.getPrototypeOf:function($){return $.__proto__||Object.getPrototypeOf($)},ie(G)}function le(G,ae){if(typeof ae!="function"&&ae!==null)throw new TypeError("Super expression must either be null or a function");G.prototype=Object.create(ae&&ae.prototype,{constructor:{value:G,writable:!0,configurable:!0}}),ae&&se(G,ae)}function se(G,ae){return se=Object.setPrototypeOf||function(te,U){return te.__proto__=U,te},se(G,ae)}function ce(G,ae,$){return ae in G?Object.defineProperty(G,ae,{value:$,enumerable:!0,configurable:!0,writable:!0}):G[ae]=$,G}var ue=(function(G){le($,G);var ae=T($);function $(){return g(this,$),ae.apply(this,arguments)}return S($,[{key:"shouldComponentUpdate",value:function(U){return(0,r.default)(U,this.props)}},{key:"render",value:function(){var U=this.props,O=U.section,x=U.renderSectionTitle,j=U.theme,Y=U.sectionKeyPrefix,ne=x(O);return ne?t.default.createElement("div",j("".concat(Y,"title"),"sectionTitle"),ne):null}}]),$})(t.Component);c.default=ue,ce(ue,"propTypes",{section:i.default.any.isRequired,renderSectionTitle:i.default.func.isRequired,theme:i.default.func.isRequired,sectionKeyPrefix:i.default.string.isRequired})})(sh)),sh}var lh={},uh={},kv;function dw(){return kv||(kv=1,(function(c){Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var t=h(Xi()),i=s(Dr()),r=s(Qh());function s(O){return O&&O.__esModule?O:{default:O}}function l(){if(typeof WeakMap!="function")return null;var O=new WeakMap;return l=function(){return O},O}function h(O){if(O&&O.__esModule)return O;if(O===null||f(O)!=="object"&&typeof O!="function")return{default:O};var x=l();if(x&&x.has(O))return x.get(O);var j={},Y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ne in O)if(Object.prototype.hasOwnProperty.call(O,ne)){var fe=Y?Object.getOwnPropertyDescriptor(O,ne):null;fe&&(fe.get||fe.set)?Object.defineProperty(j,ne,fe):j[ne]=O[ne]}return j.default=O,x&&x.set(O,j),j}function f(O){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?f=function(j){return typeof j}:f=function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j},f(O)}function g(){return g=Object.assign||function(O){for(var x=1;x<arguments.length;x++){var j=arguments[x];for(var Y in j)Object.prototype.hasOwnProperty.call(j,Y)&&(O[Y]=j[Y])}return O},g.apply(this,arguments)}function p(O,x){var j=Object.keys(O);if(Object.getOwnPropertySymbols){var Y=Object.getOwnPropertySymbols(O);x&&(Y=Y.filter(function(ne){return Object.getOwnPropertyDescriptor(O,ne).enumerable})),j.push.apply(j,Y)}return j}function S(O){for(var x=1;x<arguments.length;x++){var j=arguments[x]!=null?arguments[x]:{};x%2?p(Object(j),!0).forEach(function(Y){te(O,Y,j[Y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(O,Object.getOwnPropertyDescriptors(j)):p(Object(j)).forEach(function(Y){Object.defineProperty(O,Y,Object.getOwnPropertyDescriptor(j,Y))})}return O}function T(O,x){if(O==null)return{};var j=A(O,x),Y,ne;if(Object.getOwnPropertySymbols){var fe=Object.getOwnPropertySymbols(O);for(ne=0;ne<fe.length;ne++)Y=fe[ne],!(x.indexOf(Y)>=0)&&Object.prototype.propertyIsEnumerable.call(O,Y)&&(j[Y]=O[Y])}return j}function A(O,x){if(O==null)return{};var j={},Y=Object.keys(O),ne,fe;for(fe=0;fe<Y.length;fe++)ne=Y[fe],!(x.indexOf(ne)>=0)&&(j[ne]=O[ne]);return j}function K(O,x){if(!(O instanceof x))throw new TypeError("Cannot call a class as a function")}function ee(O,x){for(var j=0;j<x.length;j++){var Y=x[j];Y.enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty(O,Y.key,Y)}}function ie(O,x,j){return x&&ee(O.prototype,x),O}function le(O){return function(){var x=G(O),j;if(ue()){var Y=G(this).constructor;j=Reflect.construct(x,arguments,Y)}else j=x.apply(this,arguments);return se(this,j)}}function se(O,x){return x&&(f(x)==="object"||typeof x=="function")?x:ce(O)}function ce(O){if(O===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O}function ue(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function G(O){return G=Object.setPrototypeOf?Object.getPrototypeOf:function(j){return j.__proto__||Object.getPrototypeOf(j)},G(O)}function ae(O,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function");O.prototype=Object.create(x&&x.prototype,{constructor:{value:O,writable:!0,configurable:!0}}),x&&$(O,x)}function $(O,x){return $=Object.setPrototypeOf||function(Y,ne){return Y.__proto__=ne,Y},$(O,x)}function te(O,x,j){return x in O?Object.defineProperty(O,x,{value:j,enumerable:!0,configurable:!0,writable:!0}):O[x]=j,O}var U=(function(O){ae(j,O);var x=le(j);function j(){var Y;K(this,j);for(var ne=arguments.length,fe=new Array(ne),ve=0;ve<ne;ve++)fe[ve]=arguments[ve];return Y=x.call.apply(x,[this].concat(fe)),te(ce(Y),"storeItemReference",function(D){D!==null&&(Y.item=D)}),te(ce(Y),"onMouseEnter",function(D){var X=Y.props,M=X.sectionIndex,_=X.itemIndex;Y.props.onMouseEnter(D,{sectionIndex:M,itemIndex:_})}),te(ce(Y),"onMouseLeave",function(D){var X=Y.props,M=X.sectionIndex,_=X.itemIndex;Y.props.onMouseLeave(D,{sectionIndex:M,itemIndex:_})}),te(ce(Y),"onMouseDown",function(D){var X=Y.props,M=X.sectionIndex,_=X.itemIndex;Y.props.onMouseDown(D,{sectionIndex:M,itemIndex:_})}),te(ce(Y),"onClick",function(D){var X=Y.props,M=X.sectionIndex,_=X.itemIndex;Y.props.onClick(D,{sectionIndex:M,itemIndex:_})}),Y}return ie(j,[{key:"shouldComponentUpdate",value:function(ne){return(0,r.default)(ne,this.props,["renderItemData"])}},{key:"render",value:function(){var ne=this.props,fe=ne.isHighlighted,ve=ne.item,D=ne.renderItem,X=ne.renderItemData,M=T(ne,["isHighlighted","item","renderItem","renderItemData"]);return delete M.sectionIndex,delete M.itemIndex,typeof M.onMouseEnter=="function"&&(M.onMouseEnter=this.onMouseEnter),typeof M.onMouseLeave=="function"&&(M.onMouseLeave=this.onMouseLeave),typeof M.onMouseDown=="function"&&(M.onMouseDown=this.onMouseDown),typeof M.onClick=="function"&&(M.onClick=this.onClick),t.default.createElement("li",g({role:"option"},M,{ref:this.storeItemReference}),D(ve,S({isHighlighted:fe},X)))}}]),j})(t.Component);c.default=U,te(U,"propTypes",{sectionIndex:i.default.number,isHighlighted:i.default.bool.isRequired,itemIndex:i.default.number.isRequired,item:i.default.any.isRequired,renderItem:i.default.func.isRequired,renderItemData:i.default.object.isRequired,onMouseEnter:i.default.func,onMouseLeave:i.default.func,onMouseDown:i.default.func,onClick:i.default.func})})(uh)),uh}var Mv;function hw(){return Mv||(Mv=1,(function(c){Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var t=f(Xi()),i=l(Dr()),r=l(dw()),s=l(Qh());function l(U){return U&&U.__esModule?U:{default:U}}function h(){if(typeof WeakMap!="function")return null;var U=new WeakMap;return h=function(){return U},U}function f(U){if(U&&U.__esModule)return U;if(U===null||g(U)!=="object"&&typeof U!="function")return{default:U};var O=h();if(O&&O.has(U))return O.get(U);var x={},j=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Y in U)if(Object.prototype.hasOwnProperty.call(U,Y)){var ne=j?Object.getOwnPropertyDescriptor(U,Y):null;ne&&(ne.get||ne.set)?Object.defineProperty(x,Y,ne):x[Y]=U[Y]}return x.default=U,O&&O.set(U,x),x}function g(U){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?g=function(x){return typeof x}:g=function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},g(U)}function p(){return p=Object.assign||function(U){for(var O=1;O<arguments.length;O++){var x=arguments[O];for(var j in x)Object.prototype.hasOwnProperty.call(x,j)&&(U[j]=x[j])}return U},p.apply(this,arguments)}function S(U,O){var x=Object.keys(U);if(Object.getOwnPropertySymbols){var j=Object.getOwnPropertySymbols(U);O&&(j=j.filter(function(Y){return Object.getOwnPropertyDescriptor(U,Y).enumerable})),x.push.apply(x,j)}return x}function T(U){for(var O=1;O<arguments.length;O++){var x=arguments[O]!=null?arguments[O]:{};O%2?S(Object(x),!0).forEach(function(j){$(U,j,x[j])}):Object.getOwnPropertyDescriptors?Object.defineProperties(U,Object.getOwnPropertyDescriptors(x)):S(Object(x)).forEach(function(j){Object.defineProperty(U,j,Object.getOwnPropertyDescriptor(x,j))})}return U}function A(U,O){if(!(U instanceof O))throw new TypeError("Cannot call a class as a function")}function K(U,O){for(var x=0;x<O.length;x++){var j=O[x];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(U,j.key,j)}}function ee(U,O,x){return O&&K(U.prototype,O),U}function ie(U){return function(){var O=ue(U),x;if(ce()){var j=ue(this).constructor;x=Reflect.construct(O,arguments,j)}else x=O.apply(this,arguments);return le(this,x)}}function le(U,O){return O&&(g(O)==="object"||typeof O=="function")?O:se(U)}function se(U){if(U===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U}function ce(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function ue(U){return ue=Object.setPrototypeOf?Object.getPrototypeOf:function(x){return x.__proto__||Object.getPrototypeOf(x)},ue(U)}function G(U,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function");U.prototype=Object.create(O&&O.prototype,{constructor:{value:U,writable:!0,configurable:!0}}),O&&ae(U,O)}function ae(U,O){return ae=Object.setPrototypeOf||function(j,Y){return j.__proto__=Y,j},ae(U,O)}function $(U,O,x){return O in U?Object.defineProperty(U,O,{value:x,enumerable:!0,configurable:!0,writable:!0}):U[O]=x,U}var te=(function(U){G(x,U);var O=ie(x);function x(){var j;A(this,x);for(var Y=arguments.length,ne=new Array(Y),fe=0;fe<Y;fe++)ne[fe]=arguments[fe];return j=O.call.apply(O,[this].concat(ne)),$(se(j),"storeHighlightedItemReference",function(ve){j.props.onHighlightedItemChange(ve===null?null:ve.item)}),j}return ee(x,[{key:"shouldComponentUpdate",value:function(Y){return(0,s.default)(Y,this.props,["itemProps"])}},{key:"render",value:function(){var Y=this,ne=this.props,fe=ne.items,ve=ne.itemProps,D=ne.renderItem,X=ne.renderItemData,M=ne.sectionIndex,_=ne.highlightedItemIndex,N=ne.getItemId,v=ne.theme,C=ne.keyPrefix,b=M===null?C:"".concat(C,"section-").concat(M,"-"),I=typeof ve=="function";return t.default.createElement("ul",p({role:"listbox"},v("".concat(b,"items-list"),"itemsList")),fe.map(function(z,oe){var de=oe===0,Te=oe===_,Ae="".concat(b,"item-").concat(oe),qe=I?ve({sectionIndex:M,itemIndex:oe}):ve,We=T({id:N(M,oe),"aria-selected":Te},v(Ae,"item",de&&"itemFirst",Te&&"itemHighlighted"),{},qe);return Te&&(We.ref=Y.storeHighlightedItemReference),t.default.createElement(r.default,p({},We,{sectionIndex:M,isHighlighted:Te,itemIndex:oe,item:z,renderItem:D,renderItemData:X}))}))}}]),x})(t.Component);c.default=te,$(te,"propTypes",{items:i.default.array.isRequired,itemProps:i.default.oneOfType([i.default.object,i.default.func]),renderItem:i.default.func.isRequired,renderItemData:i.default.object.isRequired,sectionIndex:i.default.number,highlightedItemIndex:i.default.number,onHighlightedItemChange:i.default.func.isRequired,getItemId:i.default.func.isRequired,theme:i.default.func.isRequired,keyPrefix:i.default.string.isRequired}),$(te,"defaultProps",{sectionIndex:null})})(lh)),lh}var Nv;function fw(){return Nv||(Nv=1,(function(c){Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var t=p(Xi()),i=f(Dr()),r=f(sw()),s=f(lw()),l=f(uw()),h=f(hw());function f(_){return _&&_.__esModule?_:{default:_}}function g(){if(typeof WeakMap!="function")return null;var _=new WeakMap;return g=function(){return _},_}function p(_){if(_&&_.__esModule)return _;if(_===null||ce(_)!=="object"&&typeof _!="function")return{default:_};var N=g();if(N&&N.has(_))return N.get(_);var v={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var b in _)if(Object.prototype.hasOwnProperty.call(_,b)){var I=C?Object.getOwnPropertyDescriptor(_,b):null;I&&(I.get||I.set)?Object.defineProperty(v,b,I):v[b]=_[b]}return v.default=_,N&&N.set(_,v),v}function S(_,N){var v=Object.keys(_);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(_);N&&(C=C.filter(function(b){return Object.getOwnPropertyDescriptor(_,b).enumerable})),v.push.apply(v,C)}return v}function T(_){for(var N=1;N<arguments.length;N++){var v=arguments[N]!=null?arguments[N]:{};N%2?S(Object(v),!0).forEach(function(C){ne(_,C,v[C])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(v)):S(Object(v)).forEach(function(C){Object.defineProperty(_,C,Object.getOwnPropertyDescriptor(v,C))})}return _}function A(_,N){return se(_)||le(_,N)||ee(_,N)||K()}function K(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ee(_,N){if(_){if(typeof _=="string")return ie(_,N);var v=Object.prototype.toString.call(_).slice(8,-1);if(v==="Object"&&_.constructor&&(v=_.constructor.name),v==="Map"||v==="Set")return Array.from(v);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return ie(_,N)}}function ie(_,N){(N==null||N>_.length)&&(N=_.length);for(var v=0,C=new Array(N);v<N;v++)C[v]=_[v];return C}function le(_,N){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(_)))){var v=[],C=!0,b=!1,I=void 0;try{for(var z=_[Symbol.iterator](),oe;!(C=(oe=z.next()).done)&&(v.push(oe.value),!(N&&v.length===N));C=!0);}catch(de){b=!0,I=de}finally{try{!C&&z.return!=null&&z.return()}finally{if(b)throw I}}return v}}function se(_){if(Array.isArray(_))return _}function ce(_){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ce=function(v){return typeof v}:ce=function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},ce(_)}function ue(_,N){if(!(_ instanceof N))throw new TypeError("Cannot call a class as a function")}function G(_,N){for(var v=0;v<N.length;v++){var C=N[v];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(_,C.key,C)}}function ae(_,N,v){return N&&G(_.prototype,N),_}function $(_){return function(){var N=x(_),v;if(O()){var C=x(this).constructor;v=Reflect.construct(N,arguments,C)}else v=N.apply(this,arguments);return te(this,v)}}function te(_,N){return N&&(ce(N)==="object"||typeof N=="function")?N:U(_)}function U(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}function O(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function x(_){return x=Object.setPrototypeOf?Object.getPrototypeOf:function(v){return v.__proto__||Object.getPrototypeOf(v)},x(_)}function j(_,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function");_.prototype=Object.create(N&&N.prototype,{constructor:{value:_,writable:!0,configurable:!0}}),N&&Y(_,N)}function Y(_,N){return Y=Object.setPrototypeOf||function(C,b){return C.__proto__=b,C},Y(_,N)}function ne(_,N,v){return N in _?Object.defineProperty(_,N,{value:v,enumerable:!0,configurable:!0,writable:!0}):_[N]=v,_}var fe={},ve=function(N){return t.default.createElement("input",N)},D=function(N){var v=N.containerProps,C=N.children;return t.default.createElement("div",v,C)},X={container:"react-autowhatever__container",containerOpen:"react-autowhatever__container--open",input:"react-autowhatever__input",inputOpen:"react-autowhatever__input--open",inputFocused:"react-autowhatever__input--focused",itemsContainer:"react-autowhatever__items-container",itemsContainerOpen:"react-autowhatever__items-container--open",itemsList:"react-autowhatever__items-list",item:"react-autowhatever__item",itemFirst:"react-autowhatever__item--first",itemHighlighted:"react-autowhatever__item--highlighted",sectionContainer:"react-autowhatever__section-container",sectionContainerFirst:"react-autowhatever__section-container--first",sectionTitle:"react-autowhatever__section-title"},M=(function(_){j(v,_);var N=$(v);function v(C){var b;return ue(this,v),b=N.call(this,C),ne(U(b),"storeInputReference",function(I){I!==null&&(b.input=I);var z=b.props.inputProps.ref;z&&(typeof z=="function"?z(I):ce(z)==="object"&&Object.prototype.hasOwnProperty.call(z,"current")&&(z.current=I))}),ne(U(b),"storeItemsContainerReference",function(I){I!==null&&(b.itemsContainer=I)}),ne(U(b),"onHighlightedItemChange",function(I){b.highlightedItem=I}),ne(U(b),"getItemId",function(I,z){if(z===null)return null;var oe=b.props.id,de=I===null?"":"section-".concat(I);return"react-autowhatever-".concat(oe,"-").concat(de,"-item-").concat(z)}),ne(U(b),"onFocus",function(I){var z=b.props.inputProps;b.setState({isInputFocused:!0}),z.onFocus&&z.onFocus(I)}),ne(U(b),"onBlur",function(I){var z=b.props.inputProps;b.setState({isInputFocused:!1}),z.onBlur&&z.onBlur(I)}),ne(U(b),"onKeyDown",function(I){var z=b.props,oe=z.inputProps,de=z.highlightedSectionIndex,Te=z.highlightedItemIndex,Ae=I.keyCode;switch(Ae){case 40:case 38:{var qe=Ae===40?"next":"prev",We=b.sectionIterator[qe]([de,Te]),ht=A(We,2),ft=ht[0],at=ht[1];oe.onKeyDown(I,{newHighlightedSectionIndex:ft,newHighlightedItemIndex:at});break}default:oe.onKeyDown(I,{highlightedSectionIndex:de,highlightedItemIndex:Te})}}),b.highlightedItem=null,b.state={isInputFocused:!1},b.setSectionsItems(C),b.setSectionIterator(C),b.setTheme(C),b}return ae(v,[{key:"componentDidMount",value:function(){this.ensureHighlightedItemIsVisible()}},{key:"UNSAFE_componentWillReceiveProps",value:function(b){b.items!==this.props.items&&this.setSectionsItems(b),(b.items!==this.props.items||b.multiSection!==this.props.multiSection)&&this.setSectionIterator(b),b.theme!==this.props.theme&&this.setTheme(b)}},{key:"componentDidUpdate",value:function(){this.ensureHighlightedItemIsVisible()}},{key:"setSectionsItems",value:function(b){b.multiSection&&(this.sectionsItems=b.items.map(function(I){return b.getSectionItems(I)}),this.sectionsLengths=this.sectionsItems.map(function(I){return I.length}),this.allSectionsAreEmpty=this.sectionsLengths.every(function(I){return I===0}))}},{key:"setSectionIterator",value:function(b){this.sectionIterator=(0,r.default)({multiSection:b.multiSection,data:b.multiSection?this.sectionsLengths:b.items.length})}},{key:"setTheme",value:function(b){this.theme=(0,s.default)(b.theme)}},{key:"renderSections",value:function(){var b=this;if(this.allSectionsAreEmpty)return null;var I=this.theme,z=this.props,oe=z.id,de=z.items,Te=z.renderItem,Ae=z.renderItemData,qe=z.renderSectionTitle,We=z.highlightedSectionIndex,ht=z.highlightedItemIndex,ft=z.itemProps;return de.map(function(at,we){var Xt="react-autowhatever-".concat(oe,"-"),sn="".concat(Xt,"section-").concat(we,"-"),cn=we===0;return t.default.createElement("div",I("".concat(sn,"container"),"sectionContainer",cn&&"sectionContainerFirst"),t.default.createElement(l.default,{section:at,renderSectionTitle:qe,theme:I,sectionKeyPrefix:sn}),t.default.createElement(h.default,{items:b.sectionsItems[we],itemProps:ft,renderItem:Te,renderItemData:Ae,sectionIndex:we,highlightedItemIndex:We===we?ht:null,onHighlightedItemChange:b.onHighlightedItemChange,getItemId:b.getItemId,theme:I,keyPrefix:Xt,ref:b.storeItemsListReference}))})}},{key:"renderItems",value:function(){var b=this.props.items;if(b.length===0)return null;var I=this.theme,z=this.props,oe=z.id,de=z.renderItem,Te=z.renderItemData,Ae=z.highlightedSectionIndex,qe=z.highlightedItemIndex,We=z.itemProps;return t.default.createElement(h.default,{items:b,itemProps:We,renderItem:de,renderItemData:Te,highlightedItemIndex:Ae===null?qe:null,onHighlightedItemChange:this.onHighlightedItemChange,getItemId:this.getItemId,theme:I,keyPrefix:"react-autowhatever-".concat(oe,"-")})}},{key:"ensureHighlightedItemIsVisible",value:function(){var b=this.highlightedItem;if(b){var I=this.itemsContainer,z=b.offsetParent===I?b.offsetTop:b.offsetTop-I.offsetTop,oe=I.scrollTop;z<oe?oe=z:z+b.offsetHeight>oe+I.offsetHeight&&(oe=z+b.offsetHeight-I.offsetHeight),oe!==I.scrollTop&&(I.scrollTop=oe)}}},{key:"render",value:function(){var b=this.theme,I=this.props,z=I.id,oe=I.multiSection,de=I.renderInputComponent,Te=I.renderItemsContainer,Ae=I.highlightedSectionIndex,qe=I.highlightedItemIndex,We=this.state.isInputFocused,ht=oe?this.renderSections():this.renderItems(),ft=ht!==null,at=this.getItemId(Ae,qe),we="react-autowhatever-".concat(z),Xt=T({role:"combobox","aria-haspopup":"listbox","aria-owns":we,"aria-expanded":ft},b("react-autowhatever-".concat(z,"-container"),"container",ft&&"containerOpen"),{},this.props.containerProps),sn=de(T({type:"text",value:"",autoComplete:"off","aria-autocomplete":"list","aria-controls":we,"aria-activedescendant":at},b("react-autowhatever-".concat(z,"-input"),"input",ft&&"inputOpen",We&&"inputFocused"),{},this.props.inputProps,{onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.props.inputProps.onKeyDown&&this.onKeyDown,ref:this.storeInputReference})),cn=Te({containerProps:T({id:we,role:"listbox"},b("react-autowhatever-".concat(z,"-items-container"),"itemsContainer",ft&&"itemsContainerOpen"),{ref:this.storeItemsContainerReference}),children:ht});return t.default.createElement("div",Xt,sn,cn)}}]),v})(t.Component);c.default=M,ne(M,"propTypes",{id:i.default.string,multiSection:i.default.bool,renderInputComponent:i.default.func,renderItemsContainer:i.default.func,items:i.default.array.isRequired,renderItem:i.default.func,renderItemData:i.default.object,renderSectionTitle:i.default.func,getSectionItems:i.default.func,containerProps:i.default.object,inputProps:i.default.object,itemProps:i.default.oneOfType([i.default.object,i.default.func]),highlightedSectionIndex:i.default.number,highlightedItemIndex:i.default.number,theme:i.default.oneOfType([i.default.object,i.default.array])}),ne(M,"defaultProps",{id:"1",multiSection:!1,renderInputComponent:ve,renderItemsContainer:D,renderItem:function(){throw new Error("`renderItem` must be provided")},renderItemData:fe,renderSectionTitle:function(){throw new Error("`renderSectionTitle` must be provided")},getSectionItems:function(){throw new Error("`getSectionItems` must be provided")},containerProps:fe,inputProps:fe,itemProps:fe,highlightedSectionIndex:null,highlightedItemIndex:null,theme:X})})(oh)),oh}var po={},Dv;function gw(){if(Dv)return po;Dv=1,Object.defineProperty(po,"__esModule",{value:!0}),po.mapToAutowhateverTheme=po.defaultTheme=void 0;var c={container:"react-autosuggest__container",containerOpen:"react-autosuggest__container--open",input:"react-autosuggest__input",inputOpen:"react-autosuggest__input--open",inputFocused:"react-autosuggest__input--focused",suggestionsContainer:"react-autosuggest__suggestions-container",suggestionsContainerOpen:"react-autosuggest__suggestions-container--open",suggestionsList:"react-autosuggest__suggestions-list",suggestion:"react-autosuggest__suggestion",suggestionFirst:"react-autosuggest__suggestion--first",suggestionHighlighted:"react-autosuggest__suggestion--highlighted",sectionContainer:"react-autosuggest__section-container",sectionContainerFirst:"react-autosuggest__section-container--first",sectionTitle:"react-autosuggest__section-title"};po.defaultTheme=c;var t=function(r){var s={};for(var l in r)switch(l){case"suggestionsContainer":s.itemsContainer=r[l];break;case"suggestionsContainerOpen":s.itemsContainerOpen=r[l];break;case"suggestion":s.item=r[l];break;case"suggestionFirst":s.itemFirst=r[l];break;case"suggestionHighlighted":s.itemHighlighted=r[l];break;case"suggestionsList":s.itemsList=r[l];break;default:s[l]=r[l]}return s};return po.mapToAutowhateverTheme=t,po}var Uv;function mw(){return Uv||(Uv=1,(function(c){Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var t=g(Xi()),i=h(Dr()),r=h(aw()),s=h(fw()),l=gw();function h(M){return M&&M.__esModule?M:{default:M}}function f(){if(typeof WeakMap!="function")return null;var M=new WeakMap;return f=function(){return M},M}function g(M){if(M&&M.__esModule)return M;if(M===null||p(M)!=="object"&&typeof M!="function")return{default:M};var _=f();if(_&&_.has(M))return _.get(M);var N={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var C in M)if(Object.prototype.hasOwnProperty.call(M,C)){var b=v?Object.getOwnPropertyDescriptor(M,C):null;b&&(b.get||b.set)?Object.defineProperty(N,C,b):N[C]=M[C]}return N.default=M,_&&_.set(M,N),N}function p(M){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?p=function(N){return typeof N}:p=function(N){return N&&typeof Symbol=="function"&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":typeof N},p(M)}function S(M,_){var N=Object.keys(M);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(M);_&&(v=v.filter(function(C){return Object.getOwnPropertyDescriptor(M,C).enumerable})),N.push.apply(N,v)}return N}function T(M){for(var _=1;_<arguments.length;_++){var N=arguments[_]!=null?arguments[_]:{};_%2?S(Object(N),!0).forEach(function(v){$(M,v,N[v])}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(N)):S(Object(N)).forEach(function(v){Object.defineProperty(M,v,Object.getOwnPropertyDescriptor(N,v))})}return M}function A(M,_){if(!(M instanceof _))throw new TypeError("Cannot call a class as a function")}function K(M,_){for(var N=0;N<_.length;N++){var v=_[N];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(M,v.key,v)}}function ee(M,_,N){return _&&K(M.prototype,_),M}function ie(M){return function(){var _=ue(M),N;if(ce()){var v=ue(this).constructor;N=Reflect.construct(_,arguments,v)}else N=_.apply(this,arguments);return le(this,N)}}function le(M,_){return _&&(p(_)==="object"||typeof _=="function")?_:se(M)}function se(M){if(M===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M}function ce(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function ue(M){return ue=Object.setPrototypeOf?Object.getPrototypeOf:function(N){return N.__proto__||Object.getPrototypeOf(N)},ue(M)}function G(M,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function");M.prototype=Object.create(_&&_.prototype,{constructor:{value:M,writable:!0,configurable:!0}}),_&&ae(M,_)}function ae(M,_){return ae=Object.setPrototypeOf||function(v,C){return v.__proto__=C,v},ae(M,_)}function $(M,_,N){return _ in M?Object.defineProperty(M,_,{value:N,enumerable:!0,configurable:!0,writable:!0}):M[_]=N,M}var te=function(){return!0},U=function(_){return _.trim().length>0},O=function(_){var N=_.containerProps,v=_.children;return t.default.createElement("div",N,v)},x="suggestions-revealed",j="suggestions-updated",Y="suggestion-selected",ne="input-focused",fe="input-changed",ve="input-blurred",D="escape-pressed",X=(function(M){G(N,M);var _=ie(N);function N(v){var C,b=v.alwaysRenderSuggestions;return A(this,N),C=_.call(this),$(se(C),"onDocumentMouseDown",function(I){C.justClickedOnSuggestionsContainer=!1;for(var z=I.detail&&I.detail.target||I.target;z!==null&&z!==document;){if(z.getAttribute&&z.getAttribute("data-suggestion-index")!==null)return;if(z===C.suggestionsContainer){C.justClickedOnSuggestionsContainer=!0;return}z=z.parentNode}}),$(se(C),"storeAutowhateverRef",function(I){I!==null&&(C.autowhatever=I)}),$(se(C),"onSuggestionMouseEnter",function(I,z){var oe=z.sectionIndex,de=z.itemIndex;C.updateHighlightedSuggestion(oe,de),I.target===C.pressedSuggestion&&(C.justSelectedSuggestion=!0),C.justMouseEntered=!0,setTimeout(function(){C.justMouseEntered=!1})}),$(se(C),"highlightFirstSuggestion",function(){C.updateHighlightedSuggestion(C.props.multiSection?0:null,0)}),$(se(C),"onDocumentMouseUp",function(){C.pressedSuggestion&&!C.justSelectedSuggestion&&C.input.focus(),C.pressedSuggestion=null}),$(se(C),"onSuggestionMouseDown",function(I){C.justSelectedSuggestion||(C.justSelectedSuggestion=!0,C.pressedSuggestion=I.target)}),$(se(C),"onSuggestionsClearRequested",function(){var I=C.props.onSuggestionsClearRequested;I&&I()}),$(se(C),"onSuggestionSelected",function(I,z){var oe=C.props,de=oe.alwaysRenderSuggestions,Te=oe.onSuggestionSelected,Ae=oe.onSuggestionsFetchRequested;Te&&Te(I,z);var qe=C.props.shouldKeepSuggestionsOnSelect(z.suggestion);de||qe?Ae({value:z.suggestionValue,reason:Y}):C.onSuggestionsClearRequested(),C.resetHighlightedSuggestion()}),$(se(C),"onSuggestionClick",function(I){var z=C.props,oe=z.alwaysRenderSuggestions,de=z.focusInputOnSuggestionClick,Te=C.getSuggestionIndices(C.findSuggestionElement(I.target)),Ae=Te.sectionIndex,qe=Te.suggestionIndex,We=C.getSuggestion(Ae,qe),ht=C.props.getSuggestionValue(We);C.maybeCallOnChange(I,ht,"click"),C.onSuggestionSelected(I,{suggestion:We,suggestionValue:ht,suggestionIndex:qe,sectionIndex:Ae,method:"click"});var ft=C.props.shouldKeepSuggestionsOnSelect(We);oe||ft||C.closeSuggestions(),de===!0?C.input.focus():C.onBlur(),setTimeout(function(){C.justSelectedSuggestion=!1})}),$(se(C),"onBlur",function(){var I=C.props,z=I.inputProps,oe=I.shouldRenderSuggestions,de=z.value,Te=z.onBlur,Ae=C.getHighlightedSuggestion(),qe=oe(de,ve);C.setState({isFocused:!1,highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null,valueBeforeUpDown:null,isCollapsed:!qe}),Te&&Te(C.blurEvent,{highlightedSuggestion:Ae})}),$(se(C),"onSuggestionMouseLeave",function(I){C.resetHighlightedSuggestion(!1),C.justSelectedSuggestion&&I.target===C.pressedSuggestion&&(C.justSelectedSuggestion=!1)}),$(se(C),"onSuggestionTouchStart",function(){C.justSelectedSuggestion=!0}),$(se(C),"onSuggestionTouchMove",function(){C.justSelectedSuggestion=!1,C.pressedSuggestion=null,C.input.focus()}),$(se(C),"itemProps",function(I){var z=I.sectionIndex,oe=I.itemIndex;return{"data-section-index":z,"data-suggestion-index":oe,onMouseEnter:C.onSuggestionMouseEnter,onMouseLeave:C.onSuggestionMouseLeave,onMouseDown:C.onSuggestionMouseDown,onTouchStart:C.onSuggestionTouchStart,onTouchMove:C.onSuggestionTouchMove,onClick:C.onSuggestionClick}}),$(se(C),"renderSuggestionsContainer",function(I){var z=I.containerProps,oe=I.children,de=C.props.renderSuggestionsContainer;return de({containerProps:z,children:oe,query:C.getQuery()})}),C.state={isFocused:!1,isCollapsed:!b,highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null,valueBeforeUpDown:null},C.justPressedUpDown=!1,C.justMouseEntered=!1,C.pressedSuggestion=null,C}return ee(N,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.onDocumentMouseDown),document.addEventListener("mouseup",this.onDocumentMouseUp),this.input=this.autowhatever.input,this.suggestionsContainer=this.autowhatever.itemsContainer}},{key:"UNSAFE_componentWillReceiveProps",value:function(C){var b=this.state.highlightedSuggestionIndex===0&&this.props.highlightFirstSuggestion&&!C.highlightFirstSuggestion;(0,r.default)(C.suggestions,this.props.suggestions)?C.highlightFirstSuggestion&&C.suggestions.length>0&&this.justPressedUpDown===!1&&this.justMouseEntered===!1?this.highlightFirstSuggestion():b&&this.resetHighlightedSuggestion():this.willRenderSuggestions(C,j)?(this.state.isCollapsed&&!this.justSelectedSuggestion&&this.revealSuggestions(),b&&this.resetHighlightedSuggestion()):this.resetHighlightedSuggestion()}},{key:"componentDidUpdate",value:function(C,b){var I=this.props,z=I.suggestions,oe=I.onSuggestionHighlighted,de=I.highlightFirstSuggestion;if(!(0,r.default)(z,C.suggestions)&&z.length>0&&de){this.highlightFirstSuggestion();return}if(oe){var Te=this.getHighlightedSuggestion(),Ae=b.highlightedSuggestion;Te!=Ae&&oe({suggestion:Te})}}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.onDocumentMouseDown),document.removeEventListener("mouseup",this.onDocumentMouseUp)}},{key:"updateHighlightedSuggestion",value:function(C,b,I){var z=this;this.setState(function(oe){var de=oe.valueBeforeUpDown;return b===null?de=null:de===null&&typeof I<"u"&&(de=I),{highlightedSectionIndex:C,highlightedSuggestionIndex:b,highlightedSuggestion:b===null?null:z.getSuggestion(C,b),valueBeforeUpDown:de}})}},{key:"resetHighlightedSuggestion",value:function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.setState(function(b){var I=b.valueBeforeUpDown;return{highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null,valueBeforeUpDown:C?null:I}})}},{key:"revealSuggestions",value:function(){this.setState({isCollapsed:!1})}},{key:"closeSuggestions",value:function(){this.setState({highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null,valueBeforeUpDown:null,isCollapsed:!0})}},{key:"getSuggestion",value:function(C,b){var I=this.props,z=I.suggestions,oe=I.multiSection,de=I.getSectionSuggestions;return oe?de(z[C])[b]:z[b]}},{key:"getHighlightedSuggestion",value:function(){var C=this.state,b=C.highlightedSectionIndex,I=C.highlightedSuggestionIndex;return I===null?null:this.getSuggestion(b,I)}},{key:"getSuggestionValueByIndex",value:function(C,b){var I=this.props.getSuggestionValue;return I(this.getSuggestion(C,b))}},{key:"getSuggestionIndices",value:function(C){var b=C.getAttribute("data-section-index"),I=C.getAttribute("data-suggestion-index");return{sectionIndex:typeof b=="string"?parseInt(b,10):null,suggestionIndex:parseInt(I,10)}}},{key:"findSuggestionElement",value:function(C){var b=C;do{if(b.getAttribute&&b.getAttribute("data-suggestion-index")!==null)return b;b=b.parentNode}while(b!==null);throw console.error("Clicked element:",C),new Error("Couldn't find suggestion element")}},{key:"maybeCallOnChange",value:function(C,b,I){var z=this.props.inputProps,oe=z.value,de=z.onChange;b!==oe&&de(C,{newValue:b,method:I})}},{key:"willRenderSuggestions",value:function(C,b){var I=C.suggestions,z=C.inputProps,oe=C.shouldRenderSuggestions,de=z.value;return I.length>0&&oe(de,b)}},{key:"getQuery",value:function(){var C=this.props.inputProps,b=C.value,I=this.state.valueBeforeUpDown;return(I===null?b:I).trim()}},{key:"render",value:function(){var C=this,b=this.props,I=b.suggestions,z=b.renderInputComponent,oe=b.onSuggestionsFetchRequested,de=b.renderSuggestion,Te=b.inputProps,Ae=b.multiSection,qe=b.renderSectionTitle,We=b.id,ht=b.getSectionSuggestions,ft=b.theme,at=b.getSuggestionValue,we=b.alwaysRenderSuggestions,Xt=b.highlightFirstSuggestion,sn=b.containerProps,cn=this.state,zr=cn.isFocused,Io=cn.isCollapsed,Oo=cn.highlightedSectionIndex,ns=cn.highlightedSuggestionIndex,ko=cn.valueBeforeUpDown,yt=we?te:this.props.shouldRenderSuggestions,hi=Te.value,Br=Te.onFocus,Kr=Te.onKeyDown,Mo=this.willRenderSuggestions(this.props,"render"),No=we||zr&&!Io&&Mo,is=No?I:[],wl=T({},Te,{onFocus:function(De){if(!C.justSelectedSuggestion&&!C.justClickedOnSuggestionsContainer){var vt=yt(hi,ne);C.setState({isFocused:!0,isCollapsed:!vt}),Br&&Br(De),vt&&oe({value:hi,reason:ne})}},onBlur:function(De){if(C.justClickedOnSuggestionsContainer){C.input.focus();return}C.blurEvent=De,C.justSelectedSuggestion||(C.onBlur(),C.onSuggestionsClearRequested())},onChange:function(De){var vt=De.target.value,gt=yt(vt,fe);C.maybeCallOnChange(De,vt,"type"),C.suggestionsContainer&&(C.suggestionsContainer.scrollTop=0),C.setState(T({},Xt?{}:{highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null},{valueBeforeUpDown:null,isCollapsed:!gt})),gt?oe({value:vt,reason:fe}):C.onSuggestionsClearRequested()},onKeyDown:function(De,vt){var gt=De.keyCode;switch(gt){case 40:case 38:if(Io)yt(hi,x)&&(oe({value:hi,reason:x}),C.revealSuggestions(),De.preventDefault());else if(I.length>0){var os=vt.newHighlightedSectionIndex,qr=vt.newHighlightedItemIndex,jr;qr===null?jr=ko===null?hi:ko:jr=C.getSuggestionValueByIndex(os,qr),C.updateHighlightedSuggestion(os,qr,hi),C.maybeCallOnChange(De,jr,gt===40?"down":"up"),De.preventDefault()}C.justPressedUpDown=!0,setTimeout(function(){C.justPressedUpDown=!1});break;case 13:{if(De.keyCode===229)break;var fi=C.getHighlightedSuggestion();if(No&&!we&&C.closeSuggestions(),fi!=null){De.preventDefault();var Ji=at(fi);C.maybeCallOnChange(De,Ji,"enter"),C.onSuggestionSelected(De,{suggestion:fi,suggestionValue:Ji,suggestionIndex:ns,sectionIndex:Oo,method:"enter"}),C.justSelectedSuggestion=!0,setTimeout(function(){C.justSelectedSuggestion=!1})}break}case 27:{No&&De.preventDefault();var $i=No&&!we;if(ko===null){if(!$i){var Sn="";C.maybeCallOnChange(De,Sn,"escape"),yt(Sn,D)?oe({value:Sn,reason:D}):C.onSuggestionsClearRequested()}}else C.maybeCallOnChange(De,ko,"escape");$i?(C.onSuggestionsClearRequested(),C.closeSuggestions()):C.resetHighlightedSuggestion();break}}Kr&&Kr(De)}}),Rl={query:this.getQuery()};return t.default.createElement(s.default,{multiSection:Ae,items:is,renderInputComponent:z,renderItemsContainer:this.renderSuggestionsContainer,renderItem:de,renderItemData:Rl,renderSectionTitle:qe,getSectionItems:ht,highlightedSectionIndex:Oo,highlightedItemIndex:ns,containerProps:sn,inputProps:wl,itemProps:this.itemProps,theme:(0,l.mapToAutowhateverTheme)(ft),id:We,ref:this.storeAutowhateverRef})}}]),N})(t.Component);c.default=X,$(X,"propTypes",{suggestions:i.default.array.isRequired,onSuggestionsFetchRequested:function(_,N){var v=_[N];if(typeof v!="function")throw new Error("'onSuggestionsFetchRequested' must be implemented. See: https://github.com/moroshko/react-autosuggest#onSuggestionsFetchRequestedProp")},onSuggestionsClearRequested:function(_,N){var v=_[N];if(_.alwaysRenderSuggestions===!1&&typeof v!="function")throw new Error("'onSuggestionsClearRequested' must be implemented. See: https://github.com/moroshko/react-autosuggest#onSuggestionsClearRequestedProp")},shouldKeepSuggestionsOnSelect:i.default.func,onSuggestionSelected:i.default.func,onSuggestionHighlighted:i.default.func,renderInputComponent:i.default.func,renderSuggestionsContainer:i.default.func,getSuggestionValue:i.default.func.isRequired,renderSuggestion:i.default.func.isRequired,inputProps:function(_,N){var v=_[N];if(!v)throw new Error("'inputProps' must be passed.");if(!Object.prototype.hasOwnProperty.call(v,"value"))throw new Error("'inputProps' must have 'value'.");if(!Object.prototype.hasOwnProperty.call(v,"onChange"))throw new Error("'inputProps' must have 'onChange'.")},shouldRenderSuggestions:i.default.func,alwaysRenderSuggestions:i.default.bool,multiSection:i.default.bool,renderSectionTitle:function(_,N){var v=_[N];if(_.multiSection===!0&&typeof v!="function")throw new Error("'renderSectionTitle' must be implemented. See: https://github.com/moroshko/react-autosuggest#renderSectionTitleProp")},getSectionSuggestions:function(_,N){var v=_[N];if(_.multiSection===!0&&typeof v!="function")throw new Error("'getSectionSuggestions' must be implemented. See: https://github.com/moroshko/react-autosuggest#getSectionSuggestionsProp")},focusInputOnSuggestionClick:i.default.bool,highlightFirstSuggestion:i.default.bool,theme:i.default.object,id:i.default.string,containerProps:i.default.object}),$(X,"defaultProps",{renderSuggestionsContainer:O,shouldRenderSuggestions:U,alwaysRenderSuggestions:!1,multiSection:!1,shouldKeepSuggestionsOnSelect:function(){return!1},focusInputOnSuggestionClick:!0,highlightFirstSuggestion:!1,theme:l.defaultTheme,id:"1",containerProps:{}})})(nh)),nh}var dh,xv;function pw(){return xv||(xv=1,dh=mw().default),dh}var yw=pw();const vw=wo(yw);var Oc={exports:{}},Cw=Oc.exports,Pv;function Sw(){return Pv||(Pv=1,(function(c,t){(function(i,r){c.exports=r()})(Cw,(()=>{return i={772:(s,l,h)=>{const f=h(826).remove,g=/[.*+?^${}()|[\]\\]/g,p=/[a-z0-9_]/i,S=/\s+/;s.exports=function(T,A,K){var ee,ie;ie={insideWords:!1,findAllOccurrences:!1,requireMatchAll:!1},ee=(ee=K)||{},Object.keys(ee).forEach((ce=>{ie[ce]=!!ee[ce]})),K=ie;const le=Array.from(T).map((ce=>f(ce)));let se=le.join("");return(A=f(A)).trim().split(S).filter((ce=>ce.length>0)).reduce(((ce,ue)=>{const G=ue.length,ae=!K.insideWords&&p.test(ue[0])?"\\b":"",$=new RegExp(ae+ue.replace(g,"\\$&"),"i");let te,U;if(te=$.exec(se),K.requireMatchAll&&te===null)return se="",[];for(;te;){U=te.index;const O=G-le.slice(U,U+G).join("").length,x=U-le.slice(0,U).join("").length,j=[U+x,U+G+x+O];if(j[0]!==j[1]&&ce.push(j),se=se.slice(0,U)+new Array(G+1).join(" ")+se.slice(U+G),!K.findAllOccurrences)break;te=$.exec(se)}return ce}),[]).sort(((ce,ue)=>ce[0]-ue[0]))}},826:s=>{var l={:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"AE",:"A",:"A",:"A",:"C",:"C",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"I",:"I",:"I",:"I",:"I",:"I",:"D",:"N",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"U",:"U",:"U",:"U",:"Y",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"ae",:"a",:"a",:"a",:"c",:"c",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"i",:"i",:"i",:"i",:"i",:"i",:"d",:"n",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"u",:"u",:"u",:"u",:"y",:"y",:"A",:"a",:"A",:"a",:"A",:"a",:"C",:"c",:"C",:"c",:"C",:"c",:"C",:"c",C:"C",c:"c",:"D",:"d",:"D",:"d",:"E",:"e",:"E",:"e",:"E",:"e",:"E",:"e",:"E",:"e",:"G",:"G",:"g",:"g",:"G",:"g",:"G",:"g",:"G",:"g",:"H",:"h",:"H",:"h",:"H",:"h",:"I",:"i",:"I",:"i",:"I",:"i",:"I",:"i",:"I",:"i",:"IJ",:"ij",:"J",:"j",:"K",:"k",:"K",:"k",K:"K",k:"k",:"L",:"l",:"L",:"l",:"L",:"l",:"L",:"l",:"l",:"l",:"M",:"m",M:"M",m:"m",:"N",:"n",:"N",:"n",:"N",:"n",:"n",N:"N",n:"n",:"O",:"o",:"O",:"o",:"O",:"o",:"OE",:"oe",P:"P",p:"p",:"R",:"r",:"R",:"r",:"R",:"r",R:"R",r:"r",:"R",:"r",:"S",:"s",:"S",:"s",:"S",:"S",:"s",:"s",:"S",:"s",:"T",:"t",:"t",:"T",:"T",:"t",:"T",:"t",T:"T",t:"t",:"U",:"u",:"U",:"u",:"U",:"u",:"U",:"u",:"U",:"u",:"U",:"u",:"U",:"u",V:"V",v:"v",:"W",:"w",:"W",:"w",X:"X",x:"x",:"Y",:"y",:"Y",Y:"Y",y:"y",:"Z",:"z",:"Z",:"z",:"Z",:"z",:"s",:"f",:"O",:"o",:"U",:"u",:"A",:"a",:"I",:"i",:"O",:"o",:"U",:"u",:"U",:"u",:"U",:"u",:"U",:"u",:"U",:"u",:"U",:"u",:"U",:"u",:"A",:"a",:"AE",:"ae",:"O",:"o",:"TH",:"th",:"P",:"p",:"S",:"s",X:"X",x:"x",:"",:"",:"",:"",A:"A",a:"a",E:"E",e:"e",I:"I",i:"i",:"N",:"n",:"O",:"o",:"O",:"o",:"U",:"u",:"W",:"w",:"Y",:"y",:"A",:"a",:"E",:"e",:"I",:"i",:"O",:"o",:"R",:"r",:"U",:"u",B:"B",b:"b",:"C",:"c",:"E",:"e",F:"F",f:"f",:"G",:"g",:"H",:"h",J:"J",:"j",:"K",:"k",M:"M",m:"m",P:"P",p:"p",Q:"Q",q:"q",:"R",:"r",:"S",:"s",V:"V",v:"v",W:"W",w:"w",X:"X",x:"x",Y:"Y",y:"y",A:"A",a:"a",B:"B",b:"b",:"D",:"d",:"E",:"e",:"E",:"e",:"H",:"h",I:"I",i:"i",:"I",:"i",M:"M",m:"m",O:"O",o:"o",Q:"Q",q:"q",U:"U",u:"u",X:"X",x:"x",Z:"Z",z:"z"},h=Object.keys(l).join("|"),f=new RegExp(h,"g"),g=new RegExp(h,""),p=function(S){return S.replace(f,(function(T){return l[T]}))};s.exports=p,s.exports.has=function(S){return!!S.match(g)},s.exports.remove=p}},r={},(function s(l){var h=r[l];if(h!==void 0)return h.exports;var f=r[l]={exports:{}};return i[l](f,f.exports,s),f.exports})(772);var i,r}))})(Oc)),Oc.exports}var Tw=Sw();const Aw=wo(Tw);var kc={exports:{}},Ew=kc.exports,Hv;function _w(){return Hv||(Hv=1,(function(c,t){(function(i,r){c.exports=r()})(Ew,(()=>{return i={705:s=>{s.exports=function(l,h){const f=[];return h.length===0?f.push({text:l,highlight:!1}):h[0][0]>0&&f.push({text:l.slice(0,h[0][0]),highlight:!1}),h.forEach(((g,p)=>{const S=g[0],T=g[1];f.push({text:l.slice(S,T),highlight:!0}),p===h.length-1?T<l.length&&f.push({text:l.slice(T,l.length),highlight:!1}):T<h[p+1][0]&&f.push({text:l.slice(T,h[p+1][0]),highlight:!1})})),f}}},r={},(function s(l){var h=r[l];if(h!==void 0)return h.exports;var f=r[l]={exports:{}};return i[l](f,f.exports,s),f.exports})(705);var i,r}))})(kc)),kc.exports}var bw=_w();const ww=wo(bw),Rw=c=>c?new Date(c).toLocaleString([],{dateStyle:"short"}):"",Iw=c=>c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");function Ow(c,t=20){let i;return(...s)=>{clearTimeout(i),i=setTimeout(()=>c(...s),t)}}class kr{constructor(t){if(t){const{Time:i,NickName:r}=t;this.whoWhen={time:new Date(i),nickName:r}}}whoWhen=void 0}class JC{constructor(t){if(t){const{time:i,nickName:r}=t;this.whoWhenDto={Time:new Date(i),NickName:r}}}whoWhenDto=void 0}class kw{constructor(t,i){const{questionKey:r,assignedAnswerKey:s}=t;this.historyDto={Workspace:i,QuestionKey:{TopId:r.topId,Id:r.id,ParentId:r.parentId},AnswerKey:{TopId:s.topId,Id:s.id},UserAction:t.userAction,Created:new JC(t.created).whoWhenDto}}historyDto}class Mw{constructor(t,i){const{questionKey:r,filter:s,created:l}=t;this.historyFilterDto={Workspace:i,Filter:s,QuestionKey:{Workspace:i,TopId:r.topId,Id:r.id,ParentId:r.parentId},Created:new JC(l).whoWhenDto}}historyFilterDto}class Nw{constructor(t){const{TopId:i,ParentId:r,Id:s,Level:l,Title:h,HasSubCategories:f,NumOfQuestions:g,Link:p}=t;this.cat={topId:i,id:s,parentId:r??null,level:l,title:h,hasSubCategories:f,numOfQuestions:g,link:p??"",catRows:[]}}cat}class Dw{constructor(t){const{QuestionKey:i,Filter:r,Created:s,LastUsed:l,NumOfUsages:h}=t;this.relatedFilter={questionKey:i??null,filter:r,created:s?new kr(s).whoWhen:null,lastUsed:l?new kr(l).whoWhen:null,numOfUsages:h}}relatedFilter}class Uw{constructor(t){const i=t.AssignedAnswerDtos?t.AssignedAnswerDtos.map(s=>new xw(s).assignedAnswer):[],r=t.RelatedFilterDtos?t.RelatedFilterDtos.map(s=>new Dw(s).relatedFilter):[];this.question={topId:t.TopId,parentId:t.ParentId??"",id:t.Id,title:t.Title,categoryTitle:t.CategoryTitle,assignedAnswers:i,numOfAssignedAnswers:t.NumOfAssignedAnswers??0,relatedFilters:r,numOfRelatedFilters:t.NumOfRelatedFilters??0,source:t.Source??0,status:t.Status??0,included:t.Included!==void 0,created:new kr(t.Created).whoWhen,modified:t.Modified?new kr(t.Modified).whoWhen:void 0}}question}class Mc{constructor(t){this.questionKey={topId:t.topId,parentId:t.parentId??null,id:t.id}}questionKey;toQuery=t=>{const{topId:i,parentId:r,id:s}=this.questionKey;return[`qKey.workspace=${encodeURIComponent(t)}`,`qKey.topId=${encodeURIComponent(i)}`,`qKey.parentId=${encodeURIComponent(r??"null")}`,`qKey.id=${encodeURIComponent(s)}`].join("&")}}class xw{constructor(t){const{TopId:i,Id:r,AnswerTitle:s,AnswerLink:l,Created:h,Modified:f}=t;this.assignedAnswer={topId:i,id:r,answerTitle:s,answerLink:l,created:new kr(h).whoWhen,modified:new kr(f).whoWhen}}assignedAnswer}const Pw=vw;class Hw extends Hn.Component{state;isMob;allCats;searchQuestions;debouncedLoadSuggestions;constructor(t){console.log("AutoSuggestQuestions CONSTRUCTOR"),super(t),this.state={value:t.tekst||"",suggestions:[],noSuggestions:!1,highlighted:"",isLoading:!1},this.allCats=t.allCats,this.searchQuestions=t.searchQuestions,this.isMob=!1,this.loadSuggestions=this.loadSuggestions.bind(this),this.debouncedLoadSuggestions=Ow(this.loadSuggestions,300)}async loadSuggestions(t){this.setState({isLoading:!0}),console.time();const i=await this.getSuggestions(t);console.timeEnd(),t===this.state.value?this.setState({isLoading:!1,suggestions:i,noSuggestions:i.length===0}):this.setState({isLoading:!1})}componentDidMount(){setTimeout(()=>{window.focus()},300)}render(){const{value:t,suggestions:i,noSuggestions:r}=this.state;return J.jsxs("div",{children:[J.jsx(Pw,{onSuggestionsClearRequested:this.onSuggestionsClearRequested,multiSection:!0,suggestions:i,onSuggestionsFetchRequested:this.onSuggestionsFetchRequested.bind(this),onSuggestionSelected:this.onSuggestionSelected.bind(this),getSuggestionValue:this.getSuggestionValue,renderSuggestion:this.renderSuggestion,renderSectionTitle:this.renderSectionTitle,getSectionSuggestions:this.getSectionSuggestions,onSuggestionHighlighted:this.onSuggestionHighlighted.bind(this),highlightFirstSuggestion:!1,renderInputComponent:this.renderInputComponent,focusInputOnSuggestionClick:!this.isMob,inputProps:{placeholder:"Type 'remote'",value:t,onChange:(s,l)=>this.onChange(s,l),autoFocus:!0}}),r&&J.jsx("div",{className:"no-suggestions",children:"No questions to suggest"})]})}async getSuggestions(t){const i=Iw(t.trim());if(i==="")return[];if(t.length<3)return[];const r=new Map,s=[];try{console.log("--------->>>>> getSuggestions"),(await this.searchQuestions(i,10)).forEach(h=>{const{topId:f,parentId:g,id:p,title:S}=h,T=new Mc(h).questionKey;if(!s.includes(T)){s.push(T);const A={topId:f,parentId:g,id:p,title:S,categoryTitle:""};r.has(g)?r.get(g).push(A):r.set(g,[A])}})}catch(l){console.debug(l)}if(s.length===0)return[];try{const l=[];return r.forEach((h,f)=>{const g={id:f,categoryTitle:"",categoryParentTitle:"kuro",parentCategoryUp:"",questionRows:[]};if(f!==null){const p=this.allCats.get(f);if(p){const{title:S,titlesUpTheTree:T}=p;g.categoryTitle=S,g.parentCategoryUp=T}else alert(`${f} Not found in allCats`)}h.forEach(p=>{g.questionRows.push(p)}),l.push(g)}),l}catch(l){console.log(l)}return[]}onSuggestionsClearRequested=()=>{this.setState({suggestions:[],noSuggestions:!1})};onSuggestionSelected(t,i){console.log(t);const r=i.suggestion,{topId:s,parentId:l,id:h}=r;this.props.onSelectQuestion({topId:s,parentId:l,id:h},this.state.value)}renderSuggestion(t,i){const r=Aw(t.title,i.query),s=ww(t.title,r);return J.jsx("span",{className:"d-inline-block text-truncate",style:{textAlign:"left"},children:s.map((l,h)=>{const f=l.highlight?"react-autosuggest__suggestion-match":void 0;return J.jsx("span",{className:`${f??""}`,children:l.text},h)})})}renderSectionTitle(t){const{parentCategoryUp:i}=t;return J.jsx("span",{children:i})}renderInputComponent(t){const{ref:i,...r}=t;return J.jsx("div",{children:J.jsx("input",{ref:i,autoFocus:!0,...r})})}onChange(t,{newValue:i}){console.log(t),this.setState({value:i})}async onSuggestionsFetchRequested({value:t}){return this.debouncedLoadSuggestions(t)}getSuggestionValue(t){return t.title}getSectionSuggestions(t){return t.questionRows}onSuggestionHighlighted(t){this.setState({highlighted:t.suggestion})}}const Lw="/knowledge-lib/assets/Q.png",zw="/knowledge-lib/assets/A.png";const W={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},qi={SUCCESS:200,SUCCESS_RANGE_START:200,SUCCESS_RANGE_END:299,REDIRECT:302,CLIENT_ERROR:400,CLIENT_ERROR_RANGE_START:400,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,REQUEST_TIMEOUT:408,GONE:410,TOO_MANY_REQUESTS:429,CLIENT_ERROR_RANGE_END:499,SERVER_ERROR:500,SERVER_ERROR_RANGE_START:500,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,SERVER_ERROR_RANGE_END:599,MULTI_SIDED_ERROR:600},So={GET:"GET",POST:"POST"},xr=[W.OPENID_SCOPE,W.PROFILE_SCOPE,W.OFFLINE_ACCESS_SCOPE],Lv=[...xr,W.EMAIL_SCOPE],Pt={CONTENT_TYPE:"Content-Type",CONTENT_LENGTH:"Content-Length",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"},zv={ACTIVE_ACCOUNT_FILTERS:"active-account-filters"},ji={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},Ac={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},kt={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",NO_SESSION:"no_session"},Yh={CODE:"code",IDTOKEN_TOKEN_REFRESHTOKEN:"id_token token refresh_token"},sl={QUERY:"query",FRAGMENT:"fragment"},Bw={QUERY:"query"},$C={AUTHORIZATION_CODE_GRANT:"authorization_code",REFRESH_TOKEN_GRANT:"refresh_token"},Ec={MSSTS_ACCOUNT_TYPE:"MSSTS",ADFS_ACCOUNT_TYPE:"ADFS",GENERIC_ACCOUNT_TYPE:"Generic"},Va={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},It={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},Vh="appmetadata",Kw="client_info",Lc="1",zc={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:3600*24},on={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},Rt={SCHEMA_VERSION:5,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},Ke={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},ja={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},Bv={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},Sr={FAILED_AUTO_DETECTION:"1",INTERNAL_CACHE:"2",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},hh={CONFIGURED_NO_AUTO_DETECTION:"2",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},vo={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"},qw={Pop:"pop"},ZC=300;const Bc="unexpected_error",jw="post_request_failed";const Kv={[Bc]:"Unexpected error in authentication.",[jw]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."};class Ye extends Error{constructor(t,i,r){const s=i?`${t}: ${i}`:t;super(s),Object.setPrototypeOf(this,Ye.prototype),this.errorCode=t||W.EMPTY_STRING,this.errorMessage=i||W.EMPTY_STRING,this.subError=r||W.EMPTY_STRING,this.name="AuthError"}setCorrelationId(t){this.correlationId=t}}function _h(c,t){return new Ye(c,t?`${Kv[c]} ${t}`:Kv[c])}const Xh="client_info_decoding_error",WC="client_info_empty_error",Jh="token_parsing_error",eS="null_or_empty_token",ai="endpoints_resolution_error",tS="network_error",nS="openid_config_error",iS="hash_not_deserialized",Mr="invalid_state",oS="state_mismatch",bh="state_not_found",rS="nonce_mismatch",$h="auth_time_not_found",aS="max_age_transpired",Gw="multiple_matching_tokens",Fw="multiple_matching_accounts",sS="multiple_matching_appMetadata",cS="request_cannot_be_made",lS="cannot_remove_empty_scope",uS="cannot_append_scopeset",wh="empty_input_scopeset",Qw="device_code_polling_cancelled",Yw="device_code_expired",Vw="device_code_unknown_error",Zh="no_account_in_silent_request",dS="invalid_cache_record",Wh="invalid_cache_environment",Rh="no_account_found",Ih="no_crypto_object",Xw="unexpected_credential_type",Jw="invalid_assertion",$w="invalid_client_credential",Gi="token_refresh_required",Zw="user_timeout_reached",hS="token_claims_cnf_required_for_signedjwt",fS="authorization_code_missing_from_server_response",gS="binding_key_not_removed",mS="end_session_endpoint_not_supported",ef="key_id_missing",Ww="no_network_connectivity",eR="user_canceled",tR="missing_tenant_id_error",Re="method_not_implemented",nR="nested_app_auth_bridge_disabled",iR="platform_broker_error";const qv={[Xh]:"The client info could not be parsed/decoded correctly",[WC]:"The client info was empty",[Jh]:"Token cannot be parsed",[eS]:"The token is null or empty",[ai]:"Endpoints cannot be resolved",[tS]:"Network request failed",[nS]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[iS]:"The hash parameters could not be deserialized",[Mr]:"State was not the expected format",[oS]:"State mismatch error",[bh]:"State not found",[rS]:"Nonce mismatch error",[$h]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[aS]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[Gw]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[Fw]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[sS]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[cS]:"Token request cannot be made without authorization code or refresh token.",[lS]:"Cannot remove null or empty scope from ScopeSet",[uS]:"Cannot append ScopeSet",[wh]:"Empty input ScopeSet cannot be processed",[Qw]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[Yw]:"Device code is expired.",[Vw]:"Device code stopped polling for unknown reasons.",[Zh]:"Please pass an account object, silent flow is not supported without account information",[dS]:"Cache record object was null or undefined.",[Wh]:"Invalid environment when attempting to create cache entry",[Rh]:"No account found in cache for given key.",[Ih]:"No crypto object detected.",[Xw]:"Unexpected credential type.",[Jw]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[$w]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[Gi]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[Zw]:"User defined timeout for device code polling reached",[hS]:"Cannot generate a POP jwt if the token_claims are not populated",[fS]:"Server response does not contain an authorization code to proceed",[gS]:"Could not remove the credential's binding key from storage.",[mS]:"The provided authority does not support logout",[ef]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[Ww]:"No network connectivity. Check your internet connection.",[eR]:"User cancelled the flow.",[tR]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[Re]:"This method has not been implemented",[nR]:"The nested app auth bridge is disabled",[iR]:"An error occurred in the native broker. See the platformBrokerError property for details."};class tf extends Ye{constructor(t,i){super(t,i?`${qv[t]}: ${i}`:qv[t]),this.name="ClientAuthError",Object.setPrototypeOf(this,tf.prototype)}}function re(c,t){return new tf(c,t)}const Kc={createNewGuid:()=>{throw re(Re)},base64Decode:()=>{throw re(Re)},base64Encode:()=>{throw re(Re)},base64UrlEncode:()=>{throw re(Re)},encodeKid:()=>{throw re(Re)},async getPublicKeyThumbprint(){throw re(Re)},async removeTokenBindingKey(){throw re(Re)},async clearKeystore(){throw re(Re)},async signJwt(){throw re(Re)},async hashString(){throw re(Re)}};var Qe;(function(c){c[c.Error=0]="Error",c[c.Warning=1]="Warning",c[c.Info=2]="Info",c[c.Verbose=3]="Verbose",c[c.Trace=4]="Trace"})(Qe||(Qe={}));class Yi{constructor(t,i,r){this.level=Qe.Info;const s=()=>{},l=t||Yi.createDefaultLoggerOptions();this.localCallback=l.loggerCallback||s,this.piiLoggingEnabled=l.piiLoggingEnabled||!1,this.level=typeof l.logLevel=="number"?l.logLevel:Qe.Info,this.correlationId=l.correlationId||W.EMPTY_STRING,this.packageName=i||W.EMPTY_STRING,this.packageVersion=r||W.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:Qe.Info}}clone(t,i,r){return new Yi({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:r||this.correlationId},t,i)}logMessage(t,i){if(i.logLevel>this.level||!this.piiLoggingEnabled&&i.containsPii)return;const l=`${`[${new Date().toUTCString()}] : [${i.correlationId||this.correlationId||""}]`} : ${this.packageName}@${this.packageVersion} : ${Qe[i.logLevel]} - ${t}`;this.executeCallback(i.logLevel,l,i.containsPii||!1)}executeCallback(t,i,r){this.localCallback&&this.localCallback(t,i,r)}error(t,i){this.logMessage(t,{logLevel:Qe.Error,containsPii:!1,correlationId:i||W.EMPTY_STRING})}errorPii(t,i){this.logMessage(t,{logLevel:Qe.Error,containsPii:!0,correlationId:i||W.EMPTY_STRING})}warning(t,i){this.logMessage(t,{logLevel:Qe.Warning,containsPii:!1,correlationId:i||W.EMPTY_STRING})}warningPii(t,i){this.logMessage(t,{logLevel:Qe.Warning,containsPii:!0,correlationId:i||W.EMPTY_STRING})}info(t,i){this.logMessage(t,{logLevel:Qe.Info,containsPii:!1,correlationId:i||W.EMPTY_STRING})}infoPii(t,i){this.logMessage(t,{logLevel:Qe.Info,containsPii:!0,correlationId:i||W.EMPTY_STRING})}verbose(t,i){this.logMessage(t,{logLevel:Qe.Verbose,containsPii:!1,correlationId:i||W.EMPTY_STRING})}verbosePii(t,i){this.logMessage(t,{logLevel:Qe.Verbose,containsPii:!0,correlationId:i||W.EMPTY_STRING})}trace(t,i){this.logMessage(t,{logLevel:Qe.Trace,containsPii:!1,correlationId:i||W.EMPTY_STRING})}tracePii(t,i){this.logMessage(t,{logLevel:Qe.Trace,containsPii:!0,correlationId:i||W.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}}const pS="@azure/msal-common",nf="15.13.2";const of={None:"none"};const yS="redirect_uri_empty",oR="claims_request_parsing_error",vS="authority_uri_insecure",Ba="url_parse_error",CS="empty_url_error",SS="empty_input_scopes_error",rf="invalid_claims",TS="token_request_empty",AS="logout_request_empty",rR="invalid_code_challenge_method",af="pkce_params_missing",sf="invalid_cloud_discovery_metadata",ES="invalid_authority_metadata",_S="untrusted_authority",cl="missing_ssh_jwk",bS="missing_ssh_kid",aR="missing_nonce_authentication_header",sR="invalid_authentication_header",wS="cannot_set_OIDCOptions",RS="cannot_allow_platform_broker",IS="authority_mismatch",OS="invalid_request_method_for_EAR",kS="invalid_authorize_post_body_parameters";const cR={[yS]:"A redirect URI is required for all calls, and none has been set.",[oR]:"Could not parse the given claims request object.",[vS]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[Ba]:"URL could not be parsed into appropriate segments.",[CS]:"URL was empty or null.",[SS]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[rf]:"Given claims parameter must be a stringified JSON object.",[TS]:"Token request was empty and not found in cache.",[AS]:"The logout request was null or undefined.",[rR]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[af]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[sf]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[ES]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[_S]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[cl]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[bS]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[aR]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[sR]:"Invalid authentication header provided",[wS]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[RS]:"Cannot set allowPlatformBroker parameter to true when not in AAD protocol mode.",[IS]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority.",[kS]:"Invalid authorize post body parameters provided. If you are using authorizePostBodyParameters, the request method must be POST. Please check the request method and parameters.",[OS]:"Invalid request method for EAR protocol mode. The request method cannot be GET when using EAR protocol mode. Please change the request method to POST."};class cf extends Ye{constructor(t){super(t,cR[t]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,cf.prototype)}}function Xe(c){return new cf(c)}class rn{static isEmptyObj(t){if(t)try{const i=JSON.parse(t);return Object.keys(i).length===0}catch{}return!0}static startsWith(t,i){return t.indexOf(i)===0}static endsWith(t,i){return t.length>=i.length&&t.lastIndexOf(i)===t.length-i.length}static queryStringToObject(t){const i={},r=t.split("&"),s=l=>decodeURIComponent(l.replace(/\+/g," "));return r.forEach(l=>{if(l.trim()){const[h,f]=l.split(/=(.+)/g,2);h&&f&&(i[s(h)]=s(f))}}),i}static trimArrayEntries(t){return t.map(i=>i.trim())}static removeEmptyStringsFromArray(t){return t.filter(i=>!!i)}static jsonParseHelper(t){try{return JSON.parse(t)}catch{return null}}static matchPattern(t,i){return new RegExp(t.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(i)}}class pt{constructor(t){const i=t?rn.trimArrayEntries([...t]):[],r=i?rn.removeEmptyStringsFromArray(i):[];if(!r||!r.length)throw Xe(SS);this.scopes=new Set,r.forEach(s=>this.scopes.add(s))}static fromString(t){const r=(t||W.EMPTY_STRING).split(" ");return new pt(r)}static createSearchScopes(t){const i=t&&t.length>0?t:[...xr],r=new pt(i);return r.containsOnlyOIDCScopes()?r.removeScope(W.OFFLINE_ACCESS_SCOPE):r.removeOIDCScopes(),r}containsScope(t){const i=this.printScopesLowerCase().split(" "),r=new pt(i);return t?r.scopes.has(t.toLowerCase()):!1}containsScopeSet(t){return!t||t.scopes.size<=0?!1:this.scopes.size>=t.scopes.size&&t.asArray().every(i=>this.containsScope(i))}containsOnlyOIDCScopes(){let t=0;return Lv.forEach(i=>{this.containsScope(i)&&(t+=1)}),this.scopes.size===t}appendScope(t){t&&this.scopes.add(t.trim())}appendScopes(t){try{t.forEach(i=>this.appendScope(i))}catch{throw re(uS)}}removeScope(t){if(!t)throw re(lS);this.scopes.delete(t.trim())}removeOIDCScopes(){Lv.forEach(t=>{this.scopes.delete(t)})}unionScopeSets(t){if(!t)throw re(wh);const i=new Set;return t.scopes.forEach(r=>i.add(r.toLowerCase())),this.scopes.forEach(r=>i.add(r.toLowerCase())),i}intersectingScopeSets(t){if(!t)throw re(wh);t.containsOnlyOIDCScopes()||t.removeOIDCScopes();const i=this.unionScopeSets(t),r=t.getScopeCount(),s=this.getScopeCount();return i.size<s+r}getScopeCount(){return this.scopes.size}asArray(){const t=[];return this.scopes.forEach(i=>t.push(i)),t}printScopes(){return this.scopes?this.asArray().join(" "):W.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}}function qc(c,t){if(!c)throw re(WC);try{const i=t(c);return JSON.parse(i)}catch{throw re(Xh)}}function _r(c){if(!c)throw re(Xh);const t=c.split(Va.CLIENT_INFO_SEPARATOR,2);return{uid:t[0],utid:t.length<2?W.EMPTY_STRING:t[1]}}function jv(c,t){return!!c&&!!t&&c===t.split(".")[1]}function ll(c,t,i,r){if(r){const{oid:s,sub:l,tid:h,name:f,tfp:g,acr:p,preferred_username:S,upn:T,login_hint:A}=r,K=h||g||p||"";return{tenantId:K,localAccountId:s||l||"",name:f,username:S||T||"",loginHint:A,isHomeTenant:jv(K,c)}}else return{tenantId:i,localAccountId:t,username:"",isHomeTenant:jv(i,c)}}function lf(c,t,i,r){let s=c;if(t){const{isHomeTenant:l,...h}=t;s={...c,...h}}if(i){const{isHomeTenant:l,...h}=ll(c.homeAccountId,c.localAccountId,c.tenantId,i);return s={...s,...h,idTokenClaims:i,idToken:r},s}return s}const wn={Default:0,Adfs:1,Dsts:2,Ciam:3};function uf(c){return c&&(c.tid||c.tfp||c.acr)||null}const Yt={AAD:"AAD",OIDC:"OIDC",EAR:"EAR"};class ot{static getAccountInfo(t){return{homeAccountId:t.homeAccountId,environment:t.environment,tenantId:t.realm,username:t.username,localAccountId:t.localAccountId,loginHint:t.loginHint,name:t.name,nativeAccountId:t.nativeAccountId,authorityType:t.authorityType,tenantProfiles:new Map((t.tenantProfiles||[]).map(i=>[i.tenantId,i])),dataBoundary:t.dataBoundary}}isSingleTenant(){return!this.tenantProfiles}static createAccount(t,i,r){const s=new ot;i.authorityType===wn.Adfs?s.authorityType=Ec.ADFS_ACCOUNT_TYPE:i.protocolMode===Yt.OIDC?s.authorityType=Ec.GENERIC_ACCOUNT_TYPE:s.authorityType=Ec.MSSTS_ACCOUNT_TYPE;let l;t.clientInfo&&r&&(l=qc(t.clientInfo,r),l.xms_tdbr&&(s.dataBoundary=l.xms_tdbr==="EU"?"EU":"None")),s.clientInfo=t.clientInfo,s.homeAccountId=t.homeAccountId,s.nativeAccountId=t.nativeAccountId;const h=t.environment||i&&i.getPreferredCache();if(!h)throw re(Wh);s.environment=h,s.realm=l?.utid||uf(t.idTokenClaims)||"",s.localAccountId=l?.uid||t.idTokenClaims?.oid||t.idTokenClaims?.sub||"";const f=t.idTokenClaims?.preferred_username||t.idTokenClaims?.upn,g=t.idTokenClaims?.emails?t.idTokenClaims.emails[0]:null;if(s.username=f||g||"",s.loginHint=t.idTokenClaims?.login_hint,s.name=t.idTokenClaims?.name||"",s.cloudGraphHostName=t.cloudGraphHostName,s.msGraphHost=t.msGraphHost,t.tenantProfiles)s.tenantProfiles=t.tenantProfiles;else{const p=ll(t.homeAccountId,s.localAccountId,s.realm,t.idTokenClaims);s.tenantProfiles=[p]}return s}static createFromAccountInfo(t,i,r){const s=new ot;return s.authorityType=t.authorityType||Ec.GENERIC_ACCOUNT_TYPE,s.homeAccountId=t.homeAccountId,s.localAccountId=t.localAccountId,s.nativeAccountId=t.nativeAccountId,s.realm=t.tenantId,s.environment=t.environment,s.username=t.username,s.name=t.name,s.loginHint=t.loginHint,s.cloudGraphHostName=i,s.msGraphHost=r,s.tenantProfiles=Array.from(t.tenantProfiles?.values()||[]),s.dataBoundary=t.dataBoundary,s}static generateHomeAccountId(t,i,r,s,l){if(!(i===wn.Adfs||i===wn.Dsts)){if(t)try{const h=qc(t,s.base64Decode);if(h.uid&&h.utid)return`${h.uid}.${h.utid}`}catch{}r.warning("No client info in response")}return l?.sub||""}static isAccountEntity(t){return t?t.hasOwnProperty("homeAccountId")&&t.hasOwnProperty("environment")&&t.hasOwnProperty("realm")&&t.hasOwnProperty("localAccountId")&&t.hasOwnProperty("username")&&t.hasOwnProperty("authorityType"):!1}static accountInfoIsEqual(t,i,r){if(!t||!i)return!1;let s=!0;if(r){const l=t.idTokenClaims||{},h=i.idTokenClaims||{};s=l.iat===h.iat&&l.nonce===h.nonce}return t.homeAccountId===i.homeAccountId&&t.localAccountId===i.localAccountId&&t.username===i.username&&t.tenantId===i.tenantId&&t.loginHint===i.loginHint&&t.environment===i.environment&&t.nativeAccountId===i.nativeAccountId&&s}}function Ln(c,t){const i=lR(c);try{const r=t(i);return JSON.parse(r)}catch{throw re(Jh)}}function zn(c){if(!c.signin_state)return!1;const t=["kmsi","dvc_dmjd"];return c.signin_state.some(r=>t.includes(r.trim().toLowerCase()))}function lR(c){if(!c)throw re(eS);const i=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(c);if(!i||i.length<4)throw re(Jh);return i[2]}function MS(c,t){if(t===0||Date.now()-3e5>c+t)throw re(aS)}function Gv(c){if(!c)return c;let t=c.toLowerCase();return rn.endsWith(t,"?")?t=t.slice(0,-1):rn.endsWith(t,"?/")&&(t=t.slice(0,-2)),rn.endsWith(t,"/")||(t+="/"),t}function NS(c){return c.startsWith("#/")?c.substring(2):c.startsWith("#")||c.startsWith("?")?c.substring(1):c}function jc(c){if(!c||c.indexOf("=")<0)return null;try{const t=NS(c),i=Object.fromEntries(new URLSearchParams(t));if(i.code||i.ear_jwe||i.error||i.error_description||i.state)return i}catch{throw re(iS)}return null}function Xa(c,t=!0,i){const r=new Array;return c.forEach((s,l)=>{!t&&i&&l in i?r.push(`${l}=${s}`):r.push(`${l}=${encodeURIComponent(s)}`)}),r.join("&")}function Fv(c){if(!c)return c;const t=c.split("#")[0];try{const i=new URL(t),r=i.origin+i.pathname+i.search;return Gv(r)}catch{return Gv(t)}}class Pe{get urlString(){return this._urlString}constructor(t){if(this._urlString=t,!this._urlString)throw Xe(CS);t.includes("#")||(this._urlString=Pe.canonicalizeUri(t))}static canonicalizeUri(t){if(t){let i=t.toLowerCase();return rn.endsWith(i,"?")?i=i.slice(0,-1):rn.endsWith(i,"?/")&&(i=i.slice(0,-2)),rn.endsWith(i,"/")||(i+="/"),i}return t}validateAsUri(){let t;try{t=this.getUrlComponents()}catch{throw Xe(Ba)}if(!t.HostNameAndPort||!t.PathSegments)throw Xe(Ba);if(!t.Protocol||t.Protocol.toLowerCase()!=="https:")throw Xe(vS)}static appendQueryString(t,i){return i?t.indexOf("?")<0?`${t}?${i}`:`${t}&${i}`:t}static removeHashFromUrl(t){return Pe.canonicalizeUri(t.split("#")[0])}replaceTenantPath(t){const i=this.getUrlComponents(),r=i.PathSegments;return t&&r.length!==0&&(r[0]===ji.COMMON||r[0]===ji.ORGANIZATIONS)&&(r[0]=t),Pe.constructAuthorityUriFromObject(i)}getUrlComponents(){const t=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),i=this.urlString.match(t);if(!i)throw Xe(Ba);const r={Protocol:i[1],HostNameAndPort:i[4],AbsolutePath:i[5],QueryString:i[7]};let s=r.AbsolutePath.split("/");return s=s.filter(l=>l&&l.length>0),r.PathSegments=s,r.QueryString&&r.QueryString.endsWith("/")&&(r.QueryString=r.QueryString.substring(0,r.QueryString.length-1)),r}static getDomainFromUrl(t){const i=RegExp("^([^:/?#]+://)?([^/?#]*)"),r=t.match(i);if(!r)throw Xe(Ba);return r[2]}static getAbsoluteUrl(t,i){if(t[0]===W.FORWARD_SLASH){const s=new Pe(i).getUrlComponents();return s.Protocol+"//"+s.HostNameAndPort+t}return t}static constructAuthorityUriFromObject(t){return new Pe(t.Protocol+"//"+t.HostNameAndPort+"/"+t.PathSegments.join("/"))}static hashContainsKnownProperties(t){return!!jc(t)}}const DS={endpointMetadata:{"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},instanceDiscoveryMetadata:{metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}},Qv=DS.endpointMetadata,df=DS.instanceDiscoveryMetadata,US=new Set;df.metadata.forEach(c=>{c.aliases.forEach(t=>{US.add(t)})});function uR(c,t){let i;const r=c.canonicalAuthority;if(r){const s=new Pe(r).getUrlComponents().HostNameAndPort;i=Yv(s,c.cloudDiscoveryMetadata?.metadata,on.CONFIG,t)||Yv(s,df.metadata,on.HARDCODED_VALUES,t)||c.knownAuthorities}return i||[]}function Yv(c,t,i,r){if(r?.trace(`getAliasesFromMetadata called with source: ${i}`),c&&t){const s=Gc(t,c);if(s)return r?.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${i}, returning aliases`),s.aliases;r?.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${i}`)}return null}function dR(c){return Gc(df.metadata,c)}function Gc(c,t){for(let i=0;i<c.length;i++){const r=c[i];if(r.aliases.includes(t))return r}return null}const Fc="cache_quota_exceeded",hf="cache_error_unknown";const fh={[Fc]:"Exceeded cache storage capacity.",[hf]:"Unexpected error occurred when using cache storage."};class br extends Ye{constructor(t,i){const r=i||(fh[t]?fh[t]:fh[hf]);super(`${t}: ${r}`),Object.setPrototypeOf(this,br.prototype),this.name="CacheError",this.errorCode=t,this.errorMessage=r}}function Oh(c){return c instanceof Error?c.name==="QuotaExceededError"||c.name==="NS_ERROR_DOM_QUOTA_REACHED"||c.message.includes("exceeded the quota")?new br(Fc):new br(c.name,c.message):new br(hf)}class kh{constructor(t,i,r,s,l){this.clientId=t,this.cryptoImpl=i,this.commonLogger=r.clone(pS,nf),this.staticAuthorityOptions=l,this.performanceClient=s}getAllAccounts(t,i){return this.buildTenantProfiles(this.getAccountsFilteredBy(t,i),i,t)}getAccountInfoFilteredBy(t,i){if(Object.keys(t).length===0||Object.values(t).every(s=>!s))return this.commonLogger.warning("getAccountInfoFilteredBy: Account filter is empty or invalid, returning null"),null;const r=this.getAllAccounts(t,i);return r.length>1?r.sort(l=>l.idTokenClaims?-1:1)[0]:r.length===1?r[0]:null}getBaseAccountInfo(t,i){const r=this.getAccountsFilteredBy(t,i);return r.length>0?ot.getAccountInfo(r[0]):null}buildTenantProfiles(t,i,r){return t.flatMap(s=>this.getTenantProfilesFromAccountEntity(s,i,r?.tenantId,r))}getTenantedAccountInfoByFilter(t,i,r,s,l){let h=null,f;if(l&&!this.tenantProfileMatchesFilter(r,l))return null;const g=this.getIdToken(t,s,i,r.tenantId);return g&&(f=Ln(g.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(f,l))?null:(h=lf(t,r,f,g?.secret),h)}getTenantProfilesFromAccountEntity(t,i,r,s){const l=ot.getAccountInfo(t);let h=l.tenantProfiles||new Map;const f=this.getTokenKeys();if(r){const p=h.get(r);if(p)h=new Map([[r,p]]);else return[]}const g=[];return h.forEach(p=>{const S=this.getTenantedAccountInfoByFilter(l,f,p,i,s);S&&g.push(S)}),g}tenantProfileMatchesFilter(t,i){return!(i.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(t,i.localAccountId)||i.name&&t.name!==i.name||i.isHomeTenant!==void 0&&t.isHomeTenant!==i.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(t,i){return!(i&&(i.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(t,i.localAccountId)||i.loginHint&&!this.matchLoginHintFromTokenClaims(t,i.loginHint)||i.username&&!this.matchUsername(t.preferred_username,i.username)||i.name&&!this.matchName(t,i.name)||i.sid&&!this.matchSid(t,i.sid)))}async saveCacheRecord(t,i,r,s){if(!t)throw re(dS);try{t.account&&await this.setAccount(t.account,i,r),t.idToken&&s?.idToken!==!1&&await this.setIdTokenCredential(t.idToken,i,r),t.accessToken&&s?.accessToken!==!1&&await this.saveAccessToken(t.accessToken,i,r),t.refreshToken&&s?.refreshToken!==!1&&await this.setRefreshTokenCredential(t.refreshToken,i,r),t.appMetadata&&this.setAppMetadata(t.appMetadata,i)}catch(l){throw this.commonLogger?.error("CacheManager.saveCacheRecord: failed"),l instanceof Ye?l:Oh(l)}}async saveAccessToken(t,i,r){const s={clientId:t.clientId,credentialType:t.credentialType,environment:t.environment,homeAccountId:t.homeAccountId,realm:t.realm,tokenType:t.tokenType,requestedClaimsHash:t.requestedClaimsHash},l=this.getTokenKeys(),h=pt.fromString(t.target);l.accessToken.forEach(f=>{if(!this.accessTokenKeyMatchesFilter(f,s,!1))return;const g=this.getAccessTokenCredential(f,i);g&&this.credentialMatchesFilter(g,s)&&pt.fromString(g.target).intersectingScopeSets(h)&&this.removeAccessToken(f,i)}),await this.setAccessTokenCredential(t,i,r)}getAccountsFilteredBy(t,i){const r=this.getAccountKeys(),s=[];return r.forEach(l=>{const h=this.getAccount(l,i);if(!h||t.homeAccountId&&!this.matchHomeAccountId(h,t.homeAccountId)||t.username&&!this.matchUsername(h.username,t.username)||t.environment&&!this.matchEnvironment(h,t.environment)||t.realm&&!this.matchRealm(h,t.realm)||t.nativeAccountId&&!this.matchNativeAccountId(h,t.nativeAccountId)||t.authorityType&&!this.matchAuthorityType(h,t.authorityType))return;const f={localAccountId:t?.localAccountId,name:t?.name},g=h.tenantProfiles?.filter(p=>this.tenantProfileMatchesFilter(p,f));g&&g.length===0||s.push(h)}),s}credentialMatchesFilter(t,i){return!(i.clientId&&!this.matchClientId(t,i.clientId)||i.userAssertionHash&&!this.matchUserAssertionHash(t,i.userAssertionHash)||typeof i.homeAccountId=="string"&&!this.matchHomeAccountId(t,i.homeAccountId)||i.environment&&!this.matchEnvironment(t,i.environment)||i.realm&&!this.matchRealm(t,i.realm)||i.credentialType&&!this.matchCredentialType(t,i.credentialType)||i.familyId&&!this.matchFamilyId(t,i.familyId)||i.target&&!this.matchTarget(t,i.target)||(i.requestedClaimsHash||t.requestedClaimsHash)&&t.requestedClaimsHash!==i.requestedClaimsHash||t.credentialType===It.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(i.tokenType&&!this.matchTokenType(t,i.tokenType)||i.tokenType===Ke.SSH&&i.keyId&&!this.matchKeyId(t,i.keyId)))}getAppMetadataFilteredBy(t){const i=this.getKeys(),r={};return i.forEach(s=>{if(!this.isAppMetadata(s))return;const l=this.getAppMetadata(s);l&&(t.environment&&!this.matchEnvironment(l,t.environment)||t.clientId&&!this.matchClientId(l,t.clientId)||(r[s]=l))}),r}getAuthorityMetadataByAlias(t){const i=this.getAuthorityMetadataKeys();let r=null;return i.forEach(s=>{if(!this.isAuthorityMetadata(s)||s.indexOf(this.clientId)===-1)return;const l=this.getAuthorityMetadata(s);l&&l.aliases.indexOf(t)!==-1&&(r=l)}),r}removeAllAccounts(t){this.getAllAccounts({},t).forEach(r=>{this.removeAccount(r,t)})}removeAccount(t,i){this.removeAccountContext(t,i);const r=this.getAccountKeys(),s=l=>l.includes(t.homeAccountId)&&l.includes(t.environment);r.filter(s).forEach(l=>{this.removeItem(l,i),this.performanceClient.incrementFields({accountsRemoved:1},i)})}removeAccountContext(t,i){const r=this.getTokenKeys(),s=l=>l.includes(t.homeAccountId)&&l.includes(t.environment);r.idToken.filter(s).forEach(l=>{this.removeIdToken(l,i)}),r.accessToken.filter(s).forEach(l=>{this.removeAccessToken(l,i)}),r.refreshToken.filter(s).forEach(l=>{this.removeRefreshToken(l,i)})}removeAccessToken(t,i){const r=this.getAccessTokenCredential(t,i);if(this.removeItem(t,i),this.performanceClient.incrementFields({accessTokensRemoved:1},i),!r||r.credentialType.toLowerCase()!==It.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()||r.tokenType!==Ke.POP)return;const s=r.keyId;s&&this.cryptoImpl.removeTokenBindingKey(s).catch(()=>{this.commonLogger.error(`Failed to remove token binding key ${s}`,i),this.performanceClient?.incrementFields({removeTokenBindingKeyFailure:1},i)})}removeAppMetadata(t){return this.getKeys().forEach(r=>{this.isAppMetadata(r)&&this.removeItem(r,t)}),!0}getIdToken(t,i,r,s,l){this.commonLogger.trace("CacheManager - getIdToken called");const h={homeAccountId:t.homeAccountId,environment:t.environment,credentialType:It.ID_TOKEN,clientId:this.clientId,realm:s},f=this.getIdTokensByFilter(h,i,r),g=f.size;if(g<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(g>1){let p=f;if(!s){const S=new Map;f.forEach((A,K)=>{A.realm===t.tenantId&&S.set(K,A)});const T=S.size;if(T<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),f.values().next().value;if(T===1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),S.values().next().value;p=S}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),p.forEach((S,T)=>{this.removeIdToken(T,i)}),l&&i&&l.addFields({multiMatchedID:f.size},i),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),f.values().next().value}getIdTokensByFilter(t,i,r){const s=r&&r.idToken||this.getTokenKeys().idToken,l=new Map;return s.forEach(h=>{if(!this.idTokenKeyMatchesFilter(h,{clientId:this.clientId,...t}))return;const f=this.getIdTokenCredential(h,i);f&&this.credentialMatchesFilter(f,t)&&l.set(h,f)}),l}idTokenKeyMatchesFilter(t,i){const r=t.toLowerCase();return!(i.clientId&&r.indexOf(i.clientId.toLowerCase())===-1||i.homeAccountId&&r.indexOf(i.homeAccountId.toLowerCase())===-1)}removeIdToken(t,i){this.removeItem(t,i)}removeRefreshToken(t,i){this.removeItem(t,i)}getAccessToken(t,i,r,s){const l=i.correlationId;this.commonLogger.trace("CacheManager - getAccessToken called",l);const h=pt.createSearchScopes(i.scopes),f=i.authenticationScheme||Ke.BEARER,g=f.toLowerCase()!==Ke.BEARER.toLowerCase()?It.ACCESS_TOKEN_WITH_AUTH_SCHEME:It.ACCESS_TOKEN,p={homeAccountId:t.homeAccountId,environment:t.environment,credentialType:g,clientId:this.clientId,realm:s||t.tenantId,target:h,tokenType:f,keyId:i.sshKid,requestedClaimsHash:i.requestedClaimsHash},S=r&&r.accessToken||this.getTokenKeys().accessToken,T=[];S.forEach(K=>{if(this.accessTokenKeyMatchesFilter(K,p,!0)){const ee=this.getAccessTokenCredential(K,l);ee&&this.credentialMatchesFilter(ee,p)&&T.push(ee)}});const A=T.length;return A<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found",l),null):A>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them",l),T.forEach(K=>{this.removeAccessToken(this.generateCredentialKey(K),l)}),this.performanceClient.addFields({multiMatchedAT:T.length},l),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token",l),T[0])}accessTokenKeyMatchesFilter(t,i,r){const s=t.toLowerCase();if(i.clientId&&s.indexOf(i.clientId.toLowerCase())===-1||i.homeAccountId&&s.indexOf(i.homeAccountId.toLowerCase())===-1||i.realm&&s.indexOf(i.realm.toLowerCase())===-1||i.requestedClaimsHash&&s.indexOf(i.requestedClaimsHash.toLowerCase())===-1)return!1;if(i.target){const l=i.target.asArray();for(let h=0;h<l.length;h++){if(r&&!s.includes(l[h].toLowerCase()))return!1;if(!r&&s.includes(l[h].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(t,i){const r=this.getTokenKeys(),s=[];return r.accessToken.forEach(l=>{if(!this.accessTokenKeyMatchesFilter(l,t,!0))return;const h=this.getAccessTokenCredential(l,i);h&&this.credentialMatchesFilter(h,t)&&s.push(h)}),s}getRefreshToken(t,i,r,s,l){this.commonLogger.trace("CacheManager - getRefreshToken called");const h=i?Lc:void 0,f={homeAccountId:t.homeAccountId,environment:t.environment,credentialType:It.REFRESH_TOKEN,clientId:this.clientId,familyId:h},g=s&&s.refreshToken||this.getTokenKeys().refreshToken,p=[];g.forEach(T=>{if(this.refreshTokenKeyMatchesFilter(T,f)){const A=this.getRefreshTokenCredential(T,r);A&&this.credentialMatchesFilter(A,f)&&p.push(A)}});const S=p.length;return S<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(S>1&&l&&r&&l.addFields({multiMatchedRT:S},r),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),p[0])}refreshTokenKeyMatchesFilter(t,i){const r=t.toLowerCase();return!(i.familyId&&r.indexOf(i.familyId.toLowerCase())===-1||!i.familyId&&i.clientId&&r.indexOf(i.clientId.toLowerCase())===-1||i.homeAccountId&&r.indexOf(i.homeAccountId.toLowerCase())===-1)}readAppMetadataFromCache(t){const i={environment:t,clientId:this.clientId},r=this.getAppMetadataFilteredBy(i),s=Object.keys(r).map(h=>r[h]),l=s.length;if(l<1)return null;if(l>1)throw re(sS);return s[0]}isAppMetadataFOCI(t){const i=this.readAppMetadataFromCache(t);return!!(i&&i.familyId===Lc)}matchHomeAccountId(t,i){return typeof t.homeAccountId=="string"&&i===t.homeAccountId}matchLocalAccountIdFromTokenClaims(t,i){const r=t.oid||t.sub;return i===r}matchLocalAccountIdFromTenantProfile(t,i){return t.localAccountId===i}matchName(t,i){return i.toLowerCase()===t.name?.toLowerCase()}matchUsername(t,i){return!!(t&&typeof t=="string"&&i?.toLowerCase()===t.toLowerCase())}matchUserAssertionHash(t,i){return!!(t.userAssertionHash&&i===t.userAssertionHash)}matchEnvironment(t,i){if(this.staticAuthorityOptions){const s=uR(this.staticAuthorityOptions,this.commonLogger);if(s.includes(i)&&s.includes(t.environment))return!0}const r=this.getAuthorityMetadataByAlias(i);return!!(r&&r.aliases.indexOf(t.environment)>-1)}matchCredentialType(t,i){return t.credentialType&&i.toLowerCase()===t.credentialType.toLowerCase()}matchClientId(t,i){return!!(t.clientId&&i===t.clientId)}matchFamilyId(t,i){return!!(t.familyId&&i===t.familyId)}matchRealm(t,i){return t.realm?.toLowerCase()===i.toLowerCase()}matchNativeAccountId(t,i){return!!(t.nativeAccountId&&i===t.nativeAccountId)}matchLoginHintFromTokenClaims(t,i){return t.login_hint===i||t.preferred_username===i||t.upn===i}matchSid(t,i){return t.sid===i}matchAuthorityType(t,i){return!!(t.authorityType&&i.toLowerCase()===t.authorityType.toLowerCase())}matchTarget(t,i){return t.credentialType!==It.ACCESS_TOKEN&&t.credentialType!==It.ACCESS_TOKEN_WITH_AUTH_SCHEME||!t.target?!1:pt.fromString(t.target).containsScopeSet(i)}matchTokenType(t,i){return!!(t.tokenType&&t.tokenType===i)}matchKeyId(t,i){return!!(t.keyId&&t.keyId===i)}isAppMetadata(t){return t.indexOf(Vh)!==-1}isAuthorityMetadata(t){return t.indexOf(zc.CACHE_KEY)!==-1}generateAuthorityMetadataCacheKey(t){return`${zc.CACHE_KEY}-${this.clientId}-${t}`}static toObject(t,i){for(const r in i)t[r]=i[r];return t}}class hR extends kh{async setAccount(){throw re(Re)}getAccount(){throw re(Re)}async setIdTokenCredential(){throw re(Re)}getIdTokenCredential(){throw re(Re)}async setAccessTokenCredential(){throw re(Re)}getAccessTokenCredential(){throw re(Re)}async setRefreshTokenCredential(){throw re(Re)}getRefreshTokenCredential(){throw re(Re)}setAppMetadata(){throw re(Re)}getAppMetadata(){throw re(Re)}setServerTelemetry(){throw re(Re)}getServerTelemetry(){throw re(Re)}setAuthorityMetadata(){throw re(Re)}getAuthorityMetadata(){throw re(Re)}getAuthorityMetadataKeys(){throw re(Re)}setThrottlingCache(){throw re(Re)}getThrottlingCache(){throw re(Re)}removeItem(){throw re(Re)}getKeys(){throw re(Re)}getAccountKeys(){throw re(Re)}getTokenKeys(){throw re(Re)}generateCredentialKey(){throw re(Re)}generateAccountKey(){throw re(Re)}}const w={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",AcquireTokenPreRedirect:"acquireTokenPreRedirect",AcquireTokenRedirect:"acquireTokenRedirect",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",AwaitConcurrentIframe:"awaitConcurrentIframe",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",NetworkClientSendPostRequestAsync:"networkClientSendPostRequestAsync",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",InitializeCache:"initializeCache",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",GetAuthCodeUrl:"getAuthCodeUrl",GetStandardParams:"getStandardParams",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",HandleResponseEar:"handleResponseEar",HandleResponsePlatformBroker:"handleResponsePlatformBroker",HandleResponseCode:"handleResponseCode",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromise",HandleNativeRedirectPromiseMeasurement:"handleNativeRedirectPromise",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",ImportExistingCache:"importExistingCache",SetUserData:"setUserData",LocalStorageUpdated:"localStorageUpdated",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues",GenerateHKDF:"generateHKDF",GenerateBaseKey:"generateBaseKey",Base64Decode:"base64Decode",UrlEncodeArr:"urlEncodeArr",Encrypt:"encrypt",Decrypt:"decrypt",GenerateEarKey:"generateEarKey",DecryptEarResponse:"decryptEarResponse"},fR={InProgress:1};class Vv{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}}class xS{generateId(){return"callback-id"}startMeasurement(t,i){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:fR.InProgress,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:t,startTimeMs:Date.now(),correlationId:i||""},measurement:new Vv}}startPerformanceMeasurement(){return new Vv}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}const PS={tokenRenewalOffsetSeconds:ZC,preventCorsPreflight:!1},gR={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:Qe.Info,correlationId:W.EMPTY_STRING},mR={claimsBasedCachingEnabled:!1},pR={async sendGetRequestAsync(){throw re(Re)},async sendPostRequestAsync(){throw re(Re)}},yR={sku:W.SKU,version:nf,cpu:W.EMPTY_STRING,os:W.EMPTY_STRING},vR={clientSecret:W.EMPTY_STRING,clientAssertion:void 0},CR={azureCloudInstance:of.None,tenant:`${W.DEFAULT_COMMON_TENANT}`},SR={application:{appName:"",appVersion:""}};function TR({authOptions:c,systemOptions:t,loggerOptions:i,cacheOptions:r,storageInterface:s,networkInterface:l,cryptoInterface:h,clientCredentials:f,libraryInfo:g,telemetry:p,serverTelemetryManager:S,persistencePlugin:T,serializableCache:A}){const K={...gR,...i};return{authOptions:AR(c),systemOptions:{...PS,...t},loggerOptions:K,cacheOptions:{...mR,...r},storageInterface:s||new hR(c.clientId,Kc,new Yi(K),new xS),networkInterface:l||pR,cryptoInterface:h||Kc,clientCredentials:f||vR,libraryInfo:{...yR,...g},telemetry:{...SR,...p},serverTelemetryManager:S||null,persistencePlugin:T||null,serializableCache:A||null}}function AR(c){return{clientCapabilities:[],azureCloudOptions:CR,skipAuthorityMetadataCache:!1,instanceAware:!1,encodeExtraQueryParams:!1,...c}}function HS(c){return c.authOptions.authority.options.protocolMode===Yt.OIDC}const In={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"};const To="client_id",LS="redirect_uri",ER="response_type",_R="response_mode",bR="grant_type",wR="claims",RR="scope",IR="refresh_token",OR="state",kR="nonce",MR="prompt",NR="code",DR="code_challenge",UR="code_challenge_method",xR="code_verifier",PR="client-request-id",HR="x-client-SKU",LR="x-client-VER",zR="x-client-OS",BR="x-client-CPU",KR="x-client-current-telemetry",qR="x-client-last-telemetry",jR="x-ms-lib-capability",GR="x-app-name",FR="x-app-ver",QR="post_logout_redirect_uri",YR="id_token_hint",VR="client_secret",XR="client_assertion",JR="client_assertion_type",zS="token_type",BS="req_cnf",Xv="return_spa_code",$R="nativebroker",ZR="logout_hint",WR="sid",eI="login_hint",tI="domain_hint",nI="x-client-xtra-sku",Qc="brk_client_id",Yc="brk_redirect_uri",Mh="instance_aware",iI="ear_jwk",oI="ear_jwe_crypto";function ul(c,t,i){if(!t)return;const r=c.get(To);r&&c.has(Qc)&&i?.addFields({embeddedClientId:r,embeddedRedirectUri:c.get(LS)},t)}function ff(c,t){c.set(ER,t)}function rI(c,t){c.set(_R,t||Bw.QUERY)}function aI(c){c.set($R,"1")}function gf(c,t,i=!0,r=xr){i&&!r.includes("openid")&&!t.includes("openid")&&r.push("openid");const s=i?[...t||[],...r]:t||[],l=new pt(s);c.set(RR,l.printScopes())}function mf(c,t){c.set(To,t)}function pf(c,t){c.set(LS,t)}function sI(c,t){c.set(QR,t)}function cI(c,t){c.set(YR,t)}function lI(c,t){c.set(tI,t)}function _c(c,t){c.set(eI,t)}function Vc(c,t){c.set(Pt.CCS_HEADER,`UPN:${t}`)}function Ga(c,t){c.set(Pt.CCS_HEADER,`Oid:${t.uid}@${t.utid}`)}function Jv(c,t){c.set(WR,t)}function yf(c,t,i){const r=mI(t,i);try{JSON.parse(r)}catch{throw Xe(rf)}c.set(wR,r)}function vf(c,t){c.set(PR,t)}function Cf(c,t){c.set(HR,t.sku),c.set(LR,t.version),t.os&&c.set(zR,t.os),t.cpu&&c.set(BR,t.cpu)}function Sf(c,t){t?.appName&&c.set(GR,t.appName),t?.appVersion&&c.set(FR,t.appVersion)}function uI(c,t){c.set(MR,t)}function KS(c,t){t&&c.set(OR,t)}function dI(c,t){c.set(kR,t)}function Tf(c,t,i){if(t&&i)c.set(DR,t),c.set(UR,i);else throw Xe(af)}function hI(c,t){c.set(NR,t)}function fI(c,t){c.set(IR,t)}function gI(c,t){c.set(xR,t)}function qS(c,t){c.set(VR,t)}function jS(c,t){t&&c.set(XR,t)}function GS(c,t){t&&c.set(JR,t)}function FS(c,t){c.set(bR,t)}function Af(c){c.set(Kw,"1")}function QS(c){c.has(Mh)||c.set(Mh,"true")}function Fi(c,t){Object.entries(t).forEach(([i,r])=>{!c.has(i)&&r&&c.set(i,r)})}function mI(c,t){let i;if(!c)i={};else try{i=JSON.parse(c)}catch{throw Xe(rf)}return t&&t.length>0&&(i.hasOwnProperty(Ac.ACCESS_TOKEN)||(i[Ac.ACCESS_TOKEN]={}),i[Ac.ACCESS_TOKEN][Ac.XMS_CC]={values:t}),JSON.stringify(i)}function Ef(c,t){t&&(c.set(zS,Ke.POP),c.set(BS,t))}function YS(c,t){t&&(c.set(zS,Ke.SSH),c.set(BS,t))}function VS(c,t){c.set(KR,t.generateCurrentRequestHeaderValue()),c.set(qR,t.generateLastRequestHeaderValue())}function XS(c){c.set(jR,ja.X_MS_LIB_CAPABILITY_VALUE)}function pI(c,t){c.set(ZR,t)}function dl(c,t,i){c.has(Qc)||c.set(Qc,t),c.has(Yc)||c.set(Yc,i)}function yI(c,t){c.set(iI,encodeURIComponent(t)),c.set(oI,"eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0")}function vI(c,t){Object.entries(t).forEach(([i,r])=>{r&&c.set(i,r)})}function CI(c){return c.hasOwnProperty("authorization_endpoint")&&c.hasOwnProperty("token_endpoint")&&c.hasOwnProperty("issuer")&&c.hasOwnProperty("jwks_uri")}function SI(c){return c.hasOwnProperty("tenant_discovery_endpoint")&&c.hasOwnProperty("metadata")}function TI(c){return c.hasOwnProperty("error")&&c.hasOwnProperty("error_description")}const an=(c,t,i,r,s)=>(...l)=>{i.trace(`Executing function ${t}`);const h=r?.startMeasurement(t,s);if(s){const f=t+"CallCount";r?.incrementFields({[f]:1},s)}try{const f=c(...l);return h?.end({success:!0}),i.trace(`Returning result from ${t}`),f}catch(f){i.trace(`Error occurred in ${t}`);try{i.trace(JSON.stringify(f))}catch{i.trace("Unable to print error message.")}throw h?.end({success:!1},f),f}},Q=(c,t,i,r,s)=>(...l)=>{i.trace(`Executing function ${t}`);const h=r?.startMeasurement(t,s);if(s){const f=t+"CallCount";r?.incrementFields({[f]:1},s)}return r?.setPreQueueTime(t,s),c(...l).then(f=>(i.trace(`Returning result from ${t}`),h?.end({success:!0}),f)).catch(f=>{i.trace(`Error occurred in ${t}`);try{i.trace(JSON.stringify(f))}catch{i.trace("Unable to print error message.")}throw h?.end({success:!1},f),f})};class hl{constructor(t,i,r,s){this.networkInterface=t,this.logger=i,this.performanceClient=r,this.correlationId=s}async detectRegion(t,i){this.performanceClient?.addQueueMeasurement(w.RegionDiscoveryDetectRegion,this.correlationId);let r=t;if(r)i.region_source=Sr.ENVIRONMENT_VARIABLE;else{const s=hl.IMDS_OPTIONS;try{const l=await Q(this.getRegionFromIMDS.bind(this),w.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(W.IMDS_VERSION,s);if(l.status===qi.SUCCESS&&(r=l.body,i.region_source=Sr.IMDS),l.status===qi.BAD_REQUEST){const h=await Q(this.getCurrentVersion.bind(this),w.RegionDiscoveryGetCurrentVersion,this.logger,this.performanceClient,this.correlationId)(s);if(!h)return i.region_source=Sr.FAILED_AUTO_DETECTION,null;const f=await Q(this.getRegionFromIMDS.bind(this),w.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(h,s);f.status===qi.SUCCESS&&(r=f.body,i.region_source=Sr.IMDS)}}catch{return i.region_source=Sr.FAILED_AUTO_DETECTION,null}}return r||(i.region_source=Sr.FAILED_AUTO_DETECTION),r||null}async getRegionFromIMDS(t,i){return this.performanceClient?.addQueueMeasurement(w.RegionDiscoveryGetRegionFromIMDS,this.correlationId),this.networkInterface.sendGetRequestAsync(`${W.IMDS_ENDPOINT}?api-version=${t}&format=text`,i,W.IMDS_TIMEOUT)}async getCurrentVersion(t){this.performanceClient?.addQueueMeasurement(w.RegionDiscoveryGetCurrentVersion,this.correlationId);try{const i=await this.networkInterface.sendGetRequestAsync(`${W.IMDS_ENDPOINT}?format=json`,t);return i.status===qi.BAD_REQUEST&&i.body&&i.body["newest-versions"]&&i.body["newest-versions"].length>0?i.body["newest-versions"][0]:null}catch{return null}}}hl.IMDS_OPTIONS={headers:{Metadata:"true"}};function Vt(){return Math.round(new Date().getTime()/1e3)}function $v(c){return c.getTime()/1e3}function wr(c){return c?new Date(Number(c)*1e3):new Date}function Xc(c,t){const i=Number(c)||0;return Vt()+t>i}function Zv(c,t){const i=Number(c)+t*24*60*60*1e3;return Date.now()>i}function AI(c){return Number(c)>Vt()}function fl(c,t,i,r,s){return{credentialType:It.ID_TOKEN,homeAccountId:c,environment:t,clientId:r,secret:i,realm:s,lastUpdatedAt:Date.now().toString()}}function gl(c,t,i,r,s,l,h,f,g,p,S,T,A,K,ee){const ie={homeAccountId:c,credentialType:It.ACCESS_TOKEN,secret:i,cachedAt:Vt().toString(),expiresOn:h.toString(),extendedExpiresOn:f.toString(),environment:t,clientId:r,realm:s,target:l,tokenType:S||Ke.BEARER,lastUpdatedAt:Date.now().toString()};if(T&&(ie.userAssertionHash=T),p&&(ie.refreshOn=p.toString()),K&&(ie.requestedClaims=K,ie.requestedClaimsHash=ee),ie.tokenType?.toLowerCase()!==Ke.BEARER.toLowerCase())switch(ie.credentialType=It.ACCESS_TOKEN_WITH_AUTH_SCHEME,ie.tokenType){case Ke.POP:const le=Ln(i,g);if(!le?.cnf?.kid)throw re(hS);ie.keyId=le.cnf.kid;break;case Ke.SSH:ie.keyId=A}return ie}function JS(c,t,i,r,s,l,h){const f={credentialType:It.REFRESH_TOKEN,homeAccountId:c,environment:t,clientId:r,secret:i,lastUpdatedAt:Date.now().toString()};return l&&(f.userAssertionHash=l),s&&(f.familyId=s),h&&(f.expiresOn=h.toString()),f}function ml(c){return c.hasOwnProperty("homeAccountId")&&c.hasOwnProperty("environment")&&c.hasOwnProperty("credentialType")&&c.hasOwnProperty("clientId")&&c.hasOwnProperty("secret")}function Wv(c){return c?ml(c)&&c.hasOwnProperty("realm")&&c.hasOwnProperty("target")&&(c.credentialType===It.ACCESS_TOKEN||c.credentialType===It.ACCESS_TOKEN_WITH_AUTH_SCHEME):!1}function EI(c){return c?ml(c)&&c.hasOwnProperty("realm")&&c.credentialType===It.ID_TOKEN:!1}function eC(c){return c?ml(c)&&c.credentialType===It.REFRESH_TOKEN:!1}function _I(c,t){const i=c.indexOf(Rt.CACHE_KEY)===0;let r=!0;return t&&(r=t.hasOwnProperty("failedRequests")&&t.hasOwnProperty("errors")&&t.hasOwnProperty("cacheHits")),i&&r}function bI(c,t){let i=!1;c&&(i=c.indexOf(ja.THROTTLING_PREFIX)===0);let r=!0;return t&&(r=t.hasOwnProperty("throttleTime")),i&&r}function wI({environment:c,clientId:t}){return[Vh,c,t].join(Va.CACHE_KEY_SEPARATOR).toLowerCase()}function RI(c,t){return t?c.indexOf(Vh)===0&&t.hasOwnProperty("clientId")&&t.hasOwnProperty("environment"):!1}function II(c,t){return t?c.indexOf(zc.CACHE_KEY)===0&&t.hasOwnProperty("aliases")&&t.hasOwnProperty("preferred_cache")&&t.hasOwnProperty("preferred_network")&&t.hasOwnProperty("canonical_authority")&&t.hasOwnProperty("authorization_endpoint")&&t.hasOwnProperty("token_endpoint")&&t.hasOwnProperty("issuer")&&t.hasOwnProperty("aliasesFromNetwork")&&t.hasOwnProperty("endpointsFromNetwork")&&t.hasOwnProperty("expiresAt")&&t.hasOwnProperty("jwks_uri"):!1}function tC(){return Vt()+zc.REFRESH_TIME_SECONDS}function bc(c,t,i){c.authorization_endpoint=t.authorization_endpoint,c.token_endpoint=t.token_endpoint,c.end_session_endpoint=t.end_session_endpoint,c.issuer=t.issuer,c.endpointsFromNetwork=i,c.jwks_uri=t.jwks_uri}function gh(c,t,i){c.aliases=t.aliases,c.preferred_cache=t.preferred_cache,c.preferred_network=t.preferred_network,c.aliasesFromNetwork=i}function nC(c){return c.expiresAt<=Vt()}class Dt{constructor(t,i,r,s,l,h,f,g){this.canonicalAuthority=t,this._canonicalAuthority.validateAsUri(),this.networkInterface=i,this.cacheManager=r,this.authorityOptions=s,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=l,this.performanceClient=f,this.correlationId=h,this.managedIdentity=g||!1,this.regionDiscovery=new hl(i,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(t){if(t.HostNameAndPort.endsWith(W.CIAM_AUTH_URL))return wn.Ciam;const i=t.PathSegments;if(i.length)switch(i[0].toLowerCase()){case W.ADFS:return wn.Adfs;case W.DSTS:return wn.Dsts}return wn.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(t){this._canonicalAuthority=new Pe(t),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw re(ai)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw re(ai)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw re(ai)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw re(mS);return this.replacePath(this.metadata.end_session_endpoint)}else throw re(ai)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw re(ai)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw re(ai)}canReplaceTenant(t){return t.PathSegments.length===1&&!Dt.reservedTenantDomains.has(t.PathSegments[0])&&this.getAuthorityType(t)===wn.Default&&this.protocolMode!==Yt.OIDC}replaceTenant(t){return t.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(t){let i=t;const s=new Pe(this.metadata.canonical_authority).getUrlComponents(),l=s.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((f,g)=>{let p=l[g];if(g===0&&this.canReplaceTenant(s)){const S=new Pe(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];p!==S&&(this.logger.verbose(`Replacing tenant domain name ${p} with id ${S}`),p=S)}f!==p&&(i=i.replace(`/${p}/`,`/${f}/`))}),this.replaceTenant(i)}get defaultOpenIdConfigurationEndpoint(){const t=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===wn.Adfs||this.protocolMode===Yt.OIDC&&!this.isAliasOfKnownMicrosoftAuthority(t)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){this.performanceClient?.addQueueMeasurement(w.AuthorityResolveEndpointsAsync,this.correlationId);const t=this.getCurrentMetadataEntity(),i=await Q(this.updateCloudDiscoveryMetadata.bind(this),w.AuthorityUpdateCloudDiscoveryMetadata,this.logger,this.performanceClient,this.correlationId)(t);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,t.preferred_network);const r=await Q(this.updateEndpointMetadata.bind(this),w.AuthorityUpdateEndpointMetadata,this.logger,this.performanceClient,this.correlationId)(t);this.updateCachedMetadata(t,i,{source:r}),this.performanceClient?.addFields({cloudDiscoverySource:i,authorityEndpointSource:r},this.correlationId)}getCurrentMetadataEntity(){let t=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return t||(t={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:tC(),jwks_uri:""}),t}updateCachedMetadata(t,i,r){i!==on.CACHE&&r?.source!==on.CACHE&&(t.expiresAt=tC(),t.canonical_authority=this.canonicalAuthority);const s=this.cacheManager.generateAuthorityMetadataCacheKey(t.preferred_cache);this.cacheManager.setAuthorityMetadata(s,t),this.metadata=t}async updateEndpointMetadata(t){this.performanceClient?.addQueueMeasurement(w.AuthorityUpdateEndpointMetadata,this.correlationId);const i=this.updateEndpointMetadataFromLocalSources(t);if(i){if(i.source===on.HARDCODED_VALUES&&this.authorityOptions.azureRegionConfiguration?.azureRegion&&i.metadata){const s=await Q(this.updateMetadataWithRegionalInformation.bind(this),w.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(i.metadata);bc(t,s,!1),t.canonical_authority=this.canonicalAuthority}return i.source}let r=await Q(this.getEndpointMetadataFromNetwork.bind(this),w.AuthorityGetEndpointMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(r)return this.authorityOptions.azureRegionConfiguration?.azureRegion&&(r=await Q(this.updateMetadataWithRegionalInformation.bind(this),w.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(r)),bc(t,r,!0),on.NETWORK;throw re(nS,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(t){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");const i=this.getEndpointMetadataFromConfig();if(i)return this.logger.verbose("Found endpoint metadata in authority configuration"),bc(t,i,!1),{source:on.CONFIG};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{const s=this.getEndpointMetadataFromHardcodedValues();if(s)return bc(t,s,!1),{source:on.HARDCODED_VALUES,metadata:s};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}const r=nC(t);return this.isAuthoritySameType(t)&&t.endpointsFromNetwork&&!r?(this.logger.verbose("Found endpoint metadata in the cache."),{source:on.CACHE}):(r&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(t){return new Pe(t.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw Xe(ES)}return null}async getEndpointMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(w.AuthorityGetEndpointMetadataFromNetwork,this.correlationId);const t={},i=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${i}`);try{const r=await this.networkInterface.sendGetRequestAsync(i,t);return CI(r.body)?r.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(r){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${r}`),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in Qv?Qv[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(t){this.performanceClient?.addQueueMeasurement(w.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId);const i=this.authorityOptions.azureRegionConfiguration?.azureRegion;if(i){if(i!==W.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=hh.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=i,Dt.replaceWithRegionalInformation(t,i);const r=await Q(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),w.RegionDiscoveryDetectRegion,this.logger,this.performanceClient,this.correlationId)(this.authorityOptions.azureRegionConfiguration?.environmentRegion,this.regionDiscoveryMetadata);if(r)return this.regionDiscoveryMetadata.region_outcome=hh.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=r,Dt.replaceWithRegionalInformation(t,r);this.regionDiscoveryMetadata.region_outcome=hh.AUTO_DETECTION_REQUESTED_FAILED}return t}async updateCloudDiscoveryMetadata(t){this.performanceClient?.addQueueMeasurement(w.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId);const i=this.updateCloudDiscoveryMetadataFromLocalSources(t);if(i)return i;const r=await Q(this.getCloudDiscoveryMetadataFromNetwork.bind(this),w.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(r)return gh(t,r,!0),on.NETWORK;throw Xe(_S)}updateCloudDiscoveryMetadataFromLocalSources(t){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||W.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||W.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${t.canonical_authority||W.NOT_APPLICABLE}`);const i=this.getCloudDiscoveryMetadataFromConfig();if(i)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),gh(t,i,!1),on.CONFIG;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{const s=dR(this.hostnameAndPort);if(s)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),gh(t,s,!1),on.HARDCODED_VALUES;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}const r=nC(t);return this.isAuthoritySameType(t)&&t.aliasesFromNetwork&&!r?(this.logger.verbose("Found cloud discovery metadata in the cache."),on.CACHE):(r&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===wn.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),Dt.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");const t=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),i=Gc(t.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),i)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),i;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),Xe(sf)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),Dt.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(w.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId);const t=`${W.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,i={};let r=null;try{const s=await this.networkInterface.sendGetRequestAsync(t,i);let l,h;if(SI(s.body))l=s.body,h=l.metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${l.tenant_discovery_endpoint}`);else if(TI(s.body)){if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${s.status}`),l=s.body,l.error===W.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${l.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${l.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),h=[]}else return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),r=Gc(h,this.hostnameAndPort)}catch(s){if(s instanceof Ye)this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: ${s.errorCode}
Error Description: ${s.errorMessage}`);else{const l=s;this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: ${l.name}
Error Description: ${l.message}`)}return null}return r||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),r=Dt.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),r}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(i=>i&&Pe.getDomainFromUrl(i).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(t,i){let r;if(i&&i.azureCloudInstance!==of.None){const s=i.tenant?i.tenant:W.DEFAULT_COMMON_TENANT;r=`${i.azureCloudInstance}/${s}/`}return r||t}static createCloudDiscoveryMetadataFromHost(t){return{preferred_network:t,preferred_cache:t,aliases:[t]}}getPreferredCache(){if(this.managedIdentity)return W.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw re(ai)}isAlias(t){return this.metadata.aliases.indexOf(t)>-1}isAliasOfKnownMicrosoftAuthority(t){return US.has(t)}static isPublicCloudAuthority(t){return W.KNOWN_PUBLIC_CLOUDS.indexOf(t)>=0}static buildRegionalAuthorityString(t,i,r){const s=new Pe(t);s.validateAsUri();const l=s.getUrlComponents();let h=`${i}.${l.HostNameAndPort}`;this.isPublicCloudAuthority(l.HostNameAndPort)&&(h=`${i}.${W.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);const f=Pe.constructAuthorityUriFromObject({...s.getUrlComponents(),HostNameAndPort:h}).urlString;return r?`${f}?${r}`:f}static replaceWithRegionalInformation(t,i){const r={...t};return r.authorization_endpoint=Dt.buildRegionalAuthorityString(r.authorization_endpoint,i),r.token_endpoint=Dt.buildRegionalAuthorityString(r.token_endpoint,i),r.end_session_endpoint&&(r.end_session_endpoint=Dt.buildRegionalAuthorityString(r.end_session_endpoint,i)),r}static transformCIAMAuthority(t){let i=t;const s=new Pe(t).getUrlComponents();if(s.PathSegments.length===0&&s.HostNameAndPort.endsWith(W.CIAM_AUTH_URL)){const l=s.HostNameAndPort.split(".")[0];i=`${i}${l}${W.AAD_TENANT_DOMAIN_SUFFIX}`}return i}}Dt.reservedTenantDomains=new Set(["{tenant}","{tenantid}",ji.COMMON,ji.CONSUMERS,ji.ORGANIZATIONS]);function OI(c){const r=new Pe(c).getUrlComponents().PathSegments.slice(-1)[0]?.toLowerCase();switch(r){case ji.COMMON:case ji.ORGANIZATIONS:case ji.CONSUMERS:return;default:return r}}function $S(c){return c.endsWith(W.FORWARD_SLASH)?c:`${c}${W.FORWARD_SLASH}`}function kI(c){const t=c.cloudDiscoveryMetadata;let i;if(t)try{i=JSON.parse(t)}catch{throw Xe(sf)}return{canonicalAuthority:c.authority?$S(c.authority):void 0,knownAuthorities:c.knownAuthorities,cloudDiscoveryMetadata:i}}async function ZS(c,t,i,r,s,l,h){h?.addQueueMeasurement(w.AuthorityFactoryCreateDiscoveredInstance,l);const f=Dt.transformCIAMAuthority($S(c)),g=new Dt(f,t,i,r,s,l,h);try{return await Q(g.resolveEndpointsAsync.bind(g),w.AuthorityResolveEndpointsAsync,s,h,l)(),g}catch{throw re(ai)}}class Ro extends Ye{constructor(t,i,r,s,l){super(t,i,r),this.name="ServerError",this.errorNo=s,this.status=l,Object.setPrototypeOf(this,Ro.prototype)}}function pl(c,t,i){return{clientId:c,authority:t.authority,scopes:t.scopes,homeAccountIdentifier:i,claims:t.claims,authenticationScheme:t.authenticationScheme,resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,sshKid:t.sshKid,embeddedClientId:t.embeddedClientId||t.tokenBodyParameters?.clientId}}class xn{static generateThrottlingStorageKey(t){return`${ja.THROTTLING_PREFIX}.${JSON.stringify(t)}`}static preProcess(t,i,r){const s=xn.generateThrottlingStorageKey(i),l=t.getThrottlingCache(s);if(l){if(l.throttleTime<Date.now()){t.removeItem(s,r);return}throw new Ro(l.errorCodes?.join(" ")||W.EMPTY_STRING,l.errorMessage,l.subError)}}static postProcess(t,i,r,s){if(xn.checkResponseStatus(r)||xn.checkResponseForRetryAfter(r)){const l={throttleTime:xn.calculateThrottleTime(parseInt(r.headers[Pt.RETRY_AFTER])),error:r.body.error,errorCodes:r.body.error_codes,errorMessage:r.body.error_description,subError:r.body.suberror};t.setThrottlingCache(xn.generateThrottlingStorageKey(i),l,s)}}static checkResponseStatus(t){return t.status===429||t.status>=500&&t.status<600}static checkResponseForRetryAfter(t){return t.headers?t.headers.hasOwnProperty(Pt.RETRY_AFTER)&&(t.status<200||t.status>=300):!1}static calculateThrottleTime(t){const i=t<=0?0:t,r=Date.now()/1e3;return Math.floor(Math.min(r+(i||ja.DEFAULT_THROTTLE_TIME_SECONDS),r+ja.DEFAULT_MAX_THROTTLE_TIME_SECONDS)*1e3)}static removeThrottle(t,i,r,s){const l=pl(i,r,s),h=this.generateThrottlingStorageKey(l);t.removeItem(h,r.correlationId)}}class yl extends Ye{constructor(t,i,r){super(t.errorCode,t.errorMessage,t.subError),Object.setPrototypeOf(this,yl.prototype),this.name="NetworkError",this.error=t,this.httpStatus=i,this.responseHeaders=r}}function Ka(c,t,i,r){return c.errorMessage=`${c.errorMessage}, additionalErrorInfo: error.name:${r?.name}, error.message:${r?.message}`,new yl(c,t,i)}class _f{constructor(t,i){this.config=TR(t),this.logger=new Yi(this.config.loggerOptions,pS,nf),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=i}createTokenRequestHeaders(t){const i={};if(i[Pt.CONTENT_TYPE]=W.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&t)switch(t.type){case In.HOME_ACCOUNT_ID:try{const r=_r(t.credential);i[Pt.CCS_HEADER]=`Oid:${r.uid}@${r.utid}`}catch(r){this.logger.verbose("Could not parse home account ID for CCS Header: "+r)}break;case In.UPN:i[Pt.CCS_HEADER]=`UPN: ${t.credential}`;break}return i}async executePostToTokenEndpoint(t,i,r,s,l,h){h&&this.performanceClient?.addQueueMeasurement(h,l);const f=await this.sendPostRequest(s,t,{body:i,headers:r},l);return this.config.serverTelemetryManager&&f.status<500&&f.status!==429&&this.config.serverTelemetryManager.clearTelemetryCache(),f}async sendPostRequest(t,i,r,s){xn.preProcess(this.cacheManager,t,s);let l;try{l=await Q(this.networkClient.sendPostRequestAsync.bind(this.networkClient),w.NetworkClientSendPostRequestAsync,this.logger,this.performanceClient,s)(i,r);const h=l.headers||{};this.performanceClient?.addFields({refreshTokenSize:l.body.refresh_token?.length||0,httpVerToken:h[Pt.X_MS_HTTP_VERSION]||"",requestId:h[Pt.X_MS_REQUEST_ID]||""},s)}catch(h){if(h instanceof yl){const f=h.responseHeaders;throw f&&this.performanceClient?.addFields({httpVerToken:f[Pt.X_MS_HTTP_VERSION]||"",requestId:f[Pt.X_MS_REQUEST_ID]||"",contentTypeHeader:f[Pt.CONTENT_TYPE]||void 0,contentLengthHeader:f[Pt.CONTENT_LENGTH]||void 0,httpStatus:h.httpStatus},s),h.error}throw h instanceof Ye?h:re(tS)}return xn.postProcess(this.cacheManager,t,l,s),l}async updateAuthority(t,i){this.performanceClient?.addQueueMeasurement(w.UpdateTokenEndpointAuthority,i);const r=`https://${t}/${this.authority.tenant}/`,s=await ZS(r,this.networkClient,this.cacheManager,this.authority.options,this.logger,i,this.performanceClient);this.authority=s}createTokenQueryParameters(t){const i=new Map;return t.embeddedClientId&&dl(i,this.config.authOptions.clientId,this.config.authOptions.redirectUri),t.tokenQueryParameters&&Fi(i,t.tokenQueryParameters),vf(i,t.correlationId),ul(i,t.correlationId,this.performanceClient),Xa(i)}}const Jc="no_tokens_found",WS="native_account_unavailable",bf="refresh_token_expired",wf="ux_not_allowed",MI="interaction_required",NI="consent_required",DI="login_required",vl="bad_token";const iC=[MI,NI,DI,vl,wf],UI=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],xI={[Jc]:"No refresh token found in the cache. Please sign-in.",[WS]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[bf]:"Refresh token has expired.",[vl]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve.",[wf]:"`canShowUI` flag in Edge was set to false. User interaction required on web page. Please invoke an interactive API to resolve."};class On extends Ye{constructor(t,i,r,s,l,h,f,g){super(t,i,r),Object.setPrototypeOf(this,On.prototype),this.timestamp=s||W.EMPTY_STRING,this.traceId=l||W.EMPTY_STRING,this.correlationId=h||W.EMPTY_STRING,this.claims=f||W.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=g}}function eT(c,t,i){const r=!!c&&iC.indexOf(c)>-1,s=!!i&&UI.indexOf(i)>-1,l=!!t&&iC.some(h=>t.indexOf(h)>-1);return r||l||s}function $c(c){return new On(c,xI[c])}class Pr{static setRequestState(t,i,r){const s=Pr.generateLibraryState(t,r);return i?`${s}${W.RESOURCE_DELIM}${i}`:s}static generateLibraryState(t,i){if(!t)throw re(Ih);const r={id:t.createNewGuid()};i&&(r.meta=i);const s=JSON.stringify(r);return t.base64Encode(s)}static parseRequestState(t,i){if(!t)throw re(Ih);if(!i)throw re(Mr);try{const r=i.split(W.RESOURCE_DELIM),s=r[0],l=r.length>1?r.slice(1).join(W.RESOURCE_DELIM):W.EMPTY_STRING,h=t.base64Decode(s),f=JSON.parse(h);return{userRequestState:l||W.EMPTY_STRING,libraryState:f}}catch{throw re(Mr)}}}const PI={SW:"sw"};class Nr{constructor(t,i){this.cryptoUtils=t,this.performanceClient=i}async generateCnf(t,i){this.performanceClient?.addQueueMeasurement(w.PopTokenGenerateCnf,t.correlationId);const r=await Q(this.generateKid.bind(this),w.PopTokenGenerateCnf,i,this.performanceClient,t.correlationId)(t),s=this.cryptoUtils.base64UrlEncode(JSON.stringify(r));return{kid:r.kid,reqCnfString:s}}async generateKid(t){return this.performanceClient?.addQueueMeasurement(w.PopTokenGenerateKid,t.correlationId),{kid:await this.cryptoUtils.getPublicKeyThumbprint(t),xms_ksl:PI.SW}}async signPopToken(t,i,r){return this.signPayload(t,i,r)}async signPayload(t,i,r,s){const{resourceRequestMethod:l,resourceRequestUri:h,shrClaims:f,shrNonce:g,shrOptions:p}=r,T=(h?new Pe(h):void 0)?.getUrlComponents();return this.cryptoUtils.signJwt({at:t,ts:Vt(),m:l?.toUpperCase(),u:T?.HostNameAndPort,nonce:g||this.cryptoUtils.createNewGuid(),p:T?.AbsolutePath,q:T?.QueryString?[[],T.QueryString]:void 0,client_claims:f||void 0,...s},i,p,r.correlationId)}}class HI{constructor(t,i){this.cache=t,this.hasChanged=i}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}class Ao{constructor(t,i,r,s,l,h,f){this.clientId=t,this.cacheStorage=i,this.cryptoObj=r,this.logger=s,this.serializableCache=l,this.persistencePlugin=h,this.performanceClient=f}validateTokenResponse(t,i){if(t.error||t.error_description||t.suberror){const r=`Error(s): ${t.error_codes||W.NOT_AVAILABLE} - Timestamp: ${t.timestamp||W.NOT_AVAILABLE} - Description: ${t.error_description||W.NOT_AVAILABLE} - Correlation ID: ${t.correlation_id||W.NOT_AVAILABLE} - Trace ID: ${t.trace_id||W.NOT_AVAILABLE}`,s=t.error_codes?.length?t.error_codes[0]:void 0,l=new Ro(t.error,r,t.suberror,s,t.status);if(i&&t.status&&t.status>=qi.SERVER_ERROR_RANGE_START&&t.status<=qi.SERVER_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.
${l}`);return}else if(i&&t.status&&t.status>=qi.CLIENT_ERROR_RANGE_START&&t.status<=qi.CLIENT_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.
${l}`);return}throw eT(t.error,t.error_description,t.suberror)?new On(t.error,t.error_description,t.suberror,t.timestamp||W.EMPTY_STRING,t.trace_id||W.EMPTY_STRING,t.correlation_id||W.EMPTY_STRING,t.claims||W.EMPTY_STRING,s):l}}async handleServerTokenResponse(t,i,r,s,l,h,f,g,p){this.performanceClient?.addQueueMeasurement(w.HandleServerTokenResponse,t.correlation_id);let S;if(t.id_token){if(S=Ln(t.id_token||W.EMPTY_STRING,this.cryptoObj.base64Decode),l&&l.nonce&&S.nonce!==l.nonce)throw re(rS);if(s.maxAge||s.maxAge===0){const ee=S.auth_time;if(!ee)throw re($h);MS(ee,s.maxAge)}}this.homeAccountIdentifier=ot.generateHomeAccountId(t.client_info||W.EMPTY_STRING,i.authorityType,this.logger,this.cryptoObj,S);let T;l&&l.state&&(T=Pr.parseRequestState(this.cryptoObj,l.state)),t.key_id=t.key_id||s.sshKid||void 0;const A=this.generateCacheRecord(t,i,r,s,S,h,l);let K;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),K=new HI(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(K)),f&&!g&&A.account){const ee=this.cacheStorage.generateAccountKey(ot.getAccountInfo(A.account));if(!this.cacheStorage.getAccount(ee,s.correlationId))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),await Ao.generateAuthenticationResult(this.cryptoObj,i,A,!1,s,S,T,void 0,p)}await this.cacheStorage.saveCacheRecord(A,s.correlationId,zn(S||{}),s.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&K&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(K))}return Ao.generateAuthenticationResult(this.cryptoObj,i,A,!1,s,S,T,t,p)}generateCacheRecord(t,i,r,s,l,h,f){const g=i.getPreferredCache();if(!g)throw re(Wh);const p=uf(l);let S,T;t.id_token&&l&&(S=fl(this.homeAccountIdentifier,g,t.id_token,this.clientId,p||""),T=Rf(this.cacheStorage,i,this.homeAccountIdentifier,this.cryptoObj.base64Decode,s.correlationId,l,t.client_info,g,p,f,void 0,this.logger));let A=null;if(t.access_token){const ie=t.scope?pt.fromString(t.scope):new pt(s.scopes||[]),le=(typeof t.expires_in=="string"?parseInt(t.expires_in,10):t.expires_in)||0,se=(typeof t.ext_expires_in=="string"?parseInt(t.ext_expires_in,10):t.ext_expires_in)||0,ce=(typeof t.refresh_in=="string"?parseInt(t.refresh_in,10):t.refresh_in)||void 0,ue=r+le,G=ue+se,ae=ce&&ce>0?r+ce:void 0;A=gl(this.homeAccountIdentifier,g,t.access_token,this.clientId,p||i.tenant||"",ie.printScopes(),ue,G,this.cryptoObj.base64Decode,ae,t.token_type,h,t.key_id,s.claims,s.requestedClaimsHash)}let K=null;if(t.refresh_token){let ie;if(t.refresh_token_expires_in){const le=typeof t.refresh_token_expires_in=="string"?parseInt(t.refresh_token_expires_in,10):t.refresh_token_expires_in;ie=r+le}K=JS(this.homeAccountIdentifier,g,t.refresh_token,this.clientId,t.foci,h,ie)}let ee=null;return t.foci&&(ee={clientId:this.clientId,environment:g,familyId:t.foci}),{account:T,idToken:S,accessToken:A,refreshToken:K,appMetadata:ee}}static async generateAuthenticationResult(t,i,r,s,l,h,f,g,p){let S=W.EMPTY_STRING,T=[],A=null,K,ee,ie=W.EMPTY_STRING;if(r.accessToken){if(r.accessToken.tokenType===Ke.POP&&!l.popKid){const ue=new Nr(t),{secret:G,keyId:ae}=r.accessToken;if(!ae)throw re(ef);S=await ue.signPopToken(G,ae,l)}else S=r.accessToken.secret;T=pt.fromString(r.accessToken.target).asArray(),A=wr(r.accessToken.expiresOn),K=wr(r.accessToken.extendedExpiresOn),r.accessToken.refreshOn&&(ee=wr(r.accessToken.refreshOn))}r.appMetadata&&(ie=r.appMetadata.familyId===Lc?Lc:"");const le=h?.oid||h?.sub||"",se=h?.tid||"";g?.spa_accountid&&r.account&&(r.account.nativeAccountId=g?.spa_accountid);const ce=r.account?lf(ot.getAccountInfo(r.account),void 0,h,r.idToken?.secret):null;return{authority:i.canonicalAuthority,uniqueId:le,tenantId:se,scopes:T,account:ce,idToken:r?.idToken?.secret||"",idTokenClaims:h||{},accessToken:S,fromCache:s,expiresOn:A,extExpiresOn:K,refreshOn:ee,correlationId:l.correlationId,requestId:p||W.EMPTY_STRING,familyId:ie,tokenType:r.accessToken?.tokenType||W.EMPTY_STRING,state:f?f.userRequestState:W.EMPTY_STRING,cloudGraphHostName:r.account?.cloudGraphHostName||W.EMPTY_STRING,msGraphHost:r.account?.msGraphHost||W.EMPTY_STRING,code:g?.spa_code,fromNativeBroker:!1}}}function Rf(c,t,i,r,s,l,h,f,g,p,S,T){T?.verbose("setCachedAccount called");const K=c.getAccountKeys().find(ce=>ce.startsWith(i));let ee=null;K&&(ee=c.getAccount(K,s));const ie=ee||ot.createAccount({homeAccountId:i,idTokenClaims:l,clientInfo:h,environment:f,cloudGraphHostName:p?.cloud_graph_host_name,msGraphHost:p?.msgraph_host,nativeAccountId:S},t,r),le=ie.tenantProfiles||[],se=g||ie.realm;if(se&&!le.find(ce=>ce.tenantId===se)){const ce=ll(i,ie.localAccountId,se,l);le.push(ce)}return ie.tenantProfiles=le,ie}async function tT(c,t,i){return typeof c=="string"?c:c({clientId:t,tokenEndpoint:i})}class nT extends _f{constructor(t,i){super(t,i),this.includeRedirectUri=!0,this.oidcDefaultScopes=this.config.authOptions.authority.options.OIDCOptions?.defaultScopes}async acquireToken(t,i){if(this.performanceClient?.addQueueMeasurement(w.AuthClientAcquireToken,t.correlationId),!t.code)throw re(cS);const r=Vt(),s=await Q(this.executeTokenRequest.bind(this),w.AuthClientExecuteTokenRequest,this.logger,this.performanceClient,t.correlationId)(this.authority,t),l=s.headers?.[Pt.X_MS_REQUEST_ID],h=new Ao(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return h.validateTokenResponse(s.body),Q(h.handleServerTokenResponse.bind(h),w.HandleServerTokenResponse,this.logger,this.performanceClient,t.correlationId)(s.body,this.authority,r,t,i,void 0,void 0,void 0,l)}getLogoutUri(t){if(!t)throw Xe(AS);const i=this.createLogoutUrlQueryString(t);return Pe.appendQueryString(this.authority.endSessionEndpoint,i)}async executeTokenRequest(t,i){this.performanceClient?.addQueueMeasurement(w.AuthClientExecuteTokenRequest,i.correlationId);const r=this.createTokenQueryParameters(i),s=Pe.appendQueryString(t.tokenEndpoint,r),l=await Q(this.createTokenRequestBody.bind(this),w.AuthClientCreateTokenRequestBody,this.logger,this.performanceClient,i.correlationId)(i);let h;if(i.clientInfo)try{const p=qc(i.clientInfo,this.cryptoUtils.base64Decode);h={credential:`${p.uid}${Va.CLIENT_INFO_SEPARATOR}${p.utid}`,type:In.HOME_ACCOUNT_ID}}catch(p){this.logger.verbose("Could not parse client info for CCS Header: "+p)}const f=this.createTokenRequestHeaders(h||i.ccsCredential),g=pl(this.config.authOptions.clientId,i);return Q(this.executePostToTokenEndpoint.bind(this),w.AuthorizationCodeClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,i.correlationId)(s,l,f,g,i.correlationId,w.AuthorizationCodeClientExecutePostToTokenEndpoint)}async createTokenRequestBody(t){this.performanceClient?.addQueueMeasurement(w.AuthClientCreateTokenRequestBody,t.correlationId);const i=new Map;if(mf(i,t.embeddedClientId||t.tokenBodyParameters?.[To]||this.config.authOptions.clientId),this.includeRedirectUri)pf(i,t.redirectUri);else if(!t.redirectUri)throw Xe(yS);if(gf(i,t.scopes,!0,this.oidcDefaultScopes),hI(i,t.code),Cf(i,this.config.libraryInfo),Sf(i,this.config.telemetry.application),XS(i),this.serverTelemetryManager&&!HS(this.config)&&VS(i,this.serverTelemetryManager),t.codeVerifier&&gI(i,t.codeVerifier),this.config.clientCredentials.clientSecret&&qS(i,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const s=this.config.clientCredentials.clientAssertion;jS(i,await tT(s.assertion,this.config.authOptions.clientId,t.resourceRequestUri)),GS(i,s.assertionType)}if(FS(i,$C.AUTHORIZATION_CODE_GRANT),Af(i),t.authenticationScheme===Ke.POP){const s=new Nr(this.cryptoUtils,this.performanceClient);let l;t.popKid?l=this.cryptoUtils.encodeKid(t.popKid):l=(await Q(s.generateCnf.bind(s),w.PopTokenGenerateCnf,this.logger,this.performanceClient,t.correlationId)(t,this.logger)).reqCnfString,Ef(i,l)}else if(t.authenticationScheme===Ke.SSH)if(t.sshJwk)YS(i,t.sshJwk);else throw Xe(cl);(!rn.isEmptyObj(t.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&yf(i,t.claims,this.config.authOptions.clientCapabilities);let r;if(t.clientInfo)try{const s=qc(t.clientInfo,this.cryptoUtils.base64Decode);r={credential:`${s.uid}${Va.CLIENT_INFO_SEPARATOR}${s.utid}`,type:In.HOME_ACCOUNT_ID}}catch(s){this.logger.verbose("Could not parse client info for CCS Header: "+s)}else r=t.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&r)switch(r.type){case In.HOME_ACCOUNT_ID:try{const s=_r(r.credential);Ga(i,s)}catch(s){this.logger.verbose("Could not parse home account ID for CCS Header: "+s)}break;case In.UPN:Vc(i,r.credential);break}return t.embeddedClientId&&dl(i,this.config.authOptions.clientId,this.config.authOptions.redirectUri),t.tokenBodyParameters&&Fi(i,t.tokenBodyParameters),t.enableSpaAuthorizationCode&&(!t.tokenBodyParameters||!t.tokenBodyParameters[Xv])&&Fi(i,{[Xv]:"1"}),ul(i,t.correlationId,this.performanceClient),Xa(i)}createLogoutUrlQueryString(t){const i=new Map;return t.postLogoutRedirectUri&&sI(i,t.postLogoutRedirectUri),t.correlationId&&vf(i,t.correlationId),t.idTokenHint&&cI(i,t.idTokenHint),t.state&&KS(i,t.state),t.logoutHint&&pI(i,t.logoutHint),t.extraQueryParameters&&Fi(i,t.extraQueryParameters),this.config.authOptions.instanceAware&&QS(i),Xa(i,this.config.authOptions.encodeExtraQueryParams,t.extraQueryParameters)}}const LI=300;class zI extends _f{constructor(t,i){super(t,i)}async acquireToken(t){this.performanceClient?.addQueueMeasurement(w.RefreshTokenClientAcquireToken,t.correlationId);const i=Vt(),r=await Q(this.executeTokenRequest.bind(this),w.RefreshTokenClientExecuteTokenRequest,this.logger,this.performanceClient,t.correlationId)(t,this.authority),s=r.headers?.[Pt.X_MS_REQUEST_ID],l=new Ao(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return l.validateTokenResponse(r.body),Q(l.handleServerTokenResponse.bind(l),w.HandleServerTokenResponse,this.logger,this.performanceClient,t.correlationId)(r.body,this.authority,i,t,void 0,void 0,!0,t.forceCache,s)}async acquireTokenByRefreshToken(t){if(!t)throw Xe(TS);if(this.performanceClient?.addQueueMeasurement(w.RefreshTokenClientAcquireTokenByRefreshToken,t.correlationId),!t.account)throw re(Zh);if(this.cacheManager.isAppMetadataFOCI(t.account.environment))try{return await Q(this.acquireTokenWithCachedRefreshToken.bind(this),w.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,t.correlationId)(t,!0)}catch(r){const s=r instanceof On&&r.errorCode===Jc,l=r instanceof Ro&&r.errorCode===Bv.INVALID_GRANT_ERROR&&r.subError===Bv.CLIENT_MISMATCH_ERROR;if(s||l)return Q(this.acquireTokenWithCachedRefreshToken.bind(this),w.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,t.correlationId)(t,!1);throw r}return Q(this.acquireTokenWithCachedRefreshToken.bind(this),w.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,t.correlationId)(t,!1)}async acquireTokenWithCachedRefreshToken(t,i){this.performanceClient?.addQueueMeasurement(w.RefreshTokenClientAcquireTokenWithCachedRefreshToken,t.correlationId);const r=an(this.cacheManager.getRefreshToken.bind(this.cacheManager),w.CacheManagerGetRefreshToken,this.logger,this.performanceClient,t.correlationId)(t.account,i,t.correlationId,void 0,this.performanceClient);if(!r)throw $c(Jc);if(r.expiresOn&&Xc(r.expiresOn,t.refreshTokenExpirationOffsetSeconds||LI))throw this.performanceClient?.addFields({rtExpiresOnMs:Number(r.expiresOn)},t.correlationId),$c(bf);const s={...t,refreshToken:r.secret,authenticationScheme:t.authenticationScheme||Ke.BEARER,ccsCredential:{credential:t.account.homeAccountId,type:In.HOME_ACCOUNT_ID}};try{return await Q(this.acquireToken.bind(this),w.RefreshTokenClientAcquireToken,this.logger,this.performanceClient,t.correlationId)(s)}catch(l){if(l instanceof On&&(this.performanceClient?.addFields({rtExpiresOnMs:Number(r.expiresOn)},t.correlationId),l.subError===vl)){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");const h=this.cacheManager.generateCredentialKey(r);this.cacheManager.removeRefreshToken(h,t.correlationId)}throw l}}async executeTokenRequest(t,i){this.performanceClient?.addQueueMeasurement(w.RefreshTokenClientExecuteTokenRequest,t.correlationId);const r=this.createTokenQueryParameters(t),s=Pe.appendQueryString(i.tokenEndpoint,r),l=await Q(this.createTokenRequestBody.bind(this),w.RefreshTokenClientCreateTokenRequestBody,this.logger,this.performanceClient,t.correlationId)(t),h=this.createTokenRequestHeaders(t.ccsCredential),f=pl(this.config.authOptions.clientId,t);return Q(this.executePostToTokenEndpoint.bind(this),w.RefreshTokenClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,t.correlationId)(s,l,h,f,t.correlationId,w.RefreshTokenClientExecutePostToTokenEndpoint)}async createTokenRequestBody(t){this.performanceClient?.addQueueMeasurement(w.RefreshTokenClientCreateTokenRequestBody,t.correlationId);const i=new Map;if(mf(i,t.embeddedClientId||t.tokenBodyParameters?.[To]||this.config.authOptions.clientId),t.redirectUri&&pf(i,t.redirectUri),gf(i,t.scopes,!0,this.config.authOptions.authority.options.OIDCOptions?.defaultScopes),FS(i,$C.REFRESH_TOKEN_GRANT),Af(i),Cf(i,this.config.libraryInfo),Sf(i,this.config.telemetry.application),XS(i),this.serverTelemetryManager&&!HS(this.config)&&VS(i,this.serverTelemetryManager),fI(i,t.refreshToken),this.config.clientCredentials.clientSecret&&qS(i,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const r=this.config.clientCredentials.clientAssertion;jS(i,await tT(r.assertion,this.config.authOptions.clientId,t.resourceRequestUri)),GS(i,r.assertionType)}if(t.authenticationScheme===Ke.POP){const r=new Nr(this.cryptoUtils,this.performanceClient);let s;t.popKid?s=this.cryptoUtils.encodeKid(t.popKid):s=(await Q(r.generateCnf.bind(r),w.PopTokenGenerateCnf,this.logger,this.performanceClient,t.correlationId)(t,this.logger)).reqCnfString,Ef(i,s)}else if(t.authenticationScheme===Ke.SSH)if(t.sshJwk)YS(i,t.sshJwk);else throw Xe(cl);if((!rn.isEmptyObj(t.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&yf(i,t.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&t.ccsCredential)switch(t.ccsCredential.type){case In.HOME_ACCOUNT_ID:try{const r=_r(t.ccsCredential.credential);Ga(i,r)}catch(r){this.logger.verbose("Could not parse home account ID for CCS Header: "+r)}break;case In.UPN:Vc(i,t.ccsCredential.credential);break}return t.embeddedClientId&&dl(i,this.config.authOptions.clientId,this.config.authOptions.redirectUri),t.tokenBodyParameters&&Fi(i,t.tokenBodyParameters),ul(i,t.correlationId,this.performanceClient),Xa(i)}}class BI extends _f{constructor(t,i){super(t,i)}async acquireCachedToken(t){this.performanceClient?.addQueueMeasurement(w.SilentFlowClientAcquireCachedToken,t.correlationId);let i=vo.NOT_APPLICABLE;if(t.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!rn.isEmptyObj(t.claims))throw this.setCacheOutcome(vo.FORCE_REFRESH_OR_CLAIMS,t.correlationId),re(Gi);if(!t.account)throw re(Zh);const r=t.account.tenantId||OI(t.authority),s=this.cacheManager.getTokenKeys(),l=this.cacheManager.getAccessToken(t.account,t,s,r);if(l){if(AI(l.cachedAt)||Xc(l.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(vo.CACHED_ACCESS_TOKEN_EXPIRED,t.correlationId),re(Gi);l.refreshOn&&Xc(l.refreshOn,0)&&(i=vo.PROACTIVELY_REFRESHED)}else throw this.setCacheOutcome(vo.NO_CACHED_ACCESS_TOKEN,t.correlationId),re(Gi);const h=t.authority||this.authority.getPreferredCache(),f={account:this.cacheManager.getAccount(this.cacheManager.generateAccountKey(t.account),t.correlationId),accessToken:l,idToken:this.cacheManager.getIdToken(t.account,t.correlationId,s,r,this.performanceClient),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(h)};return this.setCacheOutcome(i,t.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await Q(this.generateResultFromCacheRecord.bind(this),w.SilentFlowClientGenerateResultFromCacheRecord,this.logger,this.performanceClient,t.correlationId)(f,t),i]}setCacheOutcome(t,i){this.serverTelemetryManager?.setCacheOutcome(t),this.performanceClient?.addFields({cacheOutcome:t},i),t!==vo.NOT_APPLICABLE&&this.logger.info(`Token refresh is required due to cache outcome: ${t}`)}async generateResultFromCacheRecord(t,i){this.performanceClient?.addQueueMeasurement(w.SilentFlowClientGenerateResultFromCacheRecord,i.correlationId);let r;if(t.idToken&&(r=Ln(t.idToken.secret,this.config.cryptoInterface.base64Decode)),i.maxAge||i.maxAge===0){const s=r?.auth_time;if(!s)throw re($h);MS(s,i.maxAge)}return Ao.generateAuthenticationResult(this.cryptoUtils,this.authority,t,!0,i,r)}}const KI={sendGetRequestAsync:()=>Promise.reject(re(Re)),sendPostRequestAsync:()=>Promise.reject(re(Re))};function qI(c,t,i,r){const s=t.correlationId,l=new Map;mf(l,t.embeddedClientId||t.extraQueryParameters?.[To]||c.clientId);const h=[...t.scopes||[],...t.extraScopesToConsent||[]];if(gf(l,h,!0,c.authority.options.OIDCOptions?.defaultScopes),pf(l,t.redirectUri),vf(l,s),rI(l,t.responseMode),Af(l),t.prompt&&(uI(l,t.prompt),r?.addFields({prompt:t.prompt},s)),t.domainHint&&(lI(l,t.domainHint),r?.addFields({domainHintFromRequest:!0},s)),t.prompt!==kt.SELECT_ACCOUNT)if(t.sid&&t.prompt===kt.NONE)i.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),Jv(l,t.sid),r?.addFields({sidFromRequest:!0},s);else if(t.account){const f=FI(t.account);let g=QI(t.account);if(g&&t.domainHint&&(i.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),g=null),g){i.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),_c(l,g),r?.addFields({loginHintFromClaim:!0},s);try{const p=_r(t.account.homeAccountId);Ga(l,p)}catch{i.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(f&&t.prompt===kt.NONE){i.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),Jv(l,f),r?.addFields({sidFromClaim:!0},s);try{const p=_r(t.account.homeAccountId);Ga(l,p)}catch{i.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(t.loginHint)i.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),_c(l,t.loginHint),Vc(l,t.loginHint),r?.addFields({loginHintFromRequest:!0},s);else if(t.account.username){i.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),_c(l,t.account.username),r?.addFields({loginHintFromUpn:!0},s);try{const p=_r(t.account.homeAccountId);Ga(l,p)}catch{i.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else t.loginHint&&(i.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),_c(l,t.loginHint),Vc(l,t.loginHint),r?.addFields({loginHintFromRequest:!0},s));else i.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");return t.nonce&&dI(l,t.nonce),t.state&&KS(l,t.state),(t.claims||c.clientCapabilities&&c.clientCapabilities.length>0)&&yf(l,t.claims,c.clientCapabilities),t.embeddedClientId&&dl(l,c.clientId,c.redirectUri),c.instanceAware&&(!t.extraQueryParameters||!Object.keys(t.extraQueryParameters).includes(Mh))&&QS(l),l}function If(c,t,i,r){const s=Xa(t,i,r);return Pe.appendQueryString(c.authorizationEndpoint,s)}function jI(c,t){if(iT(c,t),!c.code)throw re(fS);return c}function iT(c,t){if(!c.state||!t)throw c.state?re(bh,"Cached State"):re(bh,"Server State");let i,r;try{i=decodeURIComponent(c.state)}catch{throw re(Mr,c.state)}try{r=decodeURIComponent(t)}catch{throw re(Mr,c.state)}if(i!==r)throw re(oS);if(c.error||c.error_description||c.suberror){const s=GI(c);throw eT(c.error,c.error_description,c.suberror)?new On(c.error||"",c.error_description,c.suberror,c.timestamp||"",c.trace_id||"",c.correlation_id||"",c.claims||"",s):new Ro(c.error||"",c.error_description,c.suberror,s)}}function GI(c){const t="code=",i=c.error_uri?.lastIndexOf(t);return i&&i>=0?c.error_uri?.substring(i+t.length):void 0}function FI(c){return c.idTokenClaims?.sid||null}function QI(c){return c.loginHint||c.idTokenClaims?.login_hint||null}const oC=",",oT="|";function YI(c){const{skus:t,libraryName:i,libraryVersion:r,extensionName:s,extensionVersion:l}=c,h=new Map([[0,[i,r]],[2,[s,l]]]);let f=[];if(t?.length){if(f=t.split(oC),f.length<4)return t}else f=Array.from({length:4},()=>oT);return h.forEach((g,p)=>{g.length===2&&g[0]?.length&&g[1]?.length&&VI({skuArr:f,index:p,skuName:g[0],skuVersion:g[1]})}),f.join(oC)}function VI(c){const{skuArr:t,index:i,skuName:r,skuVersion:s}=c;i>=t.length||(t[i]=[r,s].join(oT))}class Ja{constructor(t,i){this.cacheOutcome=vo.NOT_APPLICABLE,this.cacheManager=i,this.apiId=t.apiId,this.correlationId=t.correlationId,this.wrapperSKU=t.wrapperSKU||W.EMPTY_STRING,this.wrapperVer=t.wrapperVer||W.EMPTY_STRING,this.telemetryCacheKey=Rt.CACHE_KEY+Va.CACHE_KEY_SEPARATOR+t.clientId}generateCurrentRequestHeaderValue(){const t=`${this.apiId}${Rt.VALUE_SEPARATOR}${this.cacheOutcome}`,i=[this.wrapperSKU,this.wrapperVer],r=this.getNativeBrokerErrorCode();r?.length&&i.push(`broker_error=${r}`);const s=i.join(Rt.VALUE_SEPARATOR),l=this.getRegionDiscoveryFields(),h=[t,l].join(Rt.VALUE_SEPARATOR);return[Rt.SCHEMA_VERSION,h,s].join(Rt.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){const t=this.getLastRequests(),i=Ja.maxErrorsToSend(t),r=t.failedRequests.slice(0,2*i).join(Rt.VALUE_SEPARATOR),s=t.errors.slice(0,i).join(Rt.VALUE_SEPARATOR),l=t.errors.length,h=i<l?Rt.OVERFLOW_TRUE:Rt.OVERFLOW_FALSE,f=[l,h].join(Rt.VALUE_SEPARATOR);return[Rt.SCHEMA_VERSION,t.cacheHits,r,s,f].join(Rt.CATEGORY_SEPARATOR)}cacheFailedRequest(t){const i=this.getLastRequests();i.errors.length>=Rt.MAX_CACHED_ERRORS&&(i.failedRequests.shift(),i.failedRequests.shift(),i.errors.shift()),i.failedRequests.push(this.apiId,this.correlationId),t instanceof Error&&t&&t.toString()?t instanceof Ye?t.subError?i.errors.push(t.subError):t.errorCode?i.errors.push(t.errorCode):i.errors.push(t.toString()):i.errors.push(t.toString()):i.errors.push(Rt.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,i,this.correlationId)}incrementCacheHits(){const t=this.getLastRequests();return t.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t,this.correlationId),t.cacheHits}getLastRequests(){const t={failedRequests:[],errors:[],cacheHits:0};return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||t}clearTelemetryCache(){const t=this.getLastRequests(),i=Ja.maxErrorsToSend(t),r=t.errors.length;if(i===r)this.cacheManager.removeItem(this.telemetryCacheKey,this.correlationId);else{const s={failedRequests:t.failedRequests.slice(i*2),errors:t.errors.slice(i),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,s,this.correlationId)}}static maxErrorsToSend(t){let i,r=0,s=0;const l=t.errors.length;for(i=0;i<l;i++){const h=t.failedRequests[2*i]||W.EMPTY_STRING,f=t.failedRequests[2*i+1]||W.EMPTY_STRING,g=t.errors[i]||W.EMPTY_STRING;if(s+=h.toString().length+f.toString().length+g.length+3,s<Rt.MAX_LAST_HEADER_BYTES)r+=1;else break}return r}getRegionDiscoveryFields(){const t=[];return t.push(this.regionUsed||W.EMPTY_STRING),t.push(this.regionSource||W.EMPTY_STRING),t.push(this.regionOutcome||W.EMPTY_STRING),t.join(",")}updateRegionDiscoveryMetadata(t){this.regionUsed=t.region_used,this.regionSource=t.region_source,this.regionOutcome=t.region_outcome}setCacheOutcome(t){this.cacheOutcome=t}setNativeBrokerErrorCode(t){const i=this.getLastRequests();i.nativeBrokerErrorCode=t,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,i,this.correlationId)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){const t=this.getLastRequests();delete t.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t,this.correlationId)}static makeExtraSkuString(t){return YI(t)}}const rT="missing_kid_error",aT="missing_alg_error";const XI={[rT]:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",[aT]:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."};class Of extends Ye{constructor(t,i){super(t,i),this.name="JoseHeaderError",Object.setPrototypeOf(this,Of.prototype)}}function rC(c){return new Of(c,XI[c])}class kf{constructor(t){this.typ=t.typ,this.alg=t.alg,this.kid=t.kid}static getShrHeaderString(t){if(!t.kid)throw rC(rT);if(!t.alg)throw rC(aT);const i=new kf({typ:t.typ||qw.Pop,kid:t.kid,alg:t.alg});return JSON.stringify(i)}}const Mf="pkce_not_created",Nf="ear_jwk_empty",sT="ear_jwe_empty",Nh="crypto_nonexistent",Cl="empty_navigate_uri",cT="hash_empty_error",Df="no_state_in_hash",lT="hash_does_not_contain_known_properties",uT="unable_to_parse_state",dT="state_interaction_type_mismatch",hT="interaction_in_progress",fT="popup_window_error",gT="empty_window_error",$a="user_cancelled",JI="monitor_popup_timeout",mT="monitor_window_timeout",pT="redirect_in_iframe",yT="block_iframe_reload",vT="block_nested_popups",$I="iframe_closed_prematurely",Sl="silent_logout_unsupported",CT="no_account_error",ZI="silent_prompt_value_error",ST="no_token_request_cache_error",TT="unable_to_parse_token_request_cache_error",WI="auth_request_not_set_error",eO="invalid_cache_type",Tl="non_browser_environment",Tr="database_not_open",Zc="no_network_connectivity",AT="post_request_failed",ET="get_request_failed",Dh="failed_to_parse_response",_T="unable_to_load_token",Uf="crypto_key_not_found",bT="auth_code_required",wT="auth_code_or_nativeAccountId_required",RT="spa_code_and_nativeAccountId_present",xf="database_unavailable",IT="unable_to_acquire_token_from_native_platform",OT="native_handshake_timeout",kT="native_extension_not_installed",Pf="native_connection_not_established",Fa="uninitialized_public_client_application",MT="native_prompt_not_supported",NT="invalid_base64_string",DT="invalid_pop_token_request",UT="failed_to_build_headers",xT="failed_to_parse_headers",Nc="failed_to_decrypt_ear_response",Wc="timed_out";const ri="For more visit: aka.ms/msaljs/browser-errors",tO={[Mf]:"The PKCE code challenge and verifier could not be generated.",[Nf]:"No EAR encryption key provided. This is unexpected.",[sT]:"Server response does not contain ear_jwe property. This is unexpected.",[Nh]:"The crypto object or function is not available.",[Cl]:"Navigation URI is empty. Please check stack trace for more info.",[cT]:`Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. ${ri}`,[Df]:"Hash does not contain state. Please verify that the request originated from msal.",[lT]:`Hash does not contain known properites. Please verify that your redirectUri is not changing the hash.  ${ri}`,[uT]:"Unable to parse state. Please verify that the request originated from msal.",[dT]:"Hash contains state but the interaction type does not match the caller.",[hT]:`Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.   ${ri}`,[fT]:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",[gT]:"window.open returned null or undefined window object.",[$a]:"User cancelled the flow.",[JI]:`Token acquisition in popup failed due to timeout.  ${ri}`,[mT]:`Token acquisition in iframe failed due to timeout.  ${ri}`,[pT]:"Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",[yT]:`Request was blocked inside an iframe because MSAL detected an authentication response.  ${ri}`,[vT]:"Request was blocked inside a popup because MSAL detected it was running in a popup.",[$I]:"The iframe being monitored was closed prematurely.",[Sl]:"Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",[CT]:"No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",[ZI]:"The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'.",[ST]:"No token request found in cache.",[TT]:"The cached token request could not be parsed.",[WI]:"Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",[eO]:"Invalid cache type",[Tl]:"Login and token requests are not supported in non-browser environments.",[Tr]:"Database is not open!",[Zc]:"No network connectivity. Check your internet connection.",[AT]:"Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",[ET]:"Network request failed. Please check the network trace to determine root cause.",[Dh]:"Failed to parse network response. Check network trace.",[_T]:"Error loading token to cache.",[Uf]:"Cryptographic Key or Keypair not found in browser storage.",[bT]:"An authorization code must be provided (as the `code` property on the request) to this flow.",[wT]:"An authorization code or nativeAccountId must be provided to this flow.",[RT]:"Request cannot contain both spa code and native account id.",[xf]:"IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",[IT]:`Unable to acquire token from native platform.  ${ri}`,[OT]:"Timed out while attempting to establish connection to browser extension",[kT]:"Native extension is not installed. If you think this is a mistake call the initialize function.",[Pf]:`Connection to native platform has not been established. Please install a compatible browser extension and run initialize().  ${ri}`,[Fa]:`You must call and await the initialize function before attempting to call any other MSAL API.  ${ri}`,[MT]:"The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",[NT]:"Invalid base64 encoded string.",[DT]:"Invalid PoP token request. The request should not have both a popKid value and signPopToken set to true.",[UT]:"Failed to build request headers object.",[xT]:"Failed to parse response headers",[Nc]:"Failed to decrypt ear response",[Wc]:"The request timed out."};class ts extends Ye{constructor(t,i){super(t,tO[t],i),Object.setPrototypeOf(this,ts.prototype),this.name="BrowserAuthError"}}function he(c,t){return new ts(c,t)}const Qt={INVALID_GRANT_ERROR:"invalid_grant",POPUP_WIDTH:483,POPUP_HEIGHT:600,POPUP_NAME_PREFIX:"msal",DEFAULT_POLL_INTERVAL_MS:30,MSAL_SKU:"msal.js.browser"},Cn={CHANNEL_ID:"53ee284d-920a-4b59-9d30-a60315b26836",PREFERRED_EXTENSION_ID:"ppnbnpeolgkicgegkbkbjmhlideopiji",MATS_TELEMETRY:"MATS",MICROSOFT_ENTRA_BROKERID:"MicrosoftEntra",DOM_API_NAME:"DOM API",PLATFORM_DOM_APIS:"get-token-and-sign-out",PLATFORM_DOM_PROVIDER:"PlatformAuthDOMHandler",PLATFORM_EXTENSION_PROVIDER:"PlatformAuthExtensionHandler"},La={HandshakeRequest:"Handshake",HandshakeResponse:"HandshakeResponse",GetToken:"GetToken",Response:"Response"},Tt={LocalStorage:"localStorage",SessionStorage:"sessionStorage",MemoryStorage:"memoryStorage"},aC={GET:"GET",POST:"POST"},Ki={SIGNIN:"signin",SIGNOUT:"signout"},dt={ORIGIN_URI:"request.origin",URL_HASH:"urlHash",REQUEST_PARAMS:"request.params",VERIFIER:"code.verifier",INTERACTION_STATUS_KEY:"interaction.status",NATIVE_REQUEST:"request.native"},wc={WRAPPER_SKU:"wrapper.sku",WRAPPER_VER:"wrapper.version"},Le={acquireTokenRedirect:861,acquireTokenPopup:862,ssoSilent:863,acquireTokenSilent_authCode:864,handleRedirectPromise:865,acquireTokenByCode:866,acquireTokenSilent_silentFlow:61,logout:961,logoutPopup:962};var Se;(function(c){c.Redirect="redirect",c.Popup="popup",c.Silent="silent",c.None="none"})(Se||(Se={}));const sC={scopes:xr},PT="jwk",Uh="msal.db",nO=1,iO=`${Uh}.keys`,xt={Default:0,AccessToken:1,AccessTokenAndRefreshToken:2,RefreshToken:3,RefreshTokenAndNetwork:4,Skip:5},oO=[xt.Default,xt.Skip,xt.RefreshTokenAndNetwork];function Rc(c){return encodeURIComponent(Za(c).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function Vi(c){return HT(c).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Za(c){return HT(new TextEncoder().encode(c))}function HT(c){const t=Array.from(c,i=>String.fromCodePoint(i)).join("");return btoa(t)}function Ht(c){return new TextDecoder().decode(Qi(c))}function Qi(c){let t=c.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw he(NT)}const i=atob(t);return Uint8Array.from(i,r=>r.codePointAt(0)||0)}const rO="RSASSA-PKCS1-v1_5",Hr="AES-GCM",LT="HKDF",Hf="SHA-256",aO=2048,sO=new Uint8Array([1,0,1]),cC="0123456789abcdef",lC=new Uint32Array(1),Lf="raw",zT="encrypt",zf="decrypt",cO="deriveKey",lO="crypto_subtle_undefined",Bf={name:rO,hash:Hf,modulusLength:aO,publicExponent:sO};function uO(c){if(!window)throw he(Tl);if(!window.crypto)throw he(Nh);if(!c&&!window.crypto.subtle)throw he(Nh,lO)}async function BT(c,t,i){t?.addQueueMeasurement(w.Sha256Digest,i);const s=new TextEncoder().encode(c);return window.crypto.subtle.digest(Hf,s)}function dO(c){return window.crypto.getRandomValues(c)}function mh(){return window.crypto.getRandomValues(lC),lC[0]}function kn(){const c=Date.now(),t=mh()*1024+(mh()&1023),i=new Uint8Array(16),r=Math.trunc(t/2**30),s=t&2**30-1,l=mh();i[0]=c/2**40,i[1]=c/2**32,i[2]=c/2**24,i[3]=c/2**16,i[4]=c/2**8,i[5]=c,i[6]=112|r>>>8,i[7]=r,i[8]=128|s>>>24,i[9]=s>>>16,i[10]=s>>>8,i[11]=s,i[12]=l>>>24,i[13]=l>>>16,i[14]=l>>>8,i[15]=l;let h="";for(let f=0;f<i.length;f++)h+=cC.charAt(i[f]>>>4),h+=cC.charAt(i[f]&15),(f===3||f===5||f===7||f===9)&&(h+="-");return h}async function hO(c,t){return window.crypto.subtle.generateKey(Bf,c,t)}async function ph(c){return window.crypto.subtle.exportKey(PT,c)}async function fO(c,t,i){return window.crypto.subtle.importKey(PT,c,Bf,t,i)}async function gO(c,t){return window.crypto.subtle.sign(Bf,c,t)}async function Kf(){const c=await KT(),i={alg:"dir",kty:"oct",k:Vi(new Uint8Array(c))};return Za(JSON.stringify(i))}async function mO(c){const t=Ht(c),r=JSON.parse(t).k,s=Qi(r);return window.crypto.subtle.importKey(Lf,s,Hr,!1,[zf])}async function pO(c,t){const i=t.split(".");if(i.length!==5)throw he(Nc,"jwe_length");const r=await mO(c).catch(()=>{throw he(Nc,"import_key")});try{const s=new TextEncoder().encode(i[0]),l=Qi(i[2]),h=Qi(i[3]),f=Qi(i[4]),g=f.byteLength*8,p=new Uint8Array(h.length+f.length);p.set(h),p.set(f,h.length);const S=await window.crypto.subtle.decrypt({name:Hr,iv:l,tagLength:g,additionalData:s},r,p);return new TextDecoder().decode(S)}catch{throw he(Nc,"decrypt")}}async function KT(){const c=await window.crypto.subtle.generateKey({name:Hr,length:256},!0,[zT,zf]);return window.crypto.subtle.exportKey(Lf,c)}async function uC(c){return window.crypto.subtle.importKey(Lf,c,LT,!1,[cO])}async function qT(c,t,i){return window.crypto.subtle.deriveKey({name:LT,salt:t,hash:Hf,info:new TextEncoder().encode(i)},c,{name:Hr,length:256},!1,[zT,zf])}async function yO(c,t,i){const r=new TextEncoder().encode(t),s=window.crypto.getRandomValues(new Uint8Array(16)),l=await qT(c,s,i),h=await window.crypto.subtle.encrypt({name:Hr,iv:new Uint8Array(12)},l,r);return{data:Vi(new Uint8Array(h)),nonce:Vi(s)}}async function dC(c,t,i,r){const s=Qi(r),l=await qT(c,Qi(t),i),h=await window.crypto.subtle.decrypt({name:Hr,iv:new Uint8Array(12)},l,s);return new TextDecoder().decode(h)}async function jT(c){const t=await BT(c),i=new Uint8Array(t);return Vi(i)}const Al="storage_not_supported",GT="stubbed_public_client_application_called",qf="in_mem_redirect_unavailable";const Dc={[Al]:"Given storage configuration option was not supported.",[GT]:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors",[qf]:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."};Dc[Al],Dc[GT],Dc[qf];class jf extends Ye{constructor(t,i){super(t,i),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,jf.prototype)}}function Gf(c){return new jf(c,Dc[c])}function FT(c){c.location.hash="",typeof c.history.replaceState=="function"&&c.history.replaceState(null,"",`${c.location.origin}${c.location.pathname}${c.location.search}`)}function vO(c){const t=c.split("#");t.shift(),window.location.hash=t.length>0?t.join("#"):""}function Ff(){return window.parent!==window}function CO(){return typeof window<"u"&&!!window.opener&&window.opener!==window&&typeof window.name=="string"&&window.name.indexOf(`${Qt.POPUP_NAME_PREFIX}.`)===0}function ci(){return typeof window<"u"&&window.location?window.location.href.split("?")[0].split("#")[0]:""}function SO(){const t=new Pe(window.location.href).getUrlComponents();return`${t.Protocol}//${t.HostNameAndPort}/`}function TO(){if(Pe.hashContainsKnownProperties(window.location.hash)&&Ff())throw he(yT)}function AO(c){if(Ff()&&!c)throw he(pT)}function EO(){if(CO())throw he(vT)}function QT(){if(typeof window>"u")throw he(Tl)}function YT(c){if(!c)throw he(Fa)}function Qf(c){QT(),TO(),EO(),YT(c)}function hC(c,t){if(Qf(c),AO(t.system.allowRedirectInIframe),t.cache.cacheLocation===Tt.MemoryStorage&&!t.cache.storeAuthStateInCookie)throw Gf(qf)}function VT(c){const t=document.createElement("link");t.rel="preconnect",t.href=new URL(c).origin,t.crossOrigin="anonymous",document.head.appendChild(t),window.setTimeout(()=>{try{document.head.removeChild(t)}catch{}},1e4)}function _O(){return kn()}class el{navigateInternal(t,i){return el.defaultNavigateWindow(t,i)}navigateExternal(t,i){return el.defaultNavigateWindow(t,i)}static defaultNavigateWindow(t,i){return i.noHistory?window.location.replace(t):window.location.assign(t),new Promise((r,s)=>{setTimeout(()=>{s(he(Wc,"failed_to_redirect"))},i.timeout)})}}class bO{async sendGetRequestAsync(t,i){let r,s={},l=0;const h=fC(i);try{r=await fetch(t,{method:aC.GET,headers:h})}catch(f){throw Ka(he(window.navigator.onLine?ET:Zc),void 0,void 0,f)}s=gC(r.headers);try{return l=r.status,{headers:s,body:await r.json(),status:l}}catch(f){throw Ka(he(Dh),l,s,f)}}async sendPostRequestAsync(t,i){const r=i&&i.body||"",s=fC(i);let l,h=0,f={};try{l=await fetch(t,{method:aC.POST,headers:s,body:r})}catch(g){throw Ka(he(window.navigator.onLine?AT:Zc),void 0,void 0,g)}f=gC(l.headers);try{return h=l.status,{headers:f,body:await l.json(),status:h}}catch(g){throw Ka(he(Dh),h,f,g)}}}function fC(c){try{const t=new Headers;if(!(c&&c.headers))return t;const i=c.headers;return Object.entries(i).forEach(([r,s])=>{t.append(r,s)}),t}catch(t){throw Ka(he(UT),void 0,void 0,t)}}function gC(c){try{const t={};return c.forEach((i,r)=>{t[r]=i}),t}catch{throw he(xT)}}const wO=6e4,xh=1e4,RO=3e4,XT=2e3;function IO({auth:c,cache:t,system:i,telemetry:r},s){const l={clientId:W.EMPTY_STRING,authority:`${W.DEFAULT_AUTHORITY}`,knownAuthorities:[],cloudDiscoveryMetadata:W.EMPTY_STRING,authorityMetadata:W.EMPTY_STRING,redirectUri:typeof window<"u"?ci():"",postLogoutRedirectUri:W.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:Yt.AAD,OIDCOptions:{serverResponseType:sl.FRAGMENT,defaultScopes:[W.OPENID_SCOPE,W.PROFILE_SCOPE,W.OFFLINE_ACCESS_SCOPE]},azureCloudOptions:{azureCloudInstance:of.None,tenant:W.EMPTY_STRING},skipAuthorityMetadataCache:!1,supportsNestedAppAuth:!1,instanceAware:!1,encodeExtraQueryParams:!1},h={cacheLocation:Tt.SessionStorage,cacheRetentionDays:5,temporaryCacheLocation:Tt.SessionStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!!(t&&t.cacheLocation===Tt.LocalStorage),claimsBasedCachingEnabled:!1},f={loggerCallback:()=>{},logLevel:Qe.Info,piiLoggingEnabled:!1},p={...{...PS,loggerOptions:f,networkClient:s?new bO:KI,navigationClient:new el,loadFrameTimeout:0,windowHashTimeout:i?.loadFrameTimeout||wO,iframeHashTimeout:i?.loadFrameTimeout||xh,navigateFrameWait:0,redirectNavigationTimeout:RO,asyncPopups:!1,allowRedirectInIframe:!1,allowPlatformBroker:!1,nativeBrokerHandshakeTimeout:i?.nativeBrokerHandshakeTimeout||XT,pollIntervalMilliseconds:Qt.DEFAULT_POLL_INTERVAL_MS},...i,loggerOptions:i?.loggerOptions||f},S={application:{appName:W.EMPTY_STRING,appVersion:W.EMPTY_STRING},client:new xS};if(c?.protocolMode!==Yt.OIDC&&c?.OIDCOptions&&new Yi(p.loggerOptions).warning(JSON.stringify(Xe(wS))),c?.protocolMode&&c.protocolMode===Yt.OIDC&&p?.allowPlatformBroker)throw Xe(RS);return{auth:{...l,...c,OIDCOptions:{...l.OIDCOptions,...c?.OIDCOptions}},cache:{...h,...t},system:p,telemetry:{...S,...r}}}const OO="@azure/msal-browser",Eo="4.26.2";const Ot="msal",Yf="browser",mC="|",Nt=2,Uc=2,kO=`${Ot}.${Yf}.log.level`,MO=`${Ot}.${Yf}.log.pii`,NO=`${Ot}.${Yf}.platform.auth.dom`,pC=`${Ot}.version`,yC="account.keys",vC="token.keys";function Rr(c=Uc){return c<1?`${Ot}.${yC}`:`${Ot}.${c}.${yC}`}function Ir(c,t=Nt){return t<1?`${Ot}.${vC}.${c}`:`${Ot}.${t}.${vC}.${c}`}class Vf{static loggerCallback(t,i){switch(t){case Qe.Error:console.error(i);return;case Qe.Info:console.info(i);return;case Qe.Verbose:console.debug(i);return;case Qe.Warning:console.warn(i);return;default:console.log(i);return}}constructor(t){this.browserEnvironment=typeof window<"u",this.config=IO(t,this.browserEnvironment);let i;try{i=window[Tt.SessionStorage]}catch{}const r=i?.getItem(kO),s=i?.getItem(MO)?.toLowerCase(),l=s==="true"?!0:s==="false"?!1:void 0,h={...this.config.system.loggerOptions},f=r&&Object.keys(Qe).includes(r)?Qe[r]:void 0;f&&(h.loggerCallback=Vf.loggerCallback,h.logLevel=f),l!==void 0&&(h.piiLoggingEnabled=l),this.logger=new Yi(h,OO,Eo),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}}class _o extends Vf{getModuleName(){return _o.MODULE_NAME}getId(){return _o.ID}async initialize(){return this.available=typeof window<"u",this.available}}_o.MODULE_NAME="";_o.ID="StandardOperatingContext";class DO{constructor(){this.dbName=Uh,this.version=nO,this.tableName=iO,this.dbOpen=!1}async open(){return new Promise((t,i)=>{const r=window.indexedDB.open(this.dbName,this.version);r.addEventListener("upgradeneeded",s=>{s.target.result.createObjectStore(this.tableName)}),r.addEventListener("success",s=>{const l=s;this.db=l.target.result,this.dbOpen=!0,t()}),r.addEventListener("error",()=>i(he(xf)))})}closeConnection(){const t=this.db;t&&this.dbOpen&&(t.close(),this.dbOpen=!1)}async validateDbIsOpen(){if(!this.dbOpen)return this.open()}async getItem(t){return await this.validateDbIsOpen(),new Promise((i,r)=>{if(!this.db)return r(he(Tr));const h=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).get(t);h.addEventListener("success",f=>{const g=f;this.closeConnection(),i(g.target.result)}),h.addEventListener("error",f=>{this.closeConnection(),r(f)})})}async setItem(t,i){return await this.validateDbIsOpen(),new Promise((r,s)=>{if(!this.db)return s(he(Tr));const f=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).put(i,t);f.addEventListener("success",()=>{this.closeConnection(),r()}),f.addEventListener("error",g=>{this.closeConnection(),s(g)})})}async removeItem(t){return await this.validateDbIsOpen(),new Promise((i,r)=>{if(!this.db)return r(he(Tr));const h=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).delete(t);h.addEventListener("success",()=>{this.closeConnection(),i()}),h.addEventListener("error",f=>{this.closeConnection(),r(f)})})}async getKeys(){return await this.validateDbIsOpen(),new Promise((t,i)=>{if(!this.db)return i(he(Tr));const l=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).getAllKeys();l.addEventListener("success",h=>{const f=h;this.closeConnection(),t(f.target.result)}),l.addEventListener("error",h=>{this.closeConnection(),i(h)})})}async containsKey(t){return await this.validateDbIsOpen(),new Promise((i,r)=>{if(!this.db)return r(he(Tr));const h=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).count(t);h.addEventListener("success",f=>{const g=f;this.closeConnection(),i(g.target.result===1)}),h.addEventListener("error",f=>{this.closeConnection(),r(f)})})}async deleteDatabase(){return this.db&&this.dbOpen&&this.closeConnection(),new Promise((t,i)=>{const r=window.indexedDB.deleteDatabase(Uh),s=setTimeout(()=>i(!1),200);r.addEventListener("success",()=>(clearTimeout(s),t(!0))),r.addEventListener("blocked",()=>(clearTimeout(s),t(!0))),r.addEventListener("error",()=>(clearTimeout(s),i(!1)))})}}class El{constructor(){this.cache=new Map}async initialize(){}getItem(t){return this.cache.get(t)||null}getUserData(t){return this.getItem(t)}setItem(t,i){this.cache.set(t,i)}async setUserData(t,i){this.setItem(t,i)}removeItem(t){this.cache.delete(t)}getKeys(){const t=[];return this.cache.forEach((i,r)=>{t.push(r)}),t}containsKey(t){return this.cache.has(t)}clear(){this.cache.clear()}decryptData(){return Promise.resolve(null)}}class UO{constructor(t){this.inMemoryCache=new El,this.indexedDBCache=new DO,this.logger=t}handleDatabaseAccessError(t){if(t instanceof ts&&t.errorCode===xf)this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.");else throw t}async getItem(t){const i=this.inMemoryCache.getItem(t);if(!i)try{return this.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.getItem(t)}catch(r){this.handleDatabaseAccessError(r)}return i}async setItem(t,i){this.inMemoryCache.setItem(t,i);try{await this.indexedDBCache.setItem(t,i)}catch(r){this.handleDatabaseAccessError(r)}}async removeItem(t){this.inMemoryCache.removeItem(t);try{await this.indexedDBCache.removeItem(t)}catch(i){this.handleDatabaseAccessError(i)}}async getKeys(){const t=this.inMemoryCache.getKeys();if(t.length===0)try{return this.logger.verbose("In-memory cache is empty, now querying persistent storage."),await this.indexedDBCache.getKeys()}catch(i){this.handleDatabaseAccessError(i)}return t}async containsKey(t){const i=this.inMemoryCache.containsKey(t);if(!i)try{return this.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.containsKey(t)}catch(r){this.handleDatabaseAccessError(r)}return i}clearInMemory(){this.logger.verbose("Deleting in-memory keystore"),this.inMemoryCache.clear(),this.logger.verbose("In-memory keystore deleted")}async clearPersistent(){try{this.logger.verbose("Deleting persistent keystore");const t=await this.indexedDBCache.deleteDatabase();return t&&this.logger.verbose("Persistent keystore deleted"),t}catch(t){return this.handleDatabaseAccessError(t),!1}}}class ui{constructor(t,i,r){this.logger=t,uO(r??!1),this.cache=new UO(this.logger),this.performanceClient=i}createNewGuid(){return kn()}base64Encode(t){return Za(t)}base64Decode(t){return Ht(t)}base64UrlEncode(t){return Rc(t)}encodeKid(t){return this.base64UrlEncode(JSON.stringify({kid:t}))}async getPublicKeyThumbprint(t){const i=this.performanceClient?.startMeasurement(w.CryptoOptsGetPublicKeyThumbprint,t.correlationId),r=await hO(ui.EXTRACTABLE,ui.POP_KEY_USAGES),s=await ph(r.publicKey),l={e:s.e,kty:s.kty,n:s.n},h=CC(l),f=await this.hashString(h),g=await ph(r.privateKey),p=await fO(g,!1,["sign"]);return await this.cache.setItem(f,{privateKey:p,publicKey:r.publicKey,requestMethod:t.resourceRequestMethod,requestUri:t.resourceRequestUri}),i&&i.end({success:!0}),f}async removeTokenBindingKey(t){if(await this.cache.removeItem(t),await this.cache.containsKey(t))throw re(gS)}async clearKeystore(){this.cache.clearInMemory();try{return await this.cache.clearPersistent(),!0}catch(t){return t instanceof Error?this.logger.error(`Clearing keystore failed with error: ${t.message}`):this.logger.error("Clearing keystore failed with unknown error"),!1}}async signJwt(t,i,r,s){const l=this.performanceClient?.startMeasurement(w.CryptoOptsSignJwt,s),h=await this.cache.getItem(i);if(!h)throw he(Uf);const f=await ph(h.publicKey),g=CC(f),p=Rc(JSON.stringify({kid:i})),S=kf.getShrHeaderString({...r?.header,alg:f.alg,kid:p}),T=Rc(S);t.cnf={jwk:JSON.parse(g)};const A=Rc(JSON.stringify(t)),K=`${T}.${A}`,ie=new TextEncoder().encode(K),le=await gO(h.privateKey,ie),se=Vi(new Uint8Array(le)),ce=`${K}.${se}`;return l&&l.end({success:!0}),ce}async hashString(t){return jT(t)}}ui.POP_KEY_USAGES=["sign","verify"];ui.EXTRACTABLE=!0;function CC(c){return JSON.stringify(c,Object.keys(c).sort())}const xO=1440*60*1e3,Ph={Lax:"Lax",None:"None"};class JT{initialize(){return Promise.resolve()}getItem(t){const i=`${encodeURIComponent(t)}`,r=document.cookie.split(";");for(let s=0;s<r.length;s++){const l=r[s],[h,...f]=decodeURIComponent(l).trim().split("="),g=f.join("=");if(h===i)return g}return""}getUserData(){throw re(Re)}setItem(t,i,r,s=!0,l=Ph.Lax){let h=`${encodeURIComponent(t)}=${encodeURIComponent(i)};path=/;SameSite=${l};`;if(r){const f=PO(r);h+=`expires=${f};`}(s||l===Ph.None)&&(h+="Secure;"),document.cookie=h}async setUserData(){return Promise.reject(re(Re))}removeItem(t){this.setItem(t,"",-1)}getKeys(){const t=document.cookie.split(";"),i=[];return t.forEach(r=>{const s=decodeURIComponent(r).trim().split("=");i.push(s[0])}),i}containsKey(t){return this.getKeys().includes(t)}decryptData(){return Promise.resolve(null)}}function PO(c){const t=new Date;return new Date(t.getTime()+c*xO).toUTCString()}function Bi(c,t){const i=c.getItem(Rr(t));return i?JSON.parse(i):[]}function bn(c,t,i){const r=t.getItem(Ir(c,i));if(r){const s=JSON.parse(r);if(s&&s.hasOwnProperty("idToken")&&s.hasOwnProperty("accessToken")&&s.hasOwnProperty("refreshToken"))return s}return{idToken:[],accessToken:[],refreshToken:[]}}function xc(c){return c.hasOwnProperty("id")&&c.hasOwnProperty("nonce")&&c.hasOwnProperty("data")}const SC="msal.cache.encryption",HO="msal.broadcast.cache";class LO{constructor(t,i,r){if(!window.localStorage)throw Gf(Al);this.memoryStorage=new El,this.initialized=!1,this.clientId=t,this.logger=i,this.performanceClient=r,this.broadcast=new BroadcastChannel(HO)}async initialize(t){const i=new JT,r=i.getItem(SC);let s={key:"",id:""};if(r)try{s=JSON.parse(r)}catch{}if(s.key&&s.id){const l=an(Qi,w.Base64Decode,this.logger,this.performanceClient,t)(s.key);this.encryptionCookie={id:s.id,key:await Q(uC,w.GenerateHKDF,this.logger,this.performanceClient,t)(l)}}else{const l=kn(),h=await Q(KT,w.GenerateBaseKey,this.logger,this.performanceClient,t)(),f=an(Vi,w.UrlEncodeArr,this.logger,this.performanceClient,t)(new Uint8Array(h));this.encryptionCookie={id:l,key:await Q(uC,w.GenerateHKDF,this.logger,this.performanceClient,t)(h)};const g={id:l,key:f};i.setItem(SC,JSON.stringify(g),0,!0,Ph.None)}await Q(this.importExistingCache.bind(this),w.ImportExistingCache,this.logger,this.performanceClient,t)(t),this.broadcast.addEventListener("message",this.updateCache.bind(this)),this.initialized=!0}getItem(t){return window.localStorage.getItem(t)}getUserData(t){if(!this.initialized)throw he(Fa);return this.memoryStorage.getItem(t)}async decryptData(t,i,r){if(!this.initialized||!this.encryptionCookie)throw he(Fa);if(i.id!==this.encryptionCookie.id)return this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},r),null;const s=await Q(dC,w.Decrypt,this.logger,this.performanceClient,r)(this.encryptionCookie.key,i.nonce,this.getContext(t),i.data);if(!s)return null;try{return{...JSON.parse(s),lastUpdatedAt:i.lastUpdatedAt}}catch{return this.performanceClient.incrementFields({encryptedCacheCorruptionCount:1},r),null}}setItem(t,i){window.localStorage.setItem(t,i)}async setUserData(t,i,r,s,l){if(!this.initialized||!this.encryptionCookie)throw he(Fa);if(l)this.setItem(t,i);else{const{data:h,nonce:f}=await Q(yO,w.Encrypt,this.logger,this.performanceClient,r)(this.encryptionCookie.key,i,this.getContext(t)),g={id:this.encryptionCookie.id,nonce:f,data:h,lastUpdatedAt:s};this.setItem(t,JSON.stringify(g))}this.memoryStorage.setItem(t,i),this.broadcast.postMessage({key:t,value:i,context:this.getContext(t)})}removeItem(t){this.memoryStorage.containsKey(t)&&(this.memoryStorage.removeItem(t),this.broadcast.postMessage({key:t,value:null,context:this.getContext(t)})),window.localStorage.removeItem(t)}getKeys(){return Object.keys(window.localStorage)}containsKey(t){return window.localStorage.hasOwnProperty(t)}clear(){this.memoryStorage.clear(),Bi(this).forEach(r=>this.removeItem(r));const i=bn(this.clientId,this);i.idToken.forEach(r=>this.removeItem(r)),i.accessToken.forEach(r=>this.removeItem(r)),i.refreshToken.forEach(r=>this.removeItem(r)),this.getKeys().forEach(r=>{(r.startsWith(Ot)||r.indexOf(this.clientId)!==-1)&&this.removeItem(r)})}async importExistingCache(t){if(!this.encryptionCookie)return;let i=Bi(this);i=await this.importArray(i,t),i.length?this.setItem(Rr(),JSON.stringify(i)):this.removeItem(Rr());const r=bn(this.clientId,this);r.idToken=await this.importArray(r.idToken,t),r.accessToken=await this.importArray(r.accessToken,t),r.refreshToken=await this.importArray(r.refreshToken,t),r.idToken.length||r.accessToken.length||r.refreshToken.length?this.setItem(Ir(this.clientId),JSON.stringify(r)):this.removeItem(Ir(this.clientId))}async getItemFromEncryptedCache(t,i){if(!this.encryptionCookie)return null;const r=this.getItem(t);if(!r)return null;let s;try{s=JSON.parse(r)}catch{return null}return xc(s)?s.id!==this.encryptionCookie.id?(this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},i),null):(this.performanceClient.incrementFields({encryptedCacheCount:1},i),Q(dC,w.Decrypt,this.logger,this.performanceClient,i)(this.encryptionCookie.key,s.nonce,this.getContext(t),s.data)):(this.performanceClient.incrementFields({unencryptedCacheCount:1},i),r)}async importArray(t,i){const r=[],s=[];return t.forEach(l=>{const h=this.getItemFromEncryptedCache(l,i).then(f=>{f?(this.memoryStorage.setItem(l,f),r.push(l)):this.removeItem(l)});s.push(h)}),await Promise.all(s),r}getContext(t){let i="";return t.includes(this.clientId)&&(i=this.clientId),i}updateCache(t){this.logger.trace("Updating internal cache from broadcast event");const i=this.performanceClient.startMeasurement(w.LocalStorageUpdated);i.add({isBackground:!0});const{key:r,value:s,context:l}=t.data;if(!r){this.logger.error("Broadcast event missing key"),i.end({success:!1,errorCode:"noKey"});return}if(l&&l!==this.clientId){this.logger.trace(`Ignoring broadcast event from clientId: ${l}`),i.end({success:!1,errorCode:"contextMismatch"});return}s?(this.memoryStorage.setItem(r,s),this.logger.verbose("Updated item in internal cache")):(this.memoryStorage.removeItem(r),this.logger.verbose("Removed item from internal cache")),i.end({success:!0})}}class zO{constructor(){if(!window.sessionStorage)throw Gf(Al)}async initialize(){}getItem(t){return window.sessionStorage.getItem(t)}getUserData(t){return this.getItem(t)}setItem(t,i){window.sessionStorage.setItem(t,i)}async setUserData(t,i){this.setItem(t,i)}removeItem(t){window.sessionStorage.removeItem(t)}getKeys(){return Object.keys(window.sessionStorage)}containsKey(t){return window.sessionStorage.hasOwnProperty(t)}decryptData(){return Promise.resolve(null)}}const ye={INITIALIZE_START:"msal:initializeStart",INITIALIZE_END:"msal:initializeEnd",ACCOUNT_ADDED:"msal:accountAdded",ACCOUNT_REMOVED:"msal:accountRemoved",ACTIVE_ACCOUNT_CHANGED:"msal:activeAccountChanged",LOGIN_START:"msal:loginStart",LOGIN_SUCCESS:"msal:loginSuccess",LOGIN_FAILURE:"msal:loginFailure",ACQUIRE_TOKEN_START:"msal:acquireTokenStart",ACQUIRE_TOKEN_SUCCESS:"msal:acquireTokenSuccess",ACQUIRE_TOKEN_FAILURE:"msal:acquireTokenFailure",ACQUIRE_TOKEN_NETWORK_START:"msal:acquireTokenFromNetworkStart",SSO_SILENT_START:"msal:ssoSilentStart",SSO_SILENT_SUCCESS:"msal:ssoSilentSuccess",SSO_SILENT_FAILURE:"msal:ssoSilentFailure",ACQUIRE_TOKEN_BY_CODE_START:"msal:acquireTokenByCodeStart",ACQUIRE_TOKEN_BY_CODE_SUCCESS:"msal:acquireTokenByCodeSuccess",ACQUIRE_TOKEN_BY_CODE_FAILURE:"msal:acquireTokenByCodeFailure",HANDLE_REDIRECT_START:"msal:handleRedirectStart",HANDLE_REDIRECT_END:"msal:handleRedirectEnd",POPUP_OPENED:"msal:popupOpened",LOGOUT_START:"msal:logoutStart",LOGOUT_SUCCESS:"msal:logoutSuccess",LOGOUT_FAILURE:"msal:logoutFailure",LOGOUT_END:"msal:logoutEnd",RESTORE_FROM_BFCACHE:"msal:restoreFromBFCache",BROKER_CONNECTION_ESTABLISHED:"msal:brokerConnectionEstablished"};function Li(c,t){const i=c.indexOf(t);i>-1&&c.splice(i,1)}class Hh extends kh{constructor(t,i,r,s,l,h,f){super(t,r,s,l,f),this.cacheConfig=i,this.logger=s,this.internalStorage=new El,this.browserStorage=TC(t,i.cacheLocation,s,l),this.temporaryCacheStorage=TC(t,i.temporaryCacheLocation,s,l),this.cookieStorage=new JT,this.eventHandler=h}async initialize(t){this.performanceClient.addFields({cacheLocation:this.cacheConfig.cacheLocation,cacheRetentionDays:this.cacheConfig.cacheRetentionDays},t),await this.browserStorage.initialize(t),await this.migrateExistingCache(t),this.trackVersionChanges(t)}async migrateExistingCache(t){let i=Bi(this.browserStorage),r=bn(this.clientId,this.browserStorage);this.performanceClient.addFields({preMigrateAcntCount:i.length,preMigrateATCount:r.accessToken.length,preMigrateITCount:r.idToken.length,preMigrateRTCount:r.refreshToken.length},t);for(let l=0;l<Uc;l++){const h=l;await this.removeStaleAccounts(l,h,t)}for(let l=0;l<Nt;l++){const h=l;await this.migrateIdTokens(l,h,t)}const s=this.getKMSIValues();for(let l=0;l<Nt;l++)await this.migrateAccessTokens(l,s,t),await this.migrateRefreshTokens(l,s,t);i=Bi(this.browserStorage),r=bn(this.clientId,this.browserStorage),this.performanceClient.addFields({postMigrateAcntCount:i.length,postMigrateATCount:r.accessToken.length,postMigrateITCount:r.idToken.length,postMigrateRTCount:r.refreshToken.length},t)}async updateOldEntry(t,i){const r=this.browserStorage.getItem(t),s=this.validateAndParseJson(r||"");if(!s)return this.browserStorage.removeItem(t),null;if(!s.lastUpdatedAt)s.lastUpdatedAt=Date.now().toString(),this.setItem(t,JSON.stringify(s),i);else if(Zv(s.lastUpdatedAt,this.cacheConfig.cacheRetentionDays))return this.browserStorage.removeItem(t),this.performanceClient.incrementFields({expiredCacheRemovedCount:1},i),null;const l=xc(s)?await this.browserStorage.decryptData(t,s,i):s;return!l||!ml(l)?(this.performanceClient.incrementFields({invalidCacheCount:1},i),null):(Wv(l)||eC(l))&&l.expiresOn&&Xc(l.expiresOn,ZC)?(this.browserStorage.removeItem(t),this.performanceClient.incrementFields({expiredCacheRemovedCount:1},i),null):l}async removeStaleAccounts(t,i,r){const s=Bi(this.browserStorage,t);if(s.length!==0){for(const l of[...s]){this.performanceClient.incrementFields({oldAcntCount:1},r);const h=this.browserStorage.getItem(l),f=this.validateAndParseJson(h||"");if(!f){Li(s,l);continue}if(f.lastUpdatedAt)Zv(f.lastUpdatedAt,this.cacheConfig.cacheRetentionDays)&&(await this.removeAccountOldSchema(l,f,i,r),Li(s,l));else{f.lastUpdatedAt=Date.now().toString(),this.setItem(l,JSON.stringify(f),r);continue}}this.setAccountKeys(s,r,t)}}async removeAccountOldSchema(t,i,r,s){const h=(xc(i)?await this.browserStorage.decryptData(t,i,s):i)?.homeAccountId;if(h){const f=this.getTokenKeys(r);[...f.idToken].filter(g=>g.includes(h)).forEach(g=>{this.browserStorage.removeItem(g),Li(f.idToken,g)}),[...f.accessToken].filter(g=>g.includes(h)).forEach(g=>{this.browserStorage.removeItem(g),Li(f.accessToken,g)}),[...f.refreshToken].filter(g=>g.includes(h)).forEach(g=>{this.browserStorage.removeItem(g),Li(f.refreshToken,g)}),this.setTokenKeys(f,s,r)}this.performanceClient.incrementFields({expiredAcntRemovedCount:1},s),this.browserStorage.removeItem(t)}getKMSIValues(){const t={},i=this.getTokenKeys().idToken;for(const r of i){const s=this.browserStorage.getUserData(r);if(s){const l=JSON.parse(s),h=Ln(l.secret,Ht);h&&(t[l.homeAccountId]=zn(h))}}return t}async migrateIdTokens(t,i,r){const s=bn(this.clientId,this.browserStorage,t);if(s.idToken.length===0)return;const l=bn(this.clientId,this.browserStorage,Nt),h=Bi(this.browserStorage),f=Bi(this.browserStorage,i);for(const g of[...s.idToken]){this.performanceClient.incrementFields({oldITCount:1},r);const p=await this.updateOldEntry(g,r);if(!p){Li(s.idToken,g);continue}const S=h.find(ce=>ce.includes(p.homeAccountId)),T=f.find(ce=>ce.includes(p.homeAccountId));let A=null;if(S)A=this.getAccount(S,r);else if(T){const ce=this.browserStorage.getItem(T),ue=this.validateAndParseJson(ce||"");A=ue&&xc(ue)?await this.browserStorage.decryptData(T,ue,r):ue}if(!A){this.performanceClient.incrementFields({skipITMigrateCount:1},r);continue}const K=Ln(p.secret,Ht),ee=this.generateCredentialKey(p),ie=this.getIdTokenCredential(ee,r),le=Object.keys(K).includes("signin_state"),se=ie&&Object.keys(Ln(ie.secret,Ht)||{}).includes("signin_state");if(!ie||p.lastUpdatedAt>ie.lastUpdatedAt&&(le||!se)){const ce=A.tenantProfiles||[],ue=uf(K)||A.realm;if(ue&&!ce.find($=>$.tenantId===ue)){const $=ll(A.homeAccountId,A.localAccountId,ue,K);ce.push($)}A.tenantProfiles=ce;const G=this.generateAccountKey(ot.getAccountInfo(A)),ae=zn(K);await this.setUserData(G,JSON.stringify(A),r,A.lastUpdatedAt,ae),h.includes(G)||h.push(G),await this.setUserData(ee,JSON.stringify(p),r,p.lastUpdatedAt,ae),this.performanceClient.incrementFields({migratedITCount:1},r),l.idToken.push(ee)}}this.setTokenKeys(s,r,t),this.setTokenKeys(l,r),this.setAccountKeys(h,r)}async migrateAccessTokens(t,i,r){const s=bn(this.clientId,this.browserStorage,t);if(s.accessToken.length===0)return;const l=bn(this.clientId,this.browserStorage,Nt);for(const h of[...s.accessToken]){this.performanceClient.incrementFields({oldATCount:1},r);const f=await this.updateOldEntry(h,r);if(!f){Li(s.accessToken,h);continue}if(!Object.keys(i).includes(f.homeAccountId)){this.performanceClient.incrementFields({skipATMigrateCount:1},r);continue}const g=this.generateCredentialKey(f),p=i[f.homeAccountId];if(!l.accessToken.includes(g))await this.setUserData(g,JSON.stringify(f),r,f.lastUpdatedAt,p),this.performanceClient.incrementFields({migratedATCount:1},r),l.accessToken.push(g);else{const S=this.getAccessTokenCredential(g,r);(!S||f.lastUpdatedAt>S.lastUpdatedAt)&&(await this.setUserData(g,JSON.stringify(f),r,f.lastUpdatedAt,p),this.performanceClient.incrementFields({migratedATCount:1},r))}}this.setTokenKeys(s,r,t),this.setTokenKeys(l,r)}async migrateRefreshTokens(t,i,r){const s=bn(this.clientId,this.browserStorage,t);if(s.refreshToken.length===0)return;const l=bn(this.clientId,this.browserStorage,Nt);for(const h of[...s.refreshToken]){this.performanceClient.incrementFields({oldRTCount:1},r);const f=await this.updateOldEntry(h,r);if(!f){Li(s.refreshToken,h);continue}if(!Object.keys(i).includes(f.homeAccountId)){this.performanceClient.incrementFields({skipRTMigrateCount:1},r);continue}const g=this.generateCredentialKey(f),p=i[f.homeAccountId];if(!l.refreshToken.includes(g))await this.setUserData(g,JSON.stringify(f),r,f.lastUpdatedAt,p),this.performanceClient.incrementFields({migratedRTCount:1},r),l.refreshToken.push(g);else{const S=this.getRefreshTokenCredential(g,r);(!S||f.lastUpdatedAt>S.lastUpdatedAt)&&(await this.setUserData(g,JSON.stringify(f),r,f.lastUpdatedAt,p),this.performanceClient.incrementFields({migratedRTCount:1},r))}}this.setTokenKeys(s,r,t),this.setTokenKeys(l,r)}trackVersionChanges(t){const i=this.browserStorage.getItem(pC);i&&(this.logger.info(`MSAL.js was last initialized by version: ${i}`),this.performanceClient.addFields({previousLibraryVersion:i},t)),i!==Eo&&this.setItem(pC,Eo,t)}validateAndParseJson(t){if(!t)return null;try{const i=JSON.parse(t);return i&&typeof i=="object"?i:null}catch{return null}}setItem(t,i,r){const s=new Array(Nt+1).fill(0),l=[],h=20;for(let f=0;f<=h;f++)try{if(this.browserStorage.setItem(t,i),f>0)for(let g=0;g<=Nt;g++){const p=s.slice(0,g).reduce((T,A)=>T+A,0);if(p>=f)break;const S=f>p+s[g]?p+s[g]:f;f>p&&s[g]>0&&this.removeAccessTokenKeys(l.slice(p,S),r,g)}break}catch(g){const p=Oh(g);if(p.errorCode===Fc&&f<h){if(!l.length)for(let S=0;S<=Nt;S++)if(t===Ir(this.clientId,S)){const T=JSON.parse(i).accessToken;l.push(...T),s[S]=T.length}else{const T=this.getTokenKeys(S).accessToken;l.push(...T),s[S]=T.length}if(l.length<=f)throw p;this.removeAccessToken(l[f],r,!1)}else throw p}}async setUserData(t,i,r,s,l){const h=new Array(Nt+1).fill(0),f=[],g=20;for(let p=0;p<=g;p++)try{if(await Q(this.browserStorage.setUserData.bind(this.browserStorage),w.SetUserData,this.logger,this.performanceClient)(t,i,r,s,l),p>0)for(let S=0;S<=Nt;S++){const T=h.slice(0,S).reduce((K,ee)=>K+ee,0);if(T>=p)break;const A=p>T+h[S]?T+h[S]:p;p>T&&h[S]>0&&this.removeAccessTokenKeys(f.slice(T,A),r,S)}break}catch(S){const T=Oh(S);if(T.errorCode===Fc&&p<g){if(!f.length)for(let A=0;A<=Nt;A++){const K=this.getTokenKeys(A).accessToken;f.push(...K),h[A]=K.length}if(f.length<=p)throw T;this.removeAccessToken(f[p],r,!1)}else throw T}}getAccount(t,i){this.logger.trace("BrowserCacheManager.getAccount called");const r=this.browserStorage.getUserData(t);if(!r)return this.removeAccountKeyFromMap(t,i),null;const s=this.validateAndParseJson(r);return!s||!ot.isAccountEntity(s)?null:kh.toObject(new ot,s)}async setAccount(t,i,r){this.logger.trace("BrowserCacheManager.setAccount called");const s=this.generateAccountKey(ot.getAccountInfo(t)),l=Date.now().toString();t.lastUpdatedAt=l,await this.setUserData(s,JSON.stringify(t),i,l,r);const h=this.addAccountKeyToMap(s,i);this.performanceClient.addFields({kmsi:r},i),this.cacheConfig.cacheLocation===Tt.LocalStorage&&h&&this.eventHandler.emitEvent(ye.ACCOUNT_ADDED,void 0,ot.getAccountInfo(t))}getAccountKeys(){return Bi(this.browserStorage)}setAccountKeys(t,i,r=Uc){t.length===0?this.removeItem(Rr(r)):this.setItem(Rr(r),JSON.stringify(t),i)}addAccountKeyToMap(t,i){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii(`BrowserCacheManager.addAccountKeyToMap called with key: ${t}`);const r=this.getAccountKeys();return r.indexOf(t)===-1?(r.push(t),this.setItem(Rr(),JSON.stringify(r),i),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added"),!0):(this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map"),!1)}removeAccountKeyFromMap(t,i){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii(`BrowserCacheManager.removeAccountKeyFromMap called with key: ${t}`);const r=this.getAccountKeys(),s=r.indexOf(t);s>-1?(r.splice(s,1),this.setAccountKeys(r,i),this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")):this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")}removeAccount(t,i){const r=this.getActiveAccount(i);r?.homeAccountId===t.homeAccountId&&r?.environment===t.environment&&this.setActiveAccount(null,i),super.removeAccount(t,i),this.removeAccountKeyFromMap(this.generateAccountKey(t),i),this.browserStorage.getKeys().forEach(s=>{s.includes(t.homeAccountId)&&s.includes(t.environment)&&this.browserStorage.removeItem(s)}),this.cacheConfig.cacheLocation===Tt.LocalStorage&&this.eventHandler.emitEvent(ye.ACCOUNT_REMOVED,void 0,t)}removeIdToken(t,i){super.removeIdToken(t,i);const r=this.getTokenKeys(),s=r.idToken.indexOf(t);s>-1&&(this.logger.info("idToken removed from tokenKeys map"),r.idToken.splice(s,1),this.setTokenKeys(r,i))}removeAccessToken(t,i,r=!0){super.removeAccessToken(t,i),r&&this.removeAccessTokenKeys([t],i)}removeAccessTokenKeys(t,i,r=Nt){this.logger.trace("removeAccessTokenKey called");const s=this.getTokenKeys(r);let l=0;if(t.forEach(h=>{const f=s.accessToken.indexOf(h);f>-1&&(s.accessToken.splice(f,1),l++)}),l>0){this.logger.info(`removed ${l} accessToken keys from tokenKeys map`),this.setTokenKeys(s,i,r);return}}removeRefreshToken(t,i){super.removeRefreshToken(t,i);const r=this.getTokenKeys(),s=r.refreshToken.indexOf(t);s>-1&&(this.logger.info("refreshToken removed from tokenKeys map"),r.refreshToken.splice(s,1),this.setTokenKeys(r,i))}getTokenKeys(t=Nt){return bn(this.clientId,this.browserStorage,t)}setTokenKeys(t,i,r=Nt){if(t.idToken.length===0&&t.accessToken.length===0&&t.refreshToken.length===0){this.removeItem(Ir(this.clientId,r));return}else this.setItem(Ir(this.clientId,r),JSON.stringify(t),i)}getIdTokenCredential(t,i){const r=this.browserStorage.getUserData(t);if(!r)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeIdToken(t,i),null;const s=this.validateAndParseJson(r);return!s||!EI(s)?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),s)}async setIdTokenCredential(t,i,r){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");const s=this.generateCredentialKey(t),l=Date.now().toString();t.lastUpdatedAt=l,await this.setUserData(s,JSON.stringify(t),i,l,r);const h=this.getTokenKeys();h.idToken.indexOf(s)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),h.idToken.push(s),this.setTokenKeys(h,i))}getAccessTokenCredential(t,i){const r=this.browserStorage.getUserData(t);if(!r)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeAccessTokenKeys([t],i),null;const s=this.validateAndParseJson(r);return!s||!Wv(s)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),s)}async setAccessTokenCredential(t,i,r){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");const s=this.generateCredentialKey(t),l=Date.now().toString();t.lastUpdatedAt=l,await this.setUserData(s,JSON.stringify(t),i,l,r);const h=this.getTokenKeys(),f=h.accessToken.indexOf(s);f!==-1&&h.accessToken.splice(f,1),this.logger.trace(`access token ${f===-1?"added to":"updated in"} map`),h.accessToken.push(s),this.setTokenKeys(h,i)}getRefreshTokenCredential(t,i){const r=this.browserStorage.getUserData(t);if(!r)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeRefreshToken(t,i),null;const s=this.validateAndParseJson(r);return!s||!eC(s)?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),s)}async setRefreshTokenCredential(t,i,r){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");const s=this.generateCredentialKey(t),l=Date.now().toString();t.lastUpdatedAt=l,await this.setUserData(s,JSON.stringify(t),i,l,r);const h=this.getTokenKeys();h.refreshToken.indexOf(s)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),h.refreshToken.push(s),this.setTokenKeys(h,i))}getAppMetadata(t){const i=this.browserStorage.getItem(t);if(!i)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;const r=this.validateAndParseJson(i);return!r||!RI(t,r)?(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),r)}setAppMetadata(t,i){this.logger.trace("BrowserCacheManager.setAppMetadata called");const r=wI(t);this.setItem(r,JSON.stringify(t),i)}getServerTelemetry(t){const i=this.browserStorage.getItem(t);if(!i)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;const r=this.validateAndParseJson(i);return!r||!_I(t,r)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),r)}setServerTelemetry(t,i,r){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.setItem(t,JSON.stringify(i),r)}getAuthorityMetadata(t){const i=this.internalStorage.getItem(t);if(!i)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;const r=this.validateAndParseJson(i);return r&&II(t,r)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),r):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter(i=>this.isAuthorityMetadata(i))}setWrapperMetadata(t,i){this.internalStorage.setItem(wc.WRAPPER_SKU,t),this.internalStorage.setItem(wc.WRAPPER_VER,i)}getWrapperMetadata(){const t=this.internalStorage.getItem(wc.WRAPPER_SKU)||W.EMPTY_STRING,i=this.internalStorage.getItem(wc.WRAPPER_VER)||W.EMPTY_STRING;return[t,i]}setAuthorityMetadata(t,i){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(t,JSON.stringify(i))}getActiveAccount(t){const i=this.generateCacheKey(zv.ACTIVE_ACCOUNT_FILTERS),r=this.browserStorage.getItem(i);if(!r)return this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters found"),null;const s=this.validateAndParseJson(r);return s?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoFilteredBy({homeAccountId:s.homeAccountId,localAccountId:s.localAccountId,tenantId:s.tenantId},t)):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null)}setActiveAccount(t,i){const r=this.generateCacheKey(zv.ACTIVE_ACCOUNT_FILTERS);if(t){this.logger.verbose("setActiveAccount: Active account set");const s={homeAccountId:t.homeAccountId,localAccountId:t.localAccountId,tenantId:t.tenantId,lastUpdatedAt:Vt().toString()};this.setItem(r,JSON.stringify(s),i)}else this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(r);this.eventHandler.emitEvent(ye.ACTIVE_ACCOUNT_CHANGED)}getThrottlingCache(t){const i=this.browserStorage.getItem(t);if(!i)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;const r=this.validateAndParseJson(i);return!r||!bI(t,r)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),r)}setThrottlingCache(t,i,r){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.setItem(t,JSON.stringify(i),r)}getTemporaryCache(t,i){const r=i?this.generateCacheKey(t):t;if(this.cacheConfig.storeAuthStateInCookie){const l=this.cookieStorage.getItem(r);if(l)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),l}const s=this.temporaryCacheStorage.getItem(r);if(!s){if(this.cacheConfig.cacheLocation===Tt.LocalStorage){const l=this.browserStorage.getItem(r);if(l)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),l}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),s}setTemporaryCache(t,i,r){const s=r?this.generateCacheKey(t):t;this.temporaryCacheStorage.setItem(s,i),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.cookieStorage.setItem(s,i,void 0,this.cacheConfig.secureCookies))}removeItem(t){this.browserStorage.removeItem(t)}removeTemporaryItem(t){this.temporaryCacheStorage.removeItem(t),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.cookieStorage.removeItem(t))}getKeys(){return this.browserStorage.getKeys()}clear(t){this.removeAllAccounts(t),this.removeAppMetadata(t),this.temporaryCacheStorage.getKeys().forEach(i=>{(i.indexOf(Ot)!==-1||i.indexOf(this.clientId)!==-1)&&this.removeTemporaryItem(i)}),this.browserStorage.getKeys().forEach(i=>{(i.indexOf(Ot)!==-1||i.indexOf(this.clientId)!==-1)&&this.browserStorage.removeItem(i)}),this.internalStorage.clear()}clearTokensAndKeysWithClaims(t){this.performanceClient.addQueueMeasurement(w.ClearTokensAndKeysWithClaims,t);const i=this.getTokenKeys();let r=0;i.accessToken.forEach(s=>{const l=this.getAccessTokenCredential(s,t);l?.requestedClaimsHash&&s.includes(l.requestedClaimsHash.toLowerCase())&&(this.removeAccessToken(s,t),r++)}),r>0&&this.logger.warning(`${r} access tokens with claims in the cache keys have been removed from the cache.`)}generateCacheKey(t){return rn.startsWith(t,Ot)?t:`${Ot}.${this.clientId}.${t}`}generateCredentialKey(t){const i=t.credentialType===It.REFRESH_TOKEN&&t.familyId||t.clientId,r=t.tokenType&&t.tokenType.toLowerCase()!==Ke.BEARER.toLowerCase()?t.tokenType.toLowerCase():"";return[`${Ot}.${Nt}`,t.homeAccountId,t.environment,t.credentialType,i,t.realm||"",t.target||"",t.requestedClaimsHash||"",r].join(mC).toLowerCase()}generateAccountKey(t){const i=t.homeAccountId.split(".")[1];return[`${Ot}.${Uc}`,t.homeAccountId,t.environment,i||t.tenantId||""].join(mC).toLowerCase()}resetRequestCache(){this.logger.trace("BrowserCacheManager.resetRequestCache called"),this.removeTemporaryItem(this.generateCacheKey(dt.REQUEST_PARAMS)),this.removeTemporaryItem(this.generateCacheKey(dt.VERIFIER)),this.removeTemporaryItem(this.generateCacheKey(dt.ORIGIN_URI)),this.removeTemporaryItem(this.generateCacheKey(dt.URL_HASH)),this.removeTemporaryItem(this.generateCacheKey(dt.NATIVE_REQUEST)),this.setInteractionInProgress(!1)}cacheAuthorizeRequest(t,i){this.logger.trace("BrowserCacheManager.cacheAuthorizeRequest called");const r=Za(JSON.stringify(t));if(this.setTemporaryCache(dt.REQUEST_PARAMS,r,!0),i){const s=Za(i);this.setTemporaryCache(dt.VERIFIER,s,!0)}}getCachedRequest(){this.logger.trace("BrowserCacheManager.getCachedRequest called");const t=this.getTemporaryCache(dt.REQUEST_PARAMS,!0);if(!t)throw he(ST);const i=this.getTemporaryCache(dt.VERIFIER,!0);let r,s="";try{r=JSON.parse(Ht(t)),i&&(s=Ht(i))}catch(l){throw this.logger.errorPii(`Attempted to parse: ${t}`),this.logger.error(`Parsing cached token request threw with error: ${l}`),he(TT)}return[r,s]}getCachedNativeRequest(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");const t=this.getTemporaryCache(dt.NATIVE_REQUEST,!0);if(!t)return this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null;const i=this.validateAndParseJson(t);return i||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null)}isInteractionInProgress(t){const i=this.getInteractionInProgress()?.clientId;return t?i===this.clientId:!!i}getInteractionInProgress(){const t=`${Ot}.${dt.INTERACTION_STATUS_KEY}`,i=this.getTemporaryCache(t,!1);try{return i?JSON.parse(i):null}catch{return this.logger.error("Cannot parse interaction status. Removing temporary cache items and clearing url hash. Retrying interaction should fix the error"),this.removeTemporaryItem(t),this.resetRequestCache(),FT(window),null}}setInteractionInProgress(t,i=Ki.SIGNIN){const r=`${Ot}.${dt.INTERACTION_STATUS_KEY}`;if(t){if(this.getInteractionInProgress())throw he(hT);this.setTemporaryCache(r,JSON.stringify({clientId:this.clientId,type:i}),!1)}else!t&&this.getInteractionInProgress()?.clientId===this.clientId&&this.removeTemporaryItem(r)}async hydrateCache(t,i){const r=fl(t.account?.homeAccountId,t.account?.environment,t.idToken,this.clientId,t.tenantId);let s;i.claims&&(s=await this.cryptoImpl.hashString(i.claims));const l=gl(t.account?.homeAccountId,t.account.environment,t.accessToken,this.clientId,t.tenantId,t.scopes.join(" "),t.expiresOn?$v(t.expiresOn):0,t.extExpiresOn?$v(t.extExpiresOn):0,Ht,void 0,t.tokenType,void 0,i.sshKid,i.claims,s),h={idToken:r,accessToken:l};return this.saveCacheRecord(h,t.correlationId,zn(Ln(t.idToken,Ht)))}async saveCacheRecord(t,i,r,s){try{await super.saveCacheRecord(t,i,r,s)}catch(l){if(l instanceof br&&this.performanceClient&&i)try{const h=this.getTokenKeys();this.performanceClient.addFields({cacheRtCount:h.refreshToken.length,cacheIdCount:h.idToken.length,cacheAtCount:h.accessToken.length},i)}catch{}throw l}}}function TC(c,t,i,r){try{switch(t){case Tt.LocalStorage:return new LO(c,i,r);case Tt.SessionStorage:return new zO;case Tt.MemoryStorage:default:break}}catch(s){i.error(s)}return new El}const BO=(c,t,i,r)=>{const s={cacheLocation:Tt.MemoryStorage,cacheRetentionDays:5,temporaryCacheLocation:Tt.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};return new Hh(c,s,Kc,t,i,r)};function KO(c,t,i,r,s){return c.verbose("getAllAccounts called"),i?t.getAllAccounts(s||{},r):[]}function qO(c,t,i,r){const s=i.getAccountInfoFilteredBy(c,r);return s?(t.verbose("getAccount: Account matching provided filter found, returning"),s):(t.verbose("getAccount: No matching account found, returning null"),null)}function jO(c,t,i,r){if(t.trace("getAccountByUsername called"),!c)return t.warning("getAccountByUsername: No username provided"),null;const s=i.getAccountInfoFilteredBy({username:c},r);return s?(t.verbose("getAccountByUsername: Account matching username found, returning"),t.verbosePii(`getAccountByUsername: Returning signed-in accounts matching username: ${c}`),s):(t.verbose("getAccountByUsername: No matching account found, returning null"),null)}function GO(c,t,i,r){if(t.trace("getAccountByHomeId called"),!c)return t.warning("getAccountByHomeId: No homeAccountId provided"),null;const s=i.getAccountInfoFilteredBy({homeAccountId:c},r);return s?(t.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),t.verbosePii(`getAccountByHomeId: Returning signed-in accounts matching homeAccountId: ${c}`),s):(t.verbose("getAccountByHomeId: No matching account found, returning null"),null)}function FO(c,t,i,r){if(t.trace("getAccountByLocalId called"),!c)return t.warning("getAccountByLocalId: No localAccountId provided"),null;const s=i.getAccountInfoFilteredBy({localAccountId:c},r);return s?(t.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),t.verbosePii(`getAccountByLocalId: Returning signed-in accounts matching localAccountId: ${c}`),s):(t.verbose("getAccountByLocalId: No matching account found, returning null"),null)}function QO(c,t,i){t.setActiveAccount(c,i)}function YO(c,t){return c.getActiveAccount(t)}const VO="msal.broadcast.event";class XO{constructor(t){this.eventCallbacks=new Map,this.logger=t||new Yi({}),typeof BroadcastChannel<"u"&&(this.broadcastChannel=new BroadcastChannel(VO)),this.invokeCrossTabCallbacks=this.invokeCrossTabCallbacks.bind(this)}addEventCallback(t,i,r){if(typeof window<"u"){const s=r||_O();return this.eventCallbacks.has(s)?(this.logger.error(`Event callback with id: ${s} is already registered. Please provide a unique id or remove the existing callback and try again.`),null):(this.eventCallbacks.set(s,[t,i||[]]),this.logger.verbose(`Event callback registered with id: ${s}`),s)}return null}removeEventCallback(t){this.eventCallbacks.delete(t),this.logger.verbose(`Event callback ${t} removed.`)}emitEvent(t,i,r,s){const l={eventType:t,interactionType:i||null,payload:r||null,error:s||null,timestamp:Date.now()};switch(t){case ye.ACCOUNT_ADDED:case ye.ACCOUNT_REMOVED:case ye.ACTIVE_ACCOUNT_CHANGED:this.broadcastChannel?.postMessage(l);break;default:this.invokeCallbacks(l);break}}invokeCallbacks(t){this.eventCallbacks.forEach(([i,r],s)=>{(r.length===0||r.includes(t.eventType))&&(this.logger.verbose(`Emitting event to callback ${s}: ${t.eventType}`),i.apply(null,[t]))})}invokeCrossTabCallbacks(t){const i=t.data;this.invokeCallbacks(i)}subscribeCrossTab(){this.broadcastChannel?.addEventListener("message",this.invokeCrossTabCallbacks)}unsubscribeCrossTab(){this.broadcastChannel?.removeEventListener("message",this.invokeCrossTabCallbacks)}}class $T{constructor(t,i,r,s,l,h,f,g,p){this.config=t,this.browserStorage=i,this.browserCrypto=r,this.networkClient=this.config.system.networkClient,this.eventHandler=l,this.navigationClient=h,this.platformAuthProvider=g,this.correlationId=p||kn(),this.logger=s.clone(Qt.MSAL_SKU,Eo,this.correlationId),this.performanceClient=f}async clearCacheOnLogout(t,i){if(i)try{this.browserStorage.removeAccount(i,t),this.logger.verbose("Cleared cache items belonging to the account provided in the logout request.")}catch{this.logger.error("Account provided in logout request was not found. Local cache unchanged.")}else try{this.logger.verbose("No account provided in logout request, clearing all cache items.",this.correlationId),this.browserStorage.clear(t),await this.browserCrypto.clearKeystore()}catch{this.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged.")}}getRedirectUri(t){this.logger.verbose("getRedirectUri called");const i=t||this.config.auth.redirectUri;return Pe.getAbsoluteUrl(i,ci())}initializeServerTelemetryManager(t,i){this.logger.verbose("initializeServerTelemetryManager called");const r={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:t,forceRefresh:i||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]};return new Ja(r,this.browserStorage)}async getDiscoveredAuthority(t){const{account:i}=t,r=t.requestExtraQueryParameters&&t.requestExtraQueryParameters.hasOwnProperty("instance_aware")?t.requestExtraQueryParameters.instance_aware:void 0;this.performanceClient.addQueueMeasurement(w.StandardInteractionClientGetDiscoveredAuthority,this.correlationId);const s={protocolMode:this.config.auth.protocolMode,OIDCOptions:this.config.auth.OIDCOptions,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},l=t.requestAuthority||this.config.auth.authority,h=r?.length?r==="true":this.config.auth.instanceAware,f=i&&h?this.config.auth.authority.replace(Pe.getDomainFromUrl(l),i.environment):l,g=Dt.generateAuthority(f,t.requestAzureCloudOptions||this.config.auth.azureCloudOptions),p=await Q(ZS,w.AuthorityFactoryCreateDiscoveredInstance,this.logger,this.performanceClient,this.correlationId)(g,this.config.system.networkClient,this.browserStorage,s,this.logger,this.correlationId,this.performanceClient);if(i&&!p.isAlias(i.environment))throw Xe(IS);return p}}async function Xf(c,t,i,r){i.addQueueMeasurement(w.InitializeBaseRequest,c.correlationId);const s=c.authority||t.auth.authority,l=[...c&&c.scopes||[]],h={...c,correlationId:c.correlationId,authority:s,scopes:l};if(!h.authenticationScheme)h.authenticationScheme=Ke.BEARER,r.verbose(`Authentication Scheme wasn't explicitly set in request, defaulting to "Bearer" request`);else{if(h.authenticationScheme===Ke.SSH){if(!c.sshJwk)throw Xe(cl);if(!c.sshKid)throw Xe(bS)}r.verbose(`Authentication Scheme set to "${h.authenticationScheme}" as configured in Auth request`)}return t.cache.claimsBasedCachingEnabled&&c.claims&&!rn.isEmptyObj(c.claims)&&(h.requestedClaimsHash=await jT(c.claims)),h}async function JO(c,t,i,r,s){r.addQueueMeasurement(w.InitializeSilentRequest,c.correlationId);const l=await Q(Xf,w.InitializeBaseRequest,s,r,c.correlationId)(c,i,r,s);return{...c,...l,account:t,forceRefresh:c.forceRefresh||!1}}function ZT(c,t){let i;const r=c.httpMethod;if(t===Yt.EAR){if(i=r||So.POST,i!==So.POST)throw Xe(OS)}else i=r||So.GET;if(c.authorizePostBodyParameters&&i!==So.POST)throw Xe(kS);return i}class Lr extends $T{initializeLogoutRequest(t){this.logger.verbose("initializeLogoutRequest called",t?.correlationId);const i={correlationId:this.correlationId||kn(),...t};if(t)if(t.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(t.account){const r=this.getLogoutHintFromIdTokenClaims(t.account);r&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),i.logoutHint=r)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set");else this.logger.verbose("logoutHint will not be set since no logout request was configured");return!t||t.postLogoutRedirectUri!==null?t&&t.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",i.correlationId),i.postLogoutRedirectUri=Pe.getAbsoluteUrl(t.postLogoutRedirectUri,ci())):this.config.auth.postLogoutRedirectUri===null?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",i.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",i.correlationId),i.postLogoutRedirectUri=Pe.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,ci())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",i.correlationId),i.postLogoutRedirectUri=Pe.getAbsoluteUrl(ci(),ci())):this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",i.correlationId),i}getLogoutHintFromIdTokenClaims(t){const i=t.idTokenClaims;if(i){if(i.login_hint)return i.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null}async createAuthCodeClient(t){this.performanceClient.addQueueMeasurement(w.StandardInteractionClientCreateAuthCodeClient,this.correlationId);const i=await Q(this.getClientConfiguration.bind(this),w.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)(t);return new nT(i,this.performanceClient)}async getClientConfiguration(t){const{serverTelemetryManager:i,requestAuthority:r,requestAzureCloudOptions:s,requestExtraQueryParameters:l,account:h}=t;this.performanceClient.addQueueMeasurement(w.StandardInteractionClientGetClientConfiguration,this.correlationId);const f=t.authority||await Q(this.getDiscoveredAuthority.bind(this),w.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,this.correlationId)({requestAuthority:r,requestAzureCloudOptions:s,requestExtraQueryParameters:l,account:h}),g=this.config.system.loggerOptions;return{authOptions:{clientId:this.config.auth.clientId,authority:f,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:this.config.auth.redirectUri},systemOptions:{tokenRenewalOffsetSeconds:this.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:g.loggerCallback,piiLoggingEnabled:g.piiLoggingEnabled,logLevel:g.logLevel,correlationId:this.correlationId},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.browserCrypto,networkInterface:this.networkClient,storageInterface:this.browserStorage,serverTelemetryManager:i,libraryInfo:{sku:Qt.MSAL_SKU,version:Eo,cpu:W.EMPTY_STRING,os:W.EMPTY_STRING},telemetry:this.config.telemetry}}async initializeAuthorizationRequest(t,i){this.performanceClient.addQueueMeasurement(w.StandardInteractionClientInitializeAuthorizationRequest,this.correlationId);const r=this.getRedirectUri(t.redirectUri),s={interactionType:i},l=Pr.setRequestState(this.browserCrypto,t&&t.state||W.EMPTY_STRING,s),f={...await Q(Xf,w.InitializeBaseRequest,this.logger,this.performanceClient,this.correlationId)({...t,correlationId:this.correlationId},this.config,this.performanceClient,this.logger),redirectUri:r,state:l,nonce:t.nonce||kn(),responseMode:this.config.auth.OIDCOptions.serverResponseType},g={...f,httpMethod:ZT(f,this.config.auth.protocolMode)};if(t.loginHint||t.sid)return g;const p=t.account||this.browserStorage.getActiveAccount(this.correlationId);return p&&(this.logger.verbose("Setting validated request account",this.correlationId),this.logger.verbosePii(`Setting validated request account: ${p.homeAccountId}`,this.correlationId),g.account=p),g}}function $O(c,t){if(!t)return null;try{return Pr.parseRequestState(c,t).libraryState.meta}catch{throw re(Mr)}}function Qa(c,t,i){const r=jc(c);if(!r)throw NS(c)?(i.error(`A ${t} is present in the iframe but it does not contain known properties. It's likely that the ${t} has been replaced by code running on the redirectUri page.`),i.errorPii(`The ${t} detected is: ${c}`),he(lT)):(i.error(`The request has returned to the redirectUri but a ${t} is not present. It's likely that the ${t} has been removed or the page has been redirected by code running on the redirectUri page.`),he(cT));return r}function ZO(c,t,i){if(!c.state)throw he(Df);const r=$O(t,c.state);if(!r)throw he(uT);if(r.interactionType!==i)throw he(dT)}class WT{constructor(t,i,r,s,l){this.authModule=t,this.browserStorage=i,this.authCodeRequest=r,this.logger=s,this.performanceClient=l}async handleCodeResponse(t,i){this.performanceClient.addQueueMeasurement(w.HandleCodeResponse,i.correlationId);let r;try{r=jI(t,i.state)}catch(s){throw s instanceof Ro&&s.subError===$a?he($a):s}return Q(this.handleCodeResponseFromServer.bind(this),w.HandleCodeResponseFromServer,this.logger,this.performanceClient,i.correlationId)(r,i)}async handleCodeResponseFromServer(t,i,r=!0){if(this.performanceClient.addQueueMeasurement(w.HandleCodeResponseFromServer,i.correlationId),this.logger.trace("InteractionHandler.handleCodeResponseFromServer called"),this.authCodeRequest.code=t.code,t.cloud_instance_host_name&&await Q(this.authModule.updateAuthority.bind(this.authModule),w.UpdateTokenEndpointAuthority,this.logger,this.performanceClient,i.correlationId)(t.cloud_instance_host_name,i.correlationId),r&&(t.nonce=i.nonce||void 0),t.state=i.state,t.client_info)this.authCodeRequest.clientInfo=t.client_info;else{const l=this.createCcsCredentials(i);l&&(this.authCodeRequest.ccsCredential=l)}return await Q(this.authModule.acquireToken.bind(this.authModule),w.AuthClientAcquireToken,this.logger,this.performanceClient,i.correlationId)(this.authCodeRequest,t)}createCcsCredentials(t){return t.account?{credential:t.account.homeAccountId,type:In.HOME_ACCOUNT_ID}:t.loginHint?{credential:t.loginHint,type:In.UPN}:null}}const WO="ContentError",ek="PageException",eA="user_switch";const tk="USER_INTERACTION_REQUIRED",nk="USER_CANCEL",ik="NO_NETWORK",ok="DISABLED",rk="ACCOUNT_UNAVAILABLE",ak="UX_NOT_ALLOWED";const sk=-2147186943,ck={[eA]:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."};class Pn extends Ye{constructor(t,i,r){super(t,i),Object.setPrototypeOf(this,Pn.prototype),this.name="NativeAuthError",this.ext=r}}function Ar(c){if(c.ext&&c.ext.status&&c.ext.status===ok||c.ext&&c.ext.error&&c.ext.error===sk)return!0;switch(c.errorCode){case WO:case ek:return!0;default:return!1}}function tl(c,t,i){if(i&&i.status)switch(i.status){case rk:return $c(WS);case tk:return new On(c,t);case nk:return he($a);case ik:return he(Zc);case ak:return $c(wf)}return new Pn(c,ck[c]||t,i)}class tA extends Lr{async acquireToken(t){this.performanceClient.addQueueMeasurement(w.SilentCacheClientAcquireToken,t.correlationId);const i=this.initializeServerTelemetryManager(Le.acquireTokenSilent_silentFlow),r=await Q(this.getClientConfiguration.bind(this),w.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:i,requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,account:t.account}),s=new BI(r,this.performanceClient);this.logger.verbose("Silent auth client created");try{const h=(await Q(s.acquireCachedToken.bind(s),w.SilentFlowClientAcquireCachedToken,this.logger,this.performanceClient,t.correlationId)(t))[0];return this.performanceClient.addFields({fromCache:!0},t.correlationId),h}catch(l){throw l instanceof ts&&l.errorCode===Uf&&this.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),l}}logout(t){this.logger.verbose("logoutRedirect called");const i=this.initializeLogoutRequest(t);return this.clearCacheOnLogout(i.correlationId,i?.account)}}class Pc extends $T{constructor(t,i,r,s,l,h,f,g,p,S,T,A){super(t,i,r,s,l,h,g,p,A),this.apiId=f,this.accountId=S,this.platformAuthProvider=p,this.nativeStorageManager=T,this.silentCacheClient=new tA(t,this.nativeStorageManager,r,s,l,h,g,p,A);const K=this.platformAuthProvider.getExtensionName();this.skus=Ja.makeExtraSkuString({libraryName:Qt.MSAL_SKU,libraryVersion:Eo,extensionName:K,extensionVersion:this.platformAuthProvider.getExtensionVersion()})}addRequestSKUs(t){t.extraParameters={...t.extraParameters,[nI]:this.skus}}async acquireToken(t,i){this.performanceClient.addQueueMeasurement(w.NativeInteractionClientAcquireToken,this.correlationId),this.logger.trace("NativeInteractionClient - acquireToken called.");const r=this.performanceClient.startMeasurement(w.NativeInteractionClientAcquireToken,this.correlationId),s=Vt(),l=this.initializeServerTelemetryManager(this.apiId);try{const h=await this.initializeNativeRequest(t);try{const g=await this.acquireTokensFromCache(this.accountId,h);return r.end({success:!0,isNativeBroker:!1,fromCache:!0}),g}catch(g){if(i===xt.AccessToken)throw this.logger.info("MSAL internal Cache does not contain tokens, return error as per cache policy"),r.end({success:!1,brokerErrorCode:"cache_request_failed"}),g;this.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call")}const f=await this.platformAuthProvider.sendMessage(h);return await this.handleNativeResponse(f,h,s).then(g=>(r.end({success:!0,isNativeBroker:!0,requestId:g.requestId}),l.clearNativeBrokerErrorCode(),g)).catch(g=>{throw r.end({success:!1,errorCode:g.errorCode,subErrorCode:g.subError}),g})}catch(h){throw h instanceof Pn&&l.setNativeBrokerErrorCode(h.errorCode),r.end({success:!1}),h}}createSilentCacheRequest(t,i){return{authority:t.authority,correlationId:this.correlationId,scopes:pt.fromString(t.scope).asArray(),account:i,forceRefresh:!1}}async acquireTokensFromCache(t,i){if(!t)throw this.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),re(Rh);const r=this.browserStorage.getBaseAccountInfo({nativeAccountId:t},this.correlationId);if(!r)throw re(Rh);try{const s=this.createSilentCacheRequest(i,r),l=await this.silentCacheClient.acquireToken(s),h={...r,idTokenClaims:l?.idTokenClaims,idToken:l?.idToken};return{...l,account:h}}catch(s){throw s}}async acquireTokenRedirect(t,i){this.logger.trace("NativeInteractionClient - acquireTokenRedirect called.");const{...r}=t;delete r.onRedirectNavigate;const s=await this.initializeNativeRequest(r);try{await this.platformAuthProvider.sendMessage(s)}catch(f){if(f instanceof Pn&&(this.initializeServerTelemetryManager(this.apiId).setNativeBrokerErrorCode(f.errorCode),Ar(f)))throw f}this.browserStorage.setTemporaryCache(dt.NATIVE_REQUEST,JSON.stringify(s),!0);const l={apiId:Le.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},h=this.config.auth.navigateToLoginRequestUrl?window.location.href:this.getRedirectUri(t.redirectUri);i.end({success:!0}),await this.navigationClient.navigateExternal(h,l)}async handleRedirectPromise(t,i){if(this.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const r=this.browserStorage.getCachedNativeRequest();if(!r)return this.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),t&&i&&t?.addFields({errorCode:"no_cached_request"},i),null;const{prompt:s,...l}=r;s&&this.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),this.browserStorage.removeItem(this.browserStorage.generateCacheKey(dt.NATIVE_REQUEST));const h=Vt();try{this.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker.");const f=await this.platformAuthProvider.sendMessage(l),g=await this.handleNativeResponse(f,l,h);return this.initializeServerTelemetryManager(this.apiId).clearNativeBrokerErrorCode(),t&&this.correlationId&&this.performanceClient.addFields({isNativeBroker:!0},this.correlationId),g}catch(f){throw f}}logout(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")}async handleNativeResponse(t,i,r){this.logger.trace("NativeInteractionClient - handleNativeResponse called.");const s=Ln(t.id_token,Ht),l=this.createHomeAccountIdentifier(t,s),h=this.browserStorage.getAccountInfoFilteredBy({nativeAccountId:i.accountId},this.correlationId)?.homeAccountId;if(i.extraParameters?.child_client_id&&t.account.id!==i.accountId)this.logger.info("handleNativeServerResponse: Double broker flow detected, ignoring accountId mismatch");else if(l!==h&&t.account.id!==i.accountId)throw tl(eA);const f=await this.getDiscoveredAuthority({requestAuthority:i.authority}),g=Rf(this.browserStorage,f,l,Ht,this.correlationId,s,t.client_info,void 0,s.tid,void 0,t.account.id,this.logger);t.expires_in=Number(t.expires_in);const p=await this.generateAuthenticationResult(t,i,s,g,f.canonicalAuthority,r);return await this.cacheAccount(g,this.correlationId,zn(s)),await this.cacheNativeTokens(t,i,l,s,t.access_token,p.tenantId,r),p}createHomeAccountIdentifier(t,i){return ot.generateHomeAccountId(t.client_info||W.EMPTY_STRING,wn.Default,this.logger,this.browserCrypto,i)}generateScopes(t,i){return i?pt.fromString(i):pt.fromString(t)}async generatePopAccessToken(t,i){if(i.tokenType===Ke.POP&&i.signPopToken){if(t.shr)return this.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),t.shr;const r=new Nr(this.browserCrypto),s={resourceRequestMethod:i.resourceRequestMethod,resourceRequestUri:i.resourceRequestUri,shrClaims:i.shrClaims,shrNonce:i.shrNonce};if(!i.keyId)throw re(ef);return r.signPopToken(t.access_token,i.keyId,s)}else return t.access_token}async generateAuthenticationResult(t,i,r,s,l,h){const f=this.addTelemetryFromNativeResponse(t.properties.MATS),g=this.generateScopes(i.scope,t.scope),p=t.account.properties||{},S=p.UID||r.oid||r.sub||W.EMPTY_STRING,T=p.TenantId||r.tid||W.EMPTY_STRING,A=lf(ot.getAccountInfo(s),void 0,r,t.id_token);A.nativeAccountId!==t.account.id&&(A.nativeAccountId=t.account.id);const K=await this.generatePopAccessToken(t,i),ee=i.tokenType===Ke.POP?Ke.POP:Ke.BEARER;return{authority:l,uniqueId:S,tenantId:T,scopes:g.asArray(),account:A,idToken:t.id_token,idTokenClaims:r,accessToken:K,fromCache:f?this.isResponseFromCache(f):!1,expiresOn:wr(h+t.expires_in),tokenType:ee,correlationId:this.correlationId,state:t.state,fromNativeBroker:!0}}async cacheAccount(t,i,r){await this.browserStorage.setAccount(t,this.correlationId,r),this.browserStorage.removeAccountContext(ot.getAccountInfo(t),i)}cacheNativeTokens(t,i,r,s,l,h,f){const g=fl(r,i.authority,t.id_token||"",i.clientId,s.tid||""),p=i.tokenType===Ke.POP?W.SHR_NONCE_VALIDITY:(typeof t.expires_in=="string"?parseInt(t.expires_in,10):t.expires_in)||0,S=f+p,T=this.generateScopes(t.scope,i.scope),A=gl(r,i.authority,l,i.clientId,s.tid||h,T.printScopes(),S,0,Ht,void 0,i.tokenType,void 0,i.keyId),K={idToken:g,accessToken:A};return this.nativeStorageManager.saveCacheRecord(K,this.correlationId,zn(s),i.storeInCache)}getExpiresInValue(t,i){return t===Ke.POP?W.SHR_NONCE_VALIDITY:(typeof i=="string"?parseInt(i,10):i)||0}addTelemetryFromNativeResponse(t){const i=this.getMATSFromResponse(t);return i?(this.performanceClient.addFields({extensionId:this.platformAuthProvider.getExtensionId(),extensionVersion:this.platformAuthProvider.getExtensionVersion(),matsBrokerVersion:i.broker_version,matsAccountJoinOnStart:i.account_join_on_start,matsAccountJoinOnEnd:i.account_join_on_end,matsDeviceJoin:i.device_join,matsPromptBehavior:i.prompt_behavior,matsApiErrorCode:i.api_error_code,matsUiVisible:i.ui_visible,matsSilentCode:i.silent_code,matsSilentBiSubCode:i.silent_bi_sub_code,matsSilentMessage:i.silent_message,matsSilentStatus:i.silent_status,matsHttpStatus:i.http_status,matsHttpEventCount:i.http_event_count},this.correlationId),i):null}getMATSFromResponse(t){if(t)try{return JSON.parse(t)}catch{this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null}isResponseFromCache(t){return typeof t.is_cached>"u"?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!t.is_cached}async initializeNativeRequest(t){this.logger.trace("NativeInteractionClient - initializeNativeRequest called");const i=await this.getCanonicalAuthority(t),{scopes:r,...s}=t,l=new pt(r||[]);l.appendScopes(xr);const h={...s,accountId:this.accountId,clientId:this.config.auth.clientId,authority:i.urlString,scope:l.printScopes(),redirectUri:this.getRedirectUri(t.redirectUri),prompt:this.getPrompt(t.prompt),correlationId:this.correlationId,tokenType:t.authenticationScheme,windowTitleSubstring:document.title,extraParameters:{...t.extraQueryParameters,...t.tokenQueryParameters},extendedExpiryToken:!1,keyId:t.popKid};if(h.signPopToken&&t.popKid)throw he(DT);if(this.handleExtraBrokerParams(h),h.extraParameters=h.extraParameters||{},h.extraParameters.telemetry=Cn.MATS_TELEMETRY,t.authenticationScheme===Ke.POP){const f={resourceRequestUri:t.resourceRequestUri,resourceRequestMethod:t.resourceRequestMethod,shrClaims:t.shrClaims,shrNonce:t.shrNonce},g=new Nr(this.browserCrypto);let p;if(h.keyId)p=this.browserCrypto.base64UrlEncode(JSON.stringify({kid:h.keyId})),h.signPopToken=!1;else{const S=await Q(g.generateCnf.bind(g),w.PopTokenGenerateCnf,this.logger,this.performanceClient,this.correlationId)(f,this.logger);p=S.reqCnfString,h.keyId=S.kid,h.signPopToken=!0}h.reqCnf=p}return this.addRequestSKUs(h),h}async getCanonicalAuthority(t){const i=t.authority||this.config.auth.authority;t.account&&await this.getDiscoveredAuthority({requestAuthority:i,requestAzureCloudOptions:t.azureCloudOptions,account:t.account});const r=new Pe(i);return r.validateAsUri(),r}getPrompt(t){switch(this.apiId){case Le.ssoSilent:case Le.acquireTokenSilent_silentFlow:return this.logger.trace("initializeNativeRequest: silent request sets prompt to none"),kt.NONE}if(!t){this.logger.trace("initializeNativeRequest: prompt was not provided");return}switch(t){case kt.NONE:case kt.CONSENT:case kt.LOGIN:case kt.SELECT_ACCOUNT:return this.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),t;default:throw this.logger.trace(`initializeNativeRequest: prompt = ${t} is not compatible with native flow`),he(MT)}}handleExtraBrokerParams(t){const i=t.extraParameters&&t.extraParameters.hasOwnProperty(Qc)&&t.extraParameters.hasOwnProperty(Yc)&&t.extraParameters.hasOwnProperty(To);if(!t.embeddedClientId&&!i)return;let r="";const s=t.redirectUri;t.embeddedClientId?(t.redirectUri=this.config.auth.redirectUri,r=t.embeddedClientId):t.extraParameters&&(t.redirectUri=t.extraParameters[Yc],r=t.extraParameters[To]),t.extraParameters={child_client_id:r,child_redirect_uri:s},this.performanceClient?.addFields({embeddedClientId:r,embeddedRedirectUri:s},this.correlationId)}}async function Jf(c,t,i,r,s){const l=qI({...c.auth,authority:t},i,r,s);if(Cf(l,{sku:Qt.MSAL_SKU,version:Eo,os:"",cpu:""}),c.auth.protocolMode!==Yt.OIDC&&Sf(l,c.telemetry.application),i.platformBroker&&(aI(l),s.addFields({isPlatformAuthorizeRequest:!0},i.correlationId),i.authenticationScheme===Ke.POP)){const h=new ui(r,s),f=new Nr(h);let g;i.popKid?g=h.encodeKid(i.popKid):g=(await Q(f.generateCnf.bind(f),w.PopTokenGenerateCnf,r,s,i.correlationId)(i,r)).reqCnfString,Ef(l,g)}return ul(l,i.correlationId,s),l}async function $f(c,t,i,r,s){if(!i.codeChallenge)throw Xe(af);const l=await Q(Jf,w.GetStandardParams,r,s,i.correlationId)(c,t,i,r,s);return ff(l,Yh.CODE),Tf(l,i.codeChallenge,W.S256_CODE_CHALLENGE_METHOD),Fi(l,i.extraQueryParameters||{}),If(t,l,c.auth.encodeExtraQueryParams,i.extraQueryParameters)}async function Zf(c,t,i,r,s,l){if(!r.earJwk)throw he(Nf);const h=await Jf(t,i,r,s,l);ff(h,Yh.IDTOKEN_TOKEN_REFRESHTOKEN),yI(h,r.earJwk),Tf(h,r.codeChallenge,W.S256_CODE_CHALLENGE_METHOD);const f=new Map;Fi(f,r.extraQueryParameters||{});const g=If(i,f,t.auth.encodeExtraQueryParams,r.extraQueryParameters);return nA(c,g,h)}async function Wf(c,t,i,r,s,l){const h=await Jf(t,i,r,s,l);ff(h,Yh.CODE),Tf(h,r.codeChallenge,r.codeChallengeMethod||W.S256_CODE_CHALLENGE_METHOD),vI(h,r.authorizePostBodyParameters||{});const f=new Map;Fi(f,r.extraQueryParameters||{});const g=If(i,f,t.auth.encodeExtraQueryParams,r.extraQueryParameters);return nA(c,g,h)}function nA(c,t,i){const r=c.createElement("form");return r.method="post",r.action=t,i.forEach((s,l)=>{const h=c.createElement("input");h.hidden=!0,h.name=l,h.value=s,r.appendChild(h)}),c.body.appendChild(r),r}async function iA(c,t,i,r,s,l,h,f,g,p){if(f.verbose("Account id found, calling WAM for token"),!p)throw he(Pf);const S=new ui(f,g),T=new Pc(r,s,S,f,h,r.system.navigationClient,i,g,p,t,l,c.correlationId),{userRequestState:A}=Pr.parseRequestState(S,c.state);return Q(T.acquireToken.bind(T),w.NativeInteractionClientAcquireToken,f,g,c.correlationId)({...c,state:A,prompt:void 0})}async function Or(c,t,i,r,s,l,h,f,g,p,S,T){if(xn.removeThrottle(h,s.auth.clientId,c),t.accountId)return Q(iA,w.HandleResponsePlatformBroker,p,S,c.correlationId)(c,t.accountId,r,s,h,f,g,p,S,T);const A={...c,code:t.code||"",codeVerifier:i},K=new WT(l,h,A,p,S);return await Q(K.handleCodeResponse.bind(K),w.HandleCodeResponse,p,S,c.correlationId)(t,c)}async function eg(c,t,i,r,s,l,h,f,g,p,S){if(xn.removeThrottle(l,r.auth.clientId,c),iT(t,c.state),!t.ear_jwe)throw he(sT);if(!c.earJwk)throw he(Nf);const T=JSON.parse(await Q(pO,w.DecryptEarResponse,g,p,c.correlationId)(c.earJwk,t.ear_jwe));if(T.accountId)return Q(iA,w.HandleResponsePlatformBroker,g,p,c.correlationId)(c,T.accountId,i,r,l,h,f,g,p,S);const A=new Ao(r.auth.clientId,l,new ui(g,p),g,null,null,p);A.validateTokenResponse(T);const K={code:"",state:c.state,nonce:c.nonce,client_info:T.client_info,cloud_graph_host_name:T.cloud_graph_host_name,cloud_instance_host_name:T.cloud_instance_host_name,cloud_instance_name:T.cloud_instance_name,msgraph_host:T.msgraph_host};return await Q(A.handleServerTokenResponse.bind(A),w.HandleServerTokenResponse,g,p,c.correlationId)(T,s,Vt(),c,K,void 0,void 0,void 0,void 0)}const lk=32;async function bo(c,t,i){c.addQueueMeasurement(w.GeneratePkceCodes,i);const r=an(uk,w.GenerateCodeVerifier,t,c,i)(c,t,i),s=await Q(dk,w.GenerateCodeChallengeFromVerifier,t,c,i)(r,c,t,i);return{verifier:r,challenge:s}}function uk(c,t,i){try{const r=new Uint8Array(lk);return an(dO,w.GetRandomValues,t,c,i)(r),Vi(r)}catch{throw he(Mf)}}async function dk(c,t,i,r){t.addQueueMeasurement(w.GenerateCodeChallengeFromVerifier,r);try{const s=await Q(BT,w.Sha256Digest,i,t,r)(c,t,r);return Vi(new Uint8Array(s))}catch{throw he(Mf)}}class nl{constructor(t,i,r,s){this.logger=t,this.handshakeTimeoutMs=i,this.extensionId=s,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=r,this.handshakeEvent=r.startMeasurement(w.NativeMessageHandlerHandshake),this.platformAuthType=Cn.PLATFORM_EXTENSION_PROVIDER}async sendMessage(t){this.logger.trace(this.platformAuthType+" - sendMessage called.");const i={method:La.GetToken,request:t},r={channel:Cn.CHANNEL_ID,extensionId:this.extensionId,responseId:kn(),body:i};this.logger.trace(this.platformAuthType+" - Sending request to browser extension"),this.logger.tracePii(this.platformAuthType+` - Sending request to browser extension: ${JSON.stringify(r)}`),this.messageChannel.port1.postMessage(r);const s=await new Promise((h,f)=>{this.resolvers.set(r.responseId,{resolve:h,reject:f})});return this.validatePlatformBrokerResponse(s)}static async createProvider(t,i,r){t.trace("PlatformAuthExtensionHandler - createProvider called.");try{const s=new nl(t,i,r,Cn.PREFERRED_EXTENSION_ID);return await s.sendHandshakeRequest(),s}catch{const l=new nl(t,i,r);return await l.sendHandshakeRequest(),l}}async sendHandshakeRequest(){this.logger.trace(this.platformAuthType+" - sendHandshakeRequest called."),window.addEventListener("message",this.windowListener,!1);const t={channel:Cn.CHANNEL_ID,extensionId:this.extensionId,responseId:kn(),body:{method:La.HandshakeRequest}};return this.handshakeEvent.add({extensionId:this.extensionId,extensionHandshakeTimeoutMs:this.handshakeTimeoutMs}),this.messageChannel.port1.onmessage=i=>{this.onChannelMessage(i)},window.postMessage(t,window.origin,[this.messageChannel.port2]),new Promise((i,r)=>{this.handshakeResolvers.set(t.responseId,{resolve:i,reject:r}),this.timeoutId=window.setTimeout(()=>{window.removeEventListener("message",this.windowListener,!1),this.messageChannel.port1.close(),this.messageChannel.port2.close(),this.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),r(he(OT)),this.handshakeResolvers.delete(t.responseId)},this.handshakeTimeoutMs)})}onWindowMessage(t){if(this.logger.trace(this.platformAuthType+" - onWindowMessage called"),t.source!==window)return;const i=t.data;if(!(!i.channel||i.channel!==Cn.CHANNEL_ID)&&!(i.extensionId&&i.extensionId!==this.extensionId)&&i.body.method===La.HandshakeRequest){const r=this.handshakeResolvers.get(i.responseId);if(!r){this.logger.trace(this.platformAuthType+`.onWindowMessage - resolver can't be found for request ${i.responseId}`);return}this.logger.verbose(i.extensionId?`Extension with id: ${i.extensionId} not installed`:"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),r.reject(he(kT))}}onChannelMessage(t){this.logger.trace(this.platformAuthType+" - onChannelMessage called.");const i=t.data,r=this.resolvers.get(i.responseId),s=this.handshakeResolvers.get(i.responseId);try{const l=i.body.method;if(l===La.Response){if(!r)return;const h=i.body.response;if(this.logger.trace(this.platformAuthType+" - Received response from browser extension"),this.logger.tracePii(this.platformAuthType+` - Received response from browser extension: ${JSON.stringify(h)}`),h.status!=="Success")r.reject(tl(h.code,h.description,h.ext));else if(h.result)h.result.code&&h.result.description?r.reject(tl(h.result.code,h.result.description,h.result.ext)):r.resolve(h.result);else throw _h(Bc,"Event does not contain result.");this.resolvers.delete(i.responseId)}else if(l===La.HandshakeResponse){if(!s){this.logger.trace(this.platformAuthType+`.onChannelMessage - resolver can't be found for request ${i.responseId}`);return}clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=i.extensionId,this.extensionVersion=i.body.version,this.logger.verbose(this.platformAuthType+` - Received HandshakeResponse from extension: ${this.extensionId}`),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),s.resolve(),this.handshakeResolvers.delete(i.responseId)}}catch(l){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii(`Error parsing response from WAM Extension: ${l}`),this.logger.errorPii(`Unable to parse ${t}`),r?r.reject(l):s&&s.reject(l)}}validatePlatformBrokerResponse(t){if(t.hasOwnProperty("access_token")&&t.hasOwnProperty("id_token")&&t.hasOwnProperty("client_info")&&t.hasOwnProperty("account")&&t.hasOwnProperty("scope")&&t.hasOwnProperty("expires_in"))return t;throw _h(Bc,"Response missing expected properties.")}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}getExtensionName(){return this.getExtensionId()===Cn.PREFERRED_EXTENSION_ID?"chrome":this.getExtensionId()?.length?"unknown":void 0}}class tg{constructor(t,i,r){this.logger=t,this.performanceClient=i,this.correlationId=r,this.platformAuthType=Cn.PLATFORM_DOM_PROVIDER}static async createProvider(t,i,r){if(t.trace("PlatformAuthDOMHandler: createProvider called"),window.navigator?.platformAuthentication&&(await window.navigator.platformAuthentication.getSupportedContracts(Cn.MICROSOFT_ENTRA_BROKERID))?.includes(Cn.PLATFORM_DOM_APIS))return t.trace("Platform auth api available in DOM"),new tg(t,i,r)}getExtensionId(){return Cn.MICROSOFT_ENTRA_BROKERID}getExtensionVersion(){return""}getExtensionName(){return Cn.DOM_API_NAME}async sendMessage(t){this.logger.trace(this.platformAuthType+" - Sending request to browser DOM API");try{const i=this.initializePlatformDOMRequest(t),r=await window.navigator.platformAuthentication.executeGetToken(i);return this.validatePlatformBrokerResponse(r)}catch(i){throw this.logger.error(this.platformAuthType+" - executeGetToken DOM API error"),i}}initializePlatformDOMRequest(t){this.logger.trace(this.platformAuthType+" - initializeNativeDOMRequest called");const{accountId:i,clientId:r,authority:s,scope:l,redirectUri:h,correlationId:f,state:g,storeInCache:p,embeddedClientId:S,extraParameters:T,...A}=t,K=this.getDOMExtraParams(A);return{accountId:i,brokerId:this.getExtensionId(),authority:s,clientId:r,correlationId:f||this.correlationId,extraParameters:{...T,...K},isSecurityTokenService:!1,redirectUri:h,scope:l,state:g,storeInCache:p,embeddedClientId:S}}validatePlatformBrokerResponse(t){if(t.hasOwnProperty("isSuccess")){if(t.hasOwnProperty("accessToken")&&t.hasOwnProperty("idToken")&&t.hasOwnProperty("clientInfo")&&t.hasOwnProperty("account")&&t.hasOwnProperty("scopes")&&t.hasOwnProperty("expiresIn"))return this.logger.trace(this.platformAuthType+" - platform broker returned successful and valid response"),this.convertToPlatformBrokerResponse(t);if(t.hasOwnProperty("error")){const i=t;if(i.isSuccess===!1&&i.error&&i.error.code)throw this.logger.trace(this.platformAuthType+" - platform broker returned error response"),tl(i.error.code,i.error.description,{error:parseInt(i.error.errorCode),protocol_error:i.error.protocolError,status:i.error.status,properties:i.error.properties})}}throw _h(Bc,"Response missing expected properties.")}convertToPlatformBrokerResponse(t){return this.logger.trace(this.platformAuthType+" - convertToNativeResponse called"),{access_token:t.accessToken,id_token:t.idToken,client_info:t.clientInfo,account:t.account,expires_in:t.expiresIn,scope:t.scopes,state:t.state||"",properties:t.properties||{},extendedLifetimeToken:t.extendedLifetimeToken??!1,shr:t.proofOfPossessionPayload}}getDOMExtraParams(t){return{...Object.entries(t).reduce((s,[l,h])=>(s[l]=String(h),s),{})}}}async function hk(c,t,i,r){c.trace("getPlatformAuthProvider called",i);const s=fk();c.trace("Has client allowed platform auth via DOM API: "+s);let l;try{s&&(l=await tg.createProvider(c,t,i)),l||(c.trace("Platform auth via DOM API not available, checking for extension"),l=await nl.createProvider(c,r||XT,t))}catch(h){c.trace("Platform auth not available",h)}return l}function fk(){let c;try{return c=window[Tt.SessionStorage],c?.getItem(NO)==="true"}catch{return!1}}function Wa(c,t,i,r){if(t.trace("isPlatformAuthAllowed called"),!c.system.allowPlatformBroker)return t.trace("isPlatformAuthAllowed: allowPlatformBroker is not enabled, returning false"),!1;if(!i)return t.trace("isPlatformAuthAllowed: Platform auth provider is not initialized, returning false"),!1;if(r)switch(r){case Ke.BEARER:case Ke.POP:return t.trace("isPlatformAuthAllowed: authenticationScheme is supported, returning true"),!0;default:return t.trace("isPlatformAuthAllowed: authenticationScheme is not supported, returning false"),!1}return!0}class gk extends Lr{constructor(t,i,r,s,l,h,f,g,p,S){super(t,i,r,s,l,h,f,p,S),this.unloadWindow=this.unloadWindow.bind(this),this.nativeStorage=g,this.eventHandler=l}acquireToken(t,i){let r;try{if(r={popupName:this.generatePopupName(t.scopes||xr,t.authority||this.config.auth.authority),popupWindowAttributes:t.popupWindowAttributes||{},popupWindowParent:t.popupWindowParent??window},this.performanceClient.addFields({isAsyncPopup:this.config.system.asyncPopups},this.correlationId),this.config.system.asyncPopups)return this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(t,r,i);{const l={...t,httpMethod:ZT(t,this.config.auth.protocolMode)};return this.logger.verbose("asyncPopup set to false, opening popup before acquiring token"),r.popup=this.openSizedPopup("about:blank",r),this.acquireTokenPopupAsync(l,r,i)}}catch(s){return Promise.reject(s)}}logout(t){try{this.logger.verbose("logoutPopup called");const i=this.initializeLogoutRequest(t),r={popupName:this.generateLogoutPopupName(i),popupWindowAttributes:t?.popupWindowAttributes||{},popupWindowParent:t?.popupWindowParent??window},s=t&&t.authority,l=t&&t.mainWindowRedirectUri;return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(i,r,s,l)):(this.logger.verbose("asyncPopup set to false, opening popup"),r.popup=this.openSizedPopup("about:blank",r),this.logoutPopupAsync(i,r,s,l))}catch(i){return Promise.reject(i)}}async acquireTokenPopupAsync(t,i,r){this.logger.verbose("acquireTokenPopupAsync called");const s=await Q(this.initializeAuthorizationRequest.bind(this),w.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(t,Se.Popup);i.popup&&VT(s.authority);const l=Wa(this.config,this.logger,this.platformAuthProvider,t.authenticationScheme);return s.platformBroker=l,this.config.auth.protocolMode===Yt.EAR?this.executeEarFlow(s,i,r):this.executeCodeFlow(s,i,r)}async executeCodeFlow(t,i,r){const s=t.correlationId,l=this.initializeServerTelemetryManager(Le.acquireTokenPopup),h=r||await Q(bo,w.GeneratePkceCodes,this.logger,this.performanceClient,s)(this.performanceClient,this.logger,s),f={...t,codeChallenge:h.challenge};try{const g=await Q(this.createAuthCodeClient.bind(this),w.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,s)({serverTelemetryManager:l,requestAuthority:f.authority,requestAzureCloudOptions:f.azureCloudOptions,requestExtraQueryParameters:f.extraQueryParameters,account:f.account});if(f.httpMethod===So.POST)return await this.executeCodeFlowWithPost(f,i,g,h.verifier);{const p=await Q($f,w.GetAuthCodeUrl,this.logger,this.performanceClient,s)(this.config,g.authority,f,this.logger,this.performanceClient),S=this.initiateAuthRequest(p,i);this.eventHandler.emitEvent(ye.POPUP_OPENED,Se.Popup,{popupWindow:S},null);const T=await this.monitorPopupForHash(S,i.popupWindowParent),A=an(Qa,w.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(T,this.config.auth.OIDCOptions.serverResponseType,this.logger);return await Q(Or,w.HandleResponseCode,this.logger,this.performanceClient,s)(t,A,h.verifier,Le.acquireTokenPopup,this.config,g,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}}catch(g){throw i.popup?.close(),g instanceof Ye&&(g.setCorrelationId(this.correlationId),l.cacheFailedRequest(g)),g}}async executeEarFlow(t,i,r){const s=t.correlationId,l=await Q(this.getDiscoveredAuthority.bind(this),w.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,s)({requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account}),h=await Q(Kf,w.GenerateEarKey,this.logger,this.performanceClient,s)(),f=r||await Q(bo,w.GeneratePkceCodes,this.logger,this.performanceClient,s)(this.performanceClient,this.logger,s),g={...t,earJwk:h,codeChallenge:f.challenge},p=i.popup||this.openPopup("about:blank",i);(await Zf(p.document,this.config,l,g,this.logger,this.performanceClient)).submit();const T=await Q(this.monitorPopupForHash.bind(this),w.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,s)(p,i.popupWindowParent),A=an(Qa,w.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(T,this.config.auth.OIDCOptions.serverResponseType,this.logger);if(!A.ear_jwe&&A.code){const K=await Q(this.createAuthCodeClient.bind(this),w.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,s)({serverTelemetryManager:this.initializeServerTelemetryManager(Le.acquireTokenPopup),requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account,authority:l});return Q(Or,w.HandleResponseCode,this.logger,this.performanceClient,s)(g,A,f.verifier,Le.acquireTokenPopup,this.config,K,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}else return Q(eg,w.HandleResponseEar,this.logger,this.performanceClient,s)(g,A,Le.acquireTokenPopup,this.config,l,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async executeCodeFlowWithPost(t,i,r,s){const l=t.correlationId,h=await Q(this.getDiscoveredAuthority.bind(this),w.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,l)({requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account}),f=i.popup||this.openPopup("about:blank",i);(await Wf(f.document,this.config,h,t,this.logger,this.performanceClient)).submit();const p=await Q(this.monitorPopupForHash.bind(this),w.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,l)(f,i.popupWindowParent),S=an(Qa,w.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(p,this.config.auth.OIDCOptions.serverResponseType,this.logger);return Q(Or,w.HandleResponseCode,this.logger,this.performanceClient,l)(t,S,s,Le.acquireTokenPopup,this.config,r,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async logoutPopupAsync(t,i,r,s){this.logger.verbose("logoutPopupAsync called"),this.eventHandler.emitEvent(ye.LOGOUT_START,Se.Popup,t);const l=this.initializeServerTelemetryManager(Le.logoutPopup);try{await this.clearCacheOnLogout(this.correlationId,t.account);const h=await Q(this.createAuthCodeClient.bind(this),w.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:l,requestAuthority:r,account:t.account||void 0});try{h.authority.endSessionEndpoint}catch{if(t.account?.homeAccountId&&t.postLogoutRedirectUri&&h.authority.protocolMode===Yt.OIDC){if(this.eventHandler.emitEvent(ye.LOGOUT_SUCCESS,Se.Popup,t),s){const p={apiId:Le.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},S=Pe.getAbsoluteUrl(s,ci());await this.navigationClient.navigateInternal(S,p)}i.popup?.close();return}}const f=h.getLogoutUri(t);this.eventHandler.emitEvent(ye.LOGOUT_SUCCESS,Se.Popup,t);const g=this.openPopup(f,i);if(this.eventHandler.emitEvent(ye.POPUP_OPENED,Se.Popup,{popupWindow:g},null),await this.monitorPopupForHash(g,i.popupWindowParent).catch(()=>{}),s){const p={apiId:Le.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},S=Pe.getAbsoluteUrl(s,ci());this.logger.verbose("Redirecting main window to url specified in the request"),this.logger.verbosePii(`Redirecting main window to: ${S}`),await this.navigationClient.navigateInternal(S,p)}else this.logger.verbose("No main window navigation requested")}catch(h){throw i.popup?.close(),h instanceof Ye&&(h.setCorrelationId(this.correlationId),l.cacheFailedRequest(h)),this.eventHandler.emitEvent(ye.LOGOUT_FAILURE,Se.Popup,null,h),this.eventHandler.emitEvent(ye.LOGOUT_END,Se.Popup),h}this.eventHandler.emitEvent(ye.LOGOUT_END,Se.Popup)}initiateAuthRequest(t,i){if(t)return this.logger.infoPii(`Navigate to: ${t}`),this.openPopup(t,i);throw this.logger.error("Navigate url is empty"),he(Cl)}monitorPopupForHash(t,i){return new Promise((r,s)=>{this.logger.verbose("PopupHandler.monitorPopupForHash - polling started");const l=setInterval(()=>{if(t.closed){this.logger.error("PopupHandler.monitorPopupForHash - window closed"),clearInterval(l),s(he($a));return}let h="";try{h=t.location.href}catch{}if(!h||h==="about:blank")return;clearInterval(l);let f="";const g=this.config.auth.OIDCOptions.serverResponseType;t&&(g===sl.QUERY?f=t.location.search:f=t.location.hash),this.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),r(f)},this.config.system.pollIntervalMilliseconds)}).finally(()=>{this.cleanPopup(t,i)})}openPopup(t,i){try{let r;if(i.popup?(r=i.popup,this.logger.verbosePii(`Navigating popup window to: ${t}`),r.location.assign(t)):typeof i.popup>"u"&&(this.logger.verbosePii(`Opening popup window to: ${t}`),r=this.openSizedPopup(t,i)),!r)throw he(gT);return r.focus&&r.focus(),this.currentWindow=r,i.popupWindowParent.addEventListener("beforeunload",this.unloadWindow),r}catch(r){throw this.logger.error("error opening popup "+r.message),he(fT)}}openSizedPopup(t,{popupName:i,popupWindowAttributes:r,popupWindowParent:s}){const l=s.screenLeft?s.screenLeft:s.screenX,h=s.screenTop?s.screenTop:s.screenY,f=s.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,g=s.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;let p=r.popupSize?.width,S=r.popupSize?.height,T=r.popupPosition?.top,A=r.popupPosition?.left;return(!p||p<0||p>f)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),p=Qt.POPUP_WIDTH),(!S||S<0||S>g)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),S=Qt.POPUP_HEIGHT),(!T||T<0||T>g)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),T=Math.max(0,g/2-Qt.POPUP_HEIGHT/2+h)),(!A||A<0||A>f)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),A=Math.max(0,f/2-Qt.POPUP_WIDTH/2+l)),s.open(t,i,`width=${p}, height=${S}, top=${T}, left=${A}, scrollbars=yes`)}unloadWindow(t){this.currentWindow&&this.currentWindow.close(),t.preventDefault()}cleanPopup(t,i){t.close(),i.removeEventListener("beforeunload",this.unloadWindow)}generatePopupName(t,i){return`${Qt.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${t.join("-")}.${i}.${this.correlationId}`}generateLogoutPopupName(t){const i=t.account&&t.account.homeAccountId;return`${Qt.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${i}.${this.correlationId}`}}function mk(){if(typeof window>"u"||typeof window.performance>"u"||typeof window.performance.getEntriesByType!="function")return;const c=window.performance.getEntriesByType("navigation");return(c.length?c[0]:void 0)?.type}class pk extends Lr{constructor(t,i,r,s,l,h,f,g,p,S){super(t,i,r,s,l,h,f,p,S),this.nativeStorage=g}async acquireToken(t){const i=await Q(this.initializeAuthorizationRequest.bind(this),w.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(t,Se.Redirect);i.platformBroker=Wa(this.config,this.logger,this.platformAuthProvider,t.authenticationScheme);const r=l=>{l.persisted&&(this.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),this.browserStorage.resetRequestCache(),this.eventHandler.emitEvent(ye.RESTORE_FROM_BFCACHE,Se.Redirect))},s=this.getRedirectStartPage(t.redirectStartPage);this.logger.verbosePii(`Redirect start page: ${s}`),this.browserStorage.setTemporaryCache(dt.ORIGIN_URI,s,!0),window.addEventListener("pageshow",r);try{this.config.auth.protocolMode===Yt.EAR?await this.executeEarFlow(i):await this.executeCodeFlow(i,t.onRedirectNavigate)}catch(l){throw l instanceof Ye&&l.setCorrelationId(this.correlationId),window.removeEventListener("pageshow",r),l}}async executeCodeFlow(t,i){const r=t.correlationId,s=this.initializeServerTelemetryManager(Le.acquireTokenRedirect),l=await Q(bo,w.GeneratePkceCodes,this.logger,this.performanceClient,r)(this.performanceClient,this.logger,r),h={...t,codeChallenge:l.challenge};this.browserStorage.cacheAuthorizeRequest(h,l.verifier);try{if(h.httpMethod===So.POST)return await this.executeCodeFlowWithPost(h);{const f=await Q(this.createAuthCodeClient.bind(this),w.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:s,requestAuthority:h.authority,requestAzureCloudOptions:h.azureCloudOptions,requestExtraQueryParameters:h.extraQueryParameters,account:h.account}),g=await Q($f,w.GetAuthCodeUrl,this.logger,this.performanceClient,t.correlationId)(this.config,f.authority,h,this.logger,this.performanceClient);return await this.initiateAuthRequest(g,i)}}catch(f){throw f instanceof Ye&&(f.setCorrelationId(this.correlationId),s.cacheFailedRequest(f)),f}}async executeEarFlow(t){const i=t.correlationId,r=await Q(this.getDiscoveredAuthority.bind(this),w.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,i)({requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account}),s=await Q(Kf,w.GenerateEarKey,this.logger,this.performanceClient,i)(),l=await Q(bo,w.GeneratePkceCodes,this.logger,this.performanceClient,i)(this.performanceClient,this.logger,i),h={...t,earJwk:s,codeChallenge:l.challenge};return this.browserStorage.cacheAuthorizeRequest(h,l.verifier),(await Zf(document,this.config,r,h,this.logger,this.performanceClient)).submit(),new Promise((g,p)=>{setTimeout(()=>{p(he(Wc,"failed_to_redirect"))},this.config.system.redirectNavigationTimeout)})}async executeCodeFlowWithPost(t){const i=t.correlationId,r=await Q(this.getDiscoveredAuthority.bind(this),w.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,i)({requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account});return this.browserStorage.cacheAuthorizeRequest(t),(await Wf(document,this.config,r,t,this.logger,this.performanceClient)).submit(),new Promise((l,h)=>{setTimeout(()=>{h(he(Wc,"failed_to_redirect"))},this.config.system.redirectNavigationTimeout)})}async handleRedirectPromise(t="",i,r,s){const l=this.initializeServerTelemetryManager(Le.handleRedirectPromise);try{const[h,f]=this.getRedirectResponse(t||"");if(!h)return this.logger.info("handleRedirectPromise did not detect a response as a result of a redirect. Cleaning temporary cache."),this.browserStorage.resetRequestCache(),mk()!=="back_forward"?s.event.errorCode="no_server_response":this.logger.verbose("Back navigation event detected. Muting no_server_response error"),null;const g=this.browserStorage.getTemporaryCache(dt.ORIGIN_URI,!0)||W.EMPTY_STRING,p=Fv(g),S=Fv(window.location.href);if(p===S&&this.config.auth.navigateToLoginRequestUrl)return this.logger.verbose("Current page is loginRequestUrl, handling response"),g.indexOf("#")>-1&&vO(g),await this.handleResponse(h,i,r,l);if(this.config.auth.navigateToLoginRequestUrl){if(!Ff()||this.config.system.allowRedirectInIframe){this.browserStorage.setTemporaryCache(dt.URL_HASH,f,!0);const T={apiId:Le.handleRedirectPromise,timeout:this.config.system.redirectNavigationTimeout,noHistory:!0};let A=!0;if(!g||g==="null"){const K=SO();this.browserStorage.setTemporaryCache(dt.ORIGIN_URI,K,!0),this.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),A=await this.navigationClient.navigateInternal(K,T)}else this.logger.verbose(`Navigating to loginRequestUrl: ${g}`),A=await this.navigationClient.navigateInternal(g,T);if(!A)return await this.handleResponse(h,i,r,l)}}else return this.logger.verbose("NavigateToLoginRequestUrl set to false, handling response"),await this.handleResponse(h,i,r,l);return null}catch(h){throw h instanceof Ye&&(h.setCorrelationId(this.correlationId),l.cacheFailedRequest(h)),h}}getRedirectResponse(t){this.logger.verbose("getRedirectResponseHash called");let i=t;i||(this.config.auth.OIDCOptions.serverResponseType===sl.QUERY?i=window.location.search:i=window.location.hash);let r=jc(i);if(r){try{ZO(r,this.browserCrypto,Se.Redirect)}catch(l){return l instanceof Ye&&this.logger.error(`Interaction type validation failed due to ${l.errorCode}: ${l.errorMessage}`),[null,""]}return FT(window),this.logger.verbose("Hash contains known properties, returning response hash"),[r,i]}const s=this.browserStorage.getTemporaryCache(dt.URL_HASH,!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey(dt.URL_HASH)),s&&(r=jc(s),r)?(this.logger.verbose("Hash does not contain known properties, returning cached hash"),[r,s]):[null,""]}async handleResponse(t,i,r,s){if(!t.state)throw he(Df);if(t.ear_jwe){const f=await Q(this.getDiscoveredAuthority.bind(this),w.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,i.correlationId)({requestAuthority:i.authority,requestAzureCloudOptions:i.azureCloudOptions,requestExtraQueryParameters:i.extraQueryParameters,account:i.account});return Q(eg,w.HandleResponseEar,this.logger,this.performanceClient,i.correlationId)(i,t,Le.acquireTokenRedirect,this.config,f,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}const h=await Q(this.createAuthCodeClient.bind(this),w.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:s,requestAuthority:i.authority});return Q(Or,w.HandleResponseCode,this.logger,this.performanceClient,i.correlationId)(i,t,r,Le.acquireTokenRedirect,this.config,h,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async initiateAuthRequest(t,i){if(this.logger.verbose("RedirectHandler.initiateAuthRequest called"),t){this.logger.infoPii(`RedirectHandler.initiateAuthRequest: Navigate to: ${t}`);const r={apiId:Le.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},s=i||this.config.auth.onRedirectNavigate;if(typeof s=="function")if(this.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback"),s(t)!==!1){this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),await this.navigationClient.navigateExternal(t,r);return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation");return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),await this.navigationClient.navigateExternal(t,r);return}}else throw this.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),he(Cl)}async logout(t){this.logger.verbose("logoutRedirect called");const i=this.initializeLogoutRequest(t),r=this.initializeServerTelemetryManager(Le.logout);try{this.eventHandler.emitEvent(ye.LOGOUT_START,Se.Redirect,t),await this.clearCacheOnLogout(this.correlationId,i.account);const s={apiId:Le.logout,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},l=await Q(this.createAuthCodeClient.bind(this),w.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:r,requestAuthority:t&&t.authority,requestExtraQueryParameters:t?.extraQueryParameters,account:t&&t.account||void 0});if(l.authority.protocolMode===Yt.OIDC)try{l.authority.endSessionEndpoint}catch{if(i.account?.homeAccountId){this.eventHandler.emitEvent(ye.LOGOUT_SUCCESS,Se.Redirect,i);return}}const h=l.getLogoutUri(i);if(this.eventHandler.emitEvent(ye.LOGOUT_SUCCESS,Se.Redirect,i),t&&typeof t.onRedirectNavigate=="function")if(t.onRedirectNavigate(h)!==!1){this.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,Ki.SIGNOUT),await this.navigationClient.navigateExternal(h,s);return}else this.browserStorage.setInteractionInProgress(!1),this.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation");else{this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,Ki.SIGNOUT),await this.navigationClient.navigateExternal(h,s);return}}catch(s){throw s instanceof Ye&&(s.setCorrelationId(this.correlationId),r.cacheFailedRequest(s)),this.eventHandler.emitEvent(ye.LOGOUT_FAILURE,Se.Redirect,null,s),this.eventHandler.emitEvent(ye.LOGOUT_END,Se.Redirect),s}this.eventHandler.emitEvent(ye.LOGOUT_END,Se.Redirect)}getRedirectStartPage(t){const i=t||window.location.href;return Pe.getAbsoluteUrl(i,ci())}}async function yk(c,t,i,r,s){if(t.addQueueMeasurement(w.SilentHandlerInitiateAuthRequest,r),!c)throw i.info("Navigate url is empty"),he(Cl);return s?Q(Sk,w.SilentHandlerLoadFrame,i,t,r)(c,s,t,r):an(Tk,w.SilentHandlerLoadFrameSync,i,t,r)(c)}async function vk(c,t,i,r,s){const l=_l();if(!l.contentDocument)throw"No document associated with iframe!";return(await Wf(l.contentDocument,c,t,i,r,s)).submit(),l}async function Ck(c,t,i,r,s){const l=_l();if(!l.contentDocument)throw"No document associated with iframe!";return(await Zf(l.contentDocument,c,t,i,r,s)).submit(),l}async function AC(c,t,i,r,s,l,h){return r.addQueueMeasurement(w.SilentHandlerMonitorIframeForHash,l),new Promise((f,g)=>{t<xh&&s.warning(`system.loadFrameTimeout or system.iframeHashTimeout set to lower (${t}ms) than the default (${xh}ms). This may result in timeouts.`);const p=window.setTimeout(()=>{window.clearInterval(S),g(he(mT))},t),S=window.setInterval(()=>{let T="";const A=c.contentWindow;try{T=A?A.location.href:""}catch{}if(!T||T==="about:blank")return;let K="";A&&(h===sl.QUERY?K=A.location.search:K=A.location.hash),window.clearTimeout(p),window.clearInterval(S),f(K)},i)}).finally(()=>{an(Ak,w.RemoveHiddenIframe,s,r,l)(c)})}function Sk(c,t,i,r){return i.addQueueMeasurement(w.SilentHandlerLoadFrame,r),new Promise((s,l)=>{const h=_l();window.setTimeout(()=>{if(!h){l("Unable to load iframe");return}h.src=c,s(h)},t)})}function Tk(c){const t=_l();return t.src=c,t}function _l(){const c=document.createElement("iframe");return c.className="msalSilentIframe",c.style.visibility="hidden",c.style.position="absolute",c.style.width=c.style.height="0",c.style.border="0",c.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),c.setAttribute("allow","local-network-access *"),document.body.appendChild(c),c}function Ak(c){document.body===c.parentNode&&document.body.removeChild(c)}class Ek extends Lr{constructor(t,i,r,s,l,h,f,g,p,S,T){super(t,i,r,s,l,h,g,S,T),this.apiId=f,this.nativeStorage=p}async acquireToken(t){this.performanceClient.addQueueMeasurement(w.SilentIframeClientAcquireToken,t.correlationId),!t.loginHint&&!t.sid&&(!t.account||!t.account.username)&&this.logger.warning("No user hint provided. The authorization server may need more information to complete this request.");const i={...t};i.prompt?i.prompt!==kt.NONE&&i.prompt!==kt.NO_SESSION&&(this.logger.warning(`SilentIframeClient. Replacing invalid prompt ${i.prompt} with ${kt.NONE}`),i.prompt=kt.NONE):i.prompt=kt.NONE;const r=await Q(this.initializeAuthorizationRequest.bind(this),w.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,t.correlationId)(i,Se.Silent);return r.platformBroker=Wa(this.config,this.logger,this.platformAuthProvider,r.authenticationScheme),VT(r.authority),this.config.auth.protocolMode===Yt.EAR?this.executeEarFlow(r):this.executeCodeFlow(r)}async executeCodeFlow(t){let i;const r=this.initializeServerTelemetryManager(this.apiId);try{return i=await Q(this.createAuthCodeClient.bind(this),w.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,t.correlationId)({serverTelemetryManager:r,requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account}),await Q(this.silentTokenHelper.bind(this),w.SilentIframeClientTokenHelper,this.logger,this.performanceClient,t.correlationId)(i,t)}catch(s){if(s instanceof Ye&&(s.setCorrelationId(this.correlationId),r.cacheFailedRequest(s)),!i||!(s instanceof Ye)||s.errorCode!==Qt.INVALID_GRANT_ERROR)throw s;return this.performanceClient.addFields({retryError:s.errorCode},this.correlationId),await Q(this.silentTokenHelper.bind(this),w.SilentIframeClientTokenHelper,this.logger,this.performanceClient,this.correlationId)(i,t)}}async executeEarFlow(t){const i=t.correlationId,r=await Q(this.getDiscoveredAuthority.bind(this),w.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,i)({requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account}),s=await Q(Kf,w.GenerateEarKey,this.logger,this.performanceClient,i)(),l=await Q(bo,w.GeneratePkceCodes,this.logger,this.performanceClient,i)(this.performanceClient,this.logger,i),h={...t,earJwk:s,codeChallenge:l.challenge},f=await Q(Ck,w.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,i)(this.config,r,h,this.logger,this.performanceClient),g=this.config.auth.OIDCOptions.serverResponseType,p=await Q(AC,w.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,i)(f,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,i,g),S=an(Qa,w.DeserializeResponse,this.logger,this.performanceClient,i)(p,g,this.logger);if(!S.ear_jwe&&S.code){const T=await Q(this.createAuthCodeClient.bind(this),w.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,i)({serverTelemetryManager:this.initializeServerTelemetryManager(this.apiId),requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account,authority:r});return Q(Or,w.HandleResponseCode,this.logger,this.performanceClient,i)(h,S,l.verifier,this.apiId,this.config,T,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}else return Q(eg,w.HandleResponseEar,this.logger,this.performanceClient,i)(h,S,this.apiId,this.config,r,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}logout(){return Promise.reject(he(Sl))}async silentTokenHelper(t,i){const r=i.correlationId;this.performanceClient.addQueueMeasurement(w.SilentIframeClientTokenHelper,r);const s=await Q(bo,w.GeneratePkceCodes,this.logger,this.performanceClient,r)(this.performanceClient,this.logger,r),l={...i,codeChallenge:s.challenge};let h;if(i.httpMethod===So.POST)h=await Q(vk,w.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,r)(this.config,t.authority,l,this.logger,this.performanceClient);else{const S=await Q($f,w.GetAuthCodeUrl,this.logger,this.performanceClient,r)(this.config,t.authority,l,this.logger,this.performanceClient);h=await Q(yk,w.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,r)(S,this.performanceClient,this.logger,r,this.config.system.navigateFrameWait)}const f=this.config.auth.OIDCOptions.serverResponseType,g=await Q(AC,w.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,r)(h,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,r,f),p=an(Qa,w.DeserializeResponse,this.logger,this.performanceClient,r)(g,f,this.logger);return Q(Or,w.HandleResponseCode,this.logger,this.performanceClient,r)(i,p,s.verifier,this.apiId,this.config,t,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}}class _k extends Lr{async acquireToken(t){this.performanceClient.addQueueMeasurement(w.SilentRefreshClientAcquireToken,t.correlationId);const i=await Q(Xf,w.InitializeBaseRequest,this.logger,this.performanceClient,t.correlationId)(t,this.config,this.performanceClient,this.logger),r={...t,...i};t.redirectUri&&(r.redirectUri=this.getRedirectUri(t.redirectUri));const s=this.initializeServerTelemetryManager(Le.acquireTokenSilent_silentFlow),l=await this.createRefreshTokenClient({serverTelemetryManager:s,authorityUrl:r.authority,azureCloudOptions:r.azureCloudOptions,account:r.account});return Q(l.acquireTokenByRefreshToken.bind(l),w.RefreshTokenClientAcquireTokenByRefreshToken,this.logger,this.performanceClient,t.correlationId)(r).catch(h=>{throw h.setCorrelationId(this.correlationId),s.cacheFailedRequest(h),h})}logout(){return Promise.reject(he(Sl))}async createRefreshTokenClient(t){const i=await Q(this.getClientConfiguration.bind(this),w.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:t.serverTelemetryManager,requestAuthority:t.authorityUrl,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account});return new zI(i,this.performanceClient)}}class bk{constructor(t,i,r,s){this.isBrowserEnvironment=typeof window<"u",this.config=t,this.storage=i,this.logger=r,this.cryptoObj=s}async loadExternalTokens(t,i,r){if(!this.isBrowserEnvironment)throw he(Tl);const s=t.correlationId||kn(),l=i.id_token?Ln(i.id_token,Ht):void 0,h=zn(l||{}),f={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},g=t.authority?new Dt(Dt.generateAuthority(t.authority,t.azureCloudOptions),this.config.system.networkClient,this.storage,f,this.logger,t.correlationId||kn()):void 0,p=await this.loadAccount(t,r.clientInfo||i.client_info||"",s,l,g),S=await this.loadIdToken(i,p.homeAccountId,p.environment,p.realm,s,h),T=await this.loadAccessToken(t,i,p.homeAccountId,p.environment,p.realm,r,s,h),A=await this.loadRefreshToken(i,p.homeAccountId,p.environment,s,h);return this.generateAuthenticationResult(t,{account:p,idToken:S,accessToken:T,refreshToken:A},l,g)}async loadAccount(t,i,r,s,l){if(this.logger.verbose("TokenCache - loading account"),t.account){const p=ot.createFromAccountInfo(t.account);return await this.storage.setAccount(p,r,zn(s||{})),p}else if(!l||!i&&!s)throw this.logger.error("TokenCache - if an account is not provided on the request, authority and either clientInfo or idToken must be provided instead."),he(_T);const h=ot.generateHomeAccountId(i,l.authorityType,this.logger,this.cryptoObj,s),f=s?.tid,g=Rf(this.storage,l,h,Ht,r,s,i,l.hostnameAndPort,f,void 0,void 0,this.logger);return await this.storage.setAccount(g,r,zn(s||{})),g}async loadIdToken(t,i,r,s,l,h){if(!t.id_token)return this.logger.verbose("TokenCache - no id token found in response"),null;this.logger.verbose("TokenCache - loading id token");const f=fl(i,r,t.id_token,this.config.auth.clientId,s);return await this.storage.setIdTokenCredential(f,l,h),f}async loadAccessToken(t,i,r,s,l,h,f,g){if(i.access_token)if(i.expires_in){if(!i.scope&&(!t.scopes||!t.scopes.length))return this.logger.error("TokenCache - scopes not specified in the request or response. Cannot add token to the cache."),null}else return this.logger.error("TokenCache - no expiration set on the access token. Cannot add it to the cache."),null;else return this.logger.verbose("TokenCache - no access token found in response"),null;this.logger.verbose("TokenCache - loading access token");const p=i.scope?pt.fromString(i.scope):new pt(t.scopes),S=h.expiresOn||i.expires_in+Vt(),T=h.extendedExpiresOn||(i.ext_expires_in||i.expires_in)+Vt(),A=gl(r,s,i.access_token,this.config.auth.clientId,l,p.printScopes(),S,T,Ht);return await this.storage.setAccessTokenCredential(A,f,g),A}async loadRefreshToken(t,i,r,s,l){if(!t.refresh_token)return this.logger.verbose("TokenCache - no refresh token found in response"),null;this.logger.verbose("TokenCache - loading refresh token");const h=JS(i,r,t.refresh_token,this.config.auth.clientId,t.foci,void 0,t.refresh_token_expires_in);return await this.storage.setRefreshTokenCredential(h,s,l),h}generateAuthenticationResult(t,i,r,s){let l="",h=[],f=null,g;i?.accessToken&&(l=i.accessToken.secret,h=pt.fromString(i.accessToken.target).asArray(),f=wr(i.accessToken.expiresOn),g=wr(i.accessToken.extendedExpiresOn));const p=i.account;return{authority:s?s.canonicalAuthority:"",uniqueId:i.account.localAccountId,tenantId:i.account.realm,scopes:h,account:ot.getAccountInfo(p),idToken:i.idToken?.secret||"",idTokenClaims:r||{},accessToken:l,fromCache:!0,expiresOn:f,correlationId:t.correlationId||"",requestId:"",extExpiresOn:g,familyId:i.refreshToken?.familyId||"",tokenType:i?.accessToken?.tokenType||"",state:t.state||"",cloudGraphHostName:p.cloudGraphHostName||"",msGraphHost:p.msGraphHost||"",fromNativeBroker:!1}}}class wk extends nT{constructor(t){super(t),this.includeRedirectUri=!1}}class Rk extends Lr{constructor(t,i,r,s,l,h,f,g,p,S){super(t,i,r,s,l,h,g,p,S),this.apiId=f}async acquireToken(t){if(!t.code)throw he(bT);const i=await Q(this.initializeAuthorizationRequest.bind(this),w.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,t.correlationId)(t,Se.Silent),r=this.initializeServerTelemetryManager(this.apiId);try{const s={...i,code:t.code},l=await Q(this.getClientConfiguration.bind(this),w.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,t.correlationId)({serverTelemetryManager:r,requestAuthority:i.authority,requestAzureCloudOptions:i.azureCloudOptions,requestExtraQueryParameters:i.extraQueryParameters,account:i.account}),h=new wk(l);this.logger.verbose("Auth code client created");const f=new WT(h,this.browserStorage,s,this.logger,this.performanceClient);return await Q(f.handleCodeResponseFromServer.bind(f),w.HandleCodeResponseFromServer,this.logger,this.performanceClient,t.correlationId)({code:t.code,msgraph_host:t.msGraphHost,cloud_graph_host_name:t.cloudGraphHostName,cloud_instance_host_name:t.cloudInstanceHostName},i,!1)}catch(s){throw s instanceof Ye&&(s.setCorrelationId(this.correlationId),r.cacheFailedRequest(s)),s}}logout(){return Promise.reject(he(Sl))}}function Ik(c,t,i){const r=window.msal?.clientIds||[],s=r.length,l=r.filter(h=>h===c).length;l>1&&i.warning("There is already an instance of MSAL.js in the window with the same client id."),t.add({msalInstanceCount:s,sameClientIdInstanceCount:l})}function Ic(c,t,i){try{Qf(c)}catch(r){throw t.end({success:!1},r,i),r}}class bl{constructor(t){this.operatingContext=t,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=t.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new ui(this.logger,this.performanceClient):Kc,this.eventHandler=new XO(this.logger),this.browserStorage=this.isBrowserEnvironment?new Hh(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler,kI(this.config.auth)):BO(this.config.auth.clientId,this.logger,this.performanceClient,this.eventHandler);const i={cacheLocation:Tt.MemoryStorage,cacheRetentionDays:5,temporaryCacheLocation:Tt.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};this.nativeInternalStorage=new Hh(this.config.auth.clientId,i,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler),this.tokenCache=new bk(this.config,this.browserStorage,this.logger,this.browserCrypto),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this)}static async createController(t,i){const r=new bl(t);return await r.initialize(i),r}trackPageVisibility(t){t&&(this.logger.info("Perf: Visibility change detected"),this.performanceClient.incrementFields({visibilityChangeCount:1},t))}async initialize(t,i){if(this.logger.trace("initialize called"),this.initialized){this.logger.info("initialize has already been called, exiting early.");return}if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, exiting early."),this.initialized=!0,this.eventHandler.emitEvent(ye.INITIALIZE_END);return}const r=t?.correlationId||this.getRequestCorrelationId(),s=this.config.system.allowPlatformBroker,l=this.performanceClient.startMeasurement(w.InitializeClientApplication,r);if(this.eventHandler.emitEvent(ye.INITIALIZE_START),!i)try{this.logMultipleInstances(l)}catch{}if(await Q(this.browserStorage.initialize.bind(this.browserStorage),w.InitializeCache,this.logger,this.performanceClient,r)(r),s)try{this.platformAuthProvider=await hk(this.logger,this.performanceClient,r,this.config.system.nativeBrokerHandshakeTimeout)}catch(h){this.logger.verbose(h)}this.config.cache.claimsBasedCachingEnabled||(this.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),an(this.browserStorage.clearTokensAndKeysWithClaims.bind(this.browserStorage),w.ClearTokensAndKeysWithClaims,this.logger,this.performanceClient,r)(r)),this.config.system.asyncPopups&&await this.preGeneratePkceCodes(r),this.initialized=!0,this.eventHandler.emitEvent(ye.INITIALIZE_END),l.end({allowPlatformBroker:s,success:!0})}async handleRedirectPromise(t){if(this.logger.verbose("handleRedirectPromise called"),YT(this.initialized),this.isBrowserEnvironment){const i=t||"";let r=this.redirectResponse.get(i);return typeof r>"u"?(r=this.handleRedirectPromiseInternal(t),this.redirectResponse.set(i,r),this.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise")):this.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call"),r}return this.logger.verbose("handleRedirectPromise returns null, not browser environment"),null}async handleRedirectPromiseInternal(t){if(!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;if(this.browserStorage.getInteractionInProgress()?.type===Ki.SIGNOUT)return this.logger.verbose("handleRedirectPromise removing interaction_in_progress flag and returning null after sign-out"),this.browserStorage.setInteractionInProgress(!1),Promise.resolve(null);const r=this.getAllAccounts(),s=this.browserStorage.getCachedNativeRequest(),l=s&&this.platformAuthProvider&&!t;let h;this.eventHandler.emitEvent(ye.HANDLE_REDIRECT_START,Se.Redirect);let f;try{if(l&&this.platformAuthProvider){h=this.performanceClient.startMeasurement(w.AcquireTokenRedirect,s?.correlationId||""),this.logger.trace("handleRedirectPromise - acquiring token from native platform"),h.add({isPlatformBrokerRequest:!0});const g=new Pc(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Le.handleRedirectPromise,this.performanceClient,this.platformAuthProvider,s.accountId,this.nativeInternalStorage,s.correlationId);f=Q(g.handleRedirectPromise.bind(g),w.HandleNativeRedirectPromiseMeasurement,this.logger,this.performanceClient,h.event.correlationId)(this.performanceClient,h.event.correlationId)}else{const[g,p]=this.browserStorage.getCachedRequest(),S=g.correlationId;h=this.performanceClient.startMeasurement(w.AcquireTokenRedirect,S),this.logger.trace("handleRedirectPromise - acquiring token from web flow");const T=this.createRedirectClient(S);f=Q(T.handleRedirectPromise.bind(T),w.HandleRedirectPromiseMeasurement,this.logger,this.performanceClient,h.event.correlationId)(t,g,p,h)}}catch(g){throw this.browserStorage.resetRequestCache(),g}return f.then(g=>(g?(this.browserStorage.resetRequestCache(),r.length<this.getAllAccounts().length?(this.eventHandler.emitEvent(ye.LOGIN_SUCCESS,Se.Redirect,g),this.logger.verbose("handleRedirectResponse returned result, login success")):(this.eventHandler.emitEvent(ye.ACQUIRE_TOKEN_SUCCESS,Se.Redirect,g),this.logger.verbose("handleRedirectResponse returned result, acquire token success")),h.end({success:!0},void 0,g.account)):h.event.errorCode?h.end({success:!1},void 0):h.discard(),this.eventHandler.emitEvent(ye.HANDLE_REDIRECT_END,Se.Redirect),g)).catch(g=>{this.browserStorage.resetRequestCache();const p=g;throw r.length>0?this.eventHandler.emitEvent(ye.ACQUIRE_TOKEN_FAILURE,Se.Redirect,null,p):this.eventHandler.emitEvent(ye.LOGIN_FAILURE,Se.Redirect,null,p),this.eventHandler.emitEvent(ye.HANDLE_REDIRECT_END,Se.Redirect),h.end({success:!1},p),g})}async acquireTokenRedirect(t){const i=this.getRequestCorrelationId(t);this.logger.verbose("acquireTokenRedirect called",i);const r=this.performanceClient.startMeasurement(w.AcquireTokenPreRedirect,i);r.add({scenarioId:t.scenarioId});const s=t.onRedirectNavigate;if(s)t.onRedirectNavigate=h=>{const f=typeof s=="function"?s(h):void 0;return r.add({navigateCallbackResult:f!==!1}),r.event=r.end({success:!0},void 0,t.account)||r.event,f};else{const h=this.config.auth.onRedirectNavigate;this.config.auth.onRedirectNavigate=f=>{const g=typeof h=="function"?h(f):void 0;return r.add({navigateCallbackResult:g!==!1}),r.event=r.end({success:!0},void 0,t.account)||r.event,g}}const l=this.getAllAccounts().length>0;try{hC(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,Ki.SIGNIN),l?this.eventHandler.emitEvent(ye.ACQUIRE_TOKEN_START,Se.Redirect,t):this.eventHandler.emitEvent(ye.LOGIN_START,Se.Redirect,t);let h;return this.platformAuthProvider&&this.canUsePlatformBroker(t)?h=new Pc(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Le.acquireTokenRedirect,this.performanceClient,this.platformAuthProvider,this.getNativeAccountId(t),this.nativeInternalStorage,i).acquireTokenRedirect(t,r).catch(g=>{if(r.add({brokerErrorName:g.name,brokerErrorCode:g.errorCode}),g instanceof Pn&&Ar(g))return this.platformAuthProvider=void 0,this.createRedirectClient(i).acquireToken(t);if(g instanceof On)return this.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createRedirectClient(i).acquireToken(t);throw g}):h=this.createRedirectClient(i).acquireToken(t),await h}catch(h){throw this.browserStorage.resetRequestCache(),r.event.status===2?this.performanceClient.startMeasurement(w.AcquireTokenRedirect,i).end({success:!1},h,t.account):r.end({success:!1},h,t.account),l?this.eventHandler.emitEvent(ye.ACQUIRE_TOKEN_FAILURE,Se.Redirect,null,h):this.eventHandler.emitEvent(ye.LOGIN_FAILURE,Se.Redirect,null,h),h}}acquireTokenPopup(t){const i=this.getRequestCorrelationId(t),r=this.performanceClient.startMeasurement(w.AcquireTokenPopup,i);r.add({scenarioId:t.scenarioId});try{this.logger.verbose("acquireTokenPopup called",i),Ic(this.initialized,r,t.account),this.browserStorage.setInteractionInProgress(!0,Ki.SIGNIN)}catch(f){return Promise.reject(f)}const s=this.getAllAccounts();s.length>0?this.eventHandler.emitEvent(ye.ACQUIRE_TOKEN_START,Se.Popup,t):this.eventHandler.emitEvent(ye.LOGIN_START,Se.Popup,t);let l;const h=this.getPreGeneratedPkceCodes(i);return this.canUsePlatformBroker(t)?(r.add({isPlatformBrokerRequest:!0}),l=this.acquireTokenNative({...t,correlationId:i},Le.acquireTokenPopup).then(f=>(r.end({success:!0},void 0,f.account),f)).catch(f=>{if(r.add({brokerErrorName:f.name,brokerErrorCode:f.errorCode}),f instanceof Pn&&Ar(f))return this.platformAuthProvider=void 0,this.createPopupClient(i).acquireToken(t,h);if(f instanceof On)return this.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createPopupClient(i).acquireToken(t,h);throw f})):l=this.createPopupClient(i).acquireToken(t,h),l.then(f=>(s.length<this.getAllAccounts().length?this.eventHandler.emitEvent(ye.LOGIN_SUCCESS,Se.Popup,f):this.eventHandler.emitEvent(ye.ACQUIRE_TOKEN_SUCCESS,Se.Popup,f),r.end({success:!0,accessTokenSize:f.accessToken.length,idTokenSize:f.idToken.length},void 0,f.account),f)).catch(f=>(s.length>0?this.eventHandler.emitEvent(ye.ACQUIRE_TOKEN_FAILURE,Se.Popup,null,f):this.eventHandler.emitEvent(ye.LOGIN_FAILURE,Se.Popup,null,f),r.end({success:!1},f,t.account),Promise.reject(f))).finally(async()=>{this.browserStorage.setInteractionInProgress(!1),this.config.system.asyncPopups&&await this.preGeneratePkceCodes(i)})}trackPageVisibilityWithMeasurement(){const t=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;t&&(this.logger.info("Perf: Visibility change detected in ",t.event.name),t.increment({visibilityChangeCount:1}))}async ssoSilent(t){const i=this.getRequestCorrelationId(t),r={...t,prompt:t.prompt,correlationId:i};this.ssoSilentMeasurement=this.performanceClient.startMeasurement(w.SsoSilent,i),this.ssoSilentMeasurement?.add({scenarioId:t.scenarioId}),Ic(this.initialized,this.ssoSilentMeasurement,t.account),this.ssoSilentMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),this.logger.verbose("ssoSilent called",i),this.eventHandler.emitEvent(ye.SSO_SILENT_START,Se.Silent,r);let s;return this.canUsePlatformBroker(r)?(this.ssoSilentMeasurement?.add({isPlatformBrokerRequest:!0}),s=this.acquireTokenNative(r,Le.ssoSilent).catch(l=>{if(this.ssoSilentMeasurement?.add({brokerErrorName:l.name,brokerErrorCode:l.errorCode}),l instanceof Pn&&Ar(l))return this.platformAuthProvider=void 0,this.createSilentIframeClient(r.correlationId).acquireToken(r);throw l})):s=this.createSilentIframeClient(r.correlationId).acquireToken(r),s.then(l=>(this.eventHandler.emitEvent(ye.SSO_SILENT_SUCCESS,Se.Silent,l),this.ssoSilentMeasurement?.end({success:!0,accessTokenSize:l.accessToken.length,idTokenSize:l.idToken.length},void 0,l.account),l)).catch(l=>{throw this.eventHandler.emitEvent(ye.SSO_SILENT_FAILURE,Se.Silent,null,l),this.ssoSilentMeasurement?.end({success:!1},l,t.account),l}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenByCode(t){const i=this.getRequestCorrelationId(t);this.logger.trace("acquireTokenByCode called",i);const r=this.performanceClient.startMeasurement(w.AcquireTokenByCode,i);Ic(this.initialized,r),this.eventHandler.emitEvent(ye.ACQUIRE_TOKEN_BY_CODE_START,Se.Silent,t),r.add({scenarioId:t.scenarioId});try{if(t.code&&t.nativeAccountId)throw he(RT);if(t.code){const s=t.code;let l=this.hybridAuthCodeResponses.get(s);return l?(this.logger.verbose("Existing acquireTokenByCode request found",i),r.discard()):(this.logger.verbose("Initiating new acquireTokenByCode request",i),l=this.acquireTokenByCodeAsync({...t,correlationId:i}).then(h=>(this.eventHandler.emitEvent(ye.ACQUIRE_TOKEN_BY_CODE_SUCCESS,Se.Silent,h),this.hybridAuthCodeResponses.delete(s),r.end({success:!0,accessTokenSize:h.accessToken.length,idTokenSize:h.idToken.length},void 0,h.account),h)).catch(h=>{throw this.hybridAuthCodeResponses.delete(s),this.eventHandler.emitEvent(ye.ACQUIRE_TOKEN_BY_CODE_FAILURE,Se.Silent,null,h),r.end({success:!1},h),h}),this.hybridAuthCodeResponses.set(s,l)),await l}else if(t.nativeAccountId)if(this.canUsePlatformBroker(t,t.nativeAccountId)){r.add({isPlatformBrokerRequest:!0});const s=await this.acquireTokenNative({...t,correlationId:i},Le.acquireTokenByCode,t.nativeAccountId).catch(l=>{throw l instanceof Pn&&Ar(l)&&(this.platformAuthProvider=void 0),r.add({brokerErrorName:l.name,brokerErrorCode:l.errorCode}),l});return r.end({success:!0},void 0,s.account),s}else throw he(IT);else throw he(wT)}catch(s){throw this.eventHandler.emitEvent(ye.ACQUIRE_TOKEN_BY_CODE_FAILURE,Se.Silent,null,s),r.end({success:!1},s),s}}async acquireTokenByCodeAsync(t){return this.logger.trace("acquireTokenByCodeAsync called",t.correlationId),this.acquireTokenByCodeAsyncMeasurement=this.performanceClient.startMeasurement(w.AcquireTokenByCodeAsync,t.correlationId),this.acquireTokenByCodeAsyncMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),await this.createSilentAuthCodeClient(t.correlationId).acquireToken(t).then(s=>(this.acquireTokenByCodeAsyncMeasurement?.end({success:!0,fromCache:s.fromCache}),s)).catch(s=>{throw this.acquireTokenByCodeAsyncMeasurement?.end({success:!1},s),s}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenFromCache(t,i){switch(this.performanceClient.addQueueMeasurement(w.AcquireTokenFromCache,t.correlationId),i){case xt.Default:case xt.AccessToken:case xt.AccessTokenAndRefreshToken:const r=this.createSilentCacheClient(t.correlationId);return Q(r.acquireToken.bind(r),w.SilentCacheClientAcquireToken,this.logger,this.performanceClient,t.correlationId)(t);default:throw re(Gi)}}async acquireTokenByRefreshToken(t,i){switch(this.performanceClient.addQueueMeasurement(w.AcquireTokenByRefreshToken,t.correlationId),i){case xt.Default:case xt.AccessTokenAndRefreshToken:case xt.RefreshToken:case xt.RefreshTokenAndNetwork:const r=this.createSilentRefreshClient(t.correlationId);return Q(r.acquireToken.bind(r),w.SilentRefreshClientAcquireToken,this.logger,this.performanceClient,t.correlationId)(t);default:throw re(Gi)}}async acquireTokenBySilentIframe(t){this.performanceClient.addQueueMeasurement(w.AcquireTokenBySilentIframe,t.correlationId);const i=this.createSilentIframeClient(t.correlationId);return Q(i.acquireToken.bind(i),w.SilentIframeClientAcquireToken,this.logger,this.performanceClient,t.correlationId)(t)}async logout(t){const i=this.getRequestCorrelationId(t);return this.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",i),this.logoutRedirect({correlationId:i,...t})}async logoutRedirect(t){const i=this.getRequestCorrelationId(t);return hC(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,Ki.SIGNOUT),this.createRedirectClient(i).logout(t)}logoutPopup(t){try{const i=this.getRequestCorrelationId(t);return Qf(this.initialized),this.browserStorage.setInteractionInProgress(!0,Ki.SIGNOUT),this.createPopupClient(i).logout(t).finally(()=>{this.browserStorage.setInteractionInProgress(!1)})}catch(i){return Promise.reject(i)}}async clearCache(t){if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, returning early.");return}const i=this.getRequestCorrelationId(t);return this.createSilentCacheClient(i).logout(t)}getAllAccounts(t){const i=this.getRequestCorrelationId();return KO(this.logger,this.browserStorage,this.isBrowserEnvironment,i,t)}getAccount(t){const i=this.getRequestCorrelationId();return qO(t,this.logger,this.browserStorage,i)}getAccountByUsername(t){const i=this.getRequestCorrelationId();return jO(t,this.logger,this.browserStorage,i)}getAccountByHomeId(t){const i=this.getRequestCorrelationId();return GO(t,this.logger,this.browserStorage,i)}getAccountByLocalId(t){const i=this.getRequestCorrelationId();return FO(t,this.logger,this.browserStorage,i)}setActiveAccount(t){const i=this.getRequestCorrelationId();QO(t,this.browserStorage,i)}getActiveAccount(){const t=this.getRequestCorrelationId();return YO(this.browserStorage,t)}async hydrateCache(t,i){this.logger.verbose("hydrateCache called");const r=ot.createFromAccountInfo(t.account,t.cloudGraphHostName,t.msGraphHost);return await this.browserStorage.setAccount(r,t.correlationId,zn(t.idTokenClaims)),t.fromNativeBroker?(this.logger.verbose("Response was from native broker, storing in-memory"),this.nativeInternalStorage.hydrateCache(t,i)):this.browserStorage.hydrateCache(t,i)}async acquireTokenNative(t,i,r,s){if(this.logger.trace("acquireTokenNative called"),!this.platformAuthProvider)throw he(Pf);return new Pc(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,i,this.performanceClient,this.platformAuthProvider,r||this.getNativeAccountId(t),this.nativeInternalStorage,t.correlationId).acquireToken(t,s)}canUsePlatformBroker(t,i){if(this.logger.trace("canUsePlatformBroker called"),!this.platformAuthProvider)return this.logger.trace("canUsePlatformBroker: platform broker unavilable, returning false"),!1;if(!Wa(this.config,this.logger,this.platformAuthProvider,t.authenticationScheme))return this.logger.trace("canUsePlatformBroker: isBrokerAvailable returned false, returning false"),!1;if(t.prompt)switch(t.prompt){case kt.NONE:case kt.CONSENT:case kt.LOGIN:case kt.SELECT_ACCOUNT:this.logger.trace("canUsePlatformBroker: prompt is compatible with platform broker flow");break;default:return this.logger.trace(`canUsePlatformBroker: prompt = ${t.prompt} is not compatible with platform broker flow, returning false`),!1}return!i&&!this.getNativeAccountId(t)?(this.logger.trace("canUsePlatformBroker: nativeAccountId is not available, returning false"),!1):!0}getNativeAccountId(t){const i=t.account||this.getAccount({loginHint:t.loginHint,sid:t.sid})||this.getActiveAccount();return i&&i.nativeAccountId||""}createPopupClient(t){return new gk(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,t)}createRedirectClient(t){return new pk(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,t)}createSilentIframeClient(t){return new Ek(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Le.ssoSilent,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,t)}createSilentCacheClient(t){return new tA(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.platformAuthProvider,t)}createSilentRefreshClient(t){return new _k(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.platformAuthProvider,t)}createSilentAuthCodeClient(t){return new Rk(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Le.acquireTokenByCode,this.performanceClient,this.platformAuthProvider,t)}addEventCallback(t,i){return this.eventHandler.addEventCallback(t,i)}removeEventCallback(t){this.eventHandler.removeEventCallback(t)}addPerformanceCallback(t){return QT(),this.performanceClient.addPerformanceCallback(t)}removePerformanceCallback(t){return this.performanceClient.removePerformanceCallback(t)}enableAccountStorageEvents(){if(this.config.cache.cacheLocation!==Tt.LocalStorage){this.logger.info("Account storage events are only available when cacheLocation is set to localStorage");return}this.eventHandler.subscribeCrossTab()}disableAccountStorageEvents(){if(this.config.cache.cacheLocation!==Tt.LocalStorage){this.logger.info("Account storage events are only available when cacheLocation is set to localStorage");return}this.eventHandler.unsubscribeCrossTab()}getTokenCache(){return this.tokenCache}getLogger(){return this.logger}setLogger(t){this.logger=t}initializeWrapperLibrary(t,i){this.browserStorage.setWrapperMetadata(t,i)}setNavigationClient(t){this.navigationClient=t}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}isBrowserEnv(){return this.isBrowserEnvironment}getRequestCorrelationId(t){return t?.correlationId?t.correlationId:this.isBrowserEnvironment?kn():W.EMPTY_STRING}async loginRedirect(t){const i=this.getRequestCorrelationId(t);return this.logger.verbose("loginRedirect called",i),this.acquireTokenRedirect({correlationId:i,...t||sC})}loginPopup(t){const i=this.getRequestCorrelationId(t);return this.logger.verbose("loginPopup called",i),this.acquireTokenPopup({correlationId:i,...t||sC})}async acquireTokenSilent(t){const i=this.getRequestCorrelationId(t),r=this.performanceClient.startMeasurement(w.AcquireTokenSilent,i);r.add({cacheLookupPolicy:t.cacheLookupPolicy,scenarioId:t.scenarioId}),Ic(this.initialized,r,t.account),this.logger.verbose("acquireTokenSilent called",i);const s=t.account||this.getActiveAccount();if(!s)throw he(CT);return this.acquireTokenSilentDeduped(t,s,i).then(l=>(r.end({success:!0,fromCache:l.fromCache,accessTokenSize:l.accessToken.length,idTokenSize:l.idToken.length},void 0,l.account),{...l,state:t.state,correlationId:i})).catch(l=>{throw l instanceof Ye&&l.setCorrelationId(i),r.end({success:!1},l,s),l})}async acquireTokenSilentDeduped(t,i,r){const s=pl(this.config.auth.clientId,{...t,authority:t.authority||this.config.auth.authority},i.homeAccountId),l=JSON.stringify(s),h=this.activeSilentTokenRequests.get(l);if(typeof h>"u"){this.logger.verbose("acquireTokenSilent called for the first time, storing active request",r),this.performanceClient.addFields({deduped:!1},r);const f=Q(this.acquireTokenSilentAsync.bind(this),w.AcquireTokenSilentAsync,this.logger,this.performanceClient,r)({...t,correlationId:r},i);return this.activeSilentTokenRequests.set(l,f),f.finally(()=>{this.activeSilentTokenRequests.delete(l)})}else return this.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",r),this.performanceClient.addFields({deduped:!0},r),h}async acquireTokenSilentAsync(t,i){const r=()=>this.trackPageVisibility(t.correlationId);this.performanceClient.addQueueMeasurement(w.AcquireTokenSilentAsync,t.correlationId),this.eventHandler.emitEvent(ye.ACQUIRE_TOKEN_START,Se.Silent,t),t.correlationId&&this.performanceClient.incrementFields({visibilityChangeCount:0},t.correlationId),document.addEventListener("visibilitychange",r);const s=await Q(JO,w.InitializeSilentRequest,this.logger,this.performanceClient,t.correlationId)(t,i,this.config,this.performanceClient,this.logger),l=t.cacheLookupPolicy||xt.Default;return this.acquireTokenSilentNoIframe(s,l).catch(async f=>{if(Ok(f,l))if(this.activeIframeRequest)if(l!==xt.Skip){const[p,S]=this.activeIframeRequest;this.logger.verbose(`Iframe request is already in progress, awaiting resolution for request with correlationId: ${S}`,s.correlationId);const T=this.performanceClient.startMeasurement(w.AwaitConcurrentIframe,s.correlationId);T.add({awaitIframeCorrelationId:S});const A=await p;if(T.end({success:A}),A)return this.logger.verbose(`Parallel iframe request with correlationId: ${S} succeeded. Retrying cache and/or RT redemption`,s.correlationId),this.acquireTokenSilentNoIframe(s,l);throw this.logger.info(`Iframe request with correlationId: ${S} failed. Interaction is required.`),f}else return this.logger.warning("Another iframe request is currently in progress and CacheLookupPolicy is set to Skip. This may result in degraded performance and/or reliability for both calls. Please consider changing the CacheLookupPolicy to take advantage of request queuing and token cache.",s.correlationId),Q(this.acquireTokenBySilentIframe.bind(this),w.AcquireTokenBySilentIframe,this.logger,this.performanceClient,s.correlationId)(s);else{let p;return this.activeIframeRequest=[new Promise(S=>{p=S}),s.correlationId],this.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",s.correlationId),Q(this.acquireTokenBySilentIframe.bind(this),w.AcquireTokenBySilentIframe,this.logger,this.performanceClient,s.correlationId)(s).then(S=>(p(!0),S)).catch(S=>{throw p(!1),S}).finally(()=>{this.activeIframeRequest=void 0})}else throw f}).then(f=>(this.eventHandler.emitEvent(ye.ACQUIRE_TOKEN_SUCCESS,Se.Silent,f),this.performanceClient.addFields({fromCache:f.fromCache},t.correlationId),f)).catch(f=>{throw this.eventHandler.emitEvent(ye.ACQUIRE_TOKEN_FAILURE,Se.Silent,null,f),f}).finally(()=>{document.removeEventListener("visibilitychange",r)})}async acquireTokenSilentNoIframe(t,i){return Wa(this.config,this.logger,this.platformAuthProvider,t.authenticationScheme)&&t.account.nativeAccountId?(this.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform"),this.performanceClient.addFields({isPlatformBrokerRequest:!0},t.correlationId),this.acquireTokenNative(t,Le.acquireTokenSilent_silentFlow,t.account.nativeAccountId,i).catch(async r=>{throw this.performanceClient.addFields({brokerErrorName:r.name,brokerErrorCode:r.errorCode},t.correlationId),r instanceof Pn&&Ar(r)?(this.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),this.platformAuthProvider=void 0,re(Gi)):r})):(this.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow"),i===xt.AccessToken&&this.logger.verbose("acquireTokenSilent - cache lookup policy set to AccessToken, attempting to acquire token from local cache"),Q(this.acquireTokenFromCache.bind(this),w.AcquireTokenFromCache,this.logger,this.performanceClient,t.correlationId)(t,i).catch(r=>{if(i===xt.AccessToken)throw r;return this.eventHandler.emitEvent(ye.ACQUIRE_TOKEN_NETWORK_START,Se.Silent,t),Q(this.acquireTokenByRefreshToken.bind(this),w.AcquireTokenByRefreshToken,this.logger,this.performanceClient,t.correlationId)(t,i)}))}async preGeneratePkceCodes(t){return this.logger.verbose("Generating new PKCE codes"),this.pkceCode=await Q(bo,w.GeneratePkceCodes,this.logger,this.performanceClient,t)(this.performanceClient,this.logger,t),Promise.resolve()}getPreGeneratedPkceCodes(t){this.logger.verbose("Attempting to pick up pre-generated PKCE codes");const i=this.pkceCode?{...this.pkceCode}:void 0;return this.pkceCode=void 0,this.logger.verbose(`${i?"Found":"Did not find"} pre-generated PKCE codes`),this.performanceClient.addFields({usePreGeneratedPkce:!!i},t),i}logMultipleInstances(t){const i=this.config.auth.clientId;if(!window)return;window.msal=window.msal||{},window.msal.clientIds=window.msal.clientIds||[],window.msal.clientIds.length>0&&this.logger.verbose("There is already an instance of MSAL.js in the window."),window.msal.clientIds.push(i),Ik(i,t,this.logger)}}function Ok(c,t){const i=!(c instanceof On&&c.subError!==vl),r=c.errorCode===Qt.INVALID_GRANT_ERROR||c.errorCode===Gi,s=i&&r||c.errorCode===Jc||c.errorCode===bf,l=oO.includes(t);return s&&l}async function kk(c,t){const i=new _o(c);return await i.initialize(),bl.createController(i,t)}class ng{static async createPublicClientApplication(t){const i=await kk(t);return new ng(t,i)}constructor(t,i){this.isBroker=!1,this.controller=i||new bl(new _o(t))}async initialize(t){return this.controller.initialize(t,this.isBroker)}async acquireTokenPopup(t){return this.controller.acquireTokenPopup(t)}acquireTokenRedirect(t){return this.controller.acquireTokenRedirect(t)}acquireTokenSilent(t){return this.controller.acquireTokenSilent(t)}acquireTokenByCode(t){return this.controller.acquireTokenByCode(t)}addEventCallback(t,i){return this.controller.addEventCallback(t,i)}removeEventCallback(t){return this.controller.removeEventCallback(t)}addPerformanceCallback(t){return this.controller.addPerformanceCallback(t)}removePerformanceCallback(t){return this.controller.removePerformanceCallback(t)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(t){return this.controller.getAccount(t)}getAccountByHomeId(t){return this.controller.getAccountByHomeId(t)}getAccountByLocalId(t){return this.controller.getAccountByLocalId(t)}getAccountByUsername(t){return this.controller.getAccountByUsername(t)}getAllAccounts(t){return this.controller.getAllAccounts(t)}handleRedirectPromise(t){return this.controller.handleRedirectPromise(t)}loginPopup(t){return this.controller.loginPopup(t)}loginRedirect(t){return this.controller.loginRedirect(t)}logout(t){return this.controller.logout(t)}logoutRedirect(t){return this.controller.logoutRedirect(t)}logoutPopup(t){return this.controller.logoutPopup(t)}ssoSilent(t){return this.controller.ssoSilent(t)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(t){this.controller.setLogger(t)}setActiveAccount(t){this.controller.setActiveAccount(t)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(t,i){return this.controller.initializeWrapperLibrary(t,i)}setNavigationClient(t){this.controller.setNavigationClient(t)}getConfiguration(){return this.controller.getConfiguration()}async hydrateCache(t,i){return this.controller.hydrateCache(t,i)}clearCache(t){return this.controller.clearCache(t)}}const Mk={auth:{clientId:"5fb55a5e-39ac-48a6-8c92-140ddde5136e",authority:"https://login.microsoftonline.com/2f4006c5-c4ea-4165-846f-914b5b75685b",redirectUri:"http://localhost:5173/knowledge",postLogoutRedirectUri:"/"},cache:{cacheLocation:"localStorage",storeAuthStateInCookie:!1},system:{loggerOptions:{loggerCallback:(c,t,i)=>{if(!i)switch(c){case Qe.Error:console.error(t);return;case Qe.Info:console.info(t);return;case Qe.Verbose:console.debug(t);return;case Qe.Warning:console.warn(t);return;default:return}}}}},Nk=(()=>{const c="https://knowledgeapiwe-bycdh5a9bze6c6dw.westeurope-01.azurewebsites.net/api";return{KnowledgeAPI:{endPoints:{Category:{Row:`${c}/CategoryRow`,Category:`${c}/Category`,Question:`${c}/Question`,QuestionAnswer:`${c}/QuestionAnswer`},endpointQuestionChat:`${c}/QuestionChat`,Group:{Row:`${c}/GroupRow`,Group:`${c}/Group`,Answer:`${c}/Answer`},History:{endpointHistory:`${c}/History`,endpointHistoryFilter:`${c}/HistoryFilter`},Workspace:{endpointWorkspace:`${c}/Workspace`}}},scopes:{read:["api://a27f5cf6-8359-411b-a430-c4bd8aa5e6af/ToDoList.Read"],write:["api://a27f5cf6-8359-411b-a430-c4bd8aa5e6af/ToDoList.ReadWrite"]}}})();class EC{constructor(t){const{topId:i,id:r,answerTitle:s,answerLink:l}=t;this.chatBotAnswer={topId:i,id:r,answerTitle:s??"",answerLink:l??"",created:t.created,modified:t.modified}}chatBotAnswer}const _n=Nk.KnowledgeAPI.endPoints,yo={endpointCategoryRow:_n.Category.Row,endpointCategory:_n.Category.Category,endpointQuestion:_n.Category.Question,endpointQuestionAnswer:_n.Category.QuestionAnswer,endpointQuestionChat:_n.endpointQuestionChat,endpointGroupRow:_n.Group.Row,endpointGroup:_n.Group.Group,endpointAnswer:_n.Group.Answer,endpointHistory:_n.History.endpointHistory,endpointHistoryFilter:_n.History.endpointHistoryFilter,endpointWorkspace:_n.Workspace.endpointWorkspace},oA=c=>{const[t]=B.useState({nickName:"Demo",name:"DEMO"}),[i]=B.useState(c),[r,s]=B.useState(null),[l,h]=B.useState([]),[f,g]=B.useState(null),[p,S]=B.useState(null),[T,A]=B.useState(!1),[K,ee]=B.useState(-1),ie=async(te,U,O=null)=>{try{let x=null;const j=new Headers;O&&j.append("Content-Type","application/json");const Y={method:te,headers:j,body:O?JSON.stringify(O):null};if(x=await fetch(U,Y),x.ok){if(x.status===200||x.status===201){let ne=null;try{ne=await x.json()}catch(fe){console.log(fe)}return ne}}else{const ne=new Error;console.log(ne)}}catch(x){console.log("-------------->>> execute",te,U,x)}return JSON.parse("")},le=B.useCallback(async()=>new Promise(te=>{const U=new Map;try{console.time();const O=`${yo.endpointCategoryRow}/${i}`;ie("GET",O,null).then(x=>{console.timeEnd(),x.forEach(Y=>U.set(Y.Id,new Nw(Y).cat)),U.forEach(Y=>{const{id:ne,parentId:fe}=Y;let ve=ne,D=fe;for(;D;){const X=U.get(D);ve=X.id+" / "+ve,D=X.parentId}Y.titlesUpTheTree=ve,U.set(ne,Y)}),s(U),h(Array.from(U.values())),te(U)})}catch(O){console.log(O)}}),[i]),se=async te=>new Promise(U=>{try{const O=new Mc(te).toQuery(i),x=`${yo.endpointQuestion}?${O}`;console.time(),ie("GET",x).then(j=>{const Y=j;console.timeEnd();const{questionDto:ne,msg:fe}=Y;if(ne){const ve=new Uw(ne).question;let D=null;if(ve){const{assignedAnswers:X}=ve;if(X&&X.length>0){const M=X[0],_=new EC(M).chatBotAnswer,N=X.length>1;D={question:ve,firstAnswer:_,hasMoreAnswers:N},A(N),ee(0)}}g(D),S(ve),U({...D,msg:""})}else g(null),S(null),ee(-1),U({question:null,msg:fe})})}catch(O){console.log(O),U({question:null,firstAnswer:null,msg:"Problemos"})}}),ce=async(te,U)=>new Promise(O=>{try{console.time();const x=encodeURIComponent(te),j=`${yo.endpointQuestion}/${i}/${x}/${U}/null`;ie("GET",j).then(Y=>{const ne=Y,{questionRowDtos:fe,msg:ve}=ne;if(console.log(ve),console.log("questionRowDtos:",{dtos:ne},yo.endpointCategoryRow),console.timeEnd(),fe){const D=fe.map(X=>{const{TopId:M,ParentId:_,Id:N,Title:v,NumOfAssignedAnswers:C,Included:b}=X;return{topId:M,parentId:_??"",id:N,title:v,categoryTitle:"",numOfAssignedAnswers:C??0,included:b??!1}});O(D)}else console.log("no rows in search")})}catch(x){console.log(x)}}),ue=B.useCallback(async()=>{const{assignedAnswers:te}=f.question,U=te.length,O=K+1;return K+1<U?(ee(O),{nextChatBotAnswer:new EC(te[O]).chatBotAnswer,hasMoreAnswers:O+1<U}):{nextChatBotAnswer:null,hasMoreAnswers:!1}},[f,K]),G=B.useCallback(async te=>{const{assignedAnswers:U}=p,O=U[K],x={questionKey:new Mc(p).questionKey,assignedAnswerKey:{topId:O.topId,id:O.id},userAction:te,created:{nickName:t.nickName,time:new Date}};try{const j=new kw(x,i).historyDto;console.log("historyDto",{historyDto:j});const Y=`${yo.endpointHistory}`;console.time(),await ie("POST",Y,j).then(ne=>{const fe=ne,{questionDto:ve,msg:D}=fe;console.timeEnd(),console.log(D),ve&&console.log("History successfully created",{questionDto:ve})})}catch(j){console.log(j)}},[i,t,p,K]),ae=B.useCallback(async te=>{try{if(f===null)return;const{question:U}=f,O={questionKey:new Mc(U).questionKey,filter:te,created:{time:new Date,nickName:t.nickName}},x=new Mw(O,i).historyFilterDto,j=`${yo.endpointHistoryFilter}`;console.time(),await ie("POST",j,x).then(Y=>{const ne=Y,{questionDto:fe,msg:ve}=ne;console.log(ve),console.timeEnd(),fe&&console.log("History Filter successfully created",{questionDto:fe})})}catch(U){console.log(U)}},[i,f,t]);return[async te=>new Promise(U=>{try{const{topId:O,id:x}=te,j=`${yo.endpointQuestionChat}/${i}/${O}/${x}/0/20`;console.time(),ie("GET",j).then(Y=>{const ne=Y;console.timeEnd();const{rows:fe}=ne;U(ne)})}catch(O){console.log(O),U({rows:[],HasMoreQuestions:!1})}}),r,le,l,se,T,ue,ce,G,ae]},Dk=B.forwardRef(({allCatRows:c},t)=>{const[i]=oA("DEMO"),[r,s]=B.useState([]),l=async S=>{const{topId:T,id:A}=S,ee=await i({topId:T,id:A,parentId:null}),{rows:ie}=ee;console.log(ee);let le="<table id='questionsTable' style='font-size: 11px;'><thead><tr>             <th>Title</th>            <th>#Ans</th>            <th>Who</th>            <th>When</th>            </tr></thead><tbody>";for(let ce=0;ce<ie.length;ce++){const ue=ie[ce],G=Rw(new Date(ue.When));le+=`<tr>                <td width='30%'>${ue.Title}</td>                <td>${ue.AssignedAnswers}</td>                <td>${ue.Who}</td>                <td>${G}</td>                </tr>`}le+="</tbody></table>";const se=document.getElementById("divQuestions");se&&(se.innerHTML=le)},h=({row:S})=>{const{id:T,hasSubCategories:A,numOfQuestions:K,title:ee}=S;return J.jsxs(Cc.Item,{eventKey:T,children:[J.jsxs(Cc.Header,{className:`${A?"":"hide-icon"}`,children:[S.link?J.jsx("a",{href:"#",className:"cat-link",onClick:()=>l(S),children:ee}):J.jsx("span",{className:"cat-title",children:ee}),K>0&&J.jsxs("i",{className:"ms-1 fw-light",children:[K,"Q"]})]}),J.jsx(Cc.Body,{children:S.hasSubCategories&&J.jsx(f,{rows:S.catRows})})]})},f=({rows:S})=>J.jsx(J.Fragment,{children:S.map(T=>J.jsx(h,{row:T},T.id))}),g=async(S,T)=>{const A=S[0];c.find(ee=>A===ee.id)&&(T.stopPropagation(),T.preventDefault())},p=async S=>{const{id:T}=S;return c.forEach(async A=>{A.id!==T&&A.parentId===T&&(await p(A),S.catRows.push(A))}),!0};return B.useImperativeHandle(t,()=>({resetNavigator:()=>{s([]),c.forEach(async S=>{S.catRows=[],S.parentId===null&&(await p(S),s(T=>[...T,S]))})}}),[c]),J.jsx(Cc,{defaultActiveKey:"",alwaysOpen:!0,onSelect:g,children:J.jsx(f,{rows:r})})}),Uk=({show:c,onHide:t})=>{const[r,s]=B.useState("rem"),l=B.useRef(null),[h,f,g,p,S,T,A,K,ee,ie]=oA("DEMO");console.log(typeof h),B.useEffect(()=>{(async()=>f||await g())()},[f,g]);const[le,se]=B.useState(1),[ce,ue]=B.useState(!1),[G,ae]=B.useState(null),[$]=B.useState(!0),[te,U]=B.useState(!0),[O,x]=B.useState([]),j=async()=>{const _=performance.now();await l?.current?.resetNavigator();const v=performance.now()-_;console.log(`Execution time: ${v} milliseconds`)},Y=B.useRef(null),ne=async(_,N)=>{if(await ie(N),G){const I={type:"ANSWER",isDisabled:!0,txt:G.answerTitle,link:G.answerLink};x(z=>[...z,I])}const v=await S(_),{question:C,firstAnswer:b}=v;if(C){if(C.numOfRelatedFilters>0&&s(C.relatedFilters[0].filter),C){const I={type:"QUESTION",isDisabled:!0,txt:C.title,link:null};x(z=>[...z,I])}se(I=>I+1),U(!1),ue(!0),ae(b)}},fe=async()=>{const _={type:"ANSWER",isDisabled:!0,txt:G?G.answerTitle:"no answer title",link:G?G.answerLink:"no answer link",hasMoreAnswers:!0};x(v=>[...v,_]),ee("Fixed"),ae(G),ue(!1)},ve=async()=>{const _={type:"ANSWER",isDisabled:!0,txt:G?G.answerTitle:"no answer",link:G?G.answerLink:"no link",hasMoreAnswers:!0};x(C=>[...C,_]);const N=await A(),{nextChatBotAnswer:v}=N;G&&ee(v?"NotFixed":"NotClicked"),console.log("----->>>>",{nextChatBotAnswer:v}),ae(v)},D=_=>{const{txt:N}=_;return J.jsx("div",{id:le.toString(),className:"d-flex flex-row mx-0 justify-content-start align-items-center",children:J.jsxs("div",{className:"d-flex flex-row mx-0 justify-content-start align-items-center",children:[J.jsx("img",{width:"22",height:"18",src:Lw,alt:"Question",className:"ms-1"}),J.jsx("div",{className:"p-1 bg-warning text-light flex-wrap text-wrap border rounded-1",children:N})]})})},X=_=>{console.log("--------------------------------------AnswerComponent",_);const{isDisabled:N,txt:v,link:C}=_;return J.jsx("div",{id:G?.id,className:"dark mt-1 mx-1 border border-0 rounded-1",children:J.jsxs("div",{className:"d-flex flex-row mx-0 justify-content-start align-items-center",children:[J.jsxs("div",{className:"d-flex flex-row mx-0 justify-content-start align-items-center",children:[J.jsx("img",{width:"22",height:"18",src:zw,alt:"Answer",className:"ms-1"}),C?J.jsx("div",{className:"p-1 bg-info text-light flex-wrap text-wrap border rounded-1 ",children:J.jsx("a",{href:C,rel:"noopener noreferrer",target:"_blank",className:"text-light text-decoration-underline",children:v})}):J.jsx("div",{className:"p-1 bg-info text-light flex-wrap text-wrap border rounded-1",children:v})]}),!N&&G&&J.jsxs("div",{children:[J.jsx(qa,{size:"sm",type:"button",onClick:fe,disabled:!G,className:"align-middle ms-1 px-1  py-0",variant:"success",children:"Fixed"}),J.jsx(qa,{size:"sm",type:"button",onClick:ve,disabled:!G,className:"align-middle ms-1 border border-1 rounded-1 px-1 py-0",variant:"danger",children:"Not fixed"})]})]})})},M=_=>{const{isDisabled:N,txt:v}=_;return J.jsxs("div",{className:"dark",children:[J.jsx("label",{className:"text-warning",children:"Please enter the Question"}),J.jsx("div",{className:"text-start",children:J.jsxs("div",{className:"questions",children:[N&&J.jsx("div",{children:v}),!N&&J.jsx(Hw,{tekst:v,onSelectQuestion:ne,allCats:f,searchQuestions:K})]})})]})};return console.log("=====================>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> rendering ChatBotDlg"),f?J.jsxs("div",{className:"pe-6 overflow-auto chat-bot-dlg",children:[J.jsx("style",{children:`
                .accordion-body {
                    padding: 0.0rem 0.5rem;
                    padding-right: 0;
                    font-size: 0.6rem;
                }

                .accordion-button  {
                    padding: 0rem 0.2rem !important;
                    padding-right: 0 !important;
                    border: 0; //px solid inset;
                    //border-radius: 3px;
                    //text-align: left;
                    font-size: 1rem;
                }
                    
                ul {
                    list-style-type: none;
                }

                .cat-link {
                    // text-decoration:  none;
                    color: inherit;
                }

                .cat-link.btn {
                    padding: 0;
                }

                .cat-title {
                    // text-decoration:  none;
                    color: inherit;
                }

                .accordion-header.hide-icon > button.accordion-button::after {
                    display: none;
                    padding: 0rem 0.2rem !important;
                    padding-right: 0 !important;
                }
            }
            `}),J.jsxs(Sc,{show:c,onHide:t,placement:"end",scroll:!0,backdrop:!0,onEntering:j,children:[" ",J.jsx(Sc.Header,{closeButton:!0,children:J.jsx(Sc.Title,{className:"fs-6",children:"I am your Buddy"})}),J.jsx(Sc.Body,{className:"p-0 border border-1 rounded-3",children:J.jsxs(zC,{id:"container",fluid:!0,className:"text-primary",children:[" ",J.jsx(Eh,{className:"m-0",children:J.jsx(Th,{children:J.jsx(Dk,{allCatRows:p,ref:l})})}),J.jsx(Eh,{className:"m-0",children:J.jsxs(Th,{className:"border border-0 border-primary mx-1 text-white p-0",children:[J.jsx("div",{className:"history",children:O.map(_=>{switch(_.type){case"AUTO_SUGGEST":return J.jsx(M,{..._});case"QUESTION":return J.jsx(D,{..._});case"ANSWER":return J.jsx(X,{..._});default:return J.jsx("div",{children:"unknown"})}})},"history"),ce&&J.jsx("div",{children:J.jsx(X,{type:"ANSWER",isDisabled:!1,txt:G?G.answerTitle:"no answers",hasMoreAnswers:T,link:G?G.answerLink:""})},"answer"),$&&!te&&J.jsx(qa,{variant:"secondary",size:"sm",type:"button",onClick:()=>{se(le+1),U(!0)},className:"m-1 border border-1 rounded-1 py-0",children:"New Question"},"newQuestion"),te&&J.jsx("div",{className:"pb-35 questions",children:J.jsx(M,{type:"AUTO_SUGGEST",isDisabled:!1,txt:r,link:null})}),J.jsx("div",{ref:Y,children:"dno dna"})]})})]})})]})]}):"loading ..."};function xk(){B.useEffect(()=>{},[]);const[c,t]=B.useState(!1),i=()=>t(!1),r=()=>t(!0);return J.jsxs(J.Fragment,{children:[J.jsx("div",{className:"card p-1",children:J.jsxs(qa,{variant:"primary",onClick:r,className:"my-1",children:[J.jsx("img",{width:"64",height:"64",src:x_,alt:"Chat",className:"rounded mx-auto d-block"}),"I am your buddy."]})}),J.jsx(Uk,{show:c,onHide:i})]})}const Pk=new ng(Mk);await Pk.initialize();w_.createRoot(document.getElementById("root")).render(J.jsx(B.StrictMode,{children:J.jsx(xk,{})}));
//# sourceMappingURL=index.js.map
